{"version":3,"mappings":"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ACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,CACH,EAEaC,GAAQ,CACjB,CACE,KAAM,OACN,KAAM,WACN,KAAM,6BACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,eACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,eACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,eACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,eACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,EACD,CACE,KAAM,OACN,KAAM,cACN,KAAM,kBACP,CACF,ECzKGC,GAAgB,mCAChBC,GAAmB,2CACnBC,GAAW,+BACjB,IAAIC,GACAC,GACJ,MAAMC,GAAiB,OAEjBC,GAAqB,CACzB,QAAS,CACP,eAAgB,mBAChB,cAAe,UAAYL,EAC7B,CACF,EAEgB,SAAAM,GAAYnU,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","names":["createHtml","htmlString","app","div","equalFn","a","b","$PROXY","$TRACK","signalOptions","runEffects","runQueue","STALE","PENDING","UNOWNED","NO_INIT","Owner","Transition","Listener","Updates","Effects","ExecCount","createRoot","fn","detachedOwner","listener","owner","unowned","current","root","updateFn","untrack","cleanNode","runUpdates","createSignal","value","options","s","setter","writeSignal","readSignal","createComputed","c","createComputation","updateComputation","createRenderEffect","createEffect","runUserEffects","SuspenseContext","useContext","createMemo","isPromise","v","createResource","pSource","pFetcher","pOptions","source","fetcher","pr","initP","scheduled","resolved","dynamic","contexts","setValue","error","setError","track","trigger","state","setState","loadEnd","p","key","completeLoad","err","read","load","refetching","lookup","e","castError","createSelector","subs","node","val","l","onCleanup","batch","on","deps","isArray","prevInput","defer","prevValue","input","i","result","onMount","getOwner","runWithOwner","o","prev","prevListener","handleError","startTransition","createContext","defaultValue","id","createProvider","context","children","memo","resolveChildren","updates","lookUpstream","sSlot","isComp","TransitionRunning","markDownstream","time","runComputation","nextValue","init","pure","runTop","ancestors","wait","res","completeUpdates","queue","userLength","ignore","index","obs","n","results","props","FALLBACK","dispose","d","mapArray","list","mapFn","items","mapped","disposers","len","indexes","newItems","j","newLen","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","start","end","newEnd","item","disposer","mapper","set","createComponent","Comp","trueFn","propTraps","_","property","receiver","resolveSource","resolveSources","length","mergeProps","sources","proxy","keys","target","sourcesMap","defined","sourceKeys","desc","splitProps","blocked","k","otherObject","objects","propName","isDefaultDesc","objectIndex","narrowedError","name","For","fallback","Show","keyed","condition","child","DEV","activeElement","setActiveElement","createWebGLContext","canvas","config","assertTruthy","message","mergeColorProgress","rgba1","rgba2","r1","g1","b1","a1","r2","g2","b2","a2","r","g","mergeColorAlpha","rgba","alpha","mergeColorAlphaPremultiplied","flipEndianess","newAlpha","hasOwn","obj","prop","TextureUsageTracker","releaseCallback","__publicField","ManualCountTextureUsageTracker","_a","_b","now","thresholdMs","textureRefInfo","texture","textureId","FinalizationRegistryTextureUsageTracker","RendererMain","EventEmitter","settings","driver","resolvedSettings","appWidth","appHeight","deviceLogicalPixelRatio","devicePhysicalPixelRatio","useFinalizationRegistryTracker","deviceLogicalWidth","deviceLogicalHeight","targetEl","fps","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","color","colorTl","colorTr","colorBl","colorBr","_o","_p","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_A","_B","_C","_D","_F","_E","_H","_G","_I","_K","_J","_M","_L","_N","_P","_O","_R","_Q","_S","textureType","shaderType","isPowerOfTwo","getTimingBezier","xc","xb","xa","yc","yb","ya","t","cbx","cbxd","dx","it","minT","maxT","getTimingFunction","str","parts","args","y","CoreAnimation","startValue","endValue","dt","duration","loop","easing","stopMethod","propValue","easingProgressValue","easingColorValue","CoreAnimationController","manager","animation","promise","resolve","getNormalizedRgbaComponents","getNormalizedAlphaComponent","getRgbaString","createBound","x1","y1","x2","y2","out","intersectBound","intersection","intersectRect","x","width","height","compareRect","isBoundPositive","bound","m0","m1","m2","m3","m4","m5","m6","m7","m8","Matrix3d","entries","tempMatrix","e0","e1","e2","e3","e4","e5","e6","e7","e8","sx","sy","angle","cos","sin","src","dst","transpose","other","UpdateType","CoreNode","stage","dimensions","txManager","shManager","shader","type","parent","pivotTranslateX","pivotTranslateY","mountTranslateX","mountTranslateY","delta","parentClippingRect","childUpdateType","gt","isRotated","clippingRect","z","zIndex","renderer","textureOptions","shaderProps","premultipliedColorTl","premultipliedColorTr","premultipliedColorBl","premultipliedColorBr","worldAlpha","newParent","oldParent","nextId","getNewId","MainOnlyNode","rendererMain","coreNode","payload","imageUrl","startLoop","runLoop","getTimeStamp","CoreContextTexture","textureSource","CoreRenderer","CoreRenderOp","CoreShader","createShader","gl","createProgram","vertexShader","fragmentShader","program","isWebGl2","WebGlCoreShader","webGl2","requiredExtensions","glVersion","extensionName","shaderSources","textureUnits","vertexSource","fragmentSource","vao","attributeName","location","buffer","uniform","attribute","loc","propsA","propsB","renderOp","resolvedBuffer","resolvedInfo","textures","WebGlCoreRenderOp","buffers","bufferIdx","maxTextures","existingIdx","newIdx","quadIdx","pixelRatio","canvasHeight","clipX","clipWidth","clipHeight","clipY","getWebGlParameters","params","getWebGlExtensions","extensions","createIndexBuffer","size","maxQuads","indices","TRANSPARENT_TEXTURE_DATA","WebGlCoreCtxTexture","textureData","data","nativeTexture","Texture","loadedArgs","failedArgs","_ColorTexture","pixelData32","pixelData8","resolvedProps","ColorTexture","_SubTexture","parentTx","SubTexture","WebGlCoreCtxSubTexture","DefaultShader","DefaultShaderBatched","samplers","idx","ShaderEffect","ref","uniformInfo","passParameters","declaredUniforms","uniforms","u","unif","uniType","uniformName","define","uni","_DynamicShader","effectContructors","effects","eff","effect","fxClass","uniInfo","fxProp","propInfo","effectNameCount","methods","declareUniforms","uFx","baseClass","nr","effectMethods","fx","fxProps","remap","m","cm","fxMethod","onShaderMask","onColorize","onEffectMask","reg","methodParameters","pm","sharedMethods","currentMask","drawEffects","currentClass","next","effectMethod","methodCollection","increment","DynamicShader","RoundedRectangle","IDENTITY_MATRIX_3x3","_SdfShader","components","SdfShader","RadiusEffect","BorderEffect","LinearGradientEffect","colors","stops","calc","rgbas","acc","tmp","amount","GrayscaleEffect","BorderRightEffect","BorderTopEffect","BorderBottomEffect","BorderLeftEffect","GlitchEffect","FadeOutEffect","RadialGradientEffect","RadialProgressEffect","CoreShaderManager","shType","shClass","effectType","effectClass","ShaderClass","cacheKey","BufferCollection","WORDS_PER_QUAD","WebGlCoreRenderer","clearColor","bufferMemory","quadBuffer","stride","fQuadBuffer","uiQuadBuffer","tx","ty","ta","tb","tc","td","curRenderOp","targetDims","targetShader","flipX","flipY","texCoordX1","texCoordY1","texCoordX2","texCoordY2","tw","th","parentW","parentH","ctxTexture","textureIdx","rightCornerX","rightCornerY","recursive","renderable","surface","arr","AnimationManager","_ImageTexture","premultiplyAlpha","blob","ImageTexture","_NoiseTexture","NoiseTexture","CoreTextureManager","textureClass","TextureClass","descId","textureDescId","textureIdCache","textureRefCountMap","refCountObj","SpecialCodepoints","FontShaper","SdfFontShaper","kernings","kerning","second","firsts","codepoints","codepointResult","lastGlyphId","codepoint","glyph","char","SdfTrFontFace","TrFontFace","fontFamily","descriptors","atlasUrl","atlasDataUrl","response","glyphId","TrFontManager","textRenderers","font","trId","tr","familyMapsByPriority","closeFaces","fontFamiles","fontFaces","fontFacesCopy","fontFace","trPropSetterDefaults","TextRenderer","propSetters","status","FLOATS_PER_GLYPH","getStartConditions","fontSize","offsetY","fontSizeRatio","sdfLineHeight","renderWindow","lineCache","textH","startLineIndex","startX","startY","PeekableIterator","iterator","indexBase","nextResult","getUnicodeCodepoints","text","codePoint","measureText","shaperProps","shaper","glyphs","layoutText","curLineIndex","textAlign","letterSpacing","vertexBuffer","contain","trFontFace","forceFullLayoutCalc","scrollable","vertexLineHeight","vertexW","vertexLSpacing","startingLineCacheEntry","startingCodepointIndex","startingMaxX","startingMaxY","maxX","maxY","curX","curY","bufferOffset","lastWord","glyphResult","curLineBufferStart","bufferLineInfos","truncateSeq","vertexTruncateHeight","truncateSeqVertexWidth","moreLines","nextLineWillFit","lineVertexW","xStartLastWordBoundary","charEndX","quadX","quadY","lineIsBelowWindowTop","lineIsAboveWindowBottom","atlasEntry","uvWidth","uvHeight","vertexTextW","line","lineWidth","xOffset","makeRenderWindow","scrollY","lineHeight","numExtraLines","visibleWindow","bufferMargin","tmpElementBounds","SdfTextRenderer","familyName","faceSet","debugData","msg","neededLength","elementBounds","visibleWindowHeight","maxLinesPerCanvasPage","out2","transform","debug","textW","distanceRange","bufferUploaded","webGlBuffers","webGlBuffer","MAX_TEXTURE_DIMENSION","LightningTextTextureRenderer","ff","ffs","fontSetting","renderInfo","precision","paddingLeft","paddingRight","w","h","wordWrapWidth","cutSx","cutEx","cutSy","cutEy","textIndent","innerWidth","suffix","linesInfo","lines","usedLines","otherLines","al","maxLineWidth","lineWidths","baselineOffset","linesOverride","linePositionX","linePositionY","drawLines","hlHeight","offset","hlPaddingLeft","hlPaddingRight","drawLine","prevShadowSettings","textSplit","word","suffixWidth","wordLen","wordWidth","cutoffIndex","truncWordWidth","indent","allLines","realNewlines","resultLines","spaceLeft","words","wordWidthWithSpace","space","resolvedGlobal","globalFontSet","getFontCssString","fontStyle","fontWeight","fontStretch","CanvasTextRenderer","WebTrFontFace","cssString","canvasPages","renderWindowScreenX1","renderWindowScreenY1","renderWindowScreenX2","renderWindowScreenY2","pageHeight","page1Block","page1LineStart","page0LineStart","page2LineStart","scrollYNearestPage","pageInfo","elementRect","pageSize","combinedAlpha","quadColor","Stage","rootId","debugInfo","rootNode","animationManager","renderRequested","fpsUpdateInterval","trProps","textRendererOverride","rendererId","overrideFallback","possibleRenderer","resolvedTextRenderer","CoreTextNode","setWidth","setHeight","calcWidth","calcHeight","textRendererState","prevState","eventName","MainOnlyTextNode","classExtendsCoreExtension","Class","CoreExtension","loadCoreExtension","coreExtensionModule","module","__vitePreload","ExtensionClass","coreExtension","MainCoreDriver","rendererSettings","startLightningRenderer","Children","beforeNode","nodeIndexToRemove","log","isFunc","isString","isNumber","isInteger","keyExists","getAnimatableValue","States","callback","initialState","__super","_key","stateIndexToRemove","calculateFlex","numChildren","isRow","dimension","crossDimension","marginOne","marginTwo","crossProp","containerSize","containerCrossSize","gap","justify","align","itemSize","crossAlignChild","toPad","defaultAnimationSettings","convertEffectsToShader","styleEffects","borderAccessor","direction","LightningRendererNumberProps","LightningRendererNonAnimatingProps","ElementNode","radius","animationSettings","_node","loadedPayload","states","stylesToUndo","undoStyles","newStyles","styles","Text","_el$","_$createElement","_$spread","View","renderTopDown","render","forEach","Canvas","then","lng","onFirstRender","catch","console","_ref$","_$use","_$insert","createRenderer$1","createElement","createTextNode","isTextNode","replaceText","insertNode","removeNode","setProperty","getParentNode","getFirstChild","getNextSibling","insert","accessor","marker","initial","insertExpression","unwrapArray","multi","cleanChildren","array","normalizeIncomingArray","replacement","appendNodes","reconcileArrays","replaceNode","normalized","unwrap","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","map","sequence","removed","inserted","el","isParent","newNode","oldNode","spreadExpression","prevProps","skipChildren","code","element","arg","createRenderer","universalLightning","anchor","solidRenderer","spread","setProp","use","hexColor","deg2rad","deg","$$EVENTS","delegateEvents","eventNames","document","eventHandler","handler","isServer","createBeforeLeave","listeners","subscribe","confirm","to","force","hasSchemeRegex","trimPathRegex","normalizePath","path","omitSlash","resolvePath","base","from","basePath","fromPath","invariant","joinPaths","extractSearchParams","url","createMatcher","partial","matchFilters","pattern","splat","segments","locSegments","lenDiff","match","matchFilter","segment","locSegment","matchSegment","remainder","filter","isEqual","scoreRoute","route","score","createMemoObject","expandOptionals","prefix","prefixes","expansion","MAX_REDIRECTS","RouterContextObj","RouteContextObj","useRouter","useRoute","useNavigate","useLocation","useParams","createRoutes","routeDef","component","metadata","isLeaf","shared","asArray","originalPath","createBranch","routes","matches","createBranches","stack","branches","routeDefs","def","isEmptyArray","branch","getRouteMatches","createLocation","origin","path_","pathname","search","hash","intent","createRouterContext","integration","getBranches","setSource","utils","parsePath","renderPath","beforeLeave","isRouting","setIsRouting","reference","setReference","referrers","submissions","baseRoute","navigatorFactory","preloadRoute","navigateFromRoute","replace","scroll","nextState","resolvedTo","navigateEnd","first","preloadData","prevIntent","createRouteContext","router","outlet","createRouterComponent","routerState","create","_$createComponent","Provider","Routes","Object","assign","routeStates","nextMatches","prevMatches","equal","prevMatch","nextMatch","createOutlet","splice","when","Route","childRoutes","intercept","get","querySelector","selector","createRouter","wrap","signal","bindEvent","scrollToHash","fallbackTop","actions","setupNativeEvents","preload","explicitLinks","actionBase","preloadTimeout","isSvg","handleAnchor","evt","svg","href","rel","handleAnchorClick","handleAnchorPreload","handleAnchorIn","handleAnchorOut","handleFormSubmit","actionRef","hashParser","HashRouter","hashIndex","notify","isDev","tryOnCleanup","makeEventListener","createSingletonRoot","factory","disposeRoot","useKeyDownEvent","event","setEvent","keyMap","focusPath","setFocusPath","useFocusManager","userKeyMap","keypressEvent","keyMapEntries","currentFocusedElm","prevFocusedElm","prevFocusPath","fp","elm","foundKeyEntry","mappedKeyEvent","onKeyHandler","withPadding","padding","pad","top","left","right","bottom","firstChild","maxHeight","flattenStrings","series","flattenedSeries","delay","pause","speak","phrase","utterances","lang","synth","reject","utterance","speakSeries","remainingPhrases","nestedSeriesResults","active","retriesLeft","seriesResult","toSpeak","currentSeries","SpeechEngine","debounce","timeoutId","clear","resetFocusPathTimer","currentlySpeaking","voiceOutDisabled","fiveMinutes","debounceWithFlush","scopedValue","debounced","newValue","getElmName","onFocusChangeCore","Announcer","loaded","focusDiff","toAnnounceText","toAnnounce","textToSpeech","depth","append","notification","focusDebounce","focusChangeTimeout","useAnnouncer","handleNavigation","lastSelected","lastSelectedChild","num","Row","defaultStyle","display","justifyContent","_$setProp","_$mergeProps","selected","onFocus","skipFocus","setFocus","style","Column","up","down","flexDirection","globalBackground","setGlobalBackground","focusMenu","setFocusMenu","openMenuBG","setOpenMenuBG","homeBackgroundState","setHomeBackgroundState","openNotify","setOpenNotify","tiviBackgroundState","setTiviBackgroundState","Background","bg1","bg2","bgStyles","img","startsWith","r$","animate","_ref$2","radialGradient","pivot","theme","menuIconStyle","styles$c","menuItems","import","Menu","backdrop","menuWrapperRef","navigate","add","remove","onBlur","handleOnEnter","menuItem","MenuWrapper","plinko","icon","forwardStates","onEnter","menuLineStyle","MenuText","styles$b","NoticeItem","columnY","setcolumnY","onLeft","handleFocus","layout","screenH","has","NoticeWrapper","_$memo","each","image","NotifyImage","NoticeDesc","createInfiniteScroll","pages","setPages","page","setPage","setEnd","contents","content","page1","page2","VITE_API_KEY_V4","VITE_REQUEST_TOKEN","API_BASE","tmdbConfig","baseImageUrl","basePosterSize","defaultFetchParams","getImageUrl","posterSize","_get","loadConfig","api","truncateString","maxLength","chunkArray","convertItemsToTiles","Notice","fakeAPi","Promise","setTimeout","fakeData","total_pages","total_results","mockData","pageIndex","sizePage","provider","moveChange","concat","apply","onSelectedChanged","styles$a","Button","MaterialButton","App","announcer","enabled","navDrawer","lastFocused","notifyRef","localtionActive","setLocaltionActive","setLoaded","Escape","window","APP","onLast","history","back","onMenu","includes","tempActive","onRight","pageWrapper","_ref$3","coreExtensionModuleUrl","styles$9","Title","WrapperTitleStyles","TitleStyles","title","styles$8","cache","leftoverTiles","popularApi","trending","tiles","chunks","sliderStyles","styles$7","Thumbnail","focusRingRef","heroContent","scale","createAnimation","onRowFocus","command","jsonString","jsonData","JSON","parse","ACPB3","stringify","viewDetailVideo","FocusRing","Slider","isFirst","transition","SliderMain","rowX","moveRow","autofocus","blockWidth","HeadlineStyles","typography","display2","Headline","DescriptionStyles","background","clipping","maxLines","BadgeStyle","Description","getReviews","reviews","rtCrit","marginRight","MetaTextStyle","rtFan","Badge","borderRadius","border","body2","Metadata","flexRow","metaText","badges","ContentBlock","flexColumn","description","HomeBackground","devicePixelRatio","innerHeight","styles$6","Loading","LoadingMainRef","itemFocus","setItemFocus","setDirection","setInterval","LoadingWrapper","LoadingMain","LoadingItem","HomePage","setHeroContent","rowXTrending","setRowXTrending","rowXPopular","setRowXPopular","rowXRecommend","setRowXRecommend","popularProvider","moveRowPopular","row","moveRowTrending","moveRowRecommend","backdrop_path","onRowTrendingFocus","onRowRecommendFocus","HomeWrapper","HomeMain","HomeList","HomeItem","keyBoards","keyboardContainerStyle","KeyboardMainStyle","KeyboardChooseStyle","KeyboardRowStyle","backdropKeyboardStyle","KeyboardItemStyle","KeyboardTextStyle","inputSearchStyle","resultSearchStyle","KeyboardItemSpecalStyle","KeyboardItemSpecalIconStyle","spaceSearchStyle","resultVideosStyle","resultVideoItemStyle","KeyboardItemNormalStyle","noDataStyle","TileRow","local","others","searchProvider","query","Search","backdropKeyboardRef","inputSearchRef","resultSearchRef","keyboardContainerRef","keyboardMainRef","resultVideosRef","keyboardChooseRef","resultVideosMainRef","KeyboardItemSpecalRef","searchValue","setSearchValue","searchResultProvider","selectKeySpace","selectKeyBackSpace","slice","selectKeyBoard","renderKeyboard","elementsPerDiv","divElements","push","numPages","_ref$4","marginLeft","_ref$5","onDown","_ref$6","_ref$7","_ref$8","focus","_ref$9","_ref$10","styles$5","body1","ContentBlockTivi","channel_name","setContent","listChannels","setListChannels","setRowX","ACPB1","channelList","A_CPB4","channel_id","fetch","focusItem","openTivi","channel_description","insertSpaceAfter5Chars","TiviWrapper","Content","Container","Item","NameChannel","wordBreak","NotFound","browseProvider","minutesToHMM","minutes","hours","remainingMinutes","justYear","dateString","getInfo","rt","styles$4","ListColumn","itemsContainer","announce","Browse","entityInfo","setEntityInfo","entityProvider","entity","sliderMain","styles$3","styles$2","styles$1","DetailMore","Wrapper","Tabs","DetailMovie","focusDetail","displayRuntime","Math","floor","Main","Section","Rate","RateStar","Quantity","quantity","QuantityItem","runtime","Control","ControlItem","ControlItemText","OverView","OverViewText","overview","DetailPage","ImageBackground","DetailMain","SettingPage","Config","fontSettings","ua","navigator","userAgent","toLowerCase","isAndroid","indexOf","threadXCoreWorkerUrl","undefined","SearchPage","Videos","TiviPage","EXListSlider"],"sources":["../../main-video.js","../../node_modules/solid-js/dist/solid.js","../../node_modules/@lightningjs/solid/src/core/activeElement.ts","../../node_modules/@lightningjs/renderer/dist/src/utils.js","../../node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/TextureUsageTracker.js","../../node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/ManualCountTextureUsageTracker.js","../../node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/FinalizationRegistryTextureUsageTracker.js","../../node_modules/@lightningjs/renderer/dist/src/main-api/RendererMain.js","../../node_modules/@lightningjs/renderer/dist/src/core/utils.js","../../node_modules/@lightningjs/renderer/dist/src/core/animations/CoreAnimation.js","../../node_modules/@lightningjs/renderer/dist/src/core/animations/CoreAnimationController.js","../../node_modules/@lightningjs/renderer/dist/src/core/lib/utils.js","../../node_modules/@lightningjs/renderer/dist/src/core/lib/Matrix3d.js","../../node_modules/@lightningjs/renderer/dist/src/core/CoreNode.js","../../node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainOnlyNode.js","../../node_modules/@lightningjs/renderer/dist/src/core/platform.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreContextTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreRenderer.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreRenderOp.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/CoreShader.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/ShaderUtils.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/WebGlUtils.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreShader.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreRenderOp.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/RendererUtils.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/textures/Texture.js","../../node_modules/@lightningjs/renderer/dist/src/core/textures/ColorTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/textures/SubTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreCtxSubTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DefaultShader.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DefaultShaderBatched.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/ShaderEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/DynamicShader.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/RoundedRectangle.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/SdfShader.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadiusEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/LinearGradientEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/GrayscaleEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderRightEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderTopEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderBottomEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/BorderLeftEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/GlitchEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/FadeOutEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadialGradientEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/shaders/effects/RadialProgressEffect.js","../../node_modules/@lightningjs/renderer/dist/src/core/CoreShaderManager.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/internal/BufferCollection.js","../../node_modules/@lightningjs/renderer/dist/src/core/renderers/webgl/WebGlCoreRenderer.js","../../node_modules/@lightningjs/renderer/dist/src/core/animations/AnimationManager.js","../../node_modules/@lightningjs/renderer/dist/src/core/textures/ImageTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/textures/NoiseTexture.js","../../node_modules/@lightningjs/renderer/dist/src/core/CoreTextureManager.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/SpecialCodepoints.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/internal/FontShaper.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/internal/SdfFontShaper.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/font-face-types/SdfTrFontFace/SdfTrFontFace.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/TrFontManager.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/TextRenderer.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/constants.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/getStartConditions.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/PeekableGenerator.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/getUnicodeCodepoints.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/measureText.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/layoutText.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/internal/makeRenderWindow.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/SdfTextRenderer/SdfTextRenderer.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/LightningTextTextureRenderer.js","../../node_modules/@lightningjs/renderer/dist/src/core/text-rendering/renderers/CanvasTextRenderer.js","../../node_modules/@lightningjs/renderer/dist/src/core/Stage.js","../../node_modules/@lightningjs/renderer/dist/src/core/CoreTextNode.js","../../node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainOnlyTextNode.js","../../node_modules/@lightningjs/renderer/dist/src/render-drivers/utils.js","../../node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainCoreDriver.js","../../node_modules/@lightningjs/solid/src/core/renderer/index.ts","../../node_modules/@lightningjs/solid/src/core/node/children.ts","../../node_modules/@lightningjs/solid/src/config.ts","../../node_modules/@lightningjs/solid/src/core/utils.ts","../../node_modules/@lightningjs/solid/src/core/node/states.ts","../../node_modules/@lightningjs/solid/src/core/flex.ts","../../node_modules/@lightningjs/solid/src/core/node/index.ts","../../node_modules/@lightningjs/solid/src/components/Text.tsx","../../node_modules/@lightningjs/solid/src/components/View.tsx","../../node_modules/@lightningjs/solid/src/components/Canvas.tsx","../../node_modules/solid-js/universal/dist/universal.js","../../node_modules/@lightningjs/solid/src/core/universal/lightning.ts","../../node_modules/@lightningjs/solid/src/core/render.ts","../../node_modules/@lightningjs/solid/src/utils.ts","../../node_modules/solid-js/web/dist/web.js","../../node_modules/@solidjs/router/dist/lifecycle.js","../../node_modules/@solidjs/router/dist/utils.js","../../node_modules/@solidjs/router/dist/routing.js","../../node_modules/@solidjs/router/dist/routers/components.jsx","../../node_modules/@solidjs/router/dist/routers/createRouter.js","../../node_modules/@solidjs/router/dist/data/action.js","../../node_modules/@solidjs/router/dist/data/events.js","../../node_modules/@solidjs/router/dist/routers/HashRouter.js","../../node_modules/@solid-primitives/utils/dist/chunk/R5675YMU.js","../../node_modules/@solid-primitives/event-listener/dist/index.js","../../node_modules/@solid-primitives/rootless/dist/index.js","../../node_modules/@solid-primitives/keyboard/dist/index.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/utils.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/useFocusManager.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/withPadding.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/announcer/speech.js","../../node_modules/@solid-primitives/scheduled/dist/index.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/announcer/announcer.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/announcer/index.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/navigation.js","../../node_modules/@lightningjs/solid-primitives/dist/packages/Row.jsx","../../node_modules/@lightningjs/solid-primitives/dist/packages/Column.jsx","../../src/state.ts","../../src/components/Background.tsx","../../assets/styles/menuStyle.ts","../../src/components/Menu/Menu.styles.ts","../../src/components/Menu/constant.ts","../../src/components/Menu/Menu.tsx","../../src/components/Notice/Notice.styles.ts","../../src/components/Notice/Item/index.tsx","../../src/components/pagination.ts","../../src/components/Notice/mock.js","../../src/api/index.ts","../../src/api/formatters/ItemFormatter.ts","../../src/components/Notice/index.tsx","../../src/styles.ts","../../src/pages/App.tsx","../../AppCoreExtensions.js?importChunkUrl","../../src/components/Title/Title.styles.ts","../../src/components/Title/index.tsx","../../assets/styles/homeStyles.ts","../../src/api/providers/popular.ts","../../src/components/Slider/Slider.styles.ts","../../src/components/Thumnail/Thumnail.styles.ts","../../src/components/Thumnail/index.tsx","../../src/components/Slider/index.tsx","../../src/components/ContentBlock.tsx","../../src/components/HomeBackground.tsx","../../assets/styles/loadingStyles.ts","../../src/components/Loading.tsx","../../src/pages/Home.tsx","../../keyBoards.ts","../../assets/styles/keyboardStyle.ts","../../src/components/index.tsx","../../src/api/providers/search.ts","../../src/pages/Search.tsx","../../assets/styles/tiviStyles.ts","../../src/components/ContentBlockTivi.tsx","../../src/pages/Tivi.tsx","../../src/pages/NotFound.tsx","../../src/api/providers/browse.ts","../../src/api/providers/entity.js","../../src/components/ListColumn/ListColumn.style.ts","../../src/components/ListColumn/index.tsx","../../src/pages/Videos.tsx","../../src/pages/EXListSlider.tsx","../../assets/styles/detailStyles.ts","../../src/components/DetailMovie/Detail.style.ts","../../src/components/DetailMovie/DetailMore/DetailMore.style.ts","../../src/components/DetailMovie/DetailMore/index.tsx","../../src/components/DetailMovie/index.tsx","../../src/pages/Detail.tsx","../../assets/styles/settingStyles.ts","../../src/pages/Setting.tsx","../../src/index.tsx"],"sourcesContent":["function Logic1 () {\r\n\t'use strict';\r\n\r\n\t// Hide controls in case of no mouse or touch activity for 10 seconds\r\n\tvar videoControls = document.getElementById('video-controls'),\r\n\t\tvideo = document.getElementById('video'),\r\n\t\tplayer = document.getElementById('player');\r\n\r\n\t// Make mouse out function for nested children\r\n\tfunction makeMouseOutFn(elem) {\r\n\t\tvar list = traverseChildren(elem);\r\n\t\treturn function onMouseOut(event) {\r\n\t\t\tvar e = event.toElement || event.relatedTarget;\r\n\t\t\tif (!!~list.indexOf(e)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tisOnPlayer = false;\r\n\t\t\thideControls();\r\n\t\t};\r\n\t}\r\n\r\n\tfunction hideControls() {\r\n\t\tif (!video.paused) {\r\n\t\t\t// videoControls.classList.remove('display-control');\r\n\t\t}\r\n\t};\r\n\r\n\t// Utility function for traverse children nodes\r\n\tfunction traverseChildren(elem) {\r\n\t\tvar children = [];\r\n\t\tvar q = [];\r\n\t\tq.push(elem);\r\n\t\twhile (q.length > 0) {\r\n\t\t\tvar elem = q.pop();\r\n\t\t\tchildren.push(elem);\r\n\t\t\tpushAll(elem.children);\r\n\t\t}\r\n\t\tfunction pushAll(elemArray) {\r\n\t\t\tfor (var i = 0; i < elemArray.length; i++) {\r\n\t\t\t\tq.push(elemArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn children;\r\n\t};\r\n\r\n};\r\n\r\nfunction Logic2 () {\r\n\t'use strict';\r\n\r\n\tvar player = document.getElementById('player'),\r\n\t\tvideo = document.getElementById('video'),\r\n\t\tvideoControls = document.getElementById('video-controls'),\r\n\t\tplaypause = document.getElementById('playpause'),\r\n\t\tmute = document.getElementById('mute'),\r\n\t\tfullScreen = document.getElementById('max'),\r\n\t\tbackward = document.getElementById('back'),\r\n\t\tforward = document.getElementById('next'),\r\n\t\tcurrentTime = document.getElementById('current-time'),\r\n\t\tremainTime = document.getElementById('end-time'),\r\n\t\tprogress = document.getElementById('progress'),\r\n\t\tprogressBar = document.getElementById('progress-bar');\r\n\t\r\n\tvar\tvideoSource = video.getAttribute('data-src');\r\n\tvar numType = 0;\r\n\tvideo.controls = false;\r\n\r\n\t// HLS video init\r\n\tif (Hls.isSupported()) {\r\n\t\tvar hls = new Hls();\r\n\t\thls.loadSource(videoSource);\r\n\t\thls.attachMedia(video);\r\n\t\thls.on(Hls.Events.MANIFEST_PARSED, function () {\r\n\t\t\t// NOTICE: 1\r\n\t\t\tvideo.hidden = false;\r\n\t\t\tvideo.play();\r\n\t\t\tinitVideoQualityOptions(hls);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tplaypause.focus()\r\n\t\t\t}, 500);\r\n\t\t});\r\n\t\thls.on(Hls.Events.LEVEL_LOADED, function (event, data) {\r\n\t\t\tif (numType === 0) {\r\n\t\t\t\t(data.details || {}).live ? numType = 1 : numType = 2;\r\n\t\t\t\tif (numType === 1) {\r\n\t\t\t\t\tchangeControlsToLive();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// Add events for buttons\r\n\tplaypause.addEventListener('click', function (e) {\r\n\t\tif (video.paused || video.ended) video.play();\r\n\t\telse video.pause();\r\n\t});\r\n\r\n\tmute.addEventListener('click', function (e) {\r\n\t\tvideo.muted = !video.muted;\r\n\t\tchangeButtonState('mute');\r\n\t});\r\n\r\n\t// React to the user clicking within the progress bar\r\n\tprogress.addEventListener('click', function (e) {\r\n\t\tvar pos = (e.pageX - (this.offsetLeft + this.offsetParent.offsetLeft + player.offsetLeft)) / this.offsetWidth;\r\n\t\tvideo.currentTime = pos * video.duration;\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime)\r\n\t});\r\n\r\n    function enterFullscreen() {\r\n        const element = document.documentElement;\r\n\r\n        if (element.requestFullscreen) {\r\n            element.requestFullscreen();\r\n        } else if (element.mozRequestFullScreen) {\r\n            element.mozRequestFullScreen();\r\n        } else if (element.webkitRequestFullscreen) {\r\n            element.webkitRequestFullscreen();\r\n        } else if (element.msRequestFullscreen) {\r\n            element.msRequestFullscreen();\r\n        }\r\n    }\r\n\r\n    function exitFullscreen() {\r\n        if (document.exitFullscreen) {\r\n            document.exitFullscreen();\r\n        } else if (document.mozCancelFullScreen) {\r\n            document.mozCancelFullScreen();\r\n        } else if (document.webkitExitFullscreen) {\r\n            document.webkitExitFullscreen();\r\n        } else if (document.msExitFullscreen) {\r\n            document.msExitFullscreen();\r\n        }\r\n    }\r\n\r\n\t// handle full screen function \r\n\tfunction toggleFullScreen() {\r\n\t\tvar currPlayer = document.getElementById('player');\r\n\t\tvar isMobile = window.orientation > -1;\r\n\t\tif (!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))) {\r\n\t\t\tif (document.fullscreenElement) {\r\n\t\t\t\texitFullscreen();\r\n\t\t\t} else {\r\n\t\t\t\tenterFullscreen();\r\n\t\t\t}\r\n\t\t}\r\n\t\t// offsetWidth offsetHeight\r\n\t\tvar width = window.innerWidth\r\n\t\t\t|| document.documentElement.clientWidth\r\n\t\t\t|| document.body.clientWidth;\r\n\r\n\t\tvar height = window.innerHeight\r\n\t\t\t|| document.documentElement.clientHeight\r\n\t\t\t|| document.body.clientHeight;\r\n\t\tif (width - currPlayer.offsetWidth > 40 ||  height - currPlayer.offsetHeight > 40) {\r\n\t\t\tcurrPlayer.style.width = '100%';\r\n\t\t\tcurrPlayer.style.top = '0';\r\n\t\t} else {\r\n\t\t\tcurrPlayer.style.width = '80%';\r\n\t\t\tcurrPlayer.style.top = '20px';\r\n\t\t}\r\n\t}\r\n\r\n\tfullScreen.addEventListener('click', function (event) {\r\n\t\ttoggleFullScreen();\r\n\t});\r\n\r\n\tbackward.addEventListener('click', function (event) {\r\n\t\tvideo.currentTime = Math.max(video.currentTime - 10, 0);\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime);\r\n\t});\r\n\r\n\tforward.addEventListener('click', function (event) {\r\n\t\tvideo.currentTime = Math.min(video.currentTime + 10, video.duration);\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime);\r\n\t});\r\n\r\n\t// Wait for the video's meta data to be loaded, then set the progress bar's max value to the duration of the video\r\n\tvideo.addEventListener('loadedmetadata', function () {\r\n        // Calculate new time, but don't exceed video duration\r\n        var newTime = Math.min(video.currentTime, video.duration);\r\n        video.currentTime = newTime;\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime);\r\n\t\tremainTime.innerHTML = secondsToTime(video.duration);\r\n\t});\r\n\r\n\t// Add event listeners for video specific events\r\n\tvideo.addEventListener('play', function () {\r\n\t\tchangeButtonState('playpause');\r\n\t}, false);\r\n\tvideo.addEventListener('pause', function () {\r\n\t\tchangeButtonState('playpause');\r\n\t}, false);\r\n\r\n\t// As the video is playing, update the progress bar\r\n\tvideo.addEventListener('timeupdate', function () {\r\n\t\tif (!progress.getAttribute('max')) progress.setAttribute('max', video.duration);\r\n\t\tprogress.value = video.currentTime;\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime);\r\n\t\tprogressBar.style.width = Math.floor((video.currentTime / video.duration) * 100) + '%';\r\n\t});\r\n\r\n\t// Changes the button state of certain button's so the correct visuals can be displayed with CSS\r\n\tfunction changeButtonState(type) {\r\n\t\t// Play/Pause button\r\n\t\tif (type == 'playpause') {\r\n\t\t\tif (video.paused || video.ended) {\r\n\t\t\t\tplaypause.setAttribute('data-state', 'play');\r\n\t\t\t\tvideoControls.classList.add('display-control');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tplaypause.setAttribute('data-state', 'pause');\r\n\t\t\t}\r\n\t\t}\r\n\t\t// Mute button\r\n\t\telse if (type == 'mute') {\r\n\t\t\tmute.setAttribute('data-state', video.muted ? 'unmute' : 'mute');\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nfunction initVideoQualityOptions(hls) {\r\n\r\n\tvar qualityBtn = document.getElementById('quality-btn');\r\n\tvar quality = document.getElementById('quality');\r\n\tqualityBtn.addEventListener('click', function namedListener (event) {\r\n\t\tmakeActive();\r\n\t\tquality.classList.toggle(\"show\");\r\n\t});\r\n\r\n\t//Create and append the options\r\n\tvar qualities = hls.levels;\r\n\twhile (quality.firstChild) {\r\n\t\tquality.removeChild(quality.firstChild);\r\n\t}\r\n\tvar qAuto = document.createElement(\"button\");\r\n\tqAuto.setAttribute(\"data-value\", -1);\r\n\tqAuto.setAttribute(\"class\", \"quality\");\r\n\tqAuto.setAttribute(\"tabindex\", \"0\");\r\n\tqAuto.setAttribute(\"id\", \"quality-0\");\r\n\r\n\tqAuto.textContent = 'Auto';\r\n\tquality.appendChild(qAuto);\r\n\tfor (var i = 0; i < qualities.length; i++) {\r\n\t\tvar q = document.createElement(\"button\");\r\n\t\tq.setAttribute(\"data-value\", i);\r\n\t\tq.setAttribute(\"class\", \"quality\");\r\n\t\tq.setAttribute(\"tabindex\", \"0\");\r\n\t\tq.setAttribute(\"id\", \"quality-\" + (i + 1));\r\n\t\tq.textContent = (qualities[i].name || qualities[i].height) + 'p';\r\n\t\tquality.appendChild(q);\r\n\t}\r\n\r\n\t// update dropdown selection\r\n\tvar elems = document.querySelectorAll('#quality button');\r\n\r\n\tfunction makeActive(UserSelectionEvent) {\r\n\t\tfor (var i = 0; i < elems.length; i++)\r\n\t\t\t{\r\n\t\t\t\tif(!UserSelectionEvent && i == hls.currentLevel + 1) {\r\n\t\t\t\t\tif (hls.autoLevelEnabled) {\r\n\t\t\t\t\t\telems[0].classList.add('active');\r\n\t\t\t\t\t\telems[i].classList.remove('active');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\telems[i].classList.add('active');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else{\r\n\t\t\t\t\telems[i].classList.remove('active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(UserSelectionEvent){\r\n\t\t\t\tvar q_level = parseInt(this.getAttribute('data-value'));\r\n\t\t\t\thls.currentLevel = q_level;\r\n\t\t\t\tthis.classList.add('active');\r\n\t\t\t}\r\n\t};\r\n\r\n\tfor (var i = 0; i < elems.length; i++)\r\n\t\telems[i].addEventListener('click', makeActive);\r\n};\r\n\r\nfunction secondsToTime(seconds) {\r\n\tvar hours = Math.floor(seconds / 3600);\r\n\tvar minutes = Math.floor((seconds % 3600) / 60);\r\n\tvar remainingSeconds = Math.floor(seconds % 60);\r\n\r\n\tvar timeString = \"\";\r\n\r\n\tif (hours > 0) {\r\n\t\ttimeString += `${hours.toString().padStart(2, '0')}:`;\r\n\t}\r\n\r\n\ttimeString += `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n\r\n\treturn timeString;\r\n}\r\n\r\nexport function playVideo(url) {\r\n\tvar src = url || \"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8\";\r\n\tvar video = document.getElementById('video');\r\n\tvideo.setAttribute('data-src', src);\r\n\tinitApp();\r\n}\r\n\r\nexport function closeVideo() {\r\n\tvar video = document.getElementById('video');\r\n\tvideo.hidden = true;\r\n\tvideo.pause();\r\n\tchangeControlsToVideo();\r\n\tvar quality = document.getElementById('quality');\r\n\tquality.className = \"dropdown-content\";\r\n\treplaceDOM();\r\n}\r\n\r\n\r\nfunction replaceDOM() {\r\n\tvar old_element = document.getElementById(\"player\");\r\n\told_element.parentNode.removeChild(old_element);\r\n\tsetTimeout(() => {\r\n\t\tcreateHtml();\r\n\t}, 10);\r\n}\r\n\r\nfunction changeControlsToLive() {\r\n\tvar time = document.getElementById('time'),\r\n\t\tlive = document.getElementById('live-indicator');\r\n\ttime.className = \"display_none\";\r\n\tlive.className = \"\";\r\n\tlive.setAttribute('data-type', 'live');\r\n}\r\n\r\nexport function backwardTime() {\r\n\tvar video = document.getElementById('video'),\r\n\tlive = document.getElementById('live-indicator'),\r\n\tcurrentTime = document.getElementById('current-time');\r\n\tvar attrType = live.getAttribute('data-type');\r\n\tif (attrType === 'video') {\r\n\t\tvideo.currentTime = Math.max(video.currentTime - 10, 0);\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime);\r\n\t}\r\n}\r\n\r\nexport function forwardTime() {\r\n\tvar video = document.getElementById('video'),\r\n\tlive = document.getElementById('live-indicator'),\r\n\tcurrentTime = document.getElementById('current-time');\r\n\tvar attrType = live.getAttribute('data-type');\r\n\tif (attrType === 'video') {\r\n\t\tvideo.currentTime = Math.min(video.currentTime + 10, video.duration);\r\n\t\tcurrentTime.innerHTML = secondsToTime(video.currentTime);\r\n\t}\r\n}\r\n\r\nexport function upControls() {\r\n\tvar activeID = document.activeElement.getAttribute('id');\r\n\tif (!activeID) {\r\n\t\tvar playpause = document.getElementById('playpause');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'playpause') {\r\n\t\tvar playpause = document.getElementById('max');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'max') {\r\n\t\tvar playpause = document.getElementById('mute');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'mute') {\r\n\t\tvar playpause = document.getElementById('quality-btn');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'quality-btn') {\r\n\t\tvar quality = document.getElementById('quality');\r\n\t\tif (quality.className === \"dropdown-content show\") {\r\n\t\t\tvar qualityDetail = document.getElementById('quality-0');\r\n\t\t\tif (qualityDetail) {\r\n\t\t\t\tqualityDetail.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\tif (activeID.includes('quality-')) {\r\n\t\tconst num = parseInt(extractNumber(activeID), 10);\r\n\t\tvar quality = document.getElementById('quality-' + (num + 1));\r\n\t\tif (quality) {\r\n\t\t\tquality.focus();\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n}\r\n\r\nexport function downControls() {\r\n\tvar activeID = document.activeElement.getAttribute('id');\r\n\tif (!activeID) {\r\n\t\tvar playpause = document.getElementById('playpause');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'max') {\r\n\t\tvar playpause = document.getElementById('playpause');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'mute') {\r\n\t\tvar playpause = document.getElementById('max');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID === 'quality-btn') {\r\n\t\tvar playpause = document.getElementById('mute');\r\n\t\tplaypause.focus();\r\n\t\treturn;\r\n\t}\r\n\tif (activeID.includes('quality-')) {\r\n\t\tconst num = parseInt(extractNumber(activeID), 10);\r\n\t\tif (num === 0) {\r\n\t\t\tvar quality = document.getElementById('quality-btn');\r\n\t\t\tquality.focus();\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tvar quality = document.getElementById('quality-' + (num - 1));\r\n\t\t\tquality.focus();\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction extractNumber(str) {\r\n    var matches = str.match(/quality-(\\d+)/);\r\n\r\n    if (matches && matches[1]) {\r\n        return parseInt(matches[1], 10);\r\n    } else {\r\n        return null; // or any default value you prefer\r\n    }\r\n}\r\n\r\nfunction changeControlsToVideo() {\r\n\tvar time = document.getElementById('time'),\r\n\t\tlive = document.getElementById('live-indicator');\r\n\tlive.className = \"display_none\";\r\n\ttime.className = \"\";\r\n\tlive.setAttribute('data-type', 'video');\r\n}\r\n\r\nfunction initApp() {\r\n\tLogic1();\r\n\tLogic2();\r\n}\r\nfunction createHtml () {\r\n\tvar htmlString = '<video id=\"video\" tabindex=\"0\" poster=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAEsCAYAAAAhNGCdAAAAAXNSR0IArs4c6QAAELlJREFUeF7t1kERAAAIAkHpX9oeN2sDFh/sHAECBAgQIECAAIGwwMLZRCNAgAABAgQIECBwBq8nIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAgQf4tAEt5FxRQwAAAABJRU5ErkJggg==\" hidden></video><div id=\"video-controls\" class=\"controls display-control\"><button id=\"playpause\" tabindex=\"0\" type=\"button\" data-state=\"play\"></button><button id=\"back\" tabindex=\"0\" type=\"button\" data-state=\"back\"></button><button id=\"next\" tabindex=\"0\" type=\"button\" data-state=\"next\"></button><button id=\"max\" tabindex=\"0\" type=\"button\" data-state=\"max\"></button><button id=\"mute\" type=\"button\" data-state=\"mute\">Mute/Unmute</button><div class=\"dropdown\"><button id=\"quality-btn\" class=\"dropbtn btn-settings\"></button><div id=\"quality\" class=\"dropdown-content\"></div></div><div data-type=\"video\" id=\"live-indicator\" class=\"display_none\"><span id=\"red-dot\"></span><span id=\"live-text\">Live</span></div><div id=\"time\"><span id=\"current-time\">10:11</span>/<span id=\"end-time\">11:23</span></div><div class=\"progress\"><progress id=\"progress\" tabindex=\"0\" value=\"0\" min=\"0\"><span id=\"progress-bar\"></span></progress></div></div>'\r\n\tvar app = document.getElementById(\"app\");\r\n\tvar div = document.createElement('div');\r\n\tdiv.id = \"player\"\r\n\tdiv.innerHTML = htmlString.trim();\r\n\tapp.parentNode.insertBefore(div, app.nextSibling)\r\n}\r\ndocument.addEventListener('DOMContentLoaded', createHtml);","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = (n + m) >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;\n      else if (cmp < 0) n = k - 1;\n      else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned\n      ? UNOWNED\n      : {\n          owned: null,\n          cleanups: null,\n          context: current ? current.context : null,\n          owner: current\n        },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);\n      else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(\n      () => {\n        fn ? fn() : untrack(onInvalidate);\n        fn = undefined;\n      },\n      undefined,\n      false,\n      0\n    ),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if ((arguments.length === 2 && typeof pFetcher === \"object\") || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = \"initialValue\" in options,\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;\n    else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v;\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated)\n        queueMicrotask(() =>\n          options.onHydrated(key, {\n            value: v\n          })\n        );\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);\n          else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p =\n      initP !== NO_INIT\n        ? initP\n        : untrack(() =>\n            fetcher(lookup, {\n              value: value(),\n              refetching\n            })\n          );\n    if (!isPromise(p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    if (\"value\" in p) {\n      if (p.status === \"success\") loadEnd(pr, p.value, undefined, lookup);\n      else loadEnd(pr, undefined, undefined, lookup);\n      return p;\n    }\n    scheduled = true;\n    queueMicrotask(() => (scheduled = false));\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(\n      v => loadEnd(p, v, undefined, lookup),\n      e => loadEnd(p, undefined, castError(e), lookup)\n    );\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));\n  else load(false);\n  return [\n    read,\n    {\n      refetch: load,\n      mutate: setValue\n    }\n  ];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(\n    () => {\n      if (!t || !t.fn)\n        t = requestCallback(\n          () => setDeferred(() => node.value),\n          timeout !== undefined\n            ? {\n                timeout\n              }\n            : undefined\n        );\n      return source();\n    },\n    undefined,\n    true\n  );\n  const [deferred, setDeferred] = createSignal(\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    options\n  );\n  updateComputation(node);\n  setDeferred(() =>\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n  );\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(\n    p => {\n      const v = source();\n      for (const [key, val] of subs.entries())\n        if (fn(key, v) !== fn(key, p)) {\n          for (const c of val.values()) {\n            c.state = STALE;\n            if (c.pure) Updates.push(c);\n            else Effects.push(c);\n          }\n        }\n      return v;\n    },\n    undefined,\n    true,\n    STALE\n  );\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if ((l = subs.get(key))) l.add(listener);\n      else subs.set(key, (l = new Set([listener])));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(\n      key,\n      Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n    );\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null);\n  else if (Owner.cleanups === null) Owner.cleanups = [fn];\n  else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t =\n        Transition ||\n        (Transition = {\n          sources: new Set(),\n          effects: [],\n          promises: new Set(),\n          disposed: new Set(),\n          queue: new Set(),\n          running: true\n        });\n      t.done || (t.done = new Promise(res => (t.resolve = res)));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nconst [transPending, setTransPending] = /*@__PURE__*/ createSignal(false);\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  return Owner && Owner.context && Owner.context[context.id] !== undefined\n    ? Owner.context[context.id]\n    : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);\n    else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current =\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || (!isComp && Transition.sources.has(node))) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);\n            else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;\n          else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false);\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const time = ExecCount;\n  runComputation(\n    node,\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    time\n  );\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  const owner = Owner,\n    listener = Listener;\n  Listener = Owner = node;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null);\n  else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];\n      else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];\n      else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;\n  else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);\n    else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);\n    else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    } else if (sharedConfig.effects) {\n      queue = [...sharedConfig.effects, ...queue];\n      userLength += sharedConfig.effects.length;\n      delete sharedConfig.effects;\n    }\n    setHydrateContext();\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;\n  else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount))\n          runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;\n      else o.state = PENDING;\n      if (o.pure) Updates.push(o);\n      else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;\n  else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, (owner && owner.owner) || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects)\n    Effects.push({\n      fn() {\n        runErrors(error, fns, owner);\n      },\n      state: STALE\n    });\n  else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(\n      () =>\n        (res = untrack(() => {\n          Owner.context = {\n            ...Owner.context,\n            [id]: props.value\n          };\n          return children(() => props.children);\n        })),\n      undefined\n    );\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null);\n  else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler =\n        typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => (\"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub()));\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      } else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (\n          start = 0, end = Math.min(len, newLen);\n          start < end && items[start] === newItems[start];\n          start++\n        );\n        for (\n          end = len - 1, newEnd = newLen - 1;\n          end >= start && newEnd >= start && items[end] === newItems[newEnd];\n          end--, newEnd--\n        ) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, (len = newLen));\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return (mapped = mapped.slice(0, len));\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || (!!s && $PROXY in s);\n    sources[i] = typeof s === \"function\" ? ((proxy = true), createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy(\n      {\n        get(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            const v = resolveSource(sources[i])[property];\n            if (v !== undefined) return v;\n          }\n        },\n        has(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            if (property in resolveSource(sources[i])) return true;\n          }\n          return false;\n        },\n        keys() {\n          const keys = [];\n          for (let i = 0; i < sources.length; i++)\n            keys.push(...Object.keys(resolveSource(sources[i])));\n          return [...new Set(keys)];\n        }\n      },\n      propTraps\n    );\n  }\n  const target = {};\n  const sourcesMap = {};\n  const defined = new Set();\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = 0, length = sourceKeys.length; i < length; i++) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined.has(key)) {\n        if (desc.get) {\n          defined.add(key);\n          Object.defineProperty(target, key, {\n            enumerable: true,\n            configurable: true,\n            get: resolveSources.bind((sourcesMap[key] = [desc.get.bind(source)]))\n          });\n        } else {\n          if (desc.value !== undefined) defined.add(key);\n          target[key] = desc.value;\n        }\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) {\n            sources.push(desc.get.bind(source));\n          } else if (desc.value !== undefined) {\n            sources.push(() => desc.value);\n          }\n        } else if (target[key] === undefined) target[key] = desc.value;\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if ($PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy(\n        {\n          get(property) {\n            return k.includes(property) ? props[property] : undefined;\n          },\n          has(property) {\n            return k.includes(property) && property in props;\n          },\n          keys() {\n            return k.filter(property => property in props);\n          }\n        },\n        propTraps\n      );\n    });\n    res.push(\n      new Proxy(\n        {\n          get(property) {\n            return blocked.has(property) ? undefined : props[property];\n          },\n          has(property) {\n            return blocked.has(property) ? false : property in props;\n          },\n          keys() {\n            return Object.keys(props).filter(k => !blocked.has(k));\n          }\n        },\n        propTraps\n      )\n    );\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc =\n      !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc\n          ? (objects[objectIndex][propName] = desc.value)\n          : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc\n        ? (otherObject[propName] = desc.value)\n        : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(\n      () =>\n        (Comp = comp()) &&\n        untrack(() => {\n          if (false);\n          if (!ctx) return Comp(props);\n          const c = sharedConfig.context;\n          setHydrateContext(ctx);\n          const r = Comp(props);\n          setHydrateContext(c);\n          return r;\n        })\n    );\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => (comp = () => mod.default)), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => (keyed ? a === b : !a === !b)\n  });\n  return createMemo(\n    () => {\n      const c = condition();\n      if (c) {\n        const child = props.children;\n        const fn = typeof child === \"function\" && child.length > 0;\n        return fn\n          ? untrack(() =>\n              child(\n                keyed\n                  ? c\n                  : () => {\n                      if (!untrack(condition)) throw narrowedError(\"Show\");\n                      return props.when;\n                    }\n              )\n            )\n          : child;\n      }\n      return props.fallback;\n    },\n    undefined,\n    undefined\n  );\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) =>\n    a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(\n      () => {\n        let conds = conditions();\n        if (!Array.isArray(conds)) conds = [conds];\n        for (let i = 0; i < conds.length; i++) {\n          const c = conds[i].when;\n          if (c) {\n            keyed = !!conds[i].keyed;\n            return [i, c, conds[i]];\n          }\n        }\n        return [-1];\n      },\n      undefined,\n      {\n        equals\n      }\n    );\n  return createMemo(\n    () => {\n      const [index, when, cond] = evalConditions();\n      if (index < 0) return props.fallback;\n      const c = cond.children;\n      const fn = typeof c === \"function\" && c.length > 0;\n      return fn\n        ? untrack(() =>\n            c(\n              keyed\n                ? when\n                : () => {\n                    if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n                    return cond.when;\n                  }\n            )\n          )\n        : c;\n    },\n    undefined,\n    undefined\n  );\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  if (sharedConfig.context && sharedConfig.load)\n    err = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count);\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(\n    () => {\n      let e;\n      if ((e = errored())) {\n        const f = props.fallback;\n        return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n      }\n      return catchError(() => props.children, setErrored);\n    },\n    undefined,\n    undefined\n  );\n}\n\nconst suspenseListEquals = (a, b) =>\n  a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(\n    prev => {\n      const reveal = props.revealOrder,\n        tail = props.tail,\n        { showContent = true, showFallback = true } = show ? show() : {},\n        reg = registry(),\n        reverse = reveal === \"backwards\";\n      if (reveal === \"together\") {\n        const all = reg.every(inFallback => !inFallback());\n        const res = reg.map(() => ({\n          showContent: all && showContent,\n          showFallback\n        }));\n        res.inFallback = !all;\n        return res;\n      }\n      let stop = false;\n      let inFallback = prev.inFallback;\n      const res = [];\n      for (let i = 0, len = reg.length; i < len; i++) {\n        const n = reverse ? len - i - 1 : i,\n          s = reg[n]();\n        if (!stop && !s) {\n          res[n] = {\n            showContent,\n            showFallback\n          };\n        } else {\n          const next = !stop;\n          if (next) inFallback = true;\n          res[n] = {\n            showContent: next,\n            showFallback: !tail || (next && tail === \"collapsed\") ? showFallback : false\n          };\n          stop = true;\n        }\n      }\n      if (!stop) inFallback = false;\n      res.inFallback = inFallback;\n      return res;\n    },\n    {\n      inFallback: false\n    }\n  );\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (typeof ref !== \"object\" || ref.status !== \"success\")) p = ref;\n    if (p && p !== \"$$f\") {\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(() => {\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      }).catch(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return (flicker = undefined);\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            { showContent = true, showFallback = true } = show ? show() : {};\n          if ((!inFallback || (p && p !== \"$$f\")) && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport {\n  $DEVCOMP,\n  $PROXY,\n  $TRACK,\n  DEV,\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  batch,\n  cancelCallback,\n  catchError,\n  children,\n  createComponent,\n  createComputed,\n  createContext,\n  createDeferred,\n  createEffect,\n  createMemo,\n  createReaction,\n  createRenderEffect,\n  createResource,\n  createRoot,\n  createSelector,\n  createSignal,\n  createUniqueId,\n  enableExternalSource,\n  enableHydration,\n  enableScheduling,\n  equalFn,\n  from,\n  getListener,\n  getOwner,\n  indexArray,\n  lazy,\n  mapArray,\n  mergeProps,\n  observable,\n  on,\n  onCleanup,\n  onError,\n  onMount,\n  requestCallback,\n  resetErrorBoundaries,\n  runWithOwner,\n  sharedConfig,\n  splitProps,\n  startTransition,\n  untrack,\n  useContext,\n  useTransition\n};\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { createSignal } from 'solid-js';\nimport type { ElementNode } from './node/index.js';\nexport const [activeElement, setActiveElement] =\n  createSignal<ElementNode | null>(null);\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport function createWebGLContext(canvas) {\n    const config = {\n        alpha: true,\n        antialias: false,\n        depth: false,\n        stencil: true,\n        desynchronized: false,\n        // Disabled because it prevents Visual Regression Tests from working\n        // failIfMajorPerformanceCaveat: true,\n        powerPreference: 'high-performance',\n        premultipliedAlpha: true,\n        preserveDrawingBuffer: false,\n    };\n    return (\n    // TODO: Remove this assertion once this issue is fixed in TypeScript\n    // https://github.com/microsoft/TypeScript/issues/53614\n    (canvas.getContext('webgl', config) ||\n        canvas.getContext('experimental-webgl', config)));\n}\n/**\n * Asserts a condition is truthy, otherwise throws an error\n *\n * @remarks\n * Useful at the top of functions to ensure certain conditions, arguments and\n * properties are set/met before continuing. When using this function,\n * TypeScript will narrow away falsy types from the condition.\n *\n * @param condition\n * @param message\n * @returns\n */\nexport function assertTruthy(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n/**\n * Merges two colors based on a given progress value.\n *\n * This function takes two colors (c1 and c2) represented as 32-bit integers\n * in RGBA format and blends them based on the provided progress value (p).\n * The result is a new color that is a weighted combination of the input colors,\n * where the weight is determined by the progress value.\n *\n * @param {number} c1 - The first color in RGBA format (32-bit integer).\n * @param {number} c2 - The second color in RGBA format (32-bit integer).\n * @param {number} p - The progress value between 0 and 1.\n * @returns {number} The merged color as a 32-bit integer in RGBA format.\n */\nexport function mergeColorProgress(rgba1, rgba2, p) {\n    const r1 = Math.trunc(rgba1 >>> 24);\n    const g1 = Math.trunc((rgba1 >>> 16) & 0xff);\n    const b1 = Math.trunc((rgba1 >>> 8) & 0xff);\n    const a1 = Math.trunc(rgba1 & 0xff);\n    const r2 = Math.trunc(rgba2 >>> 24);\n    const g2 = Math.trunc((rgba2 >>> 16) & 0xff);\n    const b2 = Math.trunc((rgba2 >>> 8) & 0xff);\n    const a2 = Math.trunc(rgba2 & 0xff);\n    const r = Math.round(r2 * p + r1 * (1 - p));\n    const g = Math.round(g2 * p + g1 * (1 - p));\n    const b = Math.round(b2 * p + b1 * (1 - p));\n    const a = Math.round(a2 * p + a1 * (1 - p));\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Given an RGBA encoded number, returns back the RGBA number with it's alpha\n * component multiplied by the passed `alpha` parameter.\n *\n * @internalRemarks\n * This method does NOT premultiply the alpha into the color channels. If that\n * is required (for internal use only) use {@link mergeColorAlphaPremultiplied}\n * instead.\n *\n * @param rgba RGBA encoded number\n * @param alpha Normalized alpha value (Range: 0.0 - 1.0)\n * @returns\n */\nexport function mergeColorAlpha(rgba, alpha) {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = Math.trunc((rgba & 0xff) * alpha);\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Given an RGBA encoded number, returns back the RGBA number with it's alpha\n * component multiplied by the passed `alpha` parameter. Before returning, the\n * final alpha value is multiplied into the color channels.\n *\n * @remarks\n * If `flipEndianess` is set to true, the function will returned an ABGR encoded number\n * which is useful when the color value needs to be passed into a shader attribute.\n *\n * NOTE: This method returns a PREMULTIPLIED alpha color which is generally only useful\n * in the context of the internal rendering process. Use {@link mergeColorAlpha} if you\n * need to blend an alpha value into a color in the context of the Renderer's\n * main API.\n *\n * @internalRemarks\n * Do not expose this method in the main API because Renderer users should instead use\n * {@link mergeColorAlpha} to manipulate the alpha value of a color.\n *\n * @internal\n * @param rgba RGBA encoded number\n * @param alpha Normalized alpha value (Range: 0.0 - 1.0)\n * @param flipEndianess Flip the endianess. RGBA becomes encoded as ABGR (for inserting colors into shader attributes)\n * @returns\n */\nexport function mergeColorAlphaPremultiplied(rgba, alpha, flipEndianess = false) {\n    const newAlpha = ((rgba & 0xff) / 255) * alpha;\n    const r = Math.trunc((rgba >>> 24) * newAlpha);\n    const g = Math.trunc(((rgba >>> 16) & 0xff) * newAlpha);\n    const b = Math.trunc(((rgba >>> 8) & 0xff) * newAlpha);\n    const a = Math.trunc(newAlpha * 255);\n    if (flipEndianess) {\n        return ((a << 24) | (b << 16) | (g << 8) | r) >>> 0;\n    }\n    return ((r << 24) | (g << 16) | (b << 8) | a) >>> 0;\n}\n/**\n * Returns true if the given object has the given \"own\" property.\n *\n * @param obj\n * @param prop\n * @returns\n */\nexport function hasOwn(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n/**\n * Converts degrees to radians\n *\n * @param degrees\n * @returns\n */\nexport function deg2Rad(degrees) {\n    return (degrees * Math.PI) / 180;\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Texture Usage Tracker for Usage Based Texture Garbage Collection\n */\nexport class TextureUsageTracker {\n    releaseCallback;\n    constructor(releaseCallback) {\n        this.releaseCallback = releaseCallback;\n    }\n}\n//# sourceMappingURL=TextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { TextureUsageTracker } from './TextureUsageTracker.js';\n/**\n * Usage-based Texture Garbage Collection Registry\n */\nexport class ManualCountTextureUsageTracker extends TextureUsageTracker {\n    textureMap = new Map();\n    zeroReferenceTextureSet = new Set();\n    options;\n    constructor(releaseCallback, options) {\n        super(releaseCallback);\n        this.options = {\n            textureCleanupIntervalMs: options.textureCleanupIntervalMs ?? 10000,\n            textureCleanupAgeThreadholdMs: options.textureCleanupAgeThreadholdMs ?? 60000,\n        };\n        // Periodically check for textures that are no longer referenced by any\n        // Nodes and notify RendererMain to release them.\n        setInterval(() => {\n            const now = Date.now();\n            const thresholdMs = this.options.textureCleanupAgeThreadholdMs;\n            for (const textureRefInfo of this.zeroReferenceTextureSet) {\n                if (now - textureRefInfo.lastUpdate > thresholdMs) {\n                    this.releaseCallback(textureRefInfo.id);\n                    this.textureMap.delete(textureRefInfo.id);\n                    this.zeroReferenceTextureSet.delete(textureRefInfo);\n                }\n            }\n        }, this.options.textureCleanupIntervalMs);\n    }\n    registerTexture(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        if (!this.textureMap.has(textureId)) {\n            const textureRefInfo = {\n                id: textureId,\n                nodeRefCount: 0,\n                lastUpdate: Date.now(),\n            };\n            this.textureMap.set(textureId, textureRefInfo);\n            this.zeroReferenceTextureSet.add(textureRefInfo);\n        }\n    }\n    incrementTextureRefCount(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        let textureRefInfo = this.textureMap.get(textureId);\n        if (!textureRefInfo) {\n            // Texture has not been registered yet, so register it now.\n            // This may happen if the TextureRef was cleaned up from the registry\n            // but was still alive in memory and eventually re-used.\n            this.registerTexture(texture);\n            textureRefInfo = this.textureMap.get(textureId);\n        }\n        assertTruthy(textureRefInfo, 'Texture must have been registered');\n        if (texture.txType === 'SubTexture') {\n            // If this is a SubTexture, then increment the reference count of the\n            // parent texture as well.\n            this.incrementTextureRefCount(texture.props.texture);\n        }\n        textureRefInfo.nodeRefCount++;\n        textureRefInfo.lastUpdate = Date.now();\n        if (this.zeroReferenceTextureSet.has(textureRefInfo)) {\n            this.zeroReferenceTextureSet.delete(textureRefInfo);\n        }\n    }\n    decrementTextureRefCount(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        const textureRefInfo = this.textureMap.get(textureId);\n        assertTruthy(textureRefInfo, 'Texture must have been registered');\n        textureRefInfo.nodeRefCount--;\n        textureRefInfo.lastUpdate = Date.now();\n        if (textureRefInfo.nodeRefCount === 0) {\n            this.zeroReferenceTextureSet.add(textureRefInfo);\n        }\n        if (texture.txType === 'SubTexture') {\n            // If this is a SubTexture, then decrement the reference count of the\n            // parent texture as well.\n            this.decrementTextureRefCount(texture.props.texture);\n        }\n    }\n}\n//# sourceMappingURL=ManualCountTextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { TextureUsageTracker } from './TextureUsageTracker.js';\nexport class FinalizationRegistryTextureUsageTracker extends TextureUsageTracker {\n    registry;\n    constructor(releaseCallback) {\n        super(releaseCallback);\n        this.registry = new FinalizationRegistry(releaseCallback);\n    }\n    registerTexture(texture) {\n        assertTruthy(texture.options?.id, 'Texture must have an ID to be registered');\n        this.registry.register(texture, texture.options?.id);\n    }\n    incrementTextureRefCount() {\n        // No-op for FinalizationRegistry\n    }\n    decrementTextureRefCount() {\n        // No-op for FinalizationRegistry\n    }\n}\n//# sourceMappingURL=FinalizationRegistryTextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ManualCountTextureUsageTracker, } from './texture-usage-trackers/ManualCountTextureUsageTracker.js';\nimport { FinalizationRegistryTextureUsageTracker } from './texture-usage-trackers/FinalizationRegistryTextureUsageTracker.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\n/**\n * The Renderer Main API\n *\n * @remarks\n * This is the primary class used to configure and operate the Renderer.\n *\n * It is used to create and destroy Nodes, as well as Texture and Shader\n * references.\n *\n * Example:\n * ```ts\n * import { RendererMain, MainCoreDriver } from '@lightningjs/renderer';\n *\n * // Initialize the Renderer\n * const renderer = new RendererMain(\n *   {\n *     appWidth: 1920,\n *     appHeight: 1080\n *   },\n *   'app',\n *   new MainCoreDriver(),\n * );\n * ```\n */\nexport class RendererMain extends EventEmitter {\n    root = null;\n    driver;\n    canvas;\n    settings;\n    nodes = new Map();\n    nextTextureId = 1;\n    /**\n     * Texture Usage Tracker for Usage Based Texture Garbage Collection\n     *\n     * @remarks\n     * For internal use only. DO NOT ACCESS.\n     */\n    textureTracker;\n    /**\n     * Constructs a new Renderer instance\n     *\n     * @param settings Renderer settings\n     * @param target Element ID or HTMLElement to insert the canvas into\n     * @param driver Core Driver to use\n     */\n    constructor(settings, target, driver) {\n        super();\n        const resolvedSettings = {\n            appWidth: settings.appWidth || 1920,\n            appHeight: settings.appHeight || 1080,\n            deviceLogicalPixelRatio: settings.deviceLogicalPixelRatio || 1,\n            devicePhysicalPixelRatio: settings.devicePhysicalPixelRatio || window.devicePixelRatio,\n            clearColor: settings.clearColor ?? 0x00000000,\n            coreExtensionModule: settings.coreExtensionModule || null,\n            experimental_FinalizationRegistryTextureUsageTracker: settings.experimental_FinalizationRegistryTextureUsageTracker ?? false,\n            textureCleanupOptions: settings.textureCleanupOptions || {},\n            fpsUpdateInterval: settings.fpsUpdateInterval || 0,\n        };\n        this.settings = resolvedSettings;\n        const { appWidth, appHeight, deviceLogicalPixelRatio, devicePhysicalPixelRatio, } = resolvedSettings;\n        const releaseCallback = (textureId) => {\n            this.driver.releaseTexture(textureId);\n        };\n        const useFinalizationRegistryTracker = resolvedSettings.experimental_FinalizationRegistryTextureUsageTracker &&\n            typeof FinalizationRegistry === 'function';\n        this.textureTracker = useFinalizationRegistryTracker\n            ? new FinalizationRegistryTextureUsageTracker(releaseCallback)\n            : new ManualCountTextureUsageTracker(releaseCallback, this.settings.textureCleanupOptions);\n        const deviceLogicalWidth = appWidth * deviceLogicalPixelRatio;\n        const deviceLogicalHeight = appHeight * deviceLogicalPixelRatio;\n        this.driver = driver;\n        const canvas = document.createElement('canvas');\n        this.canvas = canvas;\n        canvas.width = deviceLogicalWidth * devicePhysicalPixelRatio;\n        canvas.height = deviceLogicalHeight * devicePhysicalPixelRatio;\n        canvas.style.width = `${deviceLogicalWidth}px`;\n        canvas.style.height = `${deviceLogicalHeight}px`;\n        let targetEl;\n        if (typeof target === 'string') {\n            targetEl = document.getElementById(target);\n        }\n        else {\n            targetEl = target;\n        }\n        if (!targetEl) {\n            throw new Error('Could not find target element');\n        }\n        // Hook up the driver's callbacks\n        driver.onCreateNode = (node) => {\n            this.nodes.set(node.id, node);\n        };\n        driver.onBeforeDestroyNode = (node) => {\n            this.nodes.delete(node.id);\n        };\n        driver.onFpsUpdate = (fps) => {\n            this.emit('fpsUpdate', fps);\n        };\n        targetEl.appendChild(canvas);\n    }\n    /**\n     * Initialize the renderer\n     *\n     * @remarks\n     * This method must be called and resolved asyncronously before any other\n     * methods are called.\n     */\n    async init() {\n        await this.driver.init(this, this.settings, this.canvas);\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.root = this.driver.getRootNode();\n    }\n    /**\n     * Create a new scene graph node\n     *\n     * @remarks\n     * A node is the main graphical building block of the Renderer scene graph. It\n     * can be a container for other nodes, or it can be a leaf node that renders a\n     * solid color, gradient, image, or specific texture, using a specific shader.\n     *\n     * To create a text node, see {@link createTextNode}.\n     *\n     * See {@link INode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createNode(props) {\n        return this.driver.createNode(this.resolveNodeDefaults(props));\n    }\n    /**\n     * Create a new scene graph text node\n     *\n     * @remarks\n     * A text node is the second graphical building block of the Renderer scene\n     * graph. It renders text using a specific text renderer that is automatically\n     * chosen based on the font requested and what type of fonts are installed\n     * into an app via a CoreExtension.\n     *\n     * See {@link ITextNode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createTextNode(props) {\n        return this.driver.createTextNode({\n            ...this.resolveNodeDefaults(props),\n            text: props.text ?? '',\n            textRendererOverride: props.textRendererOverride ?? null,\n            fontSize: props.fontSize ?? 16,\n            fontFamily: props.fontFamily ?? 'sans-serif',\n            fontStyle: props.fontStyle ?? 'normal',\n            fontWeight: props.fontWeight ?? 'normal',\n            fontStretch: props.fontStretch ?? 'normal',\n            textAlign: props.textAlign ?? 'left',\n            contain: props.contain ?? 'none',\n            scrollable: props.scrollable ?? false,\n            scrollY: props.scrollY ?? 0,\n            offsetY: props.offsetY ?? 0,\n            letterSpacing: props.letterSpacing ?? 0,\n            debug: props.debug ?? {},\n        });\n    }\n    /**\n     * Resolves the default property values for a Node\n     *\n     * @remarks\n     * This method is used internally by the RendererMain to resolve the default\n     * property values for a Node. It is exposed publicly so that it can be used\n     * by Core Driver implementations.\n     *\n     * @param props\n     * @returns\n     */\n    resolveNodeDefaults(props) {\n        const color = props.color ?? 0xffffffff;\n        const colorTl = props.colorTl ?? props.colorTop ?? props.colorLeft ?? color;\n        const colorTr = props.colorTr ?? props.colorTop ?? props.colorRight ?? color;\n        const colorBl = props.colorBl ?? props.colorBottom ?? props.colorLeft ?? color;\n        const colorBr = props.colorBr ?? props.colorBottom ?? props.colorRight ?? color;\n        return {\n            x: props.x ?? 0,\n            y: props.y ?? 0,\n            width: props.width ?? 0,\n            height: props.height ?? 0,\n            alpha: props.alpha ?? 1,\n            clipping: props.clipping ?? false,\n            color,\n            colorTop: props.colorTop ?? color,\n            colorBottom: props.colorBottom ?? color,\n            colorLeft: props.colorLeft ?? color,\n            colorRight: props.colorRight ?? color,\n            colorBl,\n            colorBr,\n            colorTl,\n            colorTr,\n            zIndex: props.zIndex ?? 0,\n            zIndexLocked: props.zIndexLocked ?? 0,\n            parent: props.parent ?? null,\n            texture: props.texture ?? null,\n            shader: props.shader ?? null,\n            // Since setting the `src` will trigger a texture load, we need to set it after\n            // we set the texture. Otherwise, problems happen.\n            src: props.src ?? '',\n            scale: props.scale ?? null,\n            scaleX: props.scaleX ?? props.scale ?? 1,\n            scaleY: props.scaleY ?? props.scale ?? 1,\n            mount: props.mount ?? 0,\n            mountX: props.mountX ?? props.mount ?? 0,\n            mountY: props.mountY ?? props.mount ?? 0,\n            pivot: props.pivot ?? 0.5,\n            pivotX: props.pivotX ?? props.pivot ?? 0.5,\n            pivotY: props.pivotY ?? props.pivot ?? 0.5,\n            rotation: props.rotation ?? 0,\n        };\n    }\n    /**\n     * Destroy a node\n     *\n     * @remarks\n     * This method destroys a node but does not destroy its children.\n     *\n     * @param node\n     * @returns\n     */\n    destroyNode(node) {\n        return this.driver.destroyNode(node);\n    }\n    /**\n     * Create a new texture reference\n     *\n     * @remarks\n     * This method creates a new reference to a texture. The texture is not\n     * loaded until it is used on a node.\n     *\n     * It can be assigned to a node's `texture` property, or it can be used\n     * when creating a SubTexture.\n     *\n     * @param textureType\n     * @param props\n     * @param options\n     * @returns\n     */\n    createTexture(textureType, props, options) {\n        const id = this.nextTextureId++;\n        const desc = {\n            descType: 'texture',\n            txType: textureType,\n            props,\n            options: {\n                ...options,\n                // This ID is used to identify the texture in the CoreTextureManager's\n                // ID Texture Map cache.\n                id,\n            },\n        };\n        this.textureTracker.registerTexture(desc);\n        return desc;\n    }\n    /**\n     * Create a new shader reference\n     *\n     * @remarks\n     * This method creates a new reference to a shader. The shader is not\n     * loaded until it is used on a Node.\n     *\n     * It can be assigned to a Node's `shader` property.\n     *\n     * @param shaderType\n     * @param props\n     * @returns\n     */\n    createShader(shaderType, props) {\n        return {\n            descType: 'shader',\n            shType: shaderType,\n            props: props,\n        };\n    }\n    /**\n     * Get a Node by its ID\n     *\n     * @param id\n     * @returns\n     */\n    getNodeById(id) {\n        return this.nodes.get(id) || null;\n    }\n    toggleFreeze() {\n        throw new Error('Not implemented');\n    }\n    advanceFrame() {\n        throw new Error('Not implemented');\n    }\n    /**\n     * Re-render the current frame without advancing any running animations.\n     *\n     * @remarks\n     * Any state changes will be reflected in the re-rendered frame. Useful for\n     * debugging.\n     *\n     * May not do anything if the render loop is running on a separate worker.\n     */\n    rerender() {\n        throw new Error('Not implemented');\n    }\n}\n//# sourceMappingURL=RendererMain.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Core Utility Functions\n *\n * @module\n */\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport const RANDOM = Math.random;\nexport const ANGLE_ORDER = 'zyx';\nconst degree = Math.PI / 180;\nexport const setMatrixArrayType = (type) => {\n    ARRAY_TYPE = type;\n};\nexport const toRadian = (a) => {\n    return a * degree;\n};\nexport const equals = (a, b) => {\n    return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n};\nexport const rand = (min, max) => {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n};\nexport const isPowerOfTwo = (value) => {\n    return value && !(value & (value - 1));\n};\nconst getTimingBezier = (a, b, c, d) => {\n    const xc = 3.0 * a;\n    const xb = 3.0 * (c - a) - xc;\n    const xa = 1.0 - xc - xb;\n    const yc = 3.0 * b;\n    const yb = 3.0 * (d - b) - yc;\n    const ya = 1.0 - yc - yb;\n    return function (time) {\n        if (time >= 1.0) {\n            return 1;\n        }\n        if (time <= 0) {\n            return 0;\n        }\n        let t = 0.5, cbx, cbxd, dx;\n        for (let it = 0; it < 20; it++) {\n            cbx = t * (t * (t * xa + xb) + xc);\n            dx = time - cbx;\n            if (dx > -1e-8 && dx < 1e-8) {\n                return t * (t * (t * ya + yb) + yc);\n            }\n            // Cubic bezier derivative.\n            cbxd = t * (t * (3 * xa) + 2 * xb) + xc;\n            if (cbxd > 1e-10 && cbxd < 1e-10) {\n                // Problematic. Fall back to binary search method.\n                break;\n            }\n            t += dx / cbxd;\n        }\n        // Fallback: binary search method. This is more reliable when there are near-0 slopes.\n        let minT = 0;\n        let maxT = 1;\n        for (let it = 0; it < 20; it++) {\n            t = 0.5 * (minT + maxT);\n            cbx = t * (t * (t * xa + xb) + xc);\n            dx = time - cbx;\n            if (dx > -1e-8 && dx < 1e-8) {\n                // Solution found!\n                return t * (t * (t * ya + yb) + yc);\n            }\n            if (dx < 0) {\n                maxT = t;\n            }\n            else {\n                minT = t;\n            }\n        }\n    };\n};\nexport const getTimingFunction = (str) => {\n    switch (str) {\n        case 'linear':\n            return function (time) {\n                return time;\n            };\n        case 'ease':\n            return getTimingBezier(0.25, 0.1, 0.25, 1.0);\n        case 'ease-in':\n            return getTimingBezier(0.42, 0, 1.0, 1.0);\n        case 'ease-out':\n            return getTimingBezier(0, 0, 0.58, 1.0);\n        case 'ease-in-out':\n            return getTimingBezier(0.42, 0, 0.58, 1.0);\n        case 'ease-in-sine':\n            return getTimingBezier(0.12, 0, 0.39, 0);\n        case 'ease-out-sine':\n            return getTimingBezier(0.12, 0, 0.39, 0);\n        case 'ease-in-out-sine':\n            return getTimingBezier(0.37, 0, 0.63, 1);\n        case 'ease-in-cubic':\n            return getTimingBezier(0.32, 0, 0.67, 0);\n        case 'ease-out-cubic':\n            return getTimingBezier(0.33, 1, 0.68, 1);\n        case 'ease-in-out-cubic':\n            return getTimingBezier(0.65, 0, 0.35, 1);\n        case 'ease-in-circ':\n            return getTimingBezier(0.55, 0, 1, 0.45);\n        case 'ease-out-circ':\n            return getTimingBezier(0, 0.55, 0.45, 1);\n        case 'ease-in-out-circ':\n            return getTimingBezier(0.85, 0, 0.15, 1);\n        case 'ease-in-back':\n            return getTimingBezier(0.36, 0, 0.66, -0.56);\n        case 'ease-out-back':\n            return getTimingBezier(0.34, 1.56, 0.64, 1);\n        case 'ease-in-out-back':\n            return getTimingBezier(0.68, -0.6, 0.32, 1.6);\n        case 'step-start':\n            return function () {\n                return 1;\n            };\n        case 'step-end':\n            return function (time) {\n                return time === 1 ? 1 : 0;\n            };\n        default:\n            // eslint-disable-next-line no-case-declarations\n            const s = 'cubic-bezier(';\n            if (str && str.indexOf(s) === 0) {\n                const parts = str\n                    .substr(s.length, str.length - s.length - 1)\n                    .split(',');\n                if (parts.length !== 4) {\n                    console.warn('Unknown timing function: ' + str);\n                    // Fallback: use linear.\n                    return function (time) {\n                        return time;\n                    };\n                }\n                const a = parseFloat(parts[0] || '0.42');\n                const b = parseFloat(parts[1] || '0');\n                const c = parseFloat(parts[2] || '1');\n                const d = parseFloat(parts[3] || '1');\n                if (isNaN(a) || isNaN(b) || isNaN(c) || isNaN(d)) {\n                    console.warn(' Unknown timing function: ' + str);\n                    // Fallback: use linear.\n                    return function (time) {\n                        return time;\n                    };\n                }\n                return getTimingBezier(a, b, c, d);\n            }\n            else {\n                console.warn('Unknown timing function: ' + str);\n                // Fallback: use linear.\n                return function (time) {\n                    return time;\n                };\n            }\n    }\n};\nif (!Math.hypot)\n    Math.hypot = (...args) => {\n        let y = 0, i = args.length;\n        while (i--) {\n            y += args[i] * args[i];\n        }\n        return Math.sqrt(y);\n    };\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getTimingFunction } from '../utils.js';\nimport { mergeColorProgress } from '../../utils.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nexport class CoreAnimation extends EventEmitter {\n    node;\n    props;\n    settings;\n    propStartValues = {};\n    restoreValues = {};\n    progress = 0;\n    timingFunction;\n    propsList; //fixme - aint got not time for this\n    constructor(node, props, settings) {\n        super();\n        this.node = node;\n        this.props = props;\n        this.settings = settings;\n        this.propStartValues = {};\n        this.propsList = Object.keys(props);\n        this.propsList.forEach((propName) => {\n            this.propStartValues[propName] = node[propName];\n        });\n        this.timingFunction = (t) => t;\n        if (settings.easing && typeof settings.easing === 'string') {\n            this.timingFunction = getTimingFunction(settings.easing);\n        }\n    }\n    reset() {\n        this.progress = 0;\n        this.update(0);\n    }\n    restore() {\n        this.reset();\n        Object.keys(this.props).forEach((propName) => {\n            this.node[propName] = this.propStartValues[propName];\n        });\n    }\n    reverse() {\n        this.progress = 0;\n        Object.keys(this.props).forEach((propName) => {\n            // set the start value to the current value\n            const startValue = this.props[propName];\n            const endValue = this.propStartValues[propName];\n            // swap the start and end values\n            this.props[propName] = endValue;\n            this.propStartValues[propName] = startValue;\n        });\n        // restore stop method if we are not looping\n        if (!this.settings.loop) {\n            this.settings.stopMethod = false;\n        }\n    }\n    applyEasing(p, s, e) {\n        return (this.timingFunction(p) || p) * (e - s) + s;\n    }\n    update(dt) {\n        const { duration, loop, easing, stopMethod } = this.settings;\n        if (!duration) {\n            this.emit('finished', {});\n            return;\n        }\n        this.progress += dt / duration;\n        if (this.progress > 1) {\n            this.progress = loop ? 0 : 1;\n            if (stopMethod) {\n                // If there's a stop method emit finished so the stop method can be applied.\n                // TODO: We should probably reevaluate how stopMethod is implemented as currently\n                // stop method 'reset' does not work when looping.\n                this.emit('finished', {});\n                return;\n            }\n        }\n        for (let i = 0; i < this.propsList.length; i++) {\n            const propName = this.propsList[i];\n            const propValue = this.props[propName];\n            const startValue = this.propStartValues[propName];\n            const endValue = propValue;\n            if (propName.indexOf('color') !== -1) {\n                // check if we have to change the color to begin with\n                if (startValue === endValue) {\n                    this.node[propName] = startValue;\n                    continue;\n                }\n                if (easing) {\n                    const easingProgressValue = this.timingFunction(this.progress) || this.progress;\n                    const easingColorValue = mergeColorProgress(startValue, endValue, easingProgressValue);\n                    this.node[propName] = easingColorValue;\n                    continue;\n                }\n                this.node[propName] = mergeColorProgress(startValue, endValue, this.progress);\n                continue;\n            }\n            if (easing) {\n                this.node[propName] = this.applyEasing(this.progress, startValue, endValue);\n                continue;\n            }\n            this.node[propName] =\n                startValue + (endValue - startValue) * this.progress;\n        }\n        if (this.progress === 1) {\n            this.emit('finished', {});\n        }\n    }\n}\n//# sourceMappingURL=CoreAnimation.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nexport class CoreAnimationController {\n    manager;\n    animation;\n    stoppedPromise = null;\n    /**\n     * If this is null, then the animation is in a finished / stopped state.\n     */\n    stoppedResolve = null;\n    constructor(manager, animation) {\n        this.manager = manager;\n        this.animation = animation;\n        this.state = 'stopped';\n    }\n    state;\n    start() {\n        this.makeStoppedPromise();\n        this.animation.once('finished', this.finished.bind(this));\n        // prevent registering the same animation twice\n        if (!this.manager.activeAnimations.has(this.animation)) {\n            this.manager.registerAnimation(this.animation);\n        }\n        this.state = 'running';\n        return this;\n    }\n    stop() {\n        this.manager.unregisterAnimation(this.animation);\n        if (this.stoppedResolve !== null) {\n            this.stoppedResolve();\n            this.stoppedResolve = null;\n        }\n        this.animation.reset();\n        this.state = 'stopped';\n        return this;\n    }\n    pause() {\n        this.manager.unregisterAnimation(this.animation);\n        this.state = 'paused';\n        return this;\n    }\n    restore() {\n        this.stoppedResolve = null;\n        this.animation.restore();\n        return this;\n    }\n    waitUntilStopped() {\n        this.makeStoppedPromise();\n        const promise = this.stoppedPromise;\n        assertTruthy(promise);\n        return promise;\n    }\n    makeStoppedPromise() {\n        if (this.stoppedResolve === null) {\n            this.stoppedPromise = new Promise((resolve) => {\n                this.stoppedResolve = resolve;\n            });\n        }\n    }\n    finished() {\n        assertTruthy(this.stoppedResolve);\n        // If the animation is looping, then we need to restart it.\n        const { loop, stopMethod } = this.animation.settings;\n        if (stopMethod === 'reverse') {\n            this.animation.reverse();\n            this.start();\n            return;\n        }\n        // resolve promise\n        this.stoppedResolve();\n        this.stoppedResolve = null;\n        if (loop) {\n            return;\n        }\n        // unregister animation\n        this.manager.unregisterAnimation(this.animation);\n    }\n}\n//# sourceMappingURL=CoreAnimationController.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const getNormalizedRgbaComponents = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    return [r / 255, g / 255, b / 255, a / 255];\n};\nexport const getRgbaComponents = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    return [r, g, b, a];\n};\nexport const norm = (rgba) => {\n    const r = rgba >>> 24;\n    const g = (rgba >>> 16) & 0xff;\n    const b = (rgba >>> 8) & 0xff;\n    const a = rgba & 0xff;\n    const rgbaArr = [r / 255, g / 255, b / 255, a / 255];\n    rgbaArr[0] = Math.max(0, Math.min(255, rgbaArr[0]));\n    rgbaArr[1] = Math.max(0, Math.min(255, rgbaArr[1]));\n    rgbaArr[2] = Math.max(0, Math.min(255, rgbaArr[2]));\n    rgbaArr[3] = Math.max(0, Math.min(255, rgbaArr[3]));\n    let v = ((rgbaArr[3] | 0) << 24) +\n        ((rgbaArr[0] | 0) << 16) +\n        ((rgbaArr[1] | 0) << 8) +\n        (rgbaArr[2] | 0);\n    if (v < 0) {\n        v = 0xffffffff + v + 1;\n    }\n    return v;\n};\nexport function getNormalizedAlphaComponent(rgba) {\n    return (rgba & 0xff) / 255.0;\n}\n/**\n * Get a CSS color string from a RGBA color\n *\n * @param color\n * @returns\n */\nexport function getRgbaString(color) {\n    const r = Math.floor(color[0] * 255.0);\n    const g = Math.floor(color[1] * 255.0);\n    const b = Math.floor(color[2] * 255.0);\n    const a = Math.floor(color[3] * 255.0);\n    return `rgba(${r},${g},${b},${a.toFixed(4)})`;\n}\nexport function createBound(x1, y1, x2, y2, out) {\n    if (out) {\n        out.x1 = x1;\n        out.y1 = y1;\n        out.x2 = x2;\n        out.y2 = y2;\n        return out;\n    }\n    return {\n        x1,\n        y1,\n        x2,\n        y2,\n    };\n}\nexport function intersectBound(a, b, out) {\n    const intersection = createBound(Math.max(a.x1, b.x1), Math.max(a.y1, b.y1), Math.min(a.x2, b.x2), Math.min(a.y2, b.y2), out);\n    if (intersection.x1 < intersection.x2 && intersection.y1 < intersection.y2) {\n        return intersection;\n    }\n    return createBound(0, 0, 0, 0, intersection);\n}\nexport function intersectRect(a, b) {\n    const x = Math.max(a.x, b.x);\n    const y = Math.max(a.y, b.y);\n    const width = Math.min(a.x + a.width, b.x + b.width) - x;\n    const height = Math.min(a.y + a.height, b.y + b.height) - y;\n    if (width > 0 && height > 0) {\n        return {\n            x,\n            y,\n            width,\n            height,\n        };\n    }\n    return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n    };\n}\nexport function compareRect(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a === null || b === null) {\n        return false;\n    }\n    return (a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height);\n}\nexport function isBoundPositive(bound) {\n    return bound.x1 < bound.x2 && bound.y1 < bound.y2;\n}\nexport function isRectPositive(rect) {\n    return rect.width > 0 && rect.height > 0;\n}\n//# sourceMappingURL=utils.js.map","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n// Matrix3d is a 3x3 matrix in column-major order because that's how WebGL likes it.\n// The matrix is stored in a Float32Array in the following order:\n// | 0 3 6 |\n// | 1 4 7 |\n// | 2 5 8 |\n// The following constants are used to index into the array in a row-major way.\nconst m0 = 0;\nconst m1 = 3;\nconst m2 = 6;\nconst m3 = 1;\nconst m4 = 4;\nconst m5 = 7;\nconst m6 = 2;\nconst m7 = 5;\nconst m8 = 8;\n/**\n * A 3x3 matrix representing a 2D transformation.\n *\n * @remarks\n * The matrix is stored in column-major order in the `data` property which can\n * be passed directly to a WebGL shader uniform.\n *\n * The matrix is stored in a Float32Array in the following index order:\n * | 0 3 6 |\n * | 1 4 7 |\n * | 2 5 8 |\n *\n * Only the first two rows are really used for the transformation. The last row is\n * generally always `[0, 0, 1]` if you only use the 2D transformation methods\n * provided by this class.\n *\n * For convenience, entries in the first two rows can be accessed by the following\n * getter properties:\n * | ta tb tx |\n * | tc td ty |\n * | 0  0  1  |\n */\nexport class Matrix3d {\n    data;\n    /**\n     * Creates a new 3x3 matrix.\n     *\n     * @param entries Row-major 3x3 matrix\n     */\n    constructor(entries) {\n        if (entries) {\n            // Transpose the input matrix so that it's in column-major order.\n            this.data = new Float32Array(9);\n            this.data[m0] = entries[0];\n            this.data[m1] = entries[3];\n            this.data[m2] = entries[6];\n            this.data[m3] = entries[1];\n            this.data[m4] = entries[4];\n            this.data[m5] = entries[7];\n            this.data[m6] = entries[2];\n            this.data[m7] = entries[5];\n            this.data[m8] = entries[8];\n        }\n        else {\n            this.data = new Float32Array(9);\n        }\n    }\n    /**\n     * Returns a temporary matrix that can be used for calculations.\n     *\n     * @remarks\n     * This is useful for avoiding allocations in tight loops.\n     *\n     * The matrix is not guaranteed to be the same between calls.\n     *\n     * @returns\n     */\n    static get temp() {\n        return tempMatrix;\n    }\n    static multiply(a, b, out) {\n        const e0 = a.data[m0] * b.data[m0] +\n            a.data[m1] * b.data[m3] +\n            a.data[m2] * b.data[m6];\n        const e1 = a.data[m0] * b.data[m1] +\n            a.data[m1] * b.data[m4] +\n            a.data[m2] * b.data[m7];\n        const e2 = a.data[m0] * b.data[m2] +\n            a.data[m1] * b.data[m5] +\n            a.data[m2] * b.data[m8];\n        const e3 = a.data[m3] * b.data[m0] +\n            a.data[m4] * b.data[m3] +\n            a.data[m5] * b.data[m6];\n        const e4 = a.data[m3] * b.data[m1] +\n            a.data[m4] * b.data[m4] +\n            a.data[m5] * b.data[m7];\n        const e5 = a.data[m3] * b.data[m2] +\n            a.data[m4] * b.data[m5] +\n            a.data[m5] * b.data[m8];\n        const e6 = a.data[m6] * b.data[m0] +\n            a.data[m7] * b.data[m3] +\n            a.data[m8] * b.data[m6];\n        const e7 = a.data[m6] * b.data[m1] +\n            a.data[m7] * b.data[m4] +\n            a.data[m8] * b.data[m7];\n        const e8 = a.data[m6] * b.data[m2] +\n            a.data[m7] * b.data[m5] +\n            a.data[m8] * b.data[m8];\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = e0;\n        out.data[m1] = e1;\n        out.data[m2] = e2;\n        out.data[m3] = e3;\n        out.data[m4] = e4;\n        out.data[m5] = e5;\n        out.data[m6] = e6;\n        out.data[m7] = e7;\n        out.data[m8] = e8;\n        return out;\n    }\n    static identity(out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = 1;\n        out.data[m1] = 0;\n        out.data[m2] = 0;\n        out.data[m3] = 0;\n        out.data[m4] = 1;\n        out.data[m5] = 0;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static translate(x, y, out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = 1;\n        out.data[m1] = 0;\n        out.data[m2] = x;\n        out.data[m3] = 0;\n        out.data[m4] = 1;\n        out.data[m5] = y;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static scale(sx, sy, out) {\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = sx;\n        out.data[m1] = 0;\n        out.data[m2] = 0;\n        out.data[m3] = 0;\n        out.data[m4] = sy;\n        out.data[m5] = 0;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static rotate(angle, out) {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        if (!out) {\n            out = new Matrix3d();\n        }\n        out.data[m0] = cos;\n        out.data[m1] = -sin;\n        out.data[m2] = 0;\n        out.data[m3] = sin;\n        out.data[m4] = cos;\n        out.data[m5] = 0;\n        out.data[m6] = 0;\n        out.data[m7] = 0;\n        out.data[m8] = 1;\n        return out;\n    }\n    static copy(src, dst, transpose) {\n        if (!dst) {\n            dst = new Matrix3d();\n        }\n        dst.data[0] = src.data[0];\n        dst.data[1] = src.data[1];\n        dst.data[2] = src.data[2];\n        dst.data[3] = src.data[3];\n        dst.data[4] = src.data[4];\n        dst.data[5] = src.data[5];\n        dst.data[6] = src.data[6];\n        dst.data[7] = src.data[7];\n        dst.data[8] = src.data[8];\n        return dst;\n    }\n    translate(x, y) {\n        this.data[m2] = this.data[m0] * x + this.data[m1] * y + this.data[m2];\n        this.data[m5] = this.data[m3] * x + this.data[m4] * y + this.data[m5];\n        return this;\n    }\n    scale(sx, sy) {\n        this.data[m0] = this.data[m0] * sx;\n        this.data[m1] = this.data[m1] * sy;\n        this.data[m3] = this.data[m3] * sx;\n        this.data[m4] = this.data[m4] * sy;\n        return this;\n    }\n    rotate(angle) {\n        if (angle === 0 || !((angle % Math.PI) * 2)) {\n            return this;\n        }\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n        const e0 = this.data[m0] * cos + this.data[m1] * sin;\n        const e1 = this.data[m1] * cos - this.data[m0] * sin;\n        const e3 = this.data[m3] * cos + this.data[m4] * sin;\n        const e4 = this.data[m4] * cos - this.data[m3] * sin;\n        this.data[m0] = e0;\n        this.data[m1] = e1;\n        this.data[m3] = e3;\n        this.data[m4] = e4;\n        return this;\n    }\n    multiply(other) {\n        return Matrix3d.multiply(this, other, this);\n    }\n    get tx() {\n        return this.data[m2];\n    }\n    get ty() {\n        return this.data[m5];\n    }\n    get ta() {\n        return this.data[m0];\n    }\n    get tb() {\n        return this.data[m1];\n    }\n    get tc() {\n        return this.data[m3];\n    }\n    get td() {\n        return this.data[m4];\n    }\n    transformPoint(x, y) {\n        return [\n            this.data[m0] * x + this.data[m1] * y + this.data[m2],\n            this.data[m3] * x + this.data[m4] * y + this.data[m3],\n        ];\n    }\n}\nconst tempMatrix = new Matrix3d();\n//# sourceMappingURL=Matrix3d.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, mergeColorAlphaPremultiplied } from '../utils.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { getNormalizedAlphaComponent, intersectRect, } from './lib/utils.js';\nimport { Matrix3d } from './lib/Matrix3d.js';\nvar UpdateType;\n(function (UpdateType) {\n    /**\n     * Child updates\n     */\n    UpdateType[UpdateType[\"Children\"] = 1] = \"Children\";\n    /**\n     * Scale/Rotate transform update\n     */\n    UpdateType[UpdateType[\"ScaleRotate\"] = 2] = \"ScaleRotate\";\n    /**\n     * Translate transform update (x/y/width/height/pivot/mount)\n     */\n    UpdateType[UpdateType[\"Local\"] = 4] = \"Local\";\n    /**\n     * Global transform update\n     */\n    UpdateType[UpdateType[\"Global\"] = 8] = \"Global\";\n    /**\n     * Clipping rect update\n     */\n    UpdateType[UpdateType[\"Clipping\"] = 16] = \"Clipping\";\n    /**\n     * Calculated ZIndex update\n     */\n    UpdateType[UpdateType[\"CalculatedZIndex\"] = 32] = \"CalculatedZIndex\";\n    /**\n     * Z-Index Sorted Children update\n     */\n    UpdateType[UpdateType[\"ZIndexSortedChildren\"] = 64] = \"ZIndexSortedChildren\";\n    /**\n     * Premultiplied Colors\n     */\n    UpdateType[UpdateType[\"PremultipliedColors\"] = 128] = \"PremultipliedColors\";\n    /**\n     * World Alpha\n     *\n     * @remarks\n     * World Alpha = Parent World Alpha * Alpha\n     */\n    UpdateType[UpdateType[\"WorldAlpha\"] = 256] = \"WorldAlpha\";\n    /**\n     * None\n     */\n    UpdateType[UpdateType[\"None\"] = 0] = \"None\";\n    /**\n     * All\n     */\n    UpdateType[UpdateType[\"All\"] = 511] = \"All\";\n})(UpdateType || (UpdateType = {}));\nexport class CoreNode extends EventEmitter {\n    stage;\n    children = [];\n    props;\n    updateType = UpdateType.All;\n    globalTransform;\n    scaleRotateTransform;\n    localTransform;\n    clippingRect = null;\n    isRenderable = false;\n    parentClippingRect = null;\n    worldAlpha = 1;\n    premultipliedColorTl = 0;\n    premultipliedColorTr = 0;\n    premultipliedColorBl = 0;\n    premultipliedColorBr = 0;\n    calcZIndex = 0;\n    isComplex = false;\n    constructor(stage, props) {\n        super();\n        this.stage = stage;\n        this.props = {\n            ...props,\n            parent: null,\n        };\n        // Allow for parent to be processed appropriately\n        this.parent = props.parent;\n        this.updateScaleRotateTransform();\n    }\n    //#region Textures\n    loadTexture(textureType, props, options = null) {\n        // First unload any existing texture\n        if (this.props.texture) {\n            this.unloadTexture();\n        }\n        const { txManager } = this.stage;\n        const texture = txManager.loadTexture(textureType, props, options);\n        this.props.texture = texture;\n        this.props.textureOptions = options;\n        this.checkIsRenderable();\n        // If texture is already loaded / failed, trigger loaded event manually\n        // so that users get a consistent event experience.\n        // We do this in a microtask to allow listeners to be attached in the same\n        // synchronous task after calling loadTexture()\n        queueMicrotask(() => {\n            if (texture.state === 'loaded') {\n                this.onTextureLoaded(texture, texture.dimensions);\n            }\n            else if (texture.state === 'failed') {\n                this.onTextureFailed(texture, texture.error);\n            }\n            texture.on('loaded', this.onTextureLoaded);\n            texture.on('failed', this.onTextureFailed);\n        });\n    }\n    unloadTexture() {\n        if (this.props.texture) {\n            this.props.texture.off('loaded', this.onTextureLoaded);\n            this.props.texture.off('failed', this.onTextureFailed);\n        }\n        this.props.texture = null;\n        this.props.textureOptions = null;\n        this.checkIsRenderable();\n    }\n    onTextureLoaded = (target, dimensions) => {\n        // Texture was loaded. In case the RAF loop has already stopped, we request\n        // a render to ensure the texture is rendered.\n        this.stage.requestRender();\n        this.emit('loaded', {\n            type: 'texture',\n            dimensions,\n        });\n    };\n    onTextureFailed = (target, error) => {\n        this.emit('failed', {\n            type: 'texture',\n            error,\n        });\n    };\n    //#endregion Textures\n    loadShader(shaderType, props) {\n        const shManager = this.stage.renderer.getShaderManager();\n        assertTruthy(shManager);\n        const { shader, props: p } = shManager.loadShader(shaderType, props);\n        this.props.shader = shader;\n        this.props.shaderProps = p;\n        this.checkIsRenderable();\n    }\n    /**\n     * Change types types is used to determine the scope of the changes being applied\n     *\n     * @remarks\n     * See {@link UpdateType} for more information on each type\n     *\n     * @param type\n     */\n    setUpdateType(type) {\n        this.updateType |= type;\n        // If we're updating this node at all, we need to inform the parent\n        // (and all ancestors) that their children need updating as well\n        const parent = this.props.parent;\n        if (parent && !(parent.updateType & UpdateType.Children)) {\n            parent.setUpdateType(UpdateType.Children);\n        }\n    }\n    sortChildren() {\n        this.children.sort((a, b) => a.calcZIndex - b.calcZIndex);\n    }\n    updateScaleRotateTransform() {\n        this.scaleRotateTransform = Matrix3d.rotate(this.props.rotation, this.scaleRotateTransform).scale(this.props.scaleX, this.props.scaleY);\n    }\n    updateLocalTransform() {\n        assertTruthy(this.scaleRotateTransform);\n        const pivotTranslateX = this.props.pivotX * this.props.width;\n        const pivotTranslateY = this.props.pivotY * this.props.height;\n        const mountTranslateX = this.props.mountX * this.props.width;\n        const mountTranslateY = this.props.mountY * this.props.height;\n        this.localTransform = Matrix3d.translate(pivotTranslateX - mountTranslateX + this.props.x, pivotTranslateY - mountTranslateY + this.props.y, this.localTransform)\n            .multiply(this.scaleRotateTransform)\n            .translate(-pivotTranslateX, -pivotTranslateY);\n        this.setUpdateType(UpdateType.Global);\n    }\n    /**\n     * @todo: test for correct calculation flag\n     * @param delta\n     */\n    update(delta, parentClippingRect = null) {\n        if (this.updateType & UpdateType.ScaleRotate) {\n            this.updateScaleRotateTransform();\n            this.setUpdateType(UpdateType.Local);\n        }\n        if (this.updateType & UpdateType.Local) {\n            this.updateLocalTransform();\n            this.setUpdateType(UpdateType.Global);\n        }\n        const parent = this.props.parent;\n        let childUpdateType = UpdateType.None;\n        if (this.updateType & UpdateType.Global) {\n            assertTruthy(this.localTransform);\n            this.globalTransform = Matrix3d.copy(parent?.globalTransform || this.localTransform, this.globalTransform);\n            if (parent) {\n                this.globalTransform.multiply(this.localTransform);\n            }\n            this.setUpdateType(UpdateType.Clipping | UpdateType.Children);\n            childUpdateType |= UpdateType.Global;\n        }\n        if (this.updateType & UpdateType.Clipping) {\n            this.calculateClippingRect(parentClippingRect);\n            this.checkIsRenderable();\n            this.setUpdateType(UpdateType.Children);\n            childUpdateType |= UpdateType.Clipping;\n        }\n        if (this.updateType & UpdateType.WorldAlpha) {\n            if (parent) {\n                this.worldAlpha = parent.worldAlpha * this.props.alpha;\n            }\n            else {\n                this.worldAlpha = this.props.alpha;\n            }\n            this.setUpdateType(UpdateType.Children | UpdateType.PremultipliedColors);\n            childUpdateType |= UpdateType.WorldAlpha;\n        }\n        if (this.updateType & UpdateType.PremultipliedColors) {\n            this.premultipliedColorTl = mergeColorAlphaPremultiplied(this.props.colorTl, this.worldAlpha, true);\n            this.premultipliedColorTr = mergeColorAlphaPremultiplied(this.props.colorTr, this.worldAlpha, true);\n            this.premultipliedColorBl = mergeColorAlphaPremultiplied(this.props.colorBl, this.worldAlpha, true);\n            this.premultipliedColorBr = mergeColorAlphaPremultiplied(this.props.colorBr, this.worldAlpha, true);\n            this.checkIsRenderable();\n            this.setUpdateType(UpdateType.Children);\n            childUpdateType |= UpdateType.PremultipliedColors;\n        }\n        // No need to update zIndex if there is no parent\n        if (parent && this.updateType & UpdateType.CalculatedZIndex) {\n            this.calculateZIndex();\n            // Tell parent to re-sort children\n            parent.setUpdateType(UpdateType.ZIndexSortedChildren);\n        }\n        if (this.updateType & UpdateType.Children && this.children.length) {\n            this.children.forEach((child) => {\n                // Trigger the depenedent update types on the child\n                child.setUpdateType(childUpdateType);\n                // If child has no updates, skip\n                if (child.updateType === 0) {\n                    return;\n                }\n                child.update(delta, this.clippingRect);\n            });\n        }\n        // Sorting children MUST happen after children have been updated so\n        // that they have the oppotunity to update their calculated zIndex.\n        if (this.updateType & UpdateType.ZIndexSortedChildren) {\n            // reorder z-index\n            this.sortChildren();\n        }\n        // reset update type\n        this.updateType = 0;\n    }\n    // This function checks if the current node is renderable based on certain properties.\n    // It returns true if any of the specified properties are truthy or if any color property is not 0, otherwise it returns false.\n    checkIsRenderable() {\n        if (this.props.texture) {\n            return (this.isRenderable = true);\n        }\n        if (this.props.shader) {\n            return (this.isRenderable = true);\n        }\n        if (this.props.clipping) {\n            return (this.isRenderable = true);\n        }\n        const colors = [\n            'color',\n            'colorTop',\n            'colorBottom',\n            'colorLeft',\n            'colorRight',\n            'colorTl',\n            'colorTr',\n            'colorBl',\n            'colorBr',\n        ];\n        if (colors.some((color) => this.props[color] !== 0)) {\n            return (this.isRenderable = true);\n        }\n        return (this.isRenderable = false);\n    }\n    /**\n     * This function calculates the clipping rectangle for a node.\n     *\n     * If the parent clipping rectangle has not changed and the node's clipping rectangle is already set, the function returns immediately.\n     *\n     * The function then checks if the node is rotated. If the node requires clipping and is not rotated, a new clipping rectangle is created based on the node's global transform and dimensions.\n     * If a parent clipping rectangle exists, it is intersected with the node's clipping rectangle (if it exists), or replaces the node's clipping rectangle.\n     *\n     * Finally, the node's parentClippingRect and clippingRect properties are updated.\n     */\n    calculateClippingRect(parentClippingRect = null) {\n        assertTruthy(this.globalTransform);\n        if (this.parentClippingRect === parentClippingRect && this.clippingRect) {\n            return;\n        }\n        const gt = this.globalTransform;\n        const isRotated = gt.tb !== 0 || gt.tc !== 0;\n        let clippingRect = this.props.clipping && !isRotated\n            ? {\n                x: gt.tx,\n                y: gt.ty,\n                width: this.width * gt.ta,\n                height: this.height * gt.td,\n            }\n            : null;\n        if (parentClippingRect && clippingRect) {\n            clippingRect = intersectRect(parentClippingRect, clippingRect);\n        }\n        else if (parentClippingRect) {\n            clippingRect = parentClippingRect;\n        }\n        this.parentClippingRect = parentClippingRect;\n        this.clippingRect = clippingRect;\n    }\n    calculateZIndex() {\n        const props = this.props;\n        const z = props.zIndex || 0;\n        const p = props.parent?.zIndex || 0;\n        let zIndex = z;\n        if (props.parent?.zIndexLocked) {\n            zIndex = z < p ? z : p;\n        }\n        this.calcZIndex = zIndex;\n    }\n    renderQuads(renderer) {\n        const { width, height, texture, textureOptions, shader, shaderProps } = this.props;\n        const { premultipliedColorTl, premultipliedColorTr, premultipliedColorBl, premultipliedColorBr, } = this;\n        const { zIndex, worldAlpha, globalTransform: gt, clippingRect } = this;\n        assertTruthy(gt);\n        // add to list of renderables to be sorted before rendering\n        renderer.addQuad({\n            width,\n            height,\n            colorTl: premultipliedColorTl,\n            colorTr: premultipliedColorTr,\n            colorBl: premultipliedColorBl,\n            colorBr: premultipliedColorBr,\n            texture,\n            textureOptions,\n            zIndex,\n            shader,\n            shaderProps,\n            alpha: worldAlpha,\n            clippingRect,\n            tx: gt.tx,\n            ty: gt.ty,\n            ta: gt.ta,\n            tb: gt.tb,\n            tc: gt.tc,\n            td: gt.td,\n        });\n        // Calculate absolute X and Y based on all ancestors\n        // renderer.addQuad(absX, absY, w, h, color, texture, textureOptions, zIndex);\n    }\n    //#region Properties\n    get id() {\n        return this.props.id;\n    }\n    get x() {\n        return this.props.x;\n    }\n    set x(value) {\n        if (this.props.x !== value) {\n            this.props.x = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get absX() {\n        return (this.props.x +\n            (this.props.parent?.absX || this.props.parent?.globalTransform?.tx || 0));\n    }\n    get absY() {\n        return this.props.y + (this.props.parent?.absY ?? 0);\n    }\n    get y() {\n        return this.props.y;\n    }\n    set y(value) {\n        if (this.props.y !== value) {\n            this.props.y = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get width() {\n        return this.props.width;\n    }\n    set width(value) {\n        if (this.props.width !== value) {\n            this.props.width = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get height() {\n        return this.props.height;\n    }\n    set height(value) {\n        if (this.props.height !== value) {\n            this.props.height = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get scale() {\n        // The CoreNode `scale` property is only used by Animations.\n        // Unlike INode, `null` should never be possibility for Animations.\n        return this.scaleX;\n    }\n    set scale(value) {\n        // The CoreNode `scale` property is only used by Animations.\n        // Unlike INode, `null` should never be possibility for Animations.\n        this.scaleX = value;\n        this.scaleY = value;\n    }\n    get scaleX() {\n        return this.props.scaleX;\n    }\n    set scaleX(value) {\n        if (this.props.scaleX !== value) {\n            this.props.scaleX = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get scaleY() {\n        return this.props.scaleY;\n    }\n    set scaleY(value) {\n        if (this.props.scaleY !== value) {\n            this.props.scaleY = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get mount() {\n        return this.props.mount;\n    }\n    set mount(value) {\n        if (this.props.mountX !== value || this.props.mountY !== value) {\n            this.props.mountX = value;\n            this.props.mountY = value;\n            this.props.mount = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get mountX() {\n        return this.props.mountX;\n    }\n    set mountX(value) {\n        if (this.props.mountX !== value) {\n            this.props.mountX = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get mountY() {\n        return this.props.mountY;\n    }\n    set mountY(value) {\n        if (this.props.mountY !== value) {\n            this.props.mountY = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivot() {\n        return this.props.pivot;\n    }\n    set pivot(value) {\n        if (this.props.pivotX !== value || this.props.pivotY !== value) {\n            this.props.pivotX = value;\n            this.props.pivotY = value;\n            this.props.pivot = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivotX() {\n        return this.props.pivotX;\n    }\n    set pivotX(value) {\n        if (this.props.pivotX !== value) {\n            this.props.pivotX = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get pivotY() {\n        return this.props.pivotY;\n    }\n    set pivotY(value) {\n        if (this.props.pivotY !== value) {\n            this.props.pivotY = value;\n            this.setUpdateType(UpdateType.Local);\n        }\n    }\n    get rotation() {\n        return this.props.rotation;\n    }\n    set rotation(value) {\n        if (this.props.rotation !== value) {\n            this.props.rotation = value;\n            this.setUpdateType(UpdateType.ScaleRotate);\n        }\n    }\n    get alpha() {\n        return this.props.alpha;\n    }\n    set alpha(value) {\n        this.props.alpha = value;\n        this.setUpdateType(UpdateType.PremultipliedColors | UpdateType.WorldAlpha);\n    }\n    get clipping() {\n        return this.props.clipping;\n    }\n    set clipping(value) {\n        this.props.clipping = value;\n        this.setUpdateType(UpdateType.Clipping);\n    }\n    get color() {\n        return this.props.color;\n    }\n    set color(value) {\n        if (this.props.colorTl !== value ||\n            this.props.colorTr !== value ||\n            this.props.colorBl !== value ||\n            this.props.colorBr !== value) {\n            this.colorTl = value;\n            this.colorTr = value;\n            this.colorBl = value;\n            this.colorBr = value;\n        }\n        this.props.color = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTop() {\n        return this.props.colorTop;\n    }\n    set colorTop(value) {\n        if (this.props.colorTl !== value || this.props.colorTr !== value) {\n            this.colorTl = value;\n            this.colorTr = value;\n        }\n        this.props.colorTop = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBottom() {\n        return this.props.colorBottom;\n    }\n    set colorBottom(value) {\n        if (this.props.colorBl !== value || this.props.colorBr !== value) {\n            this.colorBl = value;\n            this.colorBr = value;\n        }\n        this.props.colorBottom = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorLeft() {\n        return this.props.colorLeft;\n    }\n    set colorLeft(value) {\n        if (this.props.colorTl !== value || this.props.colorBl !== value) {\n            this.colorTl = value;\n            this.colorBl = value;\n        }\n        this.props.colorLeft = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorRight() {\n        return this.props.colorRight;\n    }\n    set colorRight(value) {\n        if (this.props.colorTr !== value || this.props.colorBr !== value) {\n            this.colorTr = value;\n            this.colorBr = value;\n        }\n        this.props.colorRight = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTl() {\n        return this.props.colorTl;\n    }\n    set colorTl(value) {\n        this.props.colorTl = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorTr() {\n        return this.props.colorTr;\n    }\n    set colorTr(value) {\n        this.props.colorTr = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBl() {\n        return this.props.colorBl;\n    }\n    set colorBl(value) {\n        this.props.colorBl = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    get colorBr() {\n        return this.props.colorBr;\n    }\n    set colorBr(value) {\n        this.props.colorBr = value;\n        this.setUpdateType(UpdateType.PremultipliedColors);\n    }\n    // we're only interested in parent zIndex to test\n    // if we should use node zIndex is higher then parent zIndex\n    get zIndexLocked() {\n        return this.props.zIndexLocked || 0;\n    }\n    set zIndexLocked(value) {\n        this.props.zIndexLocked = value;\n        this.setUpdateType(UpdateType.CalculatedZIndex | UpdateType.Children);\n        this.children.forEach((child) => {\n            child.setUpdateType(UpdateType.CalculatedZIndex);\n        });\n    }\n    get zIndex() {\n        return this.props.zIndex;\n    }\n    set zIndex(value) {\n        this.props.zIndex = value;\n        this.setUpdateType(UpdateType.CalculatedZIndex | UpdateType.Children);\n        this.children.forEach((child) => {\n            child.setUpdateType(UpdateType.CalculatedZIndex);\n        });\n    }\n    get parent() {\n        return this.props.parent;\n    }\n    set parent(newParent) {\n        const oldParent = this.props.parent;\n        if (oldParent === newParent) {\n            return;\n        }\n        this.props.parent = newParent;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"CoreNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n            // Since this node has a new parent, to be safe, have it do a full update.\n            this.setUpdateType(UpdateType.All);\n            // Tell parent that it's children need to be updated and sorted.\n            newParent.setUpdateType(UpdateType.Children | UpdateType.ZIndexSortedChildren);\n        }\n        this.updateScaleRotateTransform();\n    }\n}\n//# sourceMappingURL=CoreNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { CoreAnimation } from '../../core/animations/CoreAnimation.js';\nimport { CoreAnimationController } from '../../core/animations/CoreAnimationController.js';\nimport { CoreNode } from '../../core/CoreNode.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nlet nextId = 1;\nexport function getNewId() {\n    return nextId++;\n}\nexport class MainOnlyNode extends EventEmitter {\n    rendererMain;\n    stage;\n    id;\n    coreNode;\n    // Prop stores\n    _children = [];\n    _src = '';\n    _parent = null;\n    _texture = null;\n    _shader = null;\n    constructor(props, rendererMain, stage, coreNode) {\n        super();\n        this.rendererMain = rendererMain;\n        this.stage = stage;\n        this.id = coreNode?.id ?? getNewId();\n        this.coreNode =\n            coreNode ||\n                new CoreNode(this.stage, {\n                    id: this.id,\n                    x: props.x,\n                    y: props.y,\n                    width: props.width,\n                    height: props.height,\n                    alpha: props.alpha,\n                    clipping: props.clipping,\n                    color: props.color,\n                    colorTop: props.colorTop,\n                    colorBottom: props.colorBottom,\n                    colorLeft: props.colorLeft,\n                    colorRight: props.colorRight,\n                    colorTl: props.colorTl,\n                    colorTr: props.colorTr,\n                    colorBl: props.colorBl,\n                    colorBr: props.colorBr,\n                    zIndex: props.zIndex,\n                    zIndexLocked: props.zIndexLocked,\n                    scaleX: props.scaleX,\n                    scaleY: props.scaleY,\n                    mountX: props.mountX,\n                    mountY: props.mountY,\n                    mount: props.mount,\n                    pivot: props.pivot,\n                    pivotX: props.pivotX,\n                    pivotY: props.pivotY,\n                    rotation: props.rotation,\n                    parent: null,\n                    shader: null,\n                    shaderProps: null,\n                    texture: null,\n                    textureOptions: null,\n                });\n        // Forward loaded/failed events\n        this.coreNode.on('loaded', this.onTextureLoaded);\n        this.coreNode.on('failed', this.onTextureFailed);\n        // Assign properties to this object\n        this.parent = props.parent;\n        this.shader = props.shader;\n        this.texture = props.texture;\n        this.src = props.src;\n    }\n    get x() {\n        return this.coreNode.x;\n    }\n    set x(value) {\n        this.coreNode.x = value;\n    }\n    get y() {\n        return this.coreNode.y;\n    }\n    set y(value) {\n        this.coreNode.y = value;\n    }\n    get width() {\n        return this.coreNode.width;\n    }\n    set width(value) {\n        this.coreNode.width = value;\n    }\n    get height() {\n        return this.coreNode.height;\n    }\n    set height(value) {\n        this.coreNode.height = value;\n    }\n    get alpha() {\n        return this.coreNode.alpha;\n    }\n    set alpha(value) {\n        this.coreNode.alpha = value;\n    }\n    get clipping() {\n        return this.coreNode.clipping;\n    }\n    set clipping(value) {\n        this.coreNode.clipping = value;\n    }\n    get color() {\n        return this.coreNode.color;\n    }\n    set color(value) {\n        this.coreNode.color = value;\n    }\n    get colorTop() {\n        return this.coreNode.colorTop;\n    }\n    set colorTop(value) {\n        this.coreNode.colorTop = value;\n    }\n    get colorBottom() {\n        return this.coreNode.colorBottom;\n    }\n    set colorBottom(value) {\n        this.coreNode.colorBottom = value;\n    }\n    get colorLeft() {\n        return this.coreNode.colorLeft;\n    }\n    set colorLeft(value) {\n        this.coreNode.colorLeft = value;\n    }\n    get colorRight() {\n        return this.coreNode.colorRight;\n    }\n    set colorRight(value) {\n        this.coreNode.colorRight = value;\n    }\n    get colorTl() {\n        return this.coreNode.colorTl;\n    }\n    set colorTl(value) {\n        this.coreNode.colorTl = value;\n    }\n    get colorTr() {\n        return this.coreNode.colorTr;\n    }\n    set colorTr(value) {\n        this.coreNode.colorTr = value;\n    }\n    get colorBl() {\n        return this.coreNode.colorBl;\n    }\n    set colorBl(value) {\n        this.coreNode.colorBl = value;\n    }\n    get colorBr() {\n        return this.coreNode.colorBr;\n    }\n    set colorBr(value) {\n        this.coreNode.colorBr = value;\n    }\n    get scale() {\n        if (this.scaleX !== this.scaleY) {\n            return null;\n        }\n        return this.coreNode.scaleX;\n    }\n    set scale(value) {\n        // We ignore `null` when it's set.\n        if (value === null) {\n            return;\n        }\n        this.coreNode.scaleX = value;\n        this.coreNode.scaleY = value;\n    }\n    get scaleX() {\n        return this.coreNode.scaleX;\n    }\n    set scaleX(value) {\n        this.coreNode.scaleX = value;\n    }\n    get scaleY() {\n        return this.coreNode.scaleY;\n    }\n    set scaleY(value) {\n        this.coreNode.scaleY = value;\n    }\n    get mount() {\n        return this.coreNode.mount;\n    }\n    set mount(value) {\n        this.coreNode.mount = value;\n    }\n    get mountX() {\n        return this.coreNode.mountX;\n    }\n    set mountX(value) {\n        this.coreNode.mountX = value;\n    }\n    get mountY() {\n        return this.coreNode.mountY;\n    }\n    set mountY(value) {\n        this.coreNode.mountY = value;\n    }\n    get pivot() {\n        return this.coreNode.pivot;\n    }\n    set pivot(value) {\n        this.coreNode.pivot = value;\n    }\n    get pivotX() {\n        return this.coreNode.pivotX;\n    }\n    set pivotX(value) {\n        this.coreNode.pivotX = value;\n    }\n    get pivotY() {\n        return this.coreNode.pivotY;\n    }\n    set pivotY(value) {\n        this.coreNode.pivotY = value;\n    }\n    get rotation() {\n        return this.coreNode.rotation;\n    }\n    set rotation(value) {\n        this.coreNode.rotation = value;\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(newParent) {\n        const oldParent = this._parent;\n        this._parent = newParent;\n        this.coreNode.parent = newParent?.coreNode ?? null;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"MainOnlyNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n        }\n    }\n    get children() {\n        return this._children;\n    }\n    get zIndex() {\n        return this.coreNode.zIndex;\n    }\n    set zIndex(value) {\n        this.coreNode.zIndex = value;\n    }\n    get zIndexLocked() {\n        return this.coreNode.zIndexLocked;\n    }\n    set zIndexLocked(value) {\n        this.coreNode.zIndexLocked = value;\n    }\n    get src() {\n        return this._src;\n    }\n    set src(imageUrl) {\n        if (this._src === imageUrl) {\n            return;\n        }\n        this._src = imageUrl;\n        if (!imageUrl) {\n            this.texture = null;\n            return;\n        }\n        this.texture = this.rendererMain.createTexture('ImageTexture', {\n            src: imageUrl,\n        });\n    }\n    //#region Texture\n    get texture() {\n        return this._texture;\n    }\n    set texture(texture) {\n        if (this._texture === texture) {\n            return;\n        }\n        if (this._texture) {\n            this.rendererMain.textureTracker.decrementTextureRefCount(this._texture);\n        }\n        if (texture) {\n            this.rendererMain.textureTracker.incrementTextureRefCount(texture);\n        }\n        this._texture = texture;\n        if (texture) {\n            this.coreNode.loadTexture(texture.txType, texture.props, texture.options);\n        }\n        else {\n            this.coreNode.unloadTexture();\n        }\n    }\n    onTextureLoaded = (target, payload) => {\n        this.emit('loaded', payload);\n    };\n    onTextureFailed = (target, payload) => {\n        this.emit('failed', payload);\n    };\n    //#endregion Texture\n    get shader() {\n        return this._shader;\n    }\n    set shader(shader) {\n        if (this._shader === shader) {\n            return;\n        }\n        this._shader = shader;\n        if (shader) {\n            this.coreNode.loadShader(shader.shType, shader.props);\n        }\n    }\n    destroy() {\n        this.emit('beforeDestroy', {});\n        this.parent = null;\n        this.texture = null;\n        this.emit('afterDestroy', {});\n        this.removeAllListeners();\n    }\n    flush() {\n        // No-op\n    }\n    animate(props, settings) {\n        const animation = new CoreAnimation(this.coreNode, props, settings);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n        const controller = new CoreAnimationController(this.stage.animationManager, animation);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return controller;\n    }\n}\n//# sourceMappingURL=MainOnlyNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Platform render loop initiator\n */\nexport const startLoop = (stage) => {\n    const runLoop = () => {\n        stage.updateAnimations();\n        if (!stage.hasSceneUpdates()) {\n            setTimeout(runLoop, 16.666666666666668);\n            return;\n        }\n        stage.drawFrame();\n        requestAnimationFrame(runLoop);\n    };\n    requestAnimationFrame(runLoop);\n};\n/**\n * Return unix timestamp\n * @return {number}\n */\nexport const getTimeStamp = () => {\n    return performance ? performance.now() : Date.now();\n};\n//# sourceMappingURL=platform.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreContextTexture {\n    textureSource;\n    constructor(textureSource) {\n        this.textureSource = textureSource;\n    }\n}\n//# sourceMappingURL=CoreContextTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreContextTexture } from './CoreContextTexture.js';\nexport class CoreRenderer {\n    stage;\n    constructor(stage) {\n        this.stage = stage;\n    }\n}\n//# sourceMappingURL=CoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreRenderOp {\n}\n//# sourceMappingURL=CoreRenderOp.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class CoreShader {\n    // abstract draw(): void;\n    static makeCacheKey(props) {\n        return false;\n    }\n    static resolveDefaults(props) {\n        return {};\n    }\n}\n//# sourceMappingURL=CoreShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n//#endregion Types\nexport function createShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    if (!shader) {\n        throw new Error();\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (success) {\n        return shader;\n    }\n    console.log(gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n}\nexport function createProgram(gl, vertexShader, fragmentShader) {\n    const program = gl.createProgram();\n    if (!program) {\n        throw new Error();\n    }\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (success) {\n        return program;\n    }\n    console.log(gl.getProgramInfoLog(program));\n    gl.deleteProgram(program);\n    return undefined;\n}\n//# sourceMappingURL=ShaderUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Generic WebGL Utility Functions\n *\n * @remarks\n * Nothing here should be coupled to Renderer logic / types.\n *\n * @param gl\n * @returns\n */\nexport function isWebGl2(gl) {\n    return (self.WebGL2RenderingContext && gl instanceof self.WebGL2RenderingContext);\n}\n//# sourceMappingURL=WebGlUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, hasOwn } from '../../../utils.js';\nimport { CoreShader } from '../CoreShader.js';\nimport { createProgram, createShader, } from './internal/ShaderUtils.js';\nimport { isWebGl2 } from './internal/WebGlUtils.js';\nexport class WebGlCoreShader extends CoreShader {\n    boundBufferCollection = null;\n    buffersBound = false;\n    program;\n    /**\n     * Vertex Array Object\n     *\n     * @remarks\n     * Used by WebGL2 Only\n     */\n    vao;\n    renderer;\n    gl;\n    attributeBuffers;\n    attributeLocations;\n    attributeNames;\n    uniformLocations;\n    uniformTypes;\n    supportsIndexedTextures;\n    constructor(options) {\n        super();\n        const renderer = (this.renderer = options.renderer);\n        const gl = (this.gl = this.renderer.gl);\n        this.supportsIndexedTextures = options.supportsIndexedTextures || false;\n        // Check that extensions are supported\n        const webGl2 = isWebGl2(gl);\n        const requiredExtensions = (webGl2 && options.webgl2Extensions) ||\n            (!webGl2 && options.webgl1Extensions) ||\n            [];\n        const glVersion = webGl2 ? '2.0' : '1.0';\n        requiredExtensions.forEach((extensionName) => {\n            if (!gl.getExtension(extensionName)) {\n                throw new Error(`Shader \"${this.constructor.name}\" requires extension \"${extensionName}\" for WebGL ${glVersion} but wasn't found`);\n            }\n        });\n        // Gather shader sources\n        // - If WebGL 2 and special WebGL 2 sources are provided, we copy those sources and delete\n        // the extra copy of them to save memory.\n        // TODO: This could be further made optimal by just caching the compiled shaders and completely deleting\n        // the source code\n        const shaderSources = options.shaderSources ||\n            this.constructor.shaderSources;\n        if (!shaderSources) {\n            throw new Error(`Shader \"${this.constructor.name}\" is missing shaderSources.`);\n        }\n        else if (webGl2 && shaderSources?.webGl2) {\n            shaderSources.fragment = shaderSources.webGl2.fragment;\n            shaderSources.vertex = shaderSources.webGl2.vertex;\n            delete shaderSources.webGl2;\n        }\n        const textureUnits = renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS;\n        const vertexSource = shaderSources.vertex instanceof Function\n            ? shaderSources.vertex(textureUnits)\n            : shaderSources.vertex;\n        const fragmentSource = shaderSources.fragment instanceof Function\n            ? shaderSources.fragment(textureUnits)\n            : shaderSources.fragment;\n        const vertexShader = createShader(gl, gl.VERTEX_SHADER, vertexSource);\n        const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentSource);\n        if (!vertexShader || !fragmentShader) {\n            throw new Error();\n        }\n        const program = createProgram(gl, vertexShader, fragmentShader);\n        if (!program) {\n            throw new Error();\n        }\n        this.program = program;\n        if (webGl2) {\n            const vao = gl.createVertexArray();\n            if (!vao) {\n                throw new Error();\n            }\n            this.vao = vao;\n            gl.bindVertexArray(this.vao);\n        }\n        this.attributeLocations = {};\n        this.attributeBuffers = {};\n        this.attributeNames = [];\n        [...options.attributes].forEach((attributeName) => {\n            const location = gl.getAttribLocation(this.program, attributeName);\n            if (location < 0) {\n                throw new Error(`${this.constructor.name}: Vertex shader must have an attribute \"${attributeName}\"!`);\n            }\n            const buffer = gl.createBuffer();\n            if (!buffer) {\n                throw new Error(`${this.constructor.name}: Could not create buffer for attribute \"${attributeName}\"`);\n            }\n            this.attributeLocations[attributeName] = location;\n            this.attributeBuffers[attributeName] = buffer;\n            this.attributeNames.push(attributeName);\n        });\n        this.uniformLocations = {};\n        this.uniformTypes = {};\n        options.uniforms.forEach((uniform) => {\n            const location = gl.getUniformLocation(this.program, uniform.name);\n            this.uniformTypes[uniform.name] = uniform.uniform;\n            if (!location) {\n                console.warn(`Shader \"${this.constructor.name}\" could not get uniform location for \"${uniform.name}\"`);\n                return;\n            }\n            this.uniformLocations[uniform.name] = location;\n        });\n    }\n    bindBufferAttribute(location, buffer, attribute) {\n        const gl = this.gl;\n        gl.enableVertexAttribArray(location);\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.vertexAttribPointer(location, attribute.size, attribute.type, attribute.normalized, attribute.stride, attribute.offset);\n    }\n    disableAttribute(location) {\n        this.gl.disableVertexAttribArray(location);\n    }\n    disableAttributes() {\n        for (const loc in this.attributeLocations) {\n            this.disableAttribute(this.attributeLocations[loc]);\n        }\n        this.boundBufferCollection = null;\n    }\n    /**\n     * Given two sets of Shader props destined for this Shader, determine if they can be batched together\n     * to reduce the number of draw calls.\n     *\n     * @remarks\n     * This is used by the {@link WebGlCoreRenderer} to determine if it can batch multiple consecutive draw\n     * calls into a single draw call.\n     *\n     * By default, this returns false (meaning no batching is allowed), but can be\n     * overridden by child classes to provide more efficient batching.\n     *\n     * @param propsA\n     * @param propsB\n     * @returns\n     */\n    canBatchShaderProps(propsA, propsB) {\n        return false;\n    }\n    bindRenderOp(renderOp, props) {\n        this.bindBufferCollection(renderOp.buffers);\n        if (renderOp.textures.length > 0) {\n            this.bindTextures(renderOp.textures);\n        }\n        const { gl } = renderOp;\n        // Bind standard automatic uniforms\n        this.setUniform('u_resolution', [gl.canvas.width, gl.canvas.height]); // !!!\n        this.setUniform('u_pixelRatio', renderOp.options.pixelRatio);\n        if (props) {\n            // Bind optional automatic uniforms\n            // These are only bound if their keys are present in the props.\n            if (hasOwn(props, '$dimensions')) {\n                let dimensions = props.$dimensions;\n                if (!dimensions) {\n                    dimensions = renderOp.dimensions;\n                }\n                this.setUniform('u_dimensions', [dimensions.width, dimensions.height]);\n            }\n            if (hasOwn(props, '$alpha')) {\n                let alpha = props.$alpha;\n                if (!alpha) {\n                    alpha = renderOp.alpha;\n                }\n                this.setUniform('u_alpha', alpha);\n            }\n            this.bindProps(props);\n        }\n    }\n    setUniform(name, ...value) {\n        // @ts-expect-error Typing of args is too funky apparently for TS\n        this.gl[this.uniformTypes[name]](this.uniformLocations[name], ...value);\n    }\n    bindBufferCollection(buffer) {\n        if (this.boundBufferCollection === buffer) {\n            return;\n        }\n        for (const attributeName in this.attributeLocations) {\n            const resolvedBuffer = buffer.getBuffer(attributeName);\n            const resolvedInfo = buffer.getAttributeInfo(attributeName);\n            assertTruthy(resolvedBuffer, `Buffer for \"${attributeName}\" not found`);\n            assertTruthy(resolvedInfo);\n            this.bindBufferAttribute(this.attributeLocations[attributeName], resolvedBuffer, resolvedInfo);\n        }\n        this.boundBufferCollection = buffer;\n    }\n    bindProps(props) {\n        // Implement in child class\n    }\n    bindTextures(textures) {\n        // no defaults\n    }\n    attach() {\n        this.gl.useProgram(this.program);\n        if (isWebGl2(this.gl) && this.vao) {\n            this.gl.bindVertexArray(this.vao);\n        }\n    }\n    detach() {\n        this.disableAttributes();\n    }\n    static shaderSources;\n}\n//# sourceMappingURL=WebGlCoreShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreRenderOp } from '../CoreRenderOp.js';\nimport { WebGlCoreShader } from './WebGlCoreShader.js';\nconst MAX_TEXTURES = 8; // TODO: get from gl\n/**\n * Can render multiple quads with multiple textures (up to vertex shader texture limit)\n *\n */\nexport class WebGlCoreRenderOp extends CoreRenderOp {\n    gl;\n    options;\n    buffers;\n    shader;\n    shaderProps;\n    alpha;\n    clippingRect;\n    dimensions;\n    bufferIdx;\n    zIndex;\n    length = 0;\n    numQuads = 0;\n    textures = [];\n    maxTextures;\n    constructor(gl, options, buffers, shader, shaderProps, alpha, clippingRect, dimensions, bufferIdx, zIndex) {\n        super();\n        this.gl = gl;\n        this.options = options;\n        this.buffers = buffers;\n        this.shader = shader;\n        this.shaderProps = shaderProps;\n        this.alpha = alpha;\n        this.clippingRect = clippingRect;\n        this.dimensions = dimensions;\n        this.bufferIdx = bufferIdx;\n        this.zIndex = zIndex;\n        this.gl = gl;\n        this.maxTextures = shader.supportsIndexedTextures\n            ? gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)\n            : 1;\n    }\n    addTexture(texture) {\n        const { textures, maxTextures } = this;\n        const existingIdx = textures.findIndex((t) => t === texture);\n        if (existingIdx !== -1) {\n            return existingIdx;\n        }\n        const newIdx = textures.length;\n        if (newIdx >= maxTextures) {\n            return 0xffffffff;\n        }\n        this.textures.push(texture);\n        return newIdx;\n    }\n    draw() {\n        const { gl, shader, shaderProps, options } = this;\n        // shaderOp.draw(this);\n        const { shManager } = options;\n        shManager.useShader(shader);\n        shader.bindRenderOp(this, shaderProps);\n        // TODO: Reduce calculations required\n        const quadIdx = (this.bufferIdx / 24) * 6 * 2;\n        // TODO: Move these somewhere else?\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        // Clipping\n        if (this.clippingRect) {\n            const { x, y, width, height } = this.clippingRect;\n            const pixelRatio = options.pixelRatio;\n            const canvasHeight = options.canvas.height;\n            const clipX = Math.round(x * pixelRatio);\n            const clipWidth = Math.round(width * pixelRatio);\n            const clipHeight = Math.round(height * pixelRatio);\n            const clipY = Math.round(canvasHeight - clipHeight - y * pixelRatio);\n            gl.enable(gl.SCISSOR_TEST);\n            gl.scissor(clipX, clipY, clipWidth, clipHeight);\n        }\n        else {\n            gl.disable(gl.SCISSOR_TEST);\n        }\n        gl.drawElements(gl.TRIANGLES, 6 * this.numQuads, gl.UNSIGNED_SHORT, quadIdx);\n    }\n}\n//# sourceMappingURL=WebGlCoreRenderOp.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Get device specific webgl parameters\n * @param gl\n */\nexport function getWebGlParameters(gl) {\n    const params = {\n        MAX_RENDERBUFFER_SIZE: 0,\n        MAX_TEXTURE_SIZE: 0,\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-explicit-any\n        MAX_VIEWPORT_DIMS: 0,\n        MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0,\n        MAX_TEXTURE_IMAGE_UNITS: 0,\n        MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0,\n        MAX_VERTEX_ATTRIBS: 0,\n        MAX_VARYING_VECTORS: 0,\n        MAX_VERTEX_UNIFORM_VECTORS: 0,\n        MAX_FRAGMENT_UNIFORM_VECTORS: 0,\n    };\n    // Map over all parameters and get them\n    const keys = Object.keys(params);\n    keys.forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        params[key] = gl.getParameter(gl[key]);\n    });\n    return params;\n}\n/**\n * Get device webgl extensions\n * @param gl\n */\nexport function getWebGlExtensions(gl) {\n    const extensions = {\n        ANGLE_instanced_arrays: null,\n        WEBGL_compressed_texture_s3tc: null,\n        WEBGL_compressed_texture_astc: null,\n        WEBGL_compressed_texture_etc: null,\n        WEBGL_compressed_texture_etc1: null,\n        WEBGL_compressed_texture_pvrtc: null,\n        WEBKIT_WEBGL_compressed_texture_pvrtc: null,\n        WEBGL_compressed_texture_s3tc_srgb: null,\n        OES_vertex_array_object: null,\n    };\n    // Map over all extensions and get them\n    const keys = Object.keys(extensions);\n    keys.forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        extensions[key] = gl.getExtension(key);\n    });\n    return extensions;\n}\n/**\n * Allocate big memory chunk that we\n * can re-use to draw quads\n * @param size\n */\nexport function createIndexBuffer(gl, size) {\n    if (!gl) {\n        throw new Error('No WebGL context');\n    }\n    const maxQuads = ~~(size / 80);\n    const indices = new Uint16Array(maxQuads * 6);\n    for (let i = 0, j = 0; i < maxQuads; i += 6, j += 4) {\n        indices[i] = j;\n        indices[i + 1] = j + 1;\n        indices[i + 2] = j + 2;\n        indices[i + 3] = j + 2;\n        indices[i + 4] = j + 1;\n        indices[i + 5] = j + 3;\n    }\n    const buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n}\n//# sourceMappingURL=RendererUtils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../utils.js';\nimport { isPowerOfTwo } from '../../utils.js';\nimport { CoreContextTexture } from '../CoreContextTexture.js';\nimport { isWebGl2 } from './internal/WebGlUtils.js';\nconst TRANSPARENT_TEXTURE_DATA = new Uint8Array([0, 0, 0, 0]);\n/**\n * A wrapper around a WebGLTexture that handles loading the texture data\n * from a Texture source and uploading it to the GPU as well as freeing\n * the uploaded texture.\n *\n * @remarks\n * When accessing the ctxTexture property, the texture will be loaded if\n * it hasn't been already. ctxTexture will always return a valid WebGLTexture\n * and trigger the loading/uploading of the texture's data if it hasn't been\n * loaded yet.\n */\nexport class WebGlCoreCtxTexture extends CoreContextTexture {\n    gl;\n    _nativeCtxTexture = null;\n    _state = 'freed';\n    _w = 0;\n    _h = 0;\n    constructor(gl, textureSource) {\n        super(textureSource);\n        this.gl = gl;\n    }\n    get ctxTexture() {\n        if (this._state === 'freed') {\n            this.load();\n        }\n        assertTruthy(this._nativeCtxTexture);\n        return this._nativeCtxTexture;\n    }\n    get w() {\n        return this._w;\n    }\n    get h() {\n        return this._h;\n    }\n    /**\n     * Load the texture data from the Texture source and upload it to the GPU\n     *\n     * @remarks\n     * This method is called automatically when accessing the ctxTexture property\n     * if the texture hasn't been loaded yet. But it can also be called manually\n     * to force the texture to be pre-loaded prior to accessing the ctxTexture\n     * property.\n     */\n    load() {\n        // If the texture is already loading or loaded, don't load it again.\n        if (this._state === 'loading' || this._state === 'loaded') {\n            return;\n        }\n        this._state = 'loading';\n        this.textureSource.setState('loading');\n        this.onLoadRequest()\n            .then(({ width, height }) => {\n            this._state = 'loaded';\n            this._w = width;\n            this._h = height;\n            // Update the texture source's width and height so that it can be used\n            // for rendering.\n            this.textureSource.setState('loaded', { width, height });\n        })\n            .catch((err) => {\n            this._state = 'failed';\n            this.textureSource.setState('failed', err);\n            console.error(err);\n        });\n    }\n    /**\n     * Called when the texture data needs to be loaded and uploaded to a texture\n     */\n    async onLoadRequest() {\n        this._nativeCtxTexture = this.createNativeCtxTexture();\n        const { gl } = this;\n        // On initial load request, create a 1x1 transparent texture to use until\n        // the texture data is finally loaded.\n        gl.bindTexture(gl.TEXTURE_2D, this._nativeCtxTexture);\n        // linear texture filtering\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        // texture wrapping method\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.bindTexture(gl.TEXTURE_2D, this._nativeCtxTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, TRANSPARENT_TEXTURE_DATA);\n        const textureData = await this.textureSource?.getTextureData();\n        let width = 0;\n        let height = 0;\n        assertTruthy(this._nativeCtxTexture);\n        // If textureData is null, the texture is empty (0, 0) and we don't need to\n        // upload any data to the GPU.\n        if (textureData.data instanceof ImageBitmap ||\n            textureData.data instanceof ImageData) {\n            const data = textureData.data;\n            width = data.width;\n            height = data.height;\n            gl.bindTexture(gl.TEXTURE_2D, this._nativeCtxTexture);\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !!textureData.premultiplyAlpha);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, data);\n            // generate mipmaps for power-of-2 textures or in WebGL2RenderingContext\n            if (isWebGl2(gl) || (isPowerOfTwo(width) && isPowerOfTwo(height))) {\n                gl.generateMipmap(gl.TEXTURE_2D);\n            }\n        }\n        else if (textureData.data === null) {\n            width = 0;\n            height = 0;\n            // Reset to a 1x1 transparent texture\n            gl.bindTexture(gl.TEXTURE_2D, this._nativeCtxTexture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, TRANSPARENT_TEXTURE_DATA);\n        }\n        else {\n            console.error(`WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned`, textureData);\n        }\n        return {\n            width,\n            height,\n        };\n    }\n    /**\n     * Free the WebGLTexture from the GPU\n     *\n     * @returns\n     */\n    free() {\n        if (this._state === 'freed') {\n            return;\n        }\n        this._state = 'freed';\n        this._w = 0;\n        this._h = 0;\n        if (!this._nativeCtxTexture) {\n            return;\n        }\n        this.gl.deleteTexture(this._nativeCtxTexture);\n        this._nativeCtxTexture = null;\n    }\n    createNativeCtxTexture() {\n        const nativeTexture = this.gl.createTexture();\n        if (!nativeTexture) {\n            throw new Error('Could not create WebGL Texture');\n        }\n        return nativeTexture;\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../common/EventEmitter.js';\n/**\n * Represents a source of texture data for a CoreContextTexture.\n *\n * @remarks\n * Texture sources are used to populate a CoreContextTexture when that texture\n * is loaded. Texture data retrieved by the CoreContextTexture by the\n * `getTextureData` method. It's the responsibility of the concerete `Texture`\n * subclass to implement this method appropriately.\n */\nexport class Texture extends EventEmitter {\n    txManager;\n    /**\n     * The dimensions of the texture\n     *\n     * @remarks\n     * Until the texture data is loaded for the first time the value will be\n     * `null`.\n     */\n    dimensions = null;\n    error = null;\n    state = 'loading';\n    constructor(txManager) {\n        super();\n        this.txManager = txManager;\n    }\n    /**\n     * Set the state of the texture\n     *\n     * @remark\n     * Intended for internal-use only but declared public so that it can be set\n     * by it's associated {@link CoreContextTexture}\n     *\n     * @param state\n     * @param args\n     */\n    setState(state, ...args) {\n        if (this.state !== state) {\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n            this.state = state;\n            if (state === 'loaded') {\n                const loadedArgs = args;\n                this.dimensions = loadedArgs[0];\n            }\n            else if (state === 'failed') {\n                const failedArgs = args;\n                this.error = failedArgs[0];\n            }\n            this.emit(state, ...args);\n        }\n    }\n    /**\n     * Make a cache key for this texture.\n     *\n     * @remarks\n     * Each concrete `Texture` subclass must implement this method to provide an\n     * appropriate cache key for the texture type including the texture's\n     * properties that uniquely identify a copy of the texture. If the texture\n     * type does not support caching, then this method should return `false`.\n     *\n     * @param props\n     * @returns\n     * A cache key for this texture or `false` if the texture type does not\n     * support caching.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static makeCacheKey(props) {\n        return false;\n    }\n    /**\n     * Resolve the default values for the texture's properties.\n     *\n     * @remarks\n     * Each concrete `Texture` subclass must implement this method to provide\n     * default values for the texture's optional properties.\n     *\n     * @param props\n     * @returns\n     * The default values for the texture's properties.\n     */\n    static resolveDefaults(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    props) {\n        return {};\n    }\n}\n//# sourceMappingURL=Texture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture } from './Texture.js';\n/**\n * Texture consisting of only a 1x1 color pixel\n *\n * @remarks\n * The pixel color is set with the {@link ColorTextureProps.color} prop.\n *\n * This is the default texture used for a Node if it's\n * {@link INodeWritableProps.texture} prop is set to `null` (the default)\n *\n * Generally the 1x1 color pixel is stretched to whatever the set dimensions of\n * a Node are.\n */\nexport class ColorTexture extends Texture {\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = ColorTexture.resolveDefaults(props || {});\n    }\n    get color() {\n        return this.props.color;\n    }\n    set color(color) {\n        this.props.color = color;\n    }\n    async getTextureData() {\n        const pixelData32 = new Uint32Array([this.color]);\n        const pixelData8 = new Uint8ClampedArray(pixelData32.buffer);\n        return {\n            data: new ImageData(pixelData8, 1, 1),\n            premultiplyAlpha: true,\n        };\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = ColorTexture.resolveDefaults(props);\n        return `ColorTexture,${resolvedProps.color}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            color: props.color || 0xffffffff,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=ColorTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture, } from './Texture.js';\n/**\n * A Texture that is a sub-region of another Texture.\n *\n * @remarks\n * The parent texture can be a Sprite Sheet/Texture Atlas and set using the\n * {@link SubTextureProps.texture} prop. The sub-region relative to the parent\n * texture is defined with the {@link SubTextureProps.x},\n * {@link SubTextureProps.y}, {@link SubTextureProps.width}, and\n * {@link SubTextureProps.height} pixel values.\n */\nexport class SubTexture extends Texture {\n    props;\n    parentTexture;\n    constructor(txManager, props) {\n        super(txManager);\n        this.parentTexture = this.txManager.loadTexture(props.texture.txType, props.texture.props, props.texture.options);\n        this.props = SubTexture.resolveDefaults(props || {});\n        // If parent texture is already loaded / failed, trigger loaded event manually\n        // so that users get a consistent event experience.\n        // We do this in a microtask to allow listeners to be attached in the same\n        // synchronous task after calling loadTexture()\n        queueMicrotask(() => {\n            const parentTx = this.parentTexture;\n            if (parentTx.state === 'loaded') {\n                this.onParentTxLoaded(parentTx, parentTx.dimensions);\n            }\n            else if (parentTx.state === 'failed') {\n                this.onParentTxFailed(parentTx, parentTx.error);\n            }\n            parentTx.on('loaded', this.onParentTxLoaded);\n            parentTx.on('failed', this.onParentTxFailed);\n        });\n    }\n    onParentTxLoaded = () => {\n        // We ignore the parent's passed dimensions, and simply use the SubTexture's\n        // configured dimensions (because that's all that matters here)\n        this.setState('loaded', {\n            width: this.props.width,\n            height: this.props.height,\n        });\n    };\n    onParentTxFailed = (target, error) => {\n        this.setState('failed', error);\n    };\n    async getTextureData() {\n        return {\n            data: this.props,\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static makeCacheKey(props) {\n        return false;\n    }\n    static resolveDefaults(props) {\n        return {\n            texture: props.texture,\n            x: props.x || 0,\n            y: props.y || 0,\n            width: props.width || 0,\n            height: props.height || 0,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=SubTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nexport class WebGlCoreCtxSubTexture extends WebGlCoreCtxTexture {\n    constructor(gl, textureSource) {\n        super(gl, textureSource);\n    }\n    async onLoadRequest() {\n        const props = await this.textureSource.getTextureData();\n        return {\n            width: props.data?.width || 0,\n            height: props.data?.height || 0,\n        };\n    }\n}\n//# sourceMappingURL=WebGlCoreCtxSubTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\nexport class DefaultShader extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2fv' },\n            ],\n        });\n    }\n    bindTextures(textures) {\n        const { gl } = this;\n        if (gl.getParameter(gl.TEXTURE_BINDING_2D) === textures[0].ctxTexture) {\n            return;\n        }\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, textures[0].ctxTexture);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=DefaultShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\n// import type { Texture } from '../textures/Texture';\nexport class DefaultShaderBatched extends WebGlCoreShader {\n    supportsIndexedTextures = true;\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: [\n                'a_position',\n                'a_textureCoordinate',\n                'a_color',\n                'a_textureIndex',\n            ],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_textures[0]', uniform: 'uniform1iv' },\n            ],\n        });\n    }\n    bindTextures(texture) {\n        const { renderer, gl } = this;\n        if (texture.length > renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS) {\n            throw new Error(`DefaultShaderBatched: Cannot bind more than ${renderer.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);\n        }\n        texture.forEach((t, i) => {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            gl.bindTexture(gl.TEXTURE_2D, t.ctxTexture);\n        });\n        const samplers = Array.from(Array(texture.length).keys());\n        this.setUniform('u_textures[0]', samplers);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: (textureUnits) => `\n      #define txUnits ${textureUnits}\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${textureUnits}], int idx, vec2 uv) {\n        ${Array.from(Array(textureUnits).keys())\n            .map((idx) => `\n          ${idx !== 0 ? 'else ' : ''}if (idx == ${idx}) {\n            return texture2D(textures[${idx}], uv);\n          }\n        `)\n            .join('')}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=DefaultShaderBatched.js.map","export class ShaderEffect {\n    priority = 1;\n    name = '';\n    ref;\n    target;\n    passParameters = '';\n    declaredUniforms = '';\n    uniformInfo = {};\n    static uniforms = {};\n    static methods;\n    static onShaderMask;\n    static onColorize;\n    static onEffectMask;\n    static getEffectKey(props) {\n        return '';\n    }\n    static getMethodParameters(uniforms, props) {\n        const res = [];\n        for (const u in uniforms) {\n            const uni = uniforms[u];\n            let define = '';\n            if (uni.size) {\n                define = `[${uni.size(props)}]`;\n            }\n            res.push(`${uni.type} ${u}${define}`);\n        }\n        return res.join(',');\n    }\n    constructor(options) {\n        const { ref, target, props = {} } = options;\n        this.ref = ref;\n        this.target = target;\n        const uniformInfo = {};\n        const passParameters = [];\n        let declaredUniforms = '';\n        const uniforms = this.constructor.uniforms || {};\n        for (const u in uniforms) {\n            const unif = uniforms[u];\n            const uniType = unif.type;\n            //make unique uniform name\n            const uniformName = `${ref}_${u}`;\n            let define = '';\n            if (unif.size) {\n                define = `[${unif.size(props)}]`;\n            }\n            passParameters.push(uniformName);\n            declaredUniforms += `uniform ${uniType} ${uniformName}${define};`;\n            uniformInfo[u] = { name: uniformName, uniform: uniforms[u].method };\n        }\n        this.passParameters = passParameters.join(',');\n        this.declaredUniforms = declaredUniforms;\n        this.uniformInfo = uniformInfo;\n    }\n    static resolveDefaults(props) {\n        return {};\n    }\n    static makeEffectKey(props) {\n        return false;\n    }\n}\n//# sourceMappingURL=ShaderEffect.js.map","import { WebGlCoreShader, } from '../WebGlCoreShader.js';\nimport { ShaderEffect } from './effects/ShaderEffect.js';\nexport class DynamicShader extends WebGlCoreShader {\n    effects = [];\n    constructor(renderer, props, effectContructors) {\n        const shader = DynamicShader.createShader(props, effectContructors);\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2fv' },\n                { name: 'u_dimensions', uniform: 'uniform2fv' },\n                { name: 'u_alpha', uniform: 'uniform1f' },\n                ...shader.uniforms,\n            ],\n            shaderSources: {\n                vertex: shader.vertex,\n                fragment: shader.fragment,\n            },\n        });\n        this.effects = shader.effects;\n    }\n    bindTextures(textures) {\n        const { gl } = this;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        const effects = this.renderer.shManager.getRegisteredEffects();\n        props.effects?.forEach((eff, index) => {\n            const effect = this.effects[index];\n            const fxClass = effects[effect.name];\n            const props = eff.props ?? {};\n            const uniInfo = effect.uniformInfo;\n            Object.keys(props).forEach((p) => {\n                const fxProp = fxClass.uniforms[p];\n                const propInfo = uniInfo[p];\n                let value = fxProp.validator\n                    ? fxProp.validator(props[p], props)\n                    : props[p];\n                if (Array.isArray(value)) {\n                    value = new Float32Array(value);\n                }\n                this.setUniform(propInfo.name, value);\n            });\n        });\n    }\n    static createShader(props, effectContructors) {\n        //counts duplicate effects\n        const effectNameCount = {};\n        const methods = {};\n        let declareUniforms = '';\n        const uniforms = [];\n        const uFx = [];\n        const effects = props.effects.map((effect) => {\n            const baseClass = effectContructors[effect.type];\n            const key = baseClass.getEffectKey(effect.props || {});\n            effectNameCount[key] = effectNameCount[key] ? ++effectNameCount[key] : 1;\n            const nr = effectNameCount[key];\n            if (nr === 1) {\n                uFx.push({ key, type: effect.type, props: effect.props });\n            }\n            //initialize new effect class;\n            const fxClass = new baseClass({\n                ref: `${key}${nr === 1 ? '' : nr}`,\n                target: key,\n                props: effect.props,\n            });\n            declareUniforms += fxClass.declaredUniforms;\n            uniforms.push(...Object.values(fxClass.uniformInfo));\n            return fxClass;\n        });\n        //build source\n        let effectMethods = '';\n        uFx?.forEach((fx) => {\n            const fxClass = effectContructors[fx.type];\n            const fxProps = fxClass.resolveDefaults((fx.props ?? {}));\n            const remap = [];\n            for (const m in fxClass.methods) {\n                let cm = m;\n                const fxMethod = fxClass.methods[m];\n                if (methods[m] && methods[m] !== fxMethod) {\n                    cm = DynamicShader.resolveMethodDuplicate(m, fxMethod, methods);\n                }\n                methods[cm] = fxMethod.replace('function', cm);\n                remap.push({ m, cm });\n            }\n            let onShaderMask = fxClass.onShaderMask instanceof Function\n                ? fxClass.onShaderMask(fxProps)\n                : fxClass.onShaderMask;\n            let onColorize = fxClass.onColorize instanceof Function\n                ? fxClass.onColorize(fxProps)\n                : fxClass.onColorize;\n            let onEffectMask = fxClass.onEffectMask instanceof Function\n                ? fxClass.onEffectMask(fxProps)\n                : fxClass.onEffectMask;\n            remap.forEach((r) => {\n                const { m, cm } = r;\n                const reg = new RegExp(`\\\\$${m}`, 'g');\n                if (onShaderMask) {\n                    onShaderMask = onShaderMask.replace(reg, cm);\n                }\n                if (onColorize) {\n                    onColorize = onColorize.replace(reg, cm);\n                }\n                if (onEffectMask) {\n                    onEffectMask = onEffectMask.replace(reg, cm);\n                }\n            });\n            const methodParameters = fxClass.getMethodParameters(fxClass.uniforms, fxProps);\n            const pm = methodParameters.length > 0 ? `, ${methodParameters}` : '';\n            if (onShaderMask) {\n                effectMethods += `\n        float fx_${fx.key}_onShaderMask(float shaderMask ${pm}) {\n          ${onShaderMask}\n        }\n        `;\n            }\n            if (onColorize) {\n                effectMethods += `\n          vec4 fx_${fx.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${pm}) {\n            ${onColorize}\n          }\n        `;\n            }\n            if (onEffectMask) {\n                effectMethods += `\n          vec4 fx_${fx.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${pm}) {\n            ${onEffectMask}\n          }\n        `;\n            }\n        });\n        let sharedMethods = '';\n        for (const m in methods) {\n            sharedMethods += methods[m];\n        }\n        //fill main functions\n        let currentMask = `mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))`;\n        let drawEffects = `\n\n    `;\n        for (let i = 0; i < effects.length; i++) {\n            const current = effects[i];\n            const pm = current.passParameters.length > 0 ? `, ${current.passParameters}` : '';\n            const currentClass = effectContructors[current.name];\n            if (currentClass.onShaderMask) {\n                drawEffects += `\n        shaderMask = fx_${current.target}_onShaderMask(shaderMask ${pm});\n        `;\n            }\n            if (currentClass.onColorize) {\n                drawEffects += `\n        maskColor = fx_${current.target}_onColorize(shaderMask, maskColor, shaderColor${pm});\n        `;\n            }\n            if (currentClass.onEffectMask) {\n                currentMask = `fx_${current.target}_onEffectMask(shaderMask, maskColor, shaderColor${pm})`;\n            }\n            const next = effects[i + 1];\n            if (next === undefined ||\n                effectContructors[next.name].onEffectMask) {\n                drawEffects += `\n          shaderColor = ${currentMask};\n        `;\n            }\n        }\n        return {\n            effects,\n            uniforms,\n            fragment: DynamicShader.fragment(declareUniforms, sharedMethods, effectMethods, drawEffects),\n            vertex: DynamicShader.vertex(),\n        };\n    }\n    static resolveMethodDuplicate(key, effectMethod, methodCollection, increment = 0) {\n        const m = key + (increment > 0 ? increment : '');\n        if (methodCollection[m] && methodCollection[m] !== effectMethod) {\n            return this.resolveMethodDuplicate(key, effectMethod, methodCollection, ++increment);\n        }\n        return m;\n    }\n    static resolveDefaults(props, effectContructors) {\n        return {\n            effects: (props.effects ?? []).map((effect) => ({\n                type: effect.type,\n                props: effectContructors[effect.type].resolveDefaults((effect.props || {})),\n            })),\n            $dimensions: {\n                width: 0,\n                height: 0,\n            },\n            $alpha: 0,\n        };\n    }\n    static makeCacheKey(props, effectContructors) {\n        let fx = '';\n        props.effects?.forEach((effect) => {\n            const baseClass = effectContructors[effect.type];\n            const key = baseClass.getEffectKey(effect.props || {});\n            fx += `,${key}`;\n        });\n        return `DynamicShader${fx}`;\n    }\n    static z$__type__Props;\n    static vertex = () => `\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  `;\n    static fragment = (uniforms, methods, effectMethods, drawEffects) => `\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${uniforms}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${methods}\n\n    ${effectMethods}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${drawEffects}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `;\n}\n//# sourceMappingURL=DynamicShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { WebGlCoreShader, } from '../WebGlCoreShader.js';\n/**\n * Similar to the {@link DefaultShader} but cuts out 4 rounded rectangle corners\n * as defined by the specified corner {@link RoundedRectangleProps.radius}\n */\nexport class RoundedRectangle extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate', 'a_color'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2f' },\n                { name: 'u_dimensions', uniform: 'uniform2fv' },\n                { name: 'u_radius', uniform: 'uniform1f' },\n            ],\n        });\n    }\n    static z$__type__Props;\n    static resolveDefaults(props) {\n        return {\n            radius: props.radius || 10,\n            $dimensions: {\n                width: 0,\n                height: 0,\n            },\n        };\n    }\n    bindTextures(textures) {\n        const { gl } = this;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        this.setUniform('u_radius', props.radius);\n    }\n    canBatchShaderProps(propsA, propsB) {\n        return (propsA.radius === propsB.radius &&\n            propsA.$dimensions.width === propsB.$dimensions.width &&\n            propsA.$dimensions.height === propsB.$dimensions.height);\n    }\n    static shaderSources = {\n        vertex: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    `,\n        fragment: `\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    `,\n    };\n}\n//# sourceMappingURL=RoundedRectangle.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../lib/utils.js';\nimport { WebGlCoreShader } from '../WebGlCoreShader.js';\nconst IDENTITY_MATRIX_3x3 = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);\n/**\n * SdfShader supports multi-channel and single-channel signed distance field textures.\n *\n * @remarks\n * This Shader is used by the {@link SdfTextRenderer}. Do not use thie Shader\n * directly. Instead create a Text Node and assign a SDF font family to it.\n *\n * @internalRemarks\n * The only thing this shader does to support multi-channel SDFs is to\n * add a median function to the fragment shader. If this one function call\n * ends up being a performance bottleneck we can always look at ways to\n * remove it.\n */\nexport class SdfShader extends WebGlCoreShader {\n    constructor(renderer) {\n        super({\n            renderer,\n            attributes: ['a_position', 'a_textureCoordinate'],\n            uniforms: [\n                { name: 'u_resolution', uniform: 'uniform2fv' },\n                { name: 'u_transform', uniform: 'uniformMatrix3fv' },\n                { name: 'u_scrollY', uniform: 'uniform1f' },\n                { name: 'u_pixelRatio', uniform: 'uniform1f' },\n                { name: 'u_texture', uniform: 'uniform2f' },\n                { name: 'u_color', uniform: 'uniform4fv' },\n                { name: 'u_size', uniform: 'uniform1f' },\n                { name: 'u_distanceRange', uniform: 'uniform1f' },\n                { name: 'u_debug', uniform: 'uniform1i' },\n            ],\n        });\n    }\n    bindTextures(textures) {\n        const { gl } = this;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, textures[0].ctxTexture);\n    }\n    bindProps(props) {\n        const resolvedProps = SdfShader.resolveDefaults(props);\n        for (const key in resolvedProps) {\n            if (key === 'transform') {\n                this.setUniform('u_transform', false, resolvedProps[key]);\n            }\n            else if (key === 'scrollY') {\n                this.setUniform('u_scrollY', resolvedProps[key]);\n            }\n            else if (key === 'color') {\n                const components = getNormalizedRgbaComponents(resolvedProps.color);\n                this.setUniform('u_color', components);\n            }\n            else if (key === 'size') {\n                this.setUniform('u_size', resolvedProps[key]);\n            }\n            else if (key === 'distanceRange') {\n                this.setUniform('u_distanceRange', resolvedProps[key]);\n            }\n            else if (key === 'debug') {\n                this.setUniform('u_debug', resolvedProps[key] ? 1.0 : 0.0);\n            }\n        }\n    }\n    static resolveDefaults(props = {}) {\n        return {\n            transform: props.transform ?? IDENTITY_MATRIX_3x3,\n            scrollY: props.scrollY ?? 0,\n            color: props.color ?? 0xffffffff,\n            size: props.size ?? 16,\n            distanceRange: props.distanceRange ?? 1.0,\n            debug: props.debug ?? false,\n        };\n    }\n    static shaderSources = {\n        vertex: `\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    `,\n        fragment: `\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    `,\n    };\n}\n//# sourceMappingURL=SdfShader.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Masks the current maskcolor with rounded corners similar to {@link RoundedRectangle}\n */\nexport class RadiusEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radius';\n    static getEffectKey() {\n        return `radius`;\n    }\n    static uniforms = {\n        radius: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            validator: (value) => {\n                let r = value;\n                if (Array.isArray(r)) {\n                    if (r.length === 2) {\n                        r = [r[0], r[1], r[0], r[1]];\n                    }\n                    else if (r.length === 3) {\n                        r = [r[0], r[1], r[2], r[0]];\n                    }\n                    else if (r.length !== 4) {\n                        r = [r[0], r[0], r[0], r[0]];\n                    }\n                }\n                else if (typeof r === 'number') {\n                    r = [r, r, r, r];\n                }\n                return r;\n            },\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        boxDist: `\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    `,\n    };\n    static resolveDefaults(props) {\n        return {\n            radius: props.radius ?? 10,\n        };\n    }\n    static onShaderMask = `\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  `;\n    static onEffectMask = `\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  `;\n}\n//# sourceMappingURL=RadiusEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderEffect renders a border along all edges of an element\n */\nexport class BorderEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'border';\n    static getEffectKey() {\n        return `border`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static onEffectMask = `\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Linear Gradient effect over a effect mask\n */\nexport class LinearGradientEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'linearGradient';\n    static getEffectKey(props) {\n        return `linearGradient${props.colors.length}`;\n    }\n    static resolveDefaults(props) {\n        const colors = props.colors ?? [0xff000000, 0xffffffff];\n        let stops = props.stops;\n        if (!stops) {\n            stops = [];\n            const calc = colors.length - 1;\n            for (let i = 0; i < colors.length; i++) {\n                stops.push(i * (1 / calc));\n            }\n        }\n        return {\n            colors,\n            stops,\n            angle: props.angle ?? 0,\n        };\n    }\n    static uniforms = {\n        angle: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        colors: {\n            value: 0xffffffff,\n            validator: (rgbas) => {\n                const cols = rgbas.map((rgbas) => getNormalizedRgbaComponents(rgbas));\n                return cols.reduce((acc, val) => acc.concat(val), []);\n            },\n            size: (props) => props.colors.length,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n        stops: {\n            value: [],\n            validator: (value, props) => {\n                const colors = props.colors ?? [];\n                let stops = value;\n                const tmp = value;\n                if (stops.length === 0 || (stops && stops.length !== colors.length)) {\n                    for (let i = 0; i < colors.length; i++) {\n                        if (stops[i]) {\n                            tmp[i] = stops[i];\n                            if (stops[i - 1] === undefined && tmp[i - 2] !== undefined) {\n                                tmp[i - 1] = tmp[i - 2] + (stops[i] - tmp[i - 2]) / 2;\n                            }\n                        }\n                        else {\n                            tmp[i] = i * (1 / (colors.length - 1));\n                        }\n                    }\n                    stops = tmp;\n                }\n                return tmp;\n            },\n            size: (props) => props.colors.length,\n            method: 'uniform1fv',\n            type: 'float',\n        },\n    };\n    static methods = {\n        fromLinear: `\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    `,\n        toLinear: `\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    `,\n        calcPoint: `\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    `,\n    };\n    static ColorLoop = (amount) => {\n        let loop = '';\n        for (let i = 2; i < amount; i++) {\n            loop += `colorOut = mix(colorOut, colors[${i}], clamp((dist - stops[${i - 1}]) / (stops[${i}] - stops[${i - 1}]), 0.0, 1.0));`;\n        }\n        return loop;\n    };\n    static onColorize = (props) => {\n        const colors = props.colors.length || 1;\n        return `\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ${colors}-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `;\n    };\n}\n//# sourceMappingURL=LinearGradientEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect } from './ShaderEffect.js';\n/**\n * Grayscale effect grayscales the color values of the current mask color\n */\nexport class GrayscaleEffect extends ShaderEffect {\n    name = 'grayscale';\n    static getEffectKey() {\n        return `grayscale`;\n    }\n    static onColorize = `\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  `;\n}\n//# sourceMappingURL=GrayscaleEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the right side of an element\n */\nexport class BorderRightEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderRight';\n    static getEffectKey() {\n        return `borderRight`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderRightEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the top side of an element\n */\nexport class BorderTopEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderTop';\n    static getEffectKey() {\n        return `borderTop`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderTopEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the bottom side of an element\n */\nexport class BorderBottomEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderBottom';\n    static getEffectKey() {\n        return `borderBottom`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderBottomEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The BorderBottomEffect renders a border on the left of an element\n */\nexport class BorderLeftEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'borderLeft';\n    static getEffectKey() {\n        return `borderLeft`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        fillMask: `\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    `,\n        rectDist: `\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    `,\n    };\n    static onEffectMask = `\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=BorderLeftEffect.js.map","import { ShaderEffect, } from './ShaderEffect.js';\n/**\n * Renders a Glitch effect using the incoming texture\n */\nexport class GlitchEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'glitch';\n    static getEffectKey(props) {\n        return `glitch`;\n    }\n    static resolveDefaults(props) {\n        return {\n            amplitude: props.amplitude ?? 0.2,\n            narrowness: props.narrowness ?? 4.0,\n            blockiness: props.blockiness ?? 2.0,\n            minimizer: props.minimizer ?? 8.0,\n            time: props.time ?? Date.now(),\n        };\n    }\n    static uniforms = {\n        amplitude: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        narrowness: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        blockiness: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        minimizer: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        time: {\n            value: 0,\n            method: 'uniform1f',\n            validator: (value) => {\n                return (Date.now() - value) % 1000;\n            },\n            type: 'float',\n        },\n    };\n    static methods = {\n        rand: `\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    `,\n        noise: `\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    `,\n        fbm: `\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    `,\n    };\n    static onColorize = `\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  `;\n}\n//# sourceMappingURL=GlitchEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ShaderEffect, } from './ShaderEffect.js';\nexport class FadeOutEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'fadeOut';\n    static getEffectKey() {\n        return `fadeOut`;\n    }\n    static uniforms = {\n        fade: {\n            value: 0,\n            method: 'uniform4fv',\n            type: 'vec4',\n            validator: (value) => {\n                let r = value;\n                if (Array.isArray(r)) {\n                    if (r.length === 2) {\n                        r = [r[0], r[1], r[0], r[1]];\n                    }\n                    else if (r.length === 3) {\n                        r = [r[0], r[1], r[2], r[0]];\n                    }\n                    else if (r.length !== 4) {\n                        r = [r[0], r[0], r[0], r[0]];\n                    }\n                }\n                else if (typeof r === 'number') {\n                    r = [r, r, r, r];\n                }\n                return r;\n            },\n        },\n    };\n    static resolveDefaults(props) {\n        return {\n            fade: props.fade ?? 10,\n        };\n    }\n    static onColorize = `\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  `;\n}\n//# sourceMappingURL=FadeOutEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\nexport class RadialGradientEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radialGradient';\n    static getEffectKey(props) {\n        return `radialGradient${props.colors.length}`;\n    }\n    static resolveDefaults(props) {\n        const colors = props.colors ?? [0xff000000, 0xffffffff];\n        let stops = props.stops;\n        if (!stops) {\n            stops = [];\n            const calc = colors.length - 1;\n            for (let i = 0; i < colors.length; i++) {\n                stops.push(i * (1 / calc));\n            }\n        }\n        return {\n            colors,\n            stops,\n            width: props.width ?? 0,\n            height: props.height ?? props.width ?? 0,\n            pivot: props.pivot ?? [0.5, 0.5],\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        height: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        pivot: {\n            value: [0.5, 0.5],\n            method: 'uniform2fv',\n            type: 'vec2',\n        },\n        colors: {\n            value: 0xffffffff,\n            validator: (rgbas) => {\n                const cols = rgbas.map((rgbas) => getNormalizedRgbaComponents(rgbas));\n                return cols.reduce((acc, val) => acc.concat(val), []);\n            },\n            size: (props) => props.colors.length,\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n        stops: {\n            value: [],\n            validator: (value, props) => {\n                const colors = props.colors ?? [];\n                let stops = value;\n                const tmp = value;\n                if (stops.length === 0 || (stops && stops.length !== colors.length)) {\n                    for (let i = 0; i < colors.length; i++) {\n                        if (stops[i]) {\n                            tmp[i] = stops[i];\n                            if (stops[i - 1] === undefined && tmp[i - 2] !== undefined) {\n                                tmp[i - 1] = tmp[i - 2] + (stops[i] - tmp[i - 2]) / 2;\n                            }\n                        }\n                        else {\n                            tmp[i] = i * (1 / (colors.length - 1));\n                        }\n                    }\n                    stops = tmp;\n                }\n                return tmp;\n            },\n            size: (props) => props.colors.length,\n            method: 'uniform1fv',\n            type: 'float',\n        },\n    };\n    static onColorize = (props) => {\n        const colors = props.colors.length || 1;\n        return `\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ${colors}-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `;\n    };\n}\n//# sourceMappingURL=RadialGradientEffect.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { getNormalizedRgbaComponents } from '../../../../lib/utils.js';\nimport { ShaderEffect, } from './ShaderEffect.js';\n/**\n * The RadialProgressEffect renders a border along all edges of an element\n */\nexport class RadialProgressEffect extends ShaderEffect {\n    static z$__type__Props;\n    name = 'radialProgress';\n    static getEffectKey() {\n        return `radialProgress`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 10,\n            progress: props.progress ?? 0.5,\n            offset: props.offset ?? 0,\n            range: props.range ?? Math.PI * 2,\n            rounded: props.rounded ?? false,\n            radius: props.radius ?? 1,\n            color: props.color ?? 0xffffffff,\n        };\n    }\n    static uniforms = {\n        width: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        progress: {\n            value: 0.5,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        offset: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        range: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        rounded: {\n            value: 0,\n            method: 'uniform1f',\n            type: 'float',\n            validator: (value) => {\n                return value ? 1 : 0;\n            },\n        },\n        radius: {\n            value: 1,\n            method: 'uniform1f',\n            type: 'float',\n        },\n        color: {\n            value: 0xffffffff,\n            validator: (rgba) => getNormalizedRgbaComponents(rgba),\n            method: 'uniform4fv',\n            type: 'vec4',\n        },\n    };\n    static methods = {\n        rotateUV: `\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    `,\n        drawDot: `\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    `,\n    };\n    static onEffectMask = `\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  `;\n    static onColorize = `\n    return color;\n  `;\n}\n//# sourceMappingURL=RadialProgressEffect.js.map","import { DefaultShader } from './renderers/webgl/shaders/DefaultShader.js';\nimport { DefaultShaderBatched } from './renderers/webgl/shaders/DefaultShaderBatched.js';\nimport { DynamicShader, } from './renderers/webgl/shaders/DynamicShader.js';\nimport { RoundedRectangle } from './renderers/webgl/shaders/RoundedRectangle.js';\nimport { SdfShader } from './renderers/webgl/shaders/SdfShader.js';\nimport { RadiusEffect } from './renderers/webgl/shaders/effects/RadiusEffect.js';\nimport { BorderEffect } from './renderers/webgl/shaders/effects/BorderEffect.js';\nimport { LinearGradientEffect } from './renderers/webgl/shaders/effects/LinearGradientEffect.js';\nimport { GrayscaleEffect } from './renderers/webgl/shaders/effects/GrayscaleEffect.js';\nimport { BorderRightEffect } from './renderers/webgl/shaders/effects/BorderRightEffect.js';\nimport { BorderTopEffect } from './renderers/webgl/shaders/effects/BorderTopEffect.js';\nimport { BorderBottomEffect } from './renderers/webgl/shaders/effects/BorderBottomEffect.js';\nimport { BorderLeftEffect } from './renderers/webgl/shaders/effects/BorderLeftEffect.js';\nimport { GlitchEffect } from './renderers/webgl/shaders/effects/GlitchEffect.js';\nimport { FadeOutEffect } from './renderers/webgl/shaders/effects/FadeOutEffect.js';\nimport { RadialGradientEffect } from './renderers/webgl/shaders/effects/RadialGradientEffect.js';\nimport { RadialProgressEffect } from './renderers/webgl/shaders/effects/RadialProgressEffect.js';\nexport class CoreShaderManager {\n    shCache = new Map();\n    shConstructors = {};\n    attachedShader = null;\n    effectConstructors = {};\n    renderer;\n    constructor() {\n        this.registerShaderType('DefaultShader', DefaultShader);\n        this.registerShaderType('DefaultShaderBatched', DefaultShaderBatched);\n        this.registerShaderType('RoundedRectangle', RoundedRectangle);\n        this.registerShaderType('DynamicShader', DynamicShader);\n        this.registerShaderType('SdfShader', SdfShader);\n        this.registerEffectType('border', BorderEffect);\n        this.registerEffectType('borderBottom', BorderBottomEffect);\n        this.registerEffectType('borderLeft', BorderLeftEffect);\n        this.registerEffectType('borderRight', BorderRightEffect);\n        this.registerEffectType('borderTop', BorderTopEffect);\n        this.registerEffectType('fadeOut', FadeOutEffect);\n        this.registerEffectType('linearGradient', LinearGradientEffect);\n        this.registerEffectType('radialGradient', RadialGradientEffect);\n        this.registerEffectType('grayscale', GrayscaleEffect);\n        this.registerEffectType('glitch', GlitchEffect);\n        this.registerEffectType('radius', RadiusEffect);\n        this.registerEffectType('radialProgress', RadialProgressEffect);\n    }\n    registerShaderType(shType, shClass) {\n        this.shConstructors[shType] = shClass;\n    }\n    registerEffectType(effectType, effectClass) {\n        this.effectConstructors[effectType] = effectClass;\n    }\n    getRegisteredEffects() {\n        return this.effectConstructors;\n    }\n    getRegisteredShaders() {\n        return this.shConstructors;\n    }\n    loadShader(shType, props) {\n        if (!this.renderer) {\n            throw new Error(`Renderer is not been defined`);\n        }\n        const ShaderClass = this.shConstructors[shType];\n        if (!ShaderClass) {\n            throw new Error(`Shader type \"${shType}\" is not registered`);\n        }\n        if (shType === 'DynamicShader') {\n            return this.loadDynamicShader(props);\n        }\n        const resolvedProps = ShaderClass.resolveDefaults(props);\n        const cacheKey = ShaderClass.makeCacheKey(resolvedProps) || ShaderClass.name;\n        if (cacheKey && this.shCache.has(cacheKey)) {\n            return {\n                shader: this.shCache.get(cacheKey),\n                props: resolvedProps,\n            };\n        }\n        // @ts-expect-error ShaderClass WILL accept a Renderer\n        const shader = new ShaderClass(this.renderer, props);\n        if (cacheKey) {\n            this.shCache.set(cacheKey, shader);\n        }\n        return {\n            shader,\n            props: resolvedProps,\n        };\n    }\n    loadDynamicShader(props) {\n        if (!this.renderer) {\n            throw new Error(`Renderer is not been defined`);\n        }\n        const resolvedProps = DynamicShader.resolveDefaults(props, this.effectConstructors);\n        const cacheKey = DynamicShader.makeCacheKey(resolvedProps, this.effectConstructors);\n        if (cacheKey && this.shCache.has(cacheKey)) {\n            return {\n                shader: this.shCache.get(cacheKey),\n                props: resolvedProps,\n            };\n        }\n        const shader = new DynamicShader(this.renderer, props, this.effectConstructors);\n        if (cacheKey) {\n            this.shCache.set(cacheKey, shader);\n        }\n        return {\n            shader: shader,\n            props: resolvedProps,\n        };\n    }\n    useShader(shader) {\n        if (this.attachedShader === shader) {\n            return;\n        }\n        if (this.attachedShader) {\n            this.attachedShader.detach();\n        }\n        shader.attach();\n        this.attachedShader = shader;\n    }\n}\n//# sourceMappingURL=CoreShaderManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Represents a collection of WebGL Buffers along with their associated\n * vertex attribute formats.\n */\nexport class BufferCollection {\n    config;\n    constructor(config) {\n        this.config = config;\n    }\n    /**\n     * Get the WebGLBuffer associated with the given attribute name if it exists.\n     *\n     * @param attributeName\n     * @returns\n     */\n    getBuffer(attributeName) {\n        return this.config.find((item) => item.attributes[attributeName])?.buffer;\n    }\n    /**\n     * Get the AttributeInfo associated with the given attribute name if it exists.\n     *\n     * @param attributeName\n     * @returns\n     */\n    getAttributeInfo(attributeName) {\n        return this.config.find((item) => item.attributes[attributeName])\n            ?.attributes[attributeName];\n    }\n}\n//# sourceMappingURL=BufferCollection.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy, createWebGLContext, hasOwn, mergeColorAlphaPremultiplied, } from '../../../utils.js';\nimport { CoreRenderer } from '../CoreRenderer.js';\nimport { WebGlCoreRenderOp } from './WebGlCoreRenderOp.js';\nimport { createIndexBuffer, getWebGlParameters, getWebGlExtensions, } from './internal/RendererUtils.js';\nimport { WebGlCoreCtxTexture } from './WebGlCoreCtxTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { ColorTexture } from '../../textures/ColorTexture.js';\nimport { SubTexture } from '../../textures/SubTexture.js';\nimport { WebGlCoreCtxSubTexture } from './WebGlCoreCtxSubTexture.js';\nimport { CoreShaderManager } from '../../CoreShaderManager.js';\nimport { BufferCollection } from './internal/BufferCollection.js';\nimport { compareRect, getNormalizedRgbaComponents, } from '../../lib/utils.js';\nimport { WebGlCoreShader } from './WebGlCoreShader.js';\nimport { RoundedRectangle } from './shaders/RoundedRectangle.js';\nconst WORDS_PER_QUAD = 24;\nconst BYTES_PER_QUAD = WORDS_PER_QUAD * 4;\nexport class WebGlCoreRenderer extends CoreRenderer {\n    //// WebGL Native Context and Data\n    gl;\n    system;\n    //// Core Managers\n    txManager;\n    shManager;\n    //// Options\n    options;\n    //// Persistent data\n    quadBuffer = new ArrayBuffer(1024 * 1024 * 4);\n    fQuadBuffer = new Float32Array(this.quadBuffer);\n    uiQuadBuffer = new Uint32Array(this.quadBuffer);\n    renderOps = [];\n    //// Render Op / Buffer Filling State\n    curBufferIdx = 0;\n    curRenderOp = null;\n    renderables = [];\n    //// Default Shader\n    defaultShader;\n    quadBufferCollection;\n    /**\n     * White pixel texture used by default when no texture is specified.\n     */\n    defaultTexture;\n    constructor(options) {\n        super(options.stage);\n        const { canvas, clearColor, bufferMemory } = options;\n        this.options = options;\n        this.txManager = options.txManager;\n        this.shManager = options.shManager;\n        this.defaultTexture = new ColorTexture(this.txManager);\n        const gl = createWebGLContext(canvas);\n        if (!gl) {\n            throw new Error('Unable to create WebGL context');\n        }\n        this.gl = gl;\n        const color = getNormalizedRgbaComponents(clearColor);\n        gl.viewport(0, 0, canvas.width, canvas.height);\n        gl.clearColor(color[0], color[1], color[2], color[3]);\n        createIndexBuffer(gl, bufferMemory);\n        this.system = {\n            parameters: getWebGlParameters(gl),\n            extensions: getWebGlExtensions(gl),\n        };\n        this.shManager.renderer = this;\n        this.defaultShader = this.shManager.loadShader('DefaultShader').shader;\n        const quadBuffer = gl.createBuffer();\n        assertTruthy(quadBuffer);\n        const stride = 6 * Float32Array.BYTES_PER_ELEMENT;\n        this.quadBufferCollection = new BufferCollection([\n            {\n                buffer: quadBuffer,\n                attributes: {\n                    a_position: {\n                        name: 'a_position',\n                        size: 2,\n                        type: gl.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 0, // start at the beginning of the buffer\n                    },\n                    a_textureCoordinate: {\n                        name: 'a_textureCoordinate',\n                        size: 2,\n                        type: gl.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 2 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                    a_color: {\n                        name: 'a_color',\n                        size: 4,\n                        type: gl.UNSIGNED_BYTE,\n                        normalized: true,\n                        stride,\n                        offset: 4 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                    a_textureIndex: {\n                        name: 'a_textureIndex',\n                        size: 1,\n                        type: gl.FLOAT,\n                        normalized: false,\n                        stride,\n                        offset: 5 * Float32Array.BYTES_PER_ELEMENT,\n                    },\n                },\n            },\n        ]);\n    }\n    reset() {\n        this.curBufferIdx = 0;\n        this.curRenderOp = null;\n        this.renderOps.length = 0;\n        this.gl.disable(this.gl.SCISSOR_TEST);\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT);\n    }\n    getShaderManager() {\n        return this.shManager;\n    }\n    createCtxTexture(textureSource) {\n        if (textureSource instanceof SubTexture) {\n            return new WebGlCoreCtxSubTexture(this.gl, textureSource);\n        }\n        return new WebGlCoreCtxTexture(this.gl, textureSource);\n    }\n    /**\n     * This function adds a quad (a rectangle composed of two triangles) to the WebGL rendering pipeline.\n     *\n     * It takes a set of options that define the quad's properties, such as its dimensions, colors, texture, shader, and transformation matrix.\n     * The function first updates the shader properties with the current dimensions if necessary, then sets the default texture if none is provided.\n     * It then checks if a new render operation is needed, based on the current shader and clipping rectangle.\n     * If a new render operation is needed, it creates one and updates the current render operation.\n     * The function then adjusts the texture coordinates based on the texture options and adds the texture to the texture manager.\n     *\n     * Finally, it calculates the vertices for the quad, taking into account any transformations, and adds them to the quad buffer.\n     * The function updates the length and number of quads in the current render operation, and updates the current buffer index.\n     */\n    addQuad(params) {\n        const { fQuadBuffer, uiQuadBuffer } = this;\n        const { width, height, colorTl, colorTr, colorBl, colorBr, textureOptions, shader, shaderProps, alpha, clippingRect, tx, ty, ta, tb, tc, td, } = params;\n        let { texture } = params;\n        /**\n         * If the shader props contain any automatic properties, update it with the\n         * current dimensions that will be used to render the quad.\n         */\n        if (shaderProps && hasOwn(shaderProps, '$dimensions')) {\n            const dimensions = shaderProps.$dimensions;\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            dimensions.width = width;\n            dimensions.height = height;\n        }\n        texture = texture ?? this.defaultTexture;\n        assertTruthy(texture instanceof Texture, 'Invalid texture type');\n        let { curBufferIdx: bufferIdx, curRenderOp } = this;\n        const targetDims = {\n            width,\n            height,\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        };\n        const targetShader = shader || this.defaultShader;\n        assertTruthy(targetShader instanceof WebGlCoreShader);\n        if (curRenderOp) {\n            // If the current render op is not the same shader, create a new one\n            // If the current render op's shader props are not compatible with the\n            // the new shader props, create a new one render op.\n            if (curRenderOp.shader !== targetShader ||\n                !compareRect(curRenderOp.clippingRect, clippingRect) ||\n                (curRenderOp.shader !== this.defaultShader &&\n                    (!shaderProps ||\n                        !curRenderOp.shader.canBatchShaderProps(curRenderOp.shaderProps, shaderProps)))) {\n                curRenderOp = null;\n            }\n        }\n        assertTruthy(targetShader instanceof WebGlCoreShader);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any\n        if (!curRenderOp) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n            this.newRenderOp(targetShader, shaderProps, alpha, targetDims, clippingRect, bufferIdx);\n            curRenderOp = this.curRenderOp;\n            assertTruthy(curRenderOp);\n        }\n        const flipX = textureOptions?.flipX ?? false;\n        const flipY = textureOptions?.flipY ?? false;\n        let texCoordX1 = 0;\n        let texCoordY1 = 0;\n        let texCoordX2 = 1;\n        let texCoordY2 = 1;\n        if (texture instanceof SubTexture) {\n            const { x: tx, y: ty, width: tw, height: th } = texture.props;\n            const { width: parentW = 0, height: parentH = 0 } = texture.parentTexture\n                .dimensions || { width: 0, height: 0 };\n            texCoordX1 = tx / parentW;\n            texCoordX2 = texCoordX1 + tw / parentW;\n            texCoordY1 = ty / parentH;\n            texCoordY2 = texCoordY1 + th / parentH;\n            texture = texture.parentTexture;\n        }\n        // Flip texture coordinates if dictated by texture options\n        if (flipX) {\n            [texCoordX1, texCoordX2] = [texCoordX2, texCoordX1];\n        }\n        if (flipY) {\n            [texCoordY1, texCoordY2] = [texCoordY2, texCoordY1];\n        }\n        const { txManager } = this.stage;\n        const ctxTexture = txManager.getCtxTexture(texture);\n        assertTruthy(ctxTexture instanceof WebGlCoreCtxTexture);\n        const textureIdx = this.addTexture(ctxTexture, bufferIdx);\n        curRenderOp = this.curRenderOp;\n        assertTruthy(curRenderOp);\n        // render quad advanced\n        if (tb !== 0 || tc !== 0) {\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = tx; // vertexX\n            fQuadBuffer[bufferIdx++] = ty; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = tx + width * ta;\n            fQuadBuffer[bufferIdx++] = ty + width * tc;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = tx + height * tb;\n            fQuadBuffer[bufferIdx++] = ty + height * td;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] = tx + width * ta + height * tb;\n            fQuadBuffer[bufferIdx++] = ty + width * tc + height * td;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        else {\n            // Calculate the right corner of the quad\n            // multiplied by the scale\n            const rightCornerX = tx + width * ta;\n            const rightCornerY = ty + height * td;\n            // Upper-Left\n            fQuadBuffer[bufferIdx++] = tx; // vertexX\n            fQuadBuffer[bufferIdx++] = ty; // vertexY\n            fQuadBuffer[bufferIdx++] = texCoordX1; // texCoordX\n            fQuadBuffer[bufferIdx++] = texCoordY1; // texCoordY\n            uiQuadBuffer[bufferIdx++] = colorTl; // color\n            fQuadBuffer[bufferIdx++] = textureIdx; // texIndex\n            // Upper-Right\n            fQuadBuffer[bufferIdx++] = rightCornerX;\n            fQuadBuffer[bufferIdx++] = ty;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY1;\n            uiQuadBuffer[bufferIdx++] = colorTr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Left\n            fQuadBuffer[bufferIdx++] = tx;\n            fQuadBuffer[bufferIdx++] = rightCornerY;\n            fQuadBuffer[bufferIdx++] = texCoordX1;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBl;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n            // Lower-Right\n            fQuadBuffer[bufferIdx++] = rightCornerX;\n            fQuadBuffer[bufferIdx++] = rightCornerY;\n            fQuadBuffer[bufferIdx++] = texCoordX2;\n            fQuadBuffer[bufferIdx++] = texCoordY2;\n            uiQuadBuffer[bufferIdx++] = colorBr;\n            fQuadBuffer[bufferIdx++] = textureIdx;\n        }\n        // Update the length of the current render op\n        curRenderOp.length += WORDS_PER_QUAD;\n        curRenderOp.numQuads++;\n        this.curBufferIdx = bufferIdx;\n    }\n    /**\n     * Replace the existing RenderOp with a new one that uses the specified Shader\n     * and starts at the specified buffer index.\n     *\n     * @param shader\n     * @param bufferIdx\n     */\n    newRenderOp(shader, shaderProps, alpha, dimensions, clippingRect, bufferIdx) {\n        const curRenderOp = new WebGlCoreRenderOp(this.gl, this.options, this.quadBufferCollection, shader, shaderProps, alpha, clippingRect, dimensions, bufferIdx, 0);\n        this.curRenderOp = curRenderOp;\n        this.renderOps.push(curRenderOp);\n    }\n    /**\n     * Add a texture to the current RenderOp. If the texture cannot be added to the\n     * current RenderOp, a new RenderOp will be created and the texture will be added\n     * to that one.\n     *\n     * If the texture cannot be added to the new RenderOp, an error will be thrown.\n     *\n     * @param texture\n     * @param bufferIdx\n     * @param recursive\n     * @returns Assigned Texture Index of the texture in the render op\n     */\n    addTexture(texture, bufferIdx, recursive) {\n        const { curRenderOp } = this;\n        assertTruthy(curRenderOp);\n        const textureIdx = curRenderOp.addTexture(texture);\n        // TODO: Refactor to be more DRY\n        if (textureIdx === 0xffffffff) {\n            if (recursive) {\n                throw new Error('Unable to add texture to render op');\n            }\n            const { shader, shaderProps, dimensions, clippingRect, alpha } = curRenderOp;\n            this.newRenderOp(shader, shaderProps, alpha, dimensions, clippingRect, bufferIdx);\n            return this.addTexture(texture, bufferIdx, true);\n        }\n        return textureIdx;\n    }\n    /**\n     * add RenderOp to the render pipeline\n     */\n    addRenderOp(renderable) {\n        this.renderOps.push(renderable);\n        this.curRenderOp = null;\n    }\n    /**\n     * Render the current set of RenderOps to render to the specified surface.\n     *\n     * TODO: 'screen' is the only supported surface at the moment.\n     *\n     * @param surface\n     */\n    render(surface = 'screen') {\n        const { gl, quadBuffer } = this;\n        const arr = new Float32Array(quadBuffer, 0, this.curBufferIdx);\n        const buffer = this.quadBufferCollection.getBuffer('a_position') ?? null;\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, arr, gl.DYNAMIC_DRAW);\n        const doLog = false; // idx++ % 100 === 0;\n        if (doLog) {\n            console.log('renderOps', this.renderOps.length);\n        }\n        this.renderOps.forEach((renderOp, i) => {\n            if (doLog) {\n                console.log('renderOp', i, renderOp.numQuads);\n            }\n            renderOp.draw();\n        });\n        // clean up\n        this.renderables = [];\n    }\n}\nconst idx = 0;\n//# sourceMappingURL=WebGlCoreRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreAnimation } from './CoreAnimation.js';\nexport class AnimationManager {\n    activeAnimations = new Set();\n    registerAnimation(animation) {\n        this.activeAnimations.add(animation);\n    }\n    unregisterAnimation(animation) {\n        this.activeAnimations.delete(animation);\n    }\n    update(dt) {\n        this.activeAnimations.forEach((animation) => {\n            animation.update(dt);\n        });\n    }\n}\n//# sourceMappingURL=AnimationManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture } from './Texture.js';\n/**\n * Texture consisting of an image loaded from a URL\n *\n * @remarks\n * The ImageTexture's {@link ImageTextureProps.src} prop defines the image URL\n * to be downloaded.\n *\n * By default, the texture's alpha values will be premultiplied into its color\n * values which is generally the desired setting before they are sent to the\n * texture's associated {@link Shader}. However, in special cases you may want\n * the Shader to receive straight (non-premultiplied) values. In that case you\n * can disable the default behavior by setting the\n * {@link ImageTextureProps.premultiplyAlpha} prop to `false`.\n */\nexport class ImageTexture extends Texture {\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = ImageTexture.resolveDefaults(props);\n    }\n    async getTextureData() {\n        const { src, premultiplyAlpha } = this.props;\n        if (!src) {\n            return {\n                data: null,\n            };\n        }\n        if (src instanceof ImageData) {\n            return {\n                data: src,\n                premultiplyAlpha,\n            };\n        }\n        const response = await fetch(src);\n        const blob = await response.blob();\n        return {\n            data: await createImageBitmap(blob, {\n                premultiplyAlpha: premultiplyAlpha ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none',\n            }),\n        };\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = ImageTexture.resolveDefaults(props);\n        // ImageTextures sourced by ImageData are non-cacheable\n        if (resolvedProps.src instanceof ImageData) {\n            return false;\n        }\n        return `ImageTexture,${resolvedProps.src},${resolvedProps.premultiplyAlpha}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            src: props.src ?? '',\n            premultiplyAlpha: props.premultiplyAlpha ?? true,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=ImageTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { Texture } from './Texture.js';\n/**\n * Texture consisting of a random grid of greyscale pixels\n *\n * @remarks\n * The width and height of the NoiseTexture are defined by it's\n * {@link NoiseTextureProps.width} and {@link NoiseTextureProps.height}\n * properties. The {@link NoiseTextureProps.cacheId} prop can be varied in order\n * to bypass cache and get newly randomized texture data.\n */\nexport class NoiseTexture extends Texture {\n    props;\n    constructor(txManager, props) {\n        super(txManager);\n        this.props = NoiseTexture.resolveDefaults(props);\n    }\n    async getTextureData() {\n        const { width, height } = this.props;\n        const size = width * height * 4;\n        const pixelData8 = new Uint8ClampedArray(size);\n        for (let i = 0; i < size; i += 4) {\n            const v = Math.floor(Math.random() * 256);\n            pixelData8[i] = v;\n            pixelData8[i + 1] = v;\n            pixelData8[i + 2] = v;\n            pixelData8[i + 3] = 255;\n        }\n        return {\n            data: new ImageData(pixelData8, width, height),\n        };\n    }\n    static makeCacheKey(props) {\n        const resolvedProps = NoiseTexture.resolveDefaults(props);\n        return `NoiseTexture,${resolvedProps.width},${resolvedProps.height},${resolvedProps.cacheId}`;\n    }\n    static resolveDefaults(props) {\n        return {\n            width: props.width ?? 128,\n            height: props.height ?? 128,\n            cacheId: props.cacheId ?? 0,\n        };\n    }\n    static z$__type__Props;\n}\n//# sourceMappingURL=NoiseTexture.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../utils.js';\nimport { ColorTexture } from './textures/ColorTexture.js';\nimport { ImageTexture } from './textures/ImageTexture.js';\nimport { NoiseTexture } from './textures/NoiseTexture.js';\nimport { SubTexture } from './textures/SubTexture.js';\nexport class CoreTextureManager {\n    /**\n     * Amount of used memory defined in pixels\n     */\n    usedMemory = 0;\n    txConstructors = {};\n    textureKeyCache = new Map();\n    textureIdCache = new Map();\n    ctxTextureCache = new WeakMap();\n    textureRefCountMap = new WeakMap();\n    /**\n     * Renderer that this texture manager is associated with\n     *\n     * @remarks\n     * This MUST be set before the texture manager is used. Otherwise errors\n     * will occur when using the texture manager.\n     */\n    renderer;\n    constructor() {\n        // Register default known texture types\n        this.registerTextureType('ImageTexture', ImageTexture);\n        this.registerTextureType('ColorTexture', ColorTexture);\n        this.registerTextureType('NoiseTexture', NoiseTexture);\n        this.registerTextureType('SubTexture', SubTexture);\n    }\n    registerTextureType(textureType, textureClass) {\n        this.txConstructors[textureType] = textureClass;\n    }\n    loadTexture(textureType, props, options = null) {\n        const TextureClass = this.txConstructors[textureType];\n        if (!TextureClass) {\n            throw new Error(`Texture type \"${textureType}\" is not registered`);\n        }\n        let texture;\n        // If an ID is specified, try to get the texture from the ID cache first\n        if (options?.id !== undefined && this.textureIdCache.has(options.id)) {\n            // console.log('Getting texture by texture desc ID', options.id);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            texture = this.textureIdCache.get(options.id);\n        }\n        // If the texture is not found in the ID cache, try to get it from the key cache\n        if (!texture) {\n            const descId = options?.id;\n            const cacheKey = options?.cacheKey ?? TextureClass.makeCacheKey(props);\n            if (cacheKey && this.textureKeyCache.has(cacheKey)) {\n                // console.log('Getting texture by cache key', cacheKey);\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                texture = this.textureKeyCache.get(cacheKey);\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-argument, @typescript-eslint/no-explicit-any\n                texture = new TextureClass(this, props);\n            }\n            if (descId) {\n                this.addTextureIdToCache(descId, cacheKey, texture);\n            }\n        }\n        if (options?.preload) {\n            const ctxTx = this.getCtxTexture(texture);\n            ctxTx.load();\n        }\n        return texture;\n    }\n    /**\n     * Add a `Texture` to the texture cache by its texture desc ID and cache key\n     *\n     * @remarks\n     * This is used internally by the `CoreTextureManager` to cache textures\n     * when they are created.\n     *\n     * It handles updating the texture ID cache, texture key cache, and texture\n     * reference count map.\n     *\n     * @param textureDescId\n     * @param cacheKey\n     * @param texture\n     */\n    addTextureIdToCache(textureDescId, cacheKey, texture) {\n        const { textureIdCache, textureRefCountMap } = this;\n        textureIdCache.set(textureDescId, texture);\n        if (textureRefCountMap.has(texture)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            textureRefCountMap.get(texture).count++;\n        }\n        else {\n            textureRefCountMap.set(texture, { cacheKey, count: 1 });\n            if (cacheKey) {\n                this.textureKeyCache.set(cacheKey, texture);\n            }\n        }\n    }\n    /**\n     * Remove a `Texture` from the texture cache by its texture desc ID\n     *\n     * @remarks\n     * This is called externally by when we know (at least reasonably well) that\n     * the `TextureRef` in the Main API space has been is no longer used. This\n     * allows us to remove the `Texture` from the Usage Cache so that it can be\n     * garbage collected as well.\n     *\n     * @param textureDescId\n     */\n    removeTextureIdFromCache(textureDescId) {\n        const { textureIdCache, textureRefCountMap } = this;\n        const texture = textureIdCache.get(textureDescId);\n        if (!texture) {\n            // Sometimes a texture is removed from the cache before it ever gets\n            // added to the cache. This is fine and not an error.\n            return;\n        }\n        textureIdCache.delete(textureDescId);\n        if (textureRefCountMap.has(texture)) {\n            const refCountObj = textureRefCountMap.get(texture);\n            assertTruthy(refCountObj);\n            refCountObj.count--;\n            if (refCountObj.count === 0) {\n                textureRefCountMap.delete(texture);\n                // If the texture is not referenced anywhere else, remove it from the key cache\n                // as well.\n                // This should allow the `Texture` instance to be garbage collected.\n                if (refCountObj.cacheKey) {\n                    this.textureKeyCache.delete(refCountObj.cacheKey);\n                }\n            }\n        }\n    }\n    /**\n     * Get an object containing debug information about the texture manager.\n     *\n     * @returns\n     */\n    getDebugInfo() {\n        // const textureSet = new Set<Texture>();\n        // for (const texture of this.textureIdCache.values()) {\n        //   textureSet.add(texture);\n        // }\n        // for (const texture of this.textureKeyCache.values()) {\n        //   textureSet.add(texture);\n        // }\n        // TODO: Output number of bytes used by textures\n        return {\n            keyCacheSize: this.textureKeyCache.size,\n            idCacheSize: this.textureIdCache.size,\n        };\n    }\n    /**\n     * Get a CoreContextTexture for the given Texture source.\n     *\n     * @remarks\n     * If the texture source already has an allocated CoreContextTexture, it will be\n     * returned from the cache. Otherwise, a new CoreContextTexture will be created\n     * and cached.\n     *\n     * ContextTextures are stored in a WeakMap, so they will be garbage collected\n     * when the Texture source is no longer referenced.\n     *\n     * @param textureSource\n     * @returns\n     */\n    getCtxTexture(textureSource) {\n        if (this.ctxTextureCache.has(textureSource)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return this.ctxTextureCache.get(textureSource);\n        }\n        const texture = this.renderer.createCtxTexture(textureSource);\n        this.ctxTextureCache.set(textureSource, texture);\n        return texture;\n    }\n}\n//# sourceMappingURL=CoreTextureManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const SpecialCodepoints = {\n    LINE_FEED: 0x0a,\n    CARRIAGE_RETURN: 0x0d,\n    SPACE: 0x20,\n    TAB: 0x09,\n    ZERO_WIDTH_SPACE: 0x200b,\n    ZERO_WIDTH_NON_JOINER: 0x200c,\n    ZERO_WIDTH_JOINER: 0x200d,\n    LEFT_TO_RIGHT_MARK: 0x200e,\n    RIGHT_TO_LEFT_MARK: 0x200f,\n    LEFT_TO_RIGHT_EMBEDDING: 0x202a,\n    RIGHT_TO_LEFT_EMBEDDING: 0x202b,\n    POP_DIRECTIONAL_FORMATTING: 0x202c,\n    LEFT_TO_RIGHT_OVERRIDE: 0x202d,\n    RIGHT_TO_LEFT_OVERRIDE: 0x202e,\n    LINE_SEPARATOR: 0x2028,\n    PARAGRAPH_SEPARATOR: 0x2029,\n    OBJECT_REPLACEMENT_CHARACTER: 0xfffc,\n    REPLACEMENT_CHARACTER: 0xfffd,\n    ZERO_WIDTH_NO_BREAK_SPACE: 0xfeff,\n    LEFT_TO_RIGHT_ISOLATE: 0x2066,\n    RIGHT_TO_LEFT_ISOLATE: 0x2067,\n    FIRST_STRONG_ISOLATE: 0x2068,\n    POP_DIRECTIONAL_ISOLATE: 0x2069,\n    INHIBIT_SYMMETRIC_SWAPPING: 0x206a,\n    ACTIVATE_SYMMETRIC_SWAPPING: 0x206b,\n    INHIBIT_ARABIC_FORM_SHAPING: 0x206c,\n    ACTIVATE_ARABIC_FORM_SHAPING: 0x206d,\n    NATIONAL_DIGIT_SHAPES: 0x206e,\n    NOMINAL_DIGIT_SHAPES: 0x206f,\n    LEFT_TO_RIGHT_BOUNDARY: 0x200e,\n    RIGHT_TO_LEFT_BOUNDARY: 0x200f,\n};\n//# sourceMappingURL=SpecialCodepoints.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport class FontShaper {\n}\n//# sourceMappingURL=FontShaper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SpecialCodepoints } from '../../../renderers/SdfTextRenderer/internal/SpecialCodepoints.js';\nimport { FontShaper, } from './FontShaper.js';\nexport class SdfFontShaper extends FontShaper {\n    data;\n    kernings;\n    constructor(data) {\n        super();\n        this.data = data;\n        const kernings = (this.kernings = {});\n        data.kernings.forEach((kerning) => {\n            const second = kerning.second;\n            const firsts = (kernings[second] = kernings[second] || {});\n            firsts[kerning.first] = kerning.amount;\n        });\n        this.kernings = kernings;\n    }\n    *shapeText(props, codepoints) {\n        let codepointResult;\n        let lastGlyphId = undefined;\n        while ((codepointResult = codepoints.peek()) && !codepointResult.done) {\n            const codepoint = codepointResult.value;\n            const glyph = this.data.chars.find((char) => char.id === codepoint);\n            codepoints.next();\n            if (glyph !== undefined) {\n                // We found a glyph for this codepoint\n                // Yield the mapped glyph info\n                /**\n                 * Kerning includes any possible additional letter spacing\n                 */\n                const kerning = lastGlyphId !== undefined\n                    ? (this.kernings[glyph.id]?.[lastGlyphId] || 0) +\n                        props.letterSpacing\n                    : 0;\n                lastGlyphId = glyph.id;\n                yield {\n                    mapped: true,\n                    glyphId: glyph.id,\n                    codepoint,\n                    cluster: codepoints.lastIndex,\n                    xAdvance: glyph.xadvance + kerning,\n                    yAdvance: 0,\n                    xOffset: glyph.xoffset + kerning,\n                    yOffset: glyph.yoffset,\n                    xBearing: 0,\n                    yBearing: 0,\n                    width: glyph.width,\n                    height: glyph.height,\n                };\n            }\n            else {\n                // We didn't find a glyph for this codepoint\n                // Yield the unmapped codepoint info\n                // If this codepoint is a linebreak, we should reset the last glyph id\n                // so that the next glyph will not be kerned with the last glyph of the\n                // previous line.\n                if (codepoint === SpecialCodepoints.LINE_FEED) {\n                    lastGlyphId = undefined;\n                }\n                yield {\n                    mapped: false,\n                    codepoint,\n                    cluster: codepoints.lastIndex,\n                };\n            }\n        }\n    }\n}\n//# sourceMappingURL=SdfFontShaper.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// import type { Renderer } from '../../../Renderer';\nimport { assertTruthy } from '../../../../utils.js';\nimport { WebGlCoreRenderer } from '../../../renderers/webgl/WebGlCoreRenderer.js';\nimport { ImageTexture } from '../../../textures/ImageTexture.js';\nimport { TrFontFace } from '../TrFontFace.js';\nimport { SdfFontShaper } from './internal/SdfFontShaper.js';\nexport class SdfTrFontFace extends TrFontFace {\n    type;\n    texture;\n    data;\n    shaper;\n    glyphMap = new Map();\n    constructor(fontFamily, descriptors, type, stage, atlasUrl, atlasDataUrl) {\n        super(fontFamily, descriptors);\n        this.type = type;\n        const renderer = stage.renderer;\n        assertTruthy(renderer instanceof WebGlCoreRenderer, 'SDF Font Faces can only be used with the WebGL Renderer');\n        this.texture = stage.txManager.loadTexture('ImageTexture', {\n            src: atlasUrl,\n            // IMPORTANT: The SDF shader requires the alpha channel to NOT be\n            // premultiplied on the atlas texture. If it is premultiplied, the\n            // rendering of SDF glyphs (especially single-channel SDF fonts) will\n            // be very jagged.\n            premultiplyAlpha: false,\n        }, {\n            preload: true,\n        });\n        this.texture.on('loaded', () => {\n            this.checkLoaded();\n        });\n        // Set this.data to the fetched data from dataUrl\n        fetch(atlasDataUrl)\n            .then(async (response) => {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            this.data = await response.json();\n            // We know `data` is defined here, because we just set it\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.shaper = new SdfFontShaper(this.data);\n            // Add all the glyphs to the glyph map\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.data.chars.forEach((glyph) => {\n                this.glyphMap.set(glyph.id, glyph);\n            });\n            this.checkLoaded();\n        })\n            .catch(console.error);\n    }\n    getAtlasEntry(glyphId) {\n        const glyph = this.glyphMap.get(glyphId);\n        if (glyph === undefined) {\n            throw new Error(`Glyph ${glyphId} not found in font ${this.fontFamily}`);\n        }\n        return {\n            x: glyph.x,\n            y: glyph.y,\n            width: glyph.width,\n            height: glyph.height,\n        };\n    }\n    checkLoaded() {\n        if (this.loaded)\n            return;\n        if (this.texture.state === 'loaded' && this.data) {\n            this.loaded = true;\n            this.emit('loaded');\n        }\n    }\n}\n//# sourceMappingURL=SdfTrFontFace.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SdfTrFontFace } from './font-face-types/SdfTrFontFace/SdfTrFontFace.js';\nimport { WebTrFontFace } from './font-face-types/WebTrFontFace.js';\nexport class TrFontManager {\n    textRenderers;\n    constructor(textRenderers) {\n        this.textRenderers = textRenderers;\n        // Intentionally left blank\n    }\n    addFontFace(font) {\n        // All the font face to all of the text renderers that support it\n        for (const trId in this.textRenderers) {\n            const tr = this.textRenderers[trId];\n            if (tr && tr.isFontFaceSupported(font)) {\n                tr.addFontFace(font);\n            }\n        }\n    }\n    /**\n     * Utility method to resolve a single font face from a list of prioritized family maps based on\n     * a set of font properties.\n     *\n     * @remarks\n     * These are to be used by a text renderer to resolve a font face if needed.\n     *\n     * @param familyMapsByPriority\n     * @param props\n     * @returns\n     */\n    static resolveFontFace(familyMapsByPriority, props) {\n        const closeFaces = [];\n        const exactMatch = familyMapsByPriority.reduce((prev, fontFamiles) => {\n            if (prev) {\n                return prev;\n            }\n            const fontFaces = fontFamiles[props.fontFamily];\n            if (!fontFaces) {\n                return undefined;\n            }\n            const fontFacesCopy = new Set(fontFaces);\n            // Remove any font faces that don't match the style exactly\n            // TODO: In the future we may enhance this to find the best match\n            // based on font weight, style, etc.\n            // See https://www.w3.org/TR/2018/REC-css-fonts-3-20180920/#font-matching-algorithm\n            for (const fontFace of fontFacesCopy) {\n                if (fontFace.descriptors.stretch !== props.fontStretch ||\n                    fontFace.descriptors.style !== props.fontStyle ||\n                    fontFace.descriptors.weight !== props.fontWeight) {\n                    fontFacesCopy.delete(fontFace);\n                }\n            }\n            // Return the first font face that matches the style exactly\n            return fontFacesCopy.values().next().value;\n        }, undefined);\n        return exactMatch || closeFaces[0];\n    }\n}\n//# sourceMappingURL=TrFontManager.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst trPropSetterDefaults = {\n    x: (state, value) => {\n        state.props.x = value;\n    },\n    y: (state, value) => {\n        state.props.y = value;\n    },\n    width: (state, value) => {\n        state.props.width = value;\n    },\n    height: (state, value) => {\n        state.props.height = value;\n    },\n    color: (state, value) => {\n        state.props.color = value;\n    },\n    zIndex: (state, value) => {\n        state.props.zIndex = value;\n    },\n    fontFamily: (state, value) => {\n        state.props.fontFamily = value;\n    },\n    fontWeight: (state, value) => {\n        state.props.fontWeight = value;\n    },\n    fontStyle: (state, value) => {\n        state.props.fontStyle = value;\n    },\n    fontStretch: (state, value) => {\n        state.props.fontStretch = value;\n    },\n    fontSize: (state, value) => {\n        state.props.fontSize = value;\n    },\n    text: (state, value) => {\n        state.props.text = value;\n    },\n    textAlign: (state, value) => {\n        state.props.textAlign = value;\n    },\n    contain: (state, value) => {\n        state.props.contain = value;\n    },\n    offsetY: (state, value) => {\n        state.props.offsetY = value;\n    },\n    scrollable: (state, value) => {\n        state.props.scrollable = value;\n    },\n    scrollY: (state, value) => {\n        state.props.scrollY = value;\n    },\n    letterSpacing: (state, value) => {\n        state.props.letterSpacing = value;\n    },\n    debug: (state, value) => {\n        state.props.debug = value;\n    },\n};\nexport class TextRenderer {\n    stage;\n    set;\n    constructor(stage) {\n        this.stage = stage;\n        const propSetters = {\n            ...trPropSetterDefaults,\n            ...this.getPropertySetters(),\n        };\n        // For each prop setter add a wrapper method that checks if the prop is\n        // different before calling the setter\n        this.set = Object.freeze(Object.fromEntries(Object.entries(propSetters).map(([key, setter]) => {\n            return [\n                key,\n                (state, value) => {\n                    if (state.props[key] !== value) {\n                        setter(state, value);\n                    }\n                },\n            ];\n        })));\n    }\n    setStatus(state, status, error) {\n        // Don't emit the same status twice\n        if (state.status === status) {\n            return;\n        }\n        state.status = status;\n        state.emitter.emit(status, error);\n    }\n    /**\n     * Schedule a state update via queueMicrotask\n     *\n     * @remarks\n     * This method is used to schedule a state update via queueMicrotask. This\n     * method should be called whenever a state update is needed, and it will\n     * ensure that the state is only updated once per microtask.\n     * @param state\n     * @returns\n     */\n    scheduleUpdateState(state) {\n        if (state.updateScheduled) {\n            return;\n        }\n        state.updateScheduled = true;\n        queueMicrotask(() => {\n            state.updateScheduled = false;\n            this.updateState(state);\n        });\n    }\n}\n//# sourceMappingURL=TextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Number of floating point numbers that represent a single glyph in the SDF vertex buffer.\n *\n * @remarks\n * The vertex buffer contains:\n *  - 6 vertex positions\n *  - 6 texture coordinates\n *  - = 12 positions/coordinates per glyph\n *\n * Each vertex position and texture coordinate consist of 2 floating point numbers (x/y).\n * So there are 12 * 2 = 24 floating point numbers that make up a single glyph.\n */\nexport const FLOATS_PER_GLYPH = 24;\n//# sourceMappingURL=constants.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Gets the start conditions for the layout loop.\n *\n * @remarks\n * Returns `undefined` if the layout loop should not be run.\n *\n * @param fontSize\n * @param fontSizeRatio\n * @param sdfLineHeight\n * @param renderWindow\n * @param lineCache\n * @param textH\n * @returns\n */\nexport function getStartConditions(fontSize, offsetY, fontSizeRatio, sdfLineHeight, renderWindow, lineCache, textH) {\n    // State variables\n    let startLineIndex = 0;\n    if (renderWindow) {\n        startLineIndex = Math.min(Math.max(Math.floor(renderWindow.y1 / fontSize), 0), lineCache.length);\n    }\n    // TODO: Possibly break out startX / startY into a separate function\n    // TODO: (fontSize / 6.4286 / fontSizeRatio) Adding this to the startY helps the text line up better with Canvas rendered text\n    const startX = 0;\n    const startY = offsetY / fontSizeRatio + startLineIndex * sdfLineHeight; // TODO: Figure out what determines the initial y offset of text.\n    // Don't attempt to render anything if we know we're starting past the established end of the text\n    if (textH && startY >= textH / fontSizeRatio) {\n        return;\n    }\n    return {\n        x: startX,\n        y: startY,\n        lineIndex: startLineIndex,\n    };\n}\n//# sourceMappingURL=getStartConditions.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * A wrapper Generator class that makes a generator peekable.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class PeekableIterator {\n    iterator;\n    peekBuffer = [];\n    _lastIndex;\n    constructor(iterator, indexBase = 0) {\n        this.iterator = iterator;\n        this.iterator = iterator;\n        this._lastIndex = indexBase - 1;\n        this.peekBuffer = [];\n    }\n    next() {\n        const nextResult = this.peekBuffer.length > 0\n            ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                this.peekBuffer.pop()\n            : this.iterator.next();\n        if (nextResult.done) {\n            this._lastIndex = -1;\n        }\n        else {\n            this._lastIndex++;\n        }\n        return nextResult;\n    }\n    peek() {\n        if (this.peekBuffer.length > 0) {\n            // We know that the buffer is not empty, so we can safely use the\n            // non-null assertion operator\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return this.peekBuffer[0];\n        }\n        const result = this.iterator.next();\n        this.peekBuffer.push(result);\n        return result;\n    }\n    get lastIndex() {\n        return this._lastIndex;\n    }\n}\n//# sourceMappingURL=PeekableGenerator.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Reversible Generator Wrapper Class\n/**\n * Generator function that yields each Unicode code point in the given string.\n */\nexport function* getUnicodeCodepoints(text, start = 0) {\n    let i = start;\n    while (i < text.length) {\n        const codePoint = text.codePointAt(i);\n        if (codePoint === undefined) {\n            throw new Error('Invalid Unicode code point');\n        }\n        yield codePoint;\n        i += codePoint <= 0xffff ? 1 : 2;\n    }\n}\n//# sourceMappingURL=getUnicodeCodepoints.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { PeekableIterator } from './PeekableGenerator.js';\nimport { getUnicodeCodepoints } from './getUnicodeCodepoints.js';\n/**\n * Measures a single-line of text width ignoring any unmapped glyphs including line breaks\n *\n * @param text\n * @param shaperProps\n * @param shaper\n * @returns\n */\nexport function measureText(text, shaperProps, shaper) {\n    const glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, 0), 0));\n    let width = 0;\n    for (const glyph of glyphs) {\n        if (glyph.mapped) {\n            width += glyph.xAdvance;\n        }\n    }\n    return width;\n}\n//# sourceMappingURL=measureText.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../../../../utils.js';\nimport { PeekableIterator } from './PeekableGenerator.js';\nimport { getUnicodeCodepoints } from './getUnicodeCodepoints.js';\nimport { measureText } from './measureText.js';\nexport function layoutText(curLineIndex, startX, startY, text, textAlign, width, height, fontSize, letterSpacing, \n/**\n * Mutated\n */\nvertexBuffer, contain, \n/**\n * Mutated\n */\nlineCache, renderWindow, trFontFace, forceFullLayoutCalc, scrollable) {\n    assertTruthy(trFontFace, 'Font face must be loaded');\n    assertTruthy(trFontFace.loaded, 'Font face must be loaded');\n    assertTruthy(trFontFace.data, 'Font face must be loaded');\n    assertTruthy(trFontFace.shaper, 'Font face must be loaded');\n    // Regardless of fontSize (or other scaling properties), we layout the vertices of each glyph\n    // using the fixed coordinate space determined by font size used to produce the atlas.\n    // Scaling for display is handled by shader uniforms inexpensively.\n    // So we have:\n    //  - vertex space: the space in which the vertices of each glyph are laid out\n    //  - screen space: the screen pixel space\n    // Input properties such as x, y, w, fontSize, letterSpacing, etc. are all expressed in screen space.\n    // We convert these to the vertex space by dividing them the `fontSizeRatio` factor.\n    /**\n     * `lineHeight` in vertex coordinates\n     */\n    const vertexLineHeight = trFontFace.data.info.size;\n    /**\n     * See above\n     */\n    const fontSizeRatio = fontSize / vertexLineHeight;\n    /**\n     * `w` in vertex coordinates\n     */\n    const vertexW = width / fontSizeRatio;\n    /**\n     * `letterSpacing` in vertex coordinates\n     */\n    const vertexLSpacing = letterSpacing / fontSizeRatio;\n    const startingLineCacheEntry = lineCache[curLineIndex];\n    const startingCodepointIndex = startingLineCacheEntry?.codepointIndex || 0;\n    const startingMaxX = startingLineCacheEntry?.maxX || 0;\n    const startingMaxY = startingLineCacheEntry?.maxY || 0;\n    let maxX = startingMaxX;\n    let maxY = startingMaxY;\n    let curX = startX;\n    let curY = startY;\n    let bufferOffset = 0;\n    /**\n     * Buffer offset to last word boundry. This is -1 when we aren't in a word boundry.\n     */\n    const lastWord = {\n        codepointIndex: -1,\n        bufferOffset: -1,\n        xStart: -1,\n    };\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const shaper = trFontFace.shaper;\n    const shaperProps = {\n        letterSpacing: vertexLSpacing,\n    };\n    // Get glyphs\n    let glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, startingCodepointIndex), startingCodepointIndex));\n    let glyphResult;\n    let curLineBufferStart = -1;\n    const bufferLineInfos = [];\n    const truncateSeq = '...';\n    const vertexTruncateHeight = height / fontSizeRatio;\n    const truncateSeqVertexWidth = measureText(truncateSeq, shaperProps, shaper);\n    // Line-by-line layout\n    let moreLines = true;\n    while (moreLines) {\n        const nextLineWillFit = contain !== 'both' ||\n            scrollable ||\n            curY + vertexLineHeight + vertexLineHeight <= vertexTruncateHeight;\n        const lineVertexW = nextLineWillFit\n            ? vertexW\n            : vertexW - truncateSeqVertexWidth;\n        /**\n         * Vertex X position to the beginning of the last word boundary. This becomes -1 when we start traversing a word.\n         */\n        let xStartLastWordBoundary = 0;\n        // Layout glyphs in this line\n        // Any break statements in this while loop will trigger a line break\n        while ((glyphResult = glyphs.next()) && !glyphResult.done) {\n            const glyph = glyphResult.value;\n            if (curLineIndex === lineCache.length) {\n                lineCache.push({\n                    codepointIndex: glyph.cluster,\n                    maxY,\n                    maxX,\n                });\n            }\n            else if (curLineIndex > lineCache.length) {\n                throw new Error('Unexpected lineCache length');\n            }\n            // If we encounter a word boundary (white space or newline) we invalidate\n            // the lastWord and set the xStartLastWordBoundary if we haven't already.\n            if (glyph.codepoint === 32 || glyph.codepoint === 10) {\n                if (lastWord.codepointIndex !== -1) {\n                    lastWord.codepointIndex = -1;\n                    xStartLastWordBoundary = curX;\n                }\n            }\n            else if (lastWord.codepointIndex === -1) {\n                lastWord.codepointIndex = glyph.cluster;\n                lastWord.bufferOffset = bufferOffset;\n                lastWord.xStart = xStartLastWordBoundary;\n            }\n            if (glyph.mapped) {\n                // Mapped glyph\n                const charEndX = curX + glyph.xOffset + glyph.width;\n                // Word wrap check\n                if (\n                // We are containing the text\n                contain !== 'none' &&\n                    // The current glyph reaches outside the contained width\n                    charEndX >= lineVertexW &&\n                    // There is a last word that we can break to the next line\n                    lastWord.codepointIndex !== -1 &&\n                    // We have advanced at least one character since the last word started\n                    lastWord.codepointIndex < glyph.cluster &&\n                    // Prevents infinite loop when a single word is longer than the width\n                    lastWord.xStart > 0) {\n                    // The current word is about to go off the edge of the container width\n                    // Reinitialize the iterator starting at the last word\n                    // and proceeding to the next line\n                    if (nextLineWillFit) {\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(text, lastWord.codepointIndex), lastWord.codepointIndex));\n                        bufferOffset = lastWord.bufferOffset;\n                        break;\n                    }\n                    else {\n                        glyphs = shaper.shapeText(shaperProps, new PeekableIterator(getUnicodeCodepoints(truncateSeq, 0), 0));\n                        curX = lastWord.xStart;\n                        bufferOffset = lastWord.bufferOffset;\n                    }\n                }\n                else {\n                    // This glyph fits, so we can add it to the buffer\n                    const quadX = curX + glyph.xOffset;\n                    const quadY = curY + glyph.yOffset;\n                    const lineIsBelowWindowTop = renderWindow\n                        ? curY + vertexLineHeight >= renderWindow.y1 / fontSizeRatio\n                        : true;\n                    const lineIsAboveWindowBottom = renderWindow\n                        ? curY <= renderWindow.y2 / fontSizeRatio\n                        : true;\n                    // Only add to buffer for rendering if the line is within the render window\n                    if (lineIsBelowWindowTop && lineIsAboveWindowBottom) {\n                        if (curLineBufferStart === -1) {\n                            curLineBufferStart = bufferOffset;\n                        }\n                        const atlasEntry = trFontFace.getAtlasEntry(glyph.glyphId);\n                        // Add texture coordinates\n                        const u = atlasEntry.x / trFontFace.data.common.scaleW;\n                        const v = atlasEntry.y / trFontFace.data.common.scaleH;\n                        const uvWidth = atlasEntry.width / trFontFace.data.common.scaleW;\n                        const uvHeight = atlasEntry.height / trFontFace.data.common.scaleH;\n                        // TODO: (Performance) We can optimize this by using ELEMENT_ARRAY_BUFFER\n                        // eliminating the need to duplicate vertices\n                        // Top-left\n                        vertexBuffer[bufferOffset++] = quadX;\n                        vertexBuffer[bufferOffset++] = quadY;\n                        vertexBuffer[bufferOffset++] = u;\n                        vertexBuffer[bufferOffset++] = v;\n                        // Top-right\n                        vertexBuffer[bufferOffset++] = quadX + glyph.width;\n                        vertexBuffer[bufferOffset++] = quadY;\n                        vertexBuffer[bufferOffset++] = u + uvWidth;\n                        vertexBuffer[bufferOffset++] = v;\n                        // Bottom-left\n                        vertexBuffer[bufferOffset++] = quadX;\n                        vertexBuffer[bufferOffset++] = quadY + glyph.height;\n                        vertexBuffer[bufferOffset++] = u;\n                        vertexBuffer[bufferOffset++] = v + uvHeight;\n                        // Bottom-right\n                        vertexBuffer[bufferOffset++] = quadX + glyph.width;\n                        vertexBuffer[bufferOffset++] = quadY + glyph.height;\n                        vertexBuffer[bufferOffset++] = u + uvWidth;\n                        vertexBuffer[bufferOffset++] = v + uvHeight;\n                    }\n                    maxY = Math.max(maxY, quadY + glyph.height);\n                    curX += glyph.xAdvance;\n                    maxX = Math.max(maxX, curX);\n                }\n            }\n            else {\n                // Unmapped character\n                // Handle newlines\n                if (glyph.codepoint === 10) {\n                    break;\n                }\n            }\n        }\n        // Prepare for the next line...\n        if (curLineBufferStart !== -1) {\n            bufferLineInfos.push({\n                bufferStart: curLineBufferStart,\n                bufferEnd: bufferOffset,\n            });\n            curLineBufferStart = -1;\n        }\n        curX = 0;\n        curY += vertexLineHeight;\n        curLineIndex++;\n        lastWord.codepointIndex = -1;\n        xStartLastWordBoundary = 0;\n        // Figure out if there are any more lines to render...\n        if (!forceFullLayoutCalc &&\n            contain === 'both' &&\n            renderWindow &&\n            curY > renderWindow.y2 / fontSizeRatio) {\n            // Stop layout calculation early (for performance purposes) if:\n            // - We're not forcing a full layout calculation (for width/height calculation)\n            // - ...and we're containing the text vertically+horizontally (contain === 'both')\n            // - ...and we have a render window\n            // - ...and the next line is below the bottom of the render window\n            moreLines = false;\n        }\n        else if (glyphResult && glyphResult.done) {\n            // If we've reached the end of the text, we know we're done\n            moreLines = false;\n        }\n        else if (contain === 'both' && !scrollable && !nextLineWillFit) {\n            // If we're contained vertically+horizontally (contain === 'both')\n            // but not scrollable and the next line won't fit, we're done.\n            moreLines = false;\n        }\n    }\n    // Use textAlign to determine if we need to adjust the x position of the text\n    // in the buffer line by line\n    if (textAlign === 'center') {\n        const vertexTextW = contain === 'none' ? maxX : vertexW;\n        for (let i = 0; i < bufferLineInfos.length; i++) {\n            const line = bufferLineInfos[i];\n            // - 4 = the x position of a rightmost vertex\n            const lineWidth = \n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            vertexBuffer[line.bufferEnd - 4] - vertexBuffer[line.bufferStart];\n            const xOffset = (vertexTextW - lineWidth) / 2;\n            for (let j = line.bufferStart; j < line.bufferEnd; j += 4) {\n                vertexBuffer[j] += xOffset;\n            }\n        }\n    }\n    else if (textAlign === 'right') {\n        const vertexTextW = contain === 'none' ? maxX : vertexW;\n        for (let i = 0; i < bufferLineInfos.length; i++) {\n            const line = bufferLineInfos[i];\n            const lineWidth = line.bufferEnd === line.bufferStart\n                ? 0\n                : // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    vertexBuffer[line.bufferEnd - 4] - vertexBuffer[line.bufferStart];\n            const xOffset = vertexTextW - lineWidth;\n            for (let j = line.bufferStart; j < line.bufferEnd; j += 4) {\n                vertexBuffer[j] += xOffset;\n            }\n        }\n    }\n    assertTruthy(glyphResult);\n    return {\n        bufferNumFloats: bufferOffset,\n        bufferNumQuads: bufferOffset / 16,\n        layoutNumCharacters: glyphResult.done\n            ? text.length - startingCodepointIndex\n            : glyphResult.value.cluster - startingCodepointIndex + 1,\n        fullyProcessed: !!glyphResult.done,\n        maxX,\n        maxY,\n    };\n}\n//# sourceMappingURL=layoutText.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isBoundPositive } from '../../../../lib/utils.js';\n/**\n * Create a render window from the given parameters.\n *\n * @remarks\n * The render window is a rectangle that defines the area of the text that\n * should be rendered. It is used to skip rendering parts of the text that\n * are outside of the render window. The render window is relative to the\n * text's top left corner of the overrall text.\n *\n * @param x The x coordinate of the text element's top left corner relative to the screen.\n * @param y The y coordinate of the text element's top left corner relative to the screen.\n * @param scrollY The amount of pixels to scroll the text vertically.\n * @param lineHeight The height of a single line of text.\n * @param numExtraLines The number of extra lines to render above and below the visible window.\n * @param visibleWindow The visible window of the text element relative to the screen\n * @returns\n */\nexport function makeRenderWindow(x, y, scrollY, lineHeight, numExtraLines, visibleWindow) {\n    const bufferMargin = lineHeight * numExtraLines;\n    const x1 = visibleWindow.x1 - x;\n    const y1 = visibleWindow.y1 - y;\n    return isBoundPositive(visibleWindow)\n        ? {\n            x1: x1,\n            y1: y1 + scrollY - bufferMargin,\n            x2: x1 + (visibleWindow.x2 - visibleWindow.x1),\n            y2: y1 + scrollY + (visibleWindow.y2 - visibleWindow.y1) + bufferMargin,\n        }\n        : {\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0,\n        };\n}\n//# sourceMappingURL=makeRenderWindow.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { intersectBound, createBound, } from '../../../lib/utils.js';\nimport { TextRenderer, } from '../TextRenderer.js';\nimport { SdfTrFontFace } from '../../font-face-types/SdfTrFontFace/SdfTrFontFace.js';\nimport { FLOATS_PER_GLYPH } from './internal/constants.js';\nimport { getStartConditions } from './internal/getStartConditions.js';\nimport { layoutText } from './internal/layoutText.js';\nimport { makeRenderWindow } from './internal/makeRenderWindow.js';\nimport { TrFontManager } from '../../TrFontManager.js';\nimport { assertTruthy, mergeColorAlpha } from '../../../../utils.js';\nimport { WebGlCoreRenderOp } from '../../../renderers/webgl/WebGlCoreRenderOp.js';\nimport { BufferCollection } from '../../../renderers/webgl/internal/BufferCollection.js';\nimport { EventEmitter } from '../../../../common/EventEmitter.js';\n/**\n * Ephemeral bounds object used for intersection calculations\n *\n * @remarks\n * Used to avoid creating a new object every time we need to intersect\n * element bounds.\n */\nconst tmpElementBounds = createBound(0, 0, 0, 0);\n/**\n * Singleton class for rendering text using signed distance fields.\n *\n * @remarks\n * SdfTextRenderer supports both single-channel and multi-channel signed distance fields.\n */\nexport class SdfTextRenderer extends TextRenderer {\n    /**\n     * Map of font family names to a set of font faces.\n     */\n    ssdfFontFamilies = {};\n    msdfFontFamilies = {};\n    sdfShader;\n    rendererBounds;\n    constructor(stage) {\n        super(stage);\n        this.sdfShader = this.stage.shManager.loadShader('SdfShader').shader;\n        this.rendererBounds = {\n            x1: 0,\n            y1: 0,\n            x2: this.stage.options.appWidth,\n            y2: this.stage.options.appHeight,\n        };\n    }\n    //#region Overrides\n    getPropertySetters() {\n        return {\n            fontFamily: (state, value) => {\n                state.props.fontFamily = value;\n                state.trFontFace = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontWeight: (state, value) => {\n                state.props.fontWeight = value;\n                state.trFontFace = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStyle: (state, value) => {\n                state.props.fontStyle = value;\n                state.trFontFace = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStretch: (state, value) => {\n                state.props.fontStretch = value;\n                state.trFontFace = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontSize: (state, value) => {\n                state.props.fontSize = value;\n                this.invalidateLayoutCache(state);\n            },\n            text: (state, value) => {\n                state.props.text = value;\n                this.invalidateLayoutCache(state);\n            },\n            textAlign: (state, value) => {\n                state.props.textAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            color: (state, value) => {\n                state.props.color = value;\n            },\n            x: (state, value) => {\n                state.props.x = value;\n                this.invalidateVisibleWindowCache(state);\n            },\n            y: (state, value) => {\n                state.props.y = value;\n                this.invalidateVisibleWindowCache(state);\n            },\n            contain: (state, value) => {\n                state.props.contain = value;\n                this.invalidateLayoutCache(state);\n            },\n            width: (state, value) => {\n                state.props.width = value;\n                this.invalidateLayoutCache(state);\n            },\n            height: (state, value) => {\n                state.props.height = value;\n                this.invalidateLayoutCache(state);\n            },\n            offsetY: (state, value) => {\n                state.props.offsetY = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollable: (state, value) => {\n                state.props.scrollable = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollY: (state, value) => {\n                state.props.scrollY = value;\n                // Scrolling doesn't need to invalidate any caches, but it does need to\n                // schedule an update\n                this.scheduleUpdateState(state);\n            },\n            letterSpacing: (state, value) => {\n                state.props.letterSpacing = value;\n                this.invalidateLayoutCache(state);\n            },\n            debug: (state, value) => {\n                state.props.debug = value;\n            },\n        };\n    }\n    canRenderFont(props) {\n        // TODO: Support matching on font stretch, weight and style (if/when needed)\n        // For now we just match on the font family name\n        // '$$SDF_FAILURE_TEST$$' is used to test the 'failure' event coming from text\n        const { fontFamily } = props;\n        return (fontFamily in this.ssdfFontFamilies ||\n            fontFamily in this.msdfFontFamilies ||\n            fontFamily === '$$SDF_FAILURE_TEST$$');\n    }\n    isFontFaceSupported(fontFace) {\n        return fontFace instanceof SdfTrFontFace;\n    }\n    addFontFace(fontFace) {\n        // Make sure the font face is an SDF font face (it should have already passed\n        // the `isFontFaceSupported` check)\n        assertTruthy(fontFace instanceof SdfTrFontFace);\n        const familyName = fontFace.fontFamily;\n        const fontFamiles = fontFace.type === 'ssdf'\n            ? this.ssdfFontFamilies\n            : fontFace.type === 'msdf'\n                ? this.msdfFontFamilies\n                : undefined;\n        if (!fontFamiles) {\n            console.warn(`Invalid font face type: ${fontFace.type}`);\n            return;\n        }\n        let faceSet = fontFamiles[familyName];\n        if (!faceSet) {\n            faceSet = new Set();\n            fontFamiles[familyName] = faceSet;\n        }\n        faceSet.add(fontFace);\n    }\n    createState(props) {\n        return {\n            props,\n            status: 'initialState',\n            updateScheduled: false,\n            emitter: new EventEmitter(),\n            lineCache: [],\n            forceFullLayoutCalc: false,\n            renderWindow: undefined,\n            visibleWindow: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n                valid: false,\n            },\n            bufferNumFloats: 0,\n            bufferNumQuads: 0,\n            vertexBuffer: undefined,\n            webGlBuffers: null,\n            bufferUploaded: false,\n            textH: undefined,\n            textW: undefined,\n            distanceRange: 0,\n            trFontFace: undefined,\n            debugData: {\n                updateCount: 0,\n                layoutCount: 0,\n                lastLayoutNumCharacters: 0,\n                layoutSum: 0,\n                drawSum: 0,\n                drawCount: 0,\n                bufferSize: 0,\n            },\n        };\n    }\n    updateState(state) {\n        let { trFontFace } = state;\n        const { textH, lineCache, debugData, forceFullLayoutCalc } = state;\n        debugData.updateCount++;\n        // On the first update call we need to set the status to loading\n        if (state.status === 'initialState') {\n            this.setStatus(state, 'loading');\n        }\n        // Resolve font face if we haven't yet\n        if (!trFontFace) {\n            trFontFace = this.resolveFontFace(state.props);\n            state.trFontFace = trFontFace;\n            if (!trFontFace) {\n                const msg = `SdfTextRenderer: Could not resolve font face for family: '${state.props.fontFamily}'`;\n                console.error(msg);\n                this.setStatus(state, 'failed', new Error(msg));\n                return;\n            }\n        }\n        // If the font hasn't been loaded yet, stop here.\n        // Listen for the 'loaded' event and forward fontLoaded event\n        if (!trFontFace.loaded) {\n            trFontFace.once('loaded', () => {\n                this.scheduleUpdateState(state);\n            });\n            return;\n        }\n        // If the font is loaded then so should the data\n        assertTruthy(trFontFace.data, 'Font face data should be loaded');\n        const { text, fontSize, x, y, contain, width, height, scrollable } = state.props;\n        // scrollY only has an effect when contain === 'both' and scrollable === true\n        const scrollY = contain === 'both' && scrollable ? state.props.scrollY : 0;\n        let { renderWindow } = state;\n        // Needed in renderWindow calculation\n        const sdfLineHeight = trFontFace.data.info.size;\n        /**\n         * Divide screen space points by this to get the SDF space points\n         * Mulitple SDF space points by this to get screen space points\n         */\n        const fontSizeRatio = fontSize / sdfLineHeight;\n        state.distanceRange =\n            fontSizeRatio * trFontFace.data.distanceField.distanceRange;\n        // Allocate buffers if needed\n        const neededLength = text.length * FLOATS_PER_GLYPH;\n        let vertexBuffer = state.vertexBuffer;\n        if (!vertexBuffer || vertexBuffer.length < neededLength) {\n            vertexBuffer = new Float32Array(neededLength * 2);\n        }\n        const visibleWindow = state.visibleWindow;\n        // If the visibleWindow is not valid, calculate it\n        if (!visibleWindow.valid) {\n            // Figure out whats actually in the bounds of the renderer/canvas (visibleWindow)\n            const elementBounds = createBound(x, y, contain !== 'none' ? x + width : Infinity, contain === 'both' ? y + height : Infinity, tmpElementBounds);\n            /**\n             * Area that is visible on the screen.\n             */\n            intersectBound(this.rendererBounds, elementBounds, state.visibleWindow);\n            visibleWindow.valid = true;\n        }\n        // Return early if we're still viewing inside the established render window\n        // No need to re-render what we've already rendered\n        // (Only if there's an established renderWindow and we're not suppressing early exit)\n        if (!forceFullLayoutCalc && renderWindow) {\n            if (x + renderWindow.x1 <= visibleWindow.x1 &&\n                x + renderWindow.x2 >= visibleWindow.x2 &&\n                y - scrollY + renderWindow.y1 <= visibleWindow.y1 &&\n                y - scrollY + renderWindow.y2 >= visibleWindow.y2) {\n                this.setStatus(state, 'loaded');\n                return;\n            }\n            // Otherwise clear the renderWindow so it can be redone\n            renderWindow = state.renderWindow = undefined;\n            this.setStatus(state, 'loading');\n        }\n        const { offsetY, textAlign } = state.props;\n        // Create a new renderWindow if needed\n        if (!renderWindow) {\n            const visibleWindowHeight = visibleWindow.y2 - visibleWindow.y1;\n            const maxLinesPerCanvasPage = Math.ceil(visibleWindowHeight / sdfLineHeight);\n            renderWindow = makeRenderWindow(x, y, scrollY, sdfLineHeight, maxLinesPerCanvasPage, visibleWindow);\n        }\n        const start = getStartConditions(fontSize, offsetY, fontSizeRatio, sdfLineHeight, renderWindow, lineCache, textH);\n        if (!start) {\n            // Nothing to render, return early, but still mark as loaded (since the text is just scrolled\n            // out of view)\n            this.setStatus(state, 'loaded');\n            return;\n        }\n        const { letterSpacing } = state.props;\n        const out2 = layoutText(start.lineIndex, start.x, start.y, text, textAlign, width, height, fontSize, letterSpacing, vertexBuffer, contain, lineCache, renderWindow, trFontFace, forceFullLayoutCalc, scrollable);\n        state.bufferUploaded = false;\n        state.bufferNumFloats = out2.bufferNumFloats;\n        state.bufferNumQuads = out2.bufferNumQuads;\n        state.vertexBuffer = vertexBuffer;\n        state.renderWindow = renderWindow;\n        debugData.lastLayoutNumCharacters = out2.layoutNumCharacters;\n        debugData.bufferSize = vertexBuffer.byteLength;\n        // If we didn't exit early, we know we have completely computed w/h\n        if (out2.fullyProcessed) {\n            state.textW = out2.maxX * fontSizeRatio;\n            state.textH = out2.maxY * fontSizeRatio;\n        }\n        // if (state.props.debug.printLayoutTime) {\n        //   debugData.layoutSum += performance.now() - updateStartTime;\n        //   debugData.layoutCount++;\n        // }\n        this.setStatus(state, 'loaded');\n    }\n    renderQuads(state, transform, clippingRect, alpha) {\n        if (!state.vertexBuffer) {\n            // Nothing to draw\n            return;\n        }\n        const drawStartTime = performance.now();\n        const { sdfShader } = this;\n        const { renderer } = this.stage;\n        const { appWidth, appHeight } = this.stage.options;\n        const { fontSize, color, contain, scrollable, zIndex, debug } = state.props;\n        // scrollY only has an effect when contain === 'both' and scrollable === true\n        const scrollY = contain === 'both' && scrollable ? state.props.scrollY : 0;\n        const { textW = 0, textH = 0, distanceRange, vertexBuffer, bufferUploaded, trFontFace, } = state;\n        let { webGlBuffers } = state;\n        if (!webGlBuffers) {\n            const gl = renderer.gl;\n            const stride = 4 * Float32Array.BYTES_PER_ELEMENT;\n            const webGlBuffer = gl.createBuffer();\n            assertTruthy(webGlBuffer);\n            state.webGlBuffers = new BufferCollection([\n                {\n                    buffer: webGlBuffer,\n                    attributes: {\n                        a_position: {\n                            name: 'a_position',\n                            size: 2,\n                            type: gl.FLOAT,\n                            normalized: false,\n                            stride,\n                            offset: 0, // start at the beginning of the buffer\n                        },\n                        a_textureCoordinate: {\n                            name: 'a_textureCoordinate',\n                            size: 2,\n                            type: gl.FLOAT,\n                            normalized: false,\n                            stride,\n                            offset: 2 * Float32Array.BYTES_PER_ELEMENT,\n                        },\n                    },\n                },\n            ]);\n            state.bufferUploaded = false;\n            assertTruthy(state.webGlBuffers);\n            webGlBuffers = state.webGlBuffers;\n        }\n        if (!bufferUploaded) {\n            const gl = renderer.gl;\n            const buffer = webGlBuffers?.getBuffer('a_textureCoordinate') ?? null;\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.bufferData(gl.ARRAY_BUFFER, vertexBuffer, gl.STATIC_DRAW);\n            state.bufferUploaded = true;\n        }\n        assertTruthy(trFontFace);\n        const renderOp = new WebGlCoreRenderOp(renderer.gl, renderer.options, webGlBuffers, this.sdfShader, {\n            transform: transform.data,\n            // IMPORTANT: The SDF Shader expects the color NOT to be premultiplied\n            // for the best blending results. Which is why we use `mergeColorAlpha`\n            // instead of `mergeColorAlphaPremultiplied` here.\n            color: mergeColorAlpha(color, alpha),\n            size: fontSize / (trFontFace.data?.info.size || 0),\n            scrollY,\n            distanceRange,\n            debug: debug.sdfShaderDebug,\n        }, alpha, clippingRect, { height: textH, width: textW }, 0, zIndex);\n        const texture = state.trFontFace?.texture;\n        assertTruthy(texture);\n        const ctxTexture = this.stage.txManager.getCtxTexture(texture);\n        renderOp.addTexture(ctxTexture);\n        renderOp.length = state.bufferNumFloats;\n        renderOp.numQuads = state.bufferNumQuads;\n        renderer.addRenderOp(renderOp);\n        // const elementRect = {\n        //   x: x,\n        //   y: y,\n        //   w: contain !== 'none' ? width : textW,\n        //   h: contain === 'both' ? height : textH,\n        // };\n        // const visibleRect = intersectRect(\n        //   {\n        //     x: 0,\n        //     y: 0,\n        //     w: renderer.w,\n        //     h: renderer.h,\n        //   },\n        //   elementRect,\n        // );\n        // if (!debug.disableScissor) {\n        //   renderer.enableScissor(\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // Draw the arrays\n        // gl.drawArrays(\n        //   gl.TRIANGLES, // Primitive type\n        //   0,\n        //   bufferNumVertices, // Number of verticies\n        // );\n        // renderer.disableScissor();\n        // if (debug.showElementRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Blue,\n        //     elementRect.x,\n        //     elementRect.y,\n        //     elementRect.w,\n        //     elementRect.h,\n        //   );\n        // }\n        // if (debug.showVisibleRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Green,\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // if (debug.showRenderWindow && renderWindow) {\n        //   this.renderer.drawBorder(\n        //     Colors.Red,\n        //     x + renderWindow.x1,\n        //     y + renderWindow.y1 - scrollY,\n        //     x + renderWindow.x2 - (x + renderWindow.x1),\n        //     y + renderWindow.y2 - scrollY - (y + renderWindow.y1 - scrollY),\n        //   );\n        // }\n        // if (debug.printLayoutTime) {\n        //   debugData.drawSum += performance.now() - drawStartTime;\n        //   debugData.drawCount++;\n        // }\n    }\n    //#endregion Overrides\n    resolveFontFace(props) {\n        return TrFontManager.resolveFontFace([this.msdfFontFamilies, this.ssdfFontFamilies], props);\n    }\n    /**\n     * Invalidate the visible window stored in the state. This will cause a new\n     * visible window to be calculated on the next update.\n     *\n     * @param state\n     */\n    invalidateVisibleWindowCache(state) {\n        state.visibleWindow.valid = false;\n        this.scheduleUpdateState(state);\n    }\n    /**\n     * Invalidate the layout cache stored in the state. This will cause the text\n     * to be re-layed out on the next update.\n     *\n     * @remarks\n     * This also invalidates the visible window cache.\n     *\n     * @param state\n     */\n    invalidateLayoutCache(state) {\n        state.visibleWindow.valid = false;\n        state.renderWindow = undefined;\n        state.textH = undefined;\n        state.textW = undefined;\n        state.lineCache = [];\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n}\n//# sourceMappingURL=SdfTextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { getRgbaString } from '../../lib/utils.js';\nconst MAX_TEXTURE_DIMENSION = 2048;\nexport class LightningTextTextureRenderer {\n    _canvas;\n    _context;\n    _settings;\n    renderInfo;\n    constructor(canvas, context) {\n        this._canvas = canvas;\n        this._context = context;\n        this._settings = this.mergeDefaults({});\n    }\n    set settings(v) {\n        this._settings = this.mergeDefaults(v);\n    }\n    get settings() {\n        return this._settings;\n    }\n    getPrecision() {\n        return this._settings.precision;\n    }\n    setFontProperties() {\n        this._context.font = this._getFontSetting();\n        this._context.textBaseline = this._settings.textBaseline;\n    }\n    _getFontSetting() {\n        const ff = [this._settings.fontFace];\n        const ffs = [];\n        for (let i = 0, n = ff.length; i < n; i++) {\n            if (ff[i] === 'serif' || ff[i] === 'sans-serif') {\n                ffs.push(ff[i]);\n            }\n            else {\n                ffs.push(`\"${ff[i]}\"`);\n            }\n        }\n        return `${this._settings.fontStyle} ${this._settings.fontSize * this.getPrecision()}px ${ffs.join(',')}`;\n    }\n    _load() {\n        if (true && document.fonts) {\n            const fontSetting = this._getFontSetting();\n            try {\n                if (!document.fonts.check(fontSetting, this._settings.text)) {\n                    // Use a promise that waits for loading.\n                    return document.fonts\n                        .load(fontSetting, this._settings.text)\n                        .catch((err) => {\n                        // Just load the fallback font.\n                        console.warn('[Lightning] Font load error', err, fontSetting);\n                    })\n                        .then(() => {\n                        if (!document.fonts.check(fontSetting, this._settings.text)) {\n                            console.warn('[Lightning] Font not found', fontSetting);\n                        }\n                    });\n                }\n            }\n            catch (e) {\n                console.warn(\"[Lightning] Can't check font loading for \" + fontSetting);\n            }\n        }\n    }\n    calculateRenderInfo() {\n        const renderInfo = {};\n        const precision = this.getPrecision();\n        const paddingLeft = this._settings.paddingLeft * precision;\n        const paddingRight = this._settings.paddingRight * precision;\n        const fontSize = this._settings.fontSize * precision;\n        let offsetY = this._settings.offsetY === null\n            ? null\n            : this._settings.offsetY * precision;\n        let lineHeight = (this._settings.lineHeight || fontSize) * precision;\n        const w = this._settings.w * precision;\n        const h = this._settings.h * precision;\n        let wordWrapWidth = this._settings.wordWrapWidth * precision;\n        const cutSx = this._settings.cutSx * precision;\n        const cutEx = this._settings.cutEx * precision;\n        const cutSy = this._settings.cutSy * precision;\n        const cutEy = this._settings.cutEy * precision;\n        const letterSpacing = (this._settings.letterSpacing || 0) * precision;\n        const textIndent = this._settings.textIndent * precision;\n        // Set font properties.\n        this.setFontProperties();\n        // Total width.\n        let width = w || 2048 / this.getPrecision();\n        // Inner width.\n        let innerWidth = width - paddingLeft;\n        if (innerWidth < 10) {\n            width += 10 - innerWidth;\n            innerWidth = 10;\n        }\n        if (!wordWrapWidth) {\n            wordWrapWidth = innerWidth;\n        }\n        // Text overflow\n        if (this._settings.textOverflow && !this._settings.wordWrap) {\n            let suffix;\n            switch (this._settings.textOverflow) {\n                case 'clip':\n                    suffix = '';\n                    break;\n                case 'ellipsis':\n                    suffix = this._settings.maxLinesSuffix;\n                    break;\n                default:\n                    suffix = this._settings.textOverflow;\n            }\n            this._settings.text = this.wrapWord(this._settings.text, wordWrapWidth - textIndent, suffix);\n        }\n        // word wrap\n        // preserve original text\n        let linesInfo;\n        if (this._settings.wordWrap) {\n            linesInfo = this.wrapText(this._settings.text, wordWrapWidth, letterSpacing, textIndent);\n        }\n        else {\n            linesInfo = { l: this._settings.text.split(/(?:\\r\\n|\\r|\\n)/), n: [] };\n            const n = linesInfo.l.length;\n            for (let i = 0; i < n - 1; i++) {\n                linesInfo.n.push(i);\n            }\n        }\n        let lines = linesInfo.l;\n        if (this._settings.maxLines && lines.length > this._settings.maxLines) {\n            const usedLines = lines.slice(0, this._settings.maxLines);\n            let otherLines = null;\n            if (this._settings.maxLinesSuffix) {\n                // Wrap again with max lines suffix enabled.\n                const w = this._settings.maxLinesSuffix\n                    ? this.measureText(this._settings.maxLinesSuffix)\n                    : 0;\n                const al = this.wrapText(usedLines[usedLines.length - 1], wordWrapWidth - w, letterSpacing, textIndent);\n                usedLines[usedLines.length - 1] = `${al.l[0]}${this._settings.maxLinesSuffix}`;\n                otherLines = [al.l.length > 1 ? al.l[1] : ''];\n            }\n            else {\n                otherLines = [''];\n            }\n            // Re-assemble the remaining text.\n            let i;\n            const n = lines.length;\n            let j = 0;\n            const m = linesInfo.n.length;\n            for (i = this._settings.maxLines; i < n; i++) {\n                otherLines[j] += `${otherLines[j] ? ' ' : ''}${lines[i]}`;\n                if (i + 1 < m && linesInfo.n[i + 1]) {\n                    j++;\n                }\n            }\n            renderInfo.remainingText = otherLines.join('\\n');\n            renderInfo.moreTextLines = true;\n            lines = usedLines;\n        }\n        else {\n            renderInfo.moreTextLines = false;\n            renderInfo.remainingText = '';\n        }\n        // calculate text width\n        let maxLineWidth = 0;\n        const lineWidths = [];\n        for (let i = 0; i < lines.length; i++) {\n            const lineWidth = this.measureText(lines[i], letterSpacing) + (i === 0 ? textIndent : 0);\n            lineWidths.push(lineWidth);\n            maxLineWidth = Math.max(maxLineWidth, lineWidth);\n        }\n        renderInfo.lineWidths = lineWidths;\n        if (!w) {\n            // Auto-set width to max text length.\n            width = maxLineWidth + paddingLeft + paddingRight;\n            innerWidth = maxLineWidth;\n        }\n        // calculate text height\n        lineHeight = lineHeight || fontSize;\n        let height;\n        if (h) {\n            height = h;\n        }\n        else {\n            const baselineOffset = this._settings.textBaseline != 'bottom' ? 0.5 * fontSize : 0;\n            height =\n                lineHeight * (lines.length - 1) +\n                    baselineOffset +\n                    Math.max(lineHeight, fontSize) +\n                    (offsetY || 0);\n        }\n        if (offsetY === null) {\n            offsetY = fontSize;\n        }\n        renderInfo.w = width;\n        renderInfo.h = height;\n        renderInfo.lines = lines;\n        renderInfo.precision = precision;\n        if (!width) {\n            // To prevent canvas errors.\n            width = 1;\n        }\n        if (!height) {\n            // To prevent canvas errors.\n            height = 1;\n        }\n        if (cutSx || cutEx) {\n            width = Math.min(width, cutEx - cutSx);\n        }\n        if (cutSy || cutEy) {\n            height = Math.min(height, cutEy - cutSy);\n        }\n        renderInfo.width = width;\n        renderInfo.innerWidth = innerWidth;\n        renderInfo.height = height;\n        renderInfo.fontSize = fontSize;\n        renderInfo.cutSx = cutSx;\n        renderInfo.cutSy = cutSy;\n        renderInfo.cutEx = cutEx;\n        renderInfo.cutEy = cutEy;\n        renderInfo.lineHeight = lineHeight;\n        renderInfo.lineWidths = lineWidths;\n        renderInfo.offsetY = offsetY;\n        renderInfo.paddingLeft = paddingLeft;\n        renderInfo.paddingRight = paddingRight;\n        renderInfo.letterSpacing = letterSpacing;\n        renderInfo.textIndent = textIndent;\n        return renderInfo;\n    }\n    draw(renderInfo, linesOverride) {\n        const precision = this.getPrecision();\n        // Allow lines to be overriden for partial rendering.\n        const lines = linesOverride?.lines || renderInfo.lines;\n        const lineWidths = linesOverride?.lineWidths || renderInfo.lineWidths;\n        const height = linesOverride\n            ? linesOverride.lines.length * renderInfo.lineHeight\n            : renderInfo.height;\n        // Add extra margin to prevent issue with clipped text when scaling.\n        this._canvas.width = Math.min(Math.ceil(renderInfo.width + this._settings.textRenderIssueMargin), MAX_TEXTURE_DIMENSION);\n        this._canvas.height = Math.min(Math.ceil(height), MAX_TEXTURE_DIMENSION);\n        // Canvas context has been reset.\n        this.setFontProperties();\n        if (renderInfo.fontSize >= 128) {\n            // WpeWebKit bug: must force compositing because cairo-traps-compositor will not work with text first.\n            this._context.globalAlpha = 0.01;\n            this._context.fillRect(0, 0, 0.01, 0.01);\n            this._context.globalAlpha = 1.0;\n        }\n        if (renderInfo.cutSx || renderInfo.cutSy) {\n            this._context.translate(-renderInfo.cutSx, -renderInfo.cutSy);\n        }\n        let linePositionX;\n        let linePositionY;\n        const drawLines = [];\n        // Draw lines line by line.\n        for (let i = 0, n = lines.length; i < n; i++) {\n            linePositionX = i === 0 ? renderInfo.textIndent : 0;\n            // By default, text is aligned to top\n            linePositionY = i * renderInfo.lineHeight + renderInfo.offsetY;\n            if (this._settings.verticalAlign == 'middle') {\n                linePositionY += (renderInfo.lineHeight - renderInfo.fontSize) / 2;\n            }\n            else if (this._settings.verticalAlign == 'bottom') {\n                linePositionY += renderInfo.lineHeight - renderInfo.fontSize;\n            }\n            if (this._settings.textAlign === 'right') {\n                linePositionX += renderInfo.innerWidth - lineWidths[i];\n            }\n            else if (this._settings.textAlign === 'center') {\n                linePositionX += (renderInfo.innerWidth - lineWidths[i]) / 2;\n            }\n            linePositionX += renderInfo.paddingLeft;\n            drawLines.push({\n                text: lines[i],\n                x: linePositionX,\n                y: linePositionY,\n                w: lineWidths[i],\n            });\n        }\n        // Highlight.\n        if (this._settings.highlight) {\n            const color = this._settings.highlightColor;\n            const hlHeight = this._settings.highlightHeight * precision || renderInfo.fontSize * 1.5;\n            const offset = this._settings.highlightOffset * precision;\n            const hlPaddingLeft = this._settings.highlightPaddingLeft !== null\n                ? this._settings.highlightPaddingLeft * precision\n                : renderInfo.paddingLeft;\n            const hlPaddingRight = this._settings.highlightPaddingRight !== null\n                ? this._settings.highlightPaddingRight * precision\n                : renderInfo.paddingRight;\n            this._context.fillStyle = getRgbaString(color);\n            for (let i = 0; i < drawLines.length; i++) {\n                const drawLine = drawLines[i];\n                this._context.fillRect(drawLine.x - hlPaddingLeft, drawLine.y - renderInfo.offsetY + offset, drawLine.w + hlPaddingRight + hlPaddingLeft, hlHeight);\n            }\n        }\n        // Text shadow.\n        let prevShadowSettings = null;\n        if (this._settings.shadow) {\n            prevShadowSettings = [\n                this._context.shadowColor,\n                this._context.shadowOffsetX,\n                this._context.shadowOffsetY,\n                this._context.shadowBlur,\n            ];\n            this._context.shadowColor = getRgbaString(this._settings.shadowColor);\n            this._context.shadowOffsetX = this._settings.shadowOffsetX * precision;\n            this._context.shadowOffsetY = this._settings.shadowOffsetY * precision;\n            this._context.shadowBlur = this._settings.shadowBlur * precision;\n        }\n        this._context.fillStyle = getRgbaString(this._settings.textColor);\n        for (let i = 0, n = drawLines.length; i < n; i++) {\n            const drawLine = drawLines[i];\n            if (renderInfo.letterSpacing === 0) {\n                this._context.fillText(drawLine.text, drawLine.x, drawLine.y);\n            }\n            else {\n                const textSplit = drawLine.text.split('');\n                let x = drawLine.x;\n                for (let i = 0, j = textSplit.length; i < j; i++) {\n                    this._context.fillText(textSplit[i], x, drawLine.y);\n                    x += this.measureText(textSplit[i], renderInfo.letterSpacing);\n                }\n            }\n        }\n        if (prevShadowSettings) {\n            this._context.shadowColor = prevShadowSettings[0];\n            this._context.shadowOffsetX = prevShadowSettings[1];\n            this._context.shadowOffsetY = prevShadowSettings[2];\n            this._context.shadowBlur = prevShadowSettings[3];\n        }\n        if (renderInfo.cutSx || renderInfo.cutSy) {\n            this._context.translate(renderInfo.cutSx, renderInfo.cutSy);\n        }\n        this.renderInfo = renderInfo;\n    }\n    wrapWord(word, wordWrapWidth, suffix) {\n        const suffixWidth = this._context.measureText(suffix).width;\n        const wordLen = word.length;\n        const wordWidth = this._context.measureText(word).width;\n        /* If word fits wrapWidth, do nothing */\n        if (wordWidth <= wordWrapWidth) {\n            return word;\n        }\n        /* Make initial guess for text cuttoff */\n        let cutoffIndex = Math.floor((wordWrapWidth * wordLen) / wordWidth);\n        let truncWordWidth = this._context.measureText(word.substring(0, cutoffIndex)).width +\n            suffixWidth;\n        /* In case guess was overestimated, shrink it letter by letter. */\n        if (truncWordWidth > wordWrapWidth) {\n            while (cutoffIndex > 0) {\n                truncWordWidth =\n                    this._context.measureText(word.substring(0, cutoffIndex)).width +\n                        suffixWidth;\n                if (truncWordWidth > wordWrapWidth) {\n                    cutoffIndex -= 1;\n                }\n                else {\n                    break;\n                }\n            }\n            /* In case guess was underestimated, extend it letter by letter. */\n        }\n        else {\n            while (cutoffIndex < wordLen) {\n                truncWordWidth =\n                    this._context.measureText(word.substring(0, cutoffIndex)).width +\n                        suffixWidth;\n                if (truncWordWidth < wordWrapWidth) {\n                    cutoffIndex += 1;\n                }\n                else {\n                    // Finally, when bound is crossed, retract last letter.\n                    cutoffIndex -= 1;\n                    break;\n                }\n            }\n        }\n        /* If wrapWidth is too short to even contain suffix alone, return empty string */\n        return (word.substring(0, cutoffIndex) +\n            (wordWrapWidth >= suffixWidth ? suffix : ''));\n    }\n    /**\n     * Applies newlines to a string to have it optimally fit into the horizontal\n     * bounds set by the Text object's wordWrapWidth property.\n     */\n    wrapText(text, wordWrapWidth, letterSpacing, indent = 0) {\n        // Greedy wrapping algorithm that will wrap words as the line grows longer.\n        // than its horizontal bounds.\n        const lines = text.split(/\\r?\\n/g);\n        let allLines = [];\n        const realNewlines = [];\n        for (let i = 0; i < lines.length; i++) {\n            const resultLines = [];\n            let result = '';\n            let spaceLeft = wordWrapWidth - indent;\n            const words = lines[i].split(' ');\n            for (let j = 0; j < words.length; j++) {\n                const wordWidth = this.measureText(words[j], letterSpacing);\n                const wordWidthWithSpace = wordWidth + this.measureText(' ', letterSpacing);\n                if (j === 0 || wordWidthWithSpace > spaceLeft) {\n                    // Skip printing the newline if it's the first word of the line that is.\n                    // greater than the word wrap width.\n                    if (j > 0) {\n                        resultLines.push(result);\n                        result = '';\n                    }\n                    result += words[j];\n                    spaceLeft = wordWrapWidth - wordWidth - (j === 0 ? indent : 0);\n                }\n                else {\n                    spaceLeft -= wordWidthWithSpace;\n                    result += ` ${words[j]}`;\n                }\n            }\n            resultLines.push(result);\n            result = '';\n            allLines = allLines.concat(resultLines);\n            if (i < lines.length - 1) {\n                realNewlines.push(allLines.length);\n            }\n        }\n        return { l: allLines, n: realNewlines };\n    }\n    measureText(word, space = 0) {\n        if (!space) {\n            return this._context.measureText(word).width;\n        }\n        return word.split('').reduce((acc, char) => {\n            return acc + this._context.measureText(char).width + space;\n        }, 0);\n    }\n    mergeDefaults(settings) {\n        return {\n            text: '',\n            w: 0,\n            h: 0,\n            fontStyle: 'normal',\n            fontSize: 40,\n            fontFace: null,\n            wordWrap: true,\n            wordWrapWidth: 0,\n            wordBreak: false,\n            textOverflow: '',\n            lineHeight: null,\n            textBaseline: 'alphabetic',\n            textAlign: 'left',\n            verticalAlign: 'top',\n            offsetY: null,\n            maxLines: 0,\n            maxLinesSuffix: '..',\n            textColor: [1.0, 1.0, 1.0, 1.0],\n            paddingLeft: 0,\n            paddingRight: 0,\n            shadow: false,\n            shadowColor: [0.0, 0.0, 0.0, 1.0],\n            shadowOffsetX: 0,\n            shadowOffsetY: 0,\n            shadowBlur: 5,\n            highlight: false,\n            highlightHeight: 0,\n            highlightColor: [0.0, 0.0, 0.0, 1.0],\n            highlightOffset: 0,\n            highlightPaddingLeft: 0,\n            highlightPaddingRight: 0,\n            letterSpacing: 0,\n            textIndent: 0,\n            cutSx: 0,\n            cutEx: 0,\n            cutSy: 0,\n            cutEy: 0,\n            advancedRenderer: false,\n            fontBaselineRatio: 0,\n            precision: 1,\n            textRenderIssueMargin: 0,\n            ...settings,\n        };\n    }\n}\n//# sourceMappingURL=LightningTextTextureRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { EventEmitter } from '../../../common/EventEmitter.js';\nimport { assertTruthy, mergeColorAlphaPremultiplied } from '../../../utils.js';\nimport { intersectRect, intersectBound, getNormalizedRgbaComponents, getNormalizedAlphaComponent, createBound, } from '../../lib/utils.js';\nimport { WebTrFontFace } from '../font-face-types/WebTrFontFace.js';\nimport { LightningTextTextureRenderer, } from './LightningTextTextureRenderer.js';\nimport { TextRenderer, } from './TextRenderer.js';\nconst resolvedGlobal = typeof self === 'undefined' ? globalThis : self;\n/**\n * Global font set regardless of if run in the main thread or a web worker\n */\nconst globalFontSet = (resolvedGlobal.document?.fonts ||\n    resolvedGlobal.fonts);\nfunction getFontCssString(props) {\n    const { fontFamily, fontStyle, fontWeight, fontStretch, fontSize } = props;\n    return [fontStyle, fontWeight, fontStretch, `${fontSize}px`, fontFamily].join(' ');\n}\n/**\n * Ephemeral bounds object used for intersection calculations\n *\n * @remarks\n * Used to avoid creating a new object every time we need to intersect\n * element bounds.\n */\nconst tmpElementBounds = createBound(0, 0, 0, 0);\nexport class CanvasTextRenderer extends TextRenderer {\n    canvas;\n    context;\n    rendererBounds;\n    constructor(stage) {\n        super(stage);\n        if (typeof OffscreenCanvas !== 'undefined') {\n            this.canvas = new OffscreenCanvas(0, 0);\n        }\n        else {\n            this.canvas = document.createElement('canvas');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        let context = this.canvas.getContext('2d');\n        if (!context) {\n            // A browser may appear to support OffscreenCanvas but not actually support the Canvas '2d' context\n            // Here we try getting the context again after falling back to an HTMLCanvasElement.\n            // See: https://github.com/lightning-js/renderer/issues/26#issuecomment-1750438486\n            this.canvas = document.createElement('canvas');\n            context = this.canvas.getContext('2d');\n        }\n        assertTruthy(context);\n        this.context = context;\n        this.rendererBounds = {\n            x1: 0,\n            y1: 0,\n            x2: this.stage.options.appWidth,\n            y2: this.stage.options.appHeight,\n        };\n    }\n    //#region Overrides\n    getPropertySetters() {\n        return {\n            fontFamily: (state, value) => {\n                state.props.fontFamily = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontWeight: (state, value) => {\n                state.props.fontWeight = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStyle: (state, value) => {\n                state.props.fontStyle = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontStretch: (state, value) => {\n                state.props.fontStretch = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            fontSize: (state, value) => {\n                state.props.fontSize = value;\n                state.fontInfo = undefined;\n                this.invalidateLayoutCache(state);\n            },\n            text: (state, value) => {\n                state.props.text = value;\n                this.invalidateLayoutCache(state);\n            },\n            textAlign: (state, value) => {\n                state.props.textAlign = value;\n                this.invalidateLayoutCache(state);\n            },\n            color: (state, value) => {\n                state.props.color = value;\n                this.invalidateLayoutCache(state);\n            },\n            x: (state, value) => {\n                state.props.x = value;\n                this.invalidateVisibleWindowCache(state);\n            },\n            y: (state, value) => {\n                state.props.y = value;\n                this.invalidateVisibleWindowCache(state);\n            },\n            contain: (state, value) => {\n                state.props.contain = value;\n                this.invalidateLayoutCache(state);\n            },\n            width: (state, value) => {\n                state.props.width = value;\n                this.invalidateLayoutCache(state);\n            },\n            height: (state, value) => {\n                state.props.height = value;\n                this.invalidateLayoutCache(state);\n            },\n            offsetY: (state, value) => {\n                state.props.offsetY = value;\n                this.invalidateLayoutCache(state);\n            },\n            scrollY: (state, value) => {\n                state.props.scrollY = value;\n            },\n            letterSpacing: (state, value) => {\n                state.props.letterSpacing = value;\n                this.invalidateLayoutCache(state);\n            },\n            // debug: (state, value) => {\n            //   state.props.debug = value;\n            // },\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    canRenderFont(props) {\n        // The canvas renderer can render any font because it automatically\n        // falls back to system fonts. The CanvasTextRenderer should be\n        // checked last if other renderers are preferred.\n        return true;\n    }\n    isFontFaceSupported(fontFace) {\n        return fontFace instanceof WebTrFontFace;\n    }\n    addFontFace(fontFace) {\n        // Make sure the font face is an Canvas font face (it should have already passed\n        // the `isFontFaceSupported` check)\n        assertTruthy(fontFace instanceof WebTrFontFace);\n        // We simply add the font face to the document\n        // @ts-expect-error `add()` method should be available from a FontFaceSet\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        globalFontSet.add(fontFace.fontFace);\n    }\n    createState(props) {\n        return {\n            props,\n            status: 'initialState',\n            updateScheduled: false,\n            emitter: new EventEmitter(),\n            canvasPages: undefined,\n            lightning2TextRenderer: new LightningTextTextureRenderer(this.canvas, this.context),\n            renderWindow: undefined,\n            visibleWindow: {\n                x1: 0,\n                y1: 0,\n                x2: 0,\n                y2: 0,\n                valid: false,\n            },\n            renderInfo: undefined,\n            forceFullLayoutCalc: false,\n            textW: 0,\n            textH: 0,\n            fontInfo: undefined,\n            fontFaceLoadedHandler: undefined,\n            debugData: {\n                updateCount: 0,\n                layoutCount: 0,\n                drawCount: 0,\n                lastLayoutNumCharacters: 0,\n                layoutSum: 0,\n                drawSum: 0,\n                bufferSize: 0,\n            },\n        };\n    }\n    updateState(state) {\n        // On the first update call we need to set the status to loading\n        if (state.status === 'initialState') {\n            this.setStatus(state, 'loading');\n        }\n        // If fontInfo is invalid, we need to establish it\n        if (!state.fontInfo) {\n            const cssString = getFontCssString(state.props);\n            state.fontInfo = {\n                cssString: cssString,\n                // TODO: For efficiency we would use this here but it's not reliable on WPE -> document.fonts.check(cssString),\n                loaded: false,\n            };\n            // If font is not loaded, set up a handler to update the font info when the font loads\n            if (!state.fontInfo.loaded) {\n                globalFontSet\n                    .load(cssString)\n                    .then(this.onFontLoaded.bind(this, state, cssString))\n                    .catch(this.onFontLoadError.bind(this, state, cssString));\n                return;\n            }\n        }\n        // If we're waiting for a font face to load, don't render anything\n        if (!state.fontInfo.loaded) {\n            return;\n        }\n        if (!state.renderInfo) {\n            state.lightning2TextRenderer.settings = {\n                text: state.props.text,\n                textAlign: state.props.textAlign,\n                fontFace: state.props.fontFamily,\n                fontSize: state.props.fontSize,\n                fontStyle: [\n                    state.props.fontStretch,\n                    state.props.fontStyle,\n                    state.props.fontWeight,\n                ].join(' '),\n                textColor: getNormalizedRgbaComponents(state.props.color),\n                offsetY: state.props.fontSize + state.props.offsetY,\n                wordWrap: state.props.contain !== 'none',\n                wordWrapWidth: state.props.contain === 'none' ? undefined : state.props.width,\n                letterSpacing: state.props.letterSpacing,\n            };\n            // const renderInfoCalculateTime = performance.now();\n            state.renderInfo = state.lightning2TextRenderer.calculateRenderInfo();\n            // console.log(\n            //   'Render info calculated in',\n            //   performance.now() - renderInfoCalculateTime,\n            //   'ms',\n            // );\n            state.textH = state.renderInfo.lineHeight * state.renderInfo.lines.length;\n            state.textW = state.renderInfo.width;\n            // Invalidate renderWindow because the renderInfo changed\n            state.renderWindow = undefined;\n        }\n        const { x, y, width, height, scrollY, contain } = state.props;\n        const { visibleWindow } = state;\n        let { renderWindow, canvasPages } = state;\n        if (!visibleWindow.valid) {\n            // Figure out whats actually in the bounds of the renderer/canvas (visibleWindow)\n            const elementBounds = createBound(x, y, contain !== 'none' ? x + width : Infinity, contain === 'both' ? y + height : Infinity, tmpElementBounds);\n            /**\n             * Area that is visible on the screen.\n             */\n            intersectBound(this.rendererBounds, elementBounds, visibleWindow);\n            visibleWindow.valid = true;\n        }\n        const visibleWindowHeight = visibleWindow.y2 - visibleWindow.y1;\n        const maxLinesPerCanvasPage = Math.ceil(visibleWindowHeight / state.renderInfo.lineHeight);\n        if (visibleWindowHeight === 0) {\n            // Nothing to render. Clear any canvasPages and existing renderWindow\n            // Return early.\n            canvasPages = undefined;\n            renderWindow = undefined;\n            this.setStatus(state, 'loaded');\n            return;\n        }\n        else if (renderWindow && canvasPages) {\n            // Return early if we're still viewing inside the established render window\n            // No need to re-render what we've already rendered\n            const renderWindowScreenX1 = x + renderWindow.x1;\n            const renderWindowScreenY1 = y - scrollY + renderWindow.y1;\n            const renderWindowScreenX2 = x + renderWindow.x2;\n            const renderWindowScreenY2 = y - scrollY + renderWindow.y2;\n            if (renderWindowScreenX1 <= visibleWindow.x1 &&\n                renderWindowScreenX2 >= visibleWindow.x2 &&\n                renderWindowScreenY1 <= visibleWindow.y1 &&\n                renderWindowScreenY2 >= visibleWindow.y2) {\n                this.setStatus(state, 'loaded');\n                return;\n            }\n            if (renderWindowScreenY2 < visibleWindow.y2) {\n                // We've scrolled up, so we need to render the next page\n                renderWindow.y1 += maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                renderWindow.y2 += maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                canvasPages.push(canvasPages.shift());\n                canvasPages[2].lineNumStart =\n                    canvasPages[1].lineNumStart + maxLinesPerCanvasPage;\n                canvasPages[2].lineNumEnd =\n                    canvasPages[2].lineNumStart + maxLinesPerCanvasPage;\n                canvasPages[2].valid = false;\n            }\n            else if (renderWindowScreenY1 > visibleWindow.y1) {\n                // We've scrolled down, so we need to render the previous page\n                renderWindow.y1 -= maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                renderWindow.y2 -= maxLinesPerCanvasPage * state.renderInfo.lineHeight;\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                canvasPages.unshift(canvasPages.pop());\n                canvasPages[0].lineNumStart =\n                    canvasPages[1].lineNumStart - maxLinesPerCanvasPage;\n                canvasPages[0].lineNumEnd =\n                    canvasPages[0].lineNumStart + maxLinesPerCanvasPage;\n                canvasPages[0].valid = false;\n            }\n        }\n        else {\n            const pageHeight = state.renderInfo.lineHeight * maxLinesPerCanvasPage;\n            const page1Block = Math.ceil(scrollY / pageHeight);\n            const page1LineStart = page1Block * maxLinesPerCanvasPage;\n            const page0LineStart = page1LineStart - maxLinesPerCanvasPage;\n            const page2LineStart = page1LineStart + maxLinesPerCanvasPage;\n            // We haven't rendered anything yet, so we need to render the first page\n            // If canvasPages already exist, let's re-use the textures\n            canvasPages = [\n                {\n                    texture: canvasPages?.[0].texture,\n                    lineNumStart: page0LineStart,\n                    lineNumEnd: page0LineStart + maxLinesPerCanvasPage,\n                    valid: false,\n                },\n                {\n                    texture: canvasPages?.[1].texture,\n                    lineNumStart: page1LineStart,\n                    lineNumEnd: page1LineStart + maxLinesPerCanvasPage,\n                    valid: false,\n                },\n                {\n                    texture: canvasPages?.[2].texture,\n                    lineNumStart: page2LineStart,\n                    lineNumEnd: page2LineStart + maxLinesPerCanvasPage,\n                    valid: false,\n                },\n            ];\n            state.canvasPages = canvasPages;\n            const scrollYNearestPage = page1Block * pageHeight;\n            renderWindow = {\n                x1: 0,\n                y1: scrollYNearestPage - pageHeight,\n                x2: width,\n                y2: scrollYNearestPage + pageHeight * 2,\n            };\n        }\n        state.renderWindow = renderWindow;\n        const pageDrawTime = performance.now();\n        for (const pageInfo of canvasPages) {\n            if (pageInfo.valid)\n                continue;\n            if (pageInfo.lineNumStart < 0) {\n                pageInfo.texture = this.stage.txManager.loadTexture('ImageTexture', {\n                    src: '',\n                });\n                pageInfo.valid = true;\n                continue;\n            }\n            state.lightning2TextRenderer.draw(state.renderInfo, {\n                lines: state.renderInfo.lines.slice(pageInfo.lineNumStart, pageInfo.lineNumEnd),\n                lineWidths: state.renderInfo.lineWidths.slice(pageInfo.lineNumStart, pageInfo.lineNumEnd),\n            });\n            if (!(this.canvas.width === 0 || this.canvas.height === 0)) {\n                pageInfo.texture = this.stage.txManager.loadTexture('ImageTexture', {\n                    src: this.context.getImageData(0, 0, this.canvas.width, this.canvas.height),\n                }, {\n                    preload: true,\n                });\n            }\n            pageInfo.valid = true;\n        }\n        // console.log('pageDrawTime', performance.now() - pageDrawTime, 'ms');\n        // Report final status\n        this.setStatus(state, 'loaded');\n    }\n    renderQuads(state, transform, clippingRect, alpha) {\n        const { stage } = this;\n        const { canvasPages, textW = 0, textH = 0, renderWindow } = state;\n        if (!canvasPages || !renderWindow)\n            return;\n        const { x, y, scrollY, contain, width, height /*, debug*/ } = state.props;\n        const elementRect = {\n            x: x,\n            y: y,\n            width: contain !== 'none' ? width : textW,\n            height: contain === 'both' ? height : textH,\n        };\n        const visibleRect = intersectRect({\n            x: 0,\n            y: 0,\n            width: stage.options.appWidth,\n            height: stage.options.appHeight,\n        }, elementRect);\n        // if (!debug.disableScissor) {\n        //   renderer.enableScissor(\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        assertTruthy(canvasPages, 'canvasPages is not defined');\n        assertTruthy(renderWindow, 'renderWindow is not defined');\n        const renderWindowHeight = renderWindow.y2 - renderWindow.y1;\n        const pageSize = renderWindowHeight / 3.0;\n        const { zIndex, color } = state.props;\n        // Color alpha of text is not properly rendered to the Canvas texture, so we\n        // need to apply it here.\n        const combinedAlpha = alpha * getNormalizedAlphaComponent(color);\n        const quadColor = mergeColorAlphaPremultiplied(0xffffffff, combinedAlpha);\n        if (canvasPages[0].valid) {\n            this.stage.renderer.addQuad({\n                alpha: combinedAlpha,\n                clippingRect,\n                colorBl: quadColor,\n                colorBr: quadColor,\n                colorTl: quadColor,\n                colorTr: quadColor,\n                width: canvasPages[0].texture?.dimensions?.width || 0,\n                height: canvasPages[0].texture?.dimensions?.height || 0,\n                texture: canvasPages[0].texture,\n                textureOptions: {},\n                shader: null,\n                shaderProps: null,\n                zIndex,\n                tx: transform.tx,\n                ty: transform.ty - scrollY + renderWindow.y1,\n                ta: transform.ta,\n                tb: transform.tb,\n                tc: transform.tc,\n                td: transform.td,\n            });\n        }\n        if (canvasPages[1].valid) {\n            this.stage.renderer.addQuad({\n                alpha: combinedAlpha,\n                clippingRect,\n                colorBl: quadColor,\n                colorBr: quadColor,\n                colorTl: quadColor,\n                colorTr: quadColor,\n                width: canvasPages[1].texture?.dimensions?.width || 0,\n                height: canvasPages[1].texture?.dimensions?.height || 0,\n                texture: canvasPages[1].texture,\n                textureOptions: {},\n                shader: null,\n                shaderProps: null,\n                zIndex,\n                tx: transform.tx,\n                ty: transform.ty - scrollY + renderWindow.y1 + pageSize,\n                ta: transform.ta,\n                tb: transform.tb,\n                tc: transform.tc,\n                td: transform.td,\n            });\n        }\n        if (canvasPages[2].valid) {\n            this.stage.renderer.addQuad({\n                alpha: combinedAlpha,\n                clippingRect,\n                colorBl: quadColor,\n                colorBr: quadColor,\n                colorTl: quadColor,\n                colorTr: quadColor,\n                width: canvasPages[2].texture?.dimensions?.width || 0,\n                height: canvasPages[2].texture?.dimensions?.height || 0,\n                texture: canvasPages[2].texture,\n                textureOptions: {},\n                shader: null,\n                shaderProps: null,\n                zIndex,\n                tx: transform.tx,\n                ty: transform.ty - scrollY + renderWindow.y1 + pageSize + pageSize,\n                ta: transform.ta,\n                tb: transform.tb,\n                tc: transform.tc,\n                td: transform.td,\n            });\n        }\n        // renderer.disableScissor();\n        // if (debug.showElementRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Blue,\n        //     elementRect.x,\n        //     elementRect.y,\n        //     elementRect.w,\n        //     elementRect.h,\n        //   );\n        // }\n        // if (debug.showVisibleRect) {\n        //   this.renderer.drawBorder(\n        //     Colors.Green,\n        //     visibleRect.x,\n        //     visibleRect.y,\n        //     visibleRect.w,\n        //     visibleRect.h,\n        //   );\n        // }\n        // if (debug.showRenderWindow && renderWindow) {\n        //   this.renderer.drawBorder(\n        //     Colors.Red,\n        //     x + renderWindow.x1,\n        //     y + renderWindow.y1 - scrollY,\n        //     x + renderWindow.x2 - (x + renderWindow.x1),\n        //     y + renderWindow.y2 - scrollY - (y + renderWindow.y1 - scrollY),\n        //   );\n        // }\n    }\n    //#endregion Overrides\n    /**\n     * Invalidate the visible window stored in the state. This will cause a new\n     * visible window to be calculated on the next update.\n     *\n     * @param state\n     */\n    invalidateVisibleWindowCache(state) {\n        state.visibleWindow.valid = false;\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    /**\n     * Invalidate the layout cache stored in the state. This will cause the text\n     * to be re-layed out on the next update.\n     *\n     * @remarks\n     * This also invalidates the visible window cache.\n     *\n     * @param state\n     */\n    invalidateLayoutCache(state) {\n        state.renderInfo = undefined;\n        this.setStatus(state, 'loading');\n        this.scheduleUpdateState(state);\n    }\n    onFontLoaded(state, cssString) {\n        if (cssString !== state.fontInfo?.cssString || !state.fontInfo) {\n            return;\n        }\n        state.fontInfo.loaded = true;\n        this.scheduleUpdateState(state);\n    }\n    onFontLoadError(state, cssString, error) {\n        if (cssString !== state.fontInfo?.cssString || !state.fontInfo) {\n            return;\n        }\n        // Font didn't actually load, but we'll log the error and mark it as loaded\n        // because the browser can still render with a fallback font.\n        state.fontInfo.loaded = true;\n        console.error(`CanvasTextRenderer: Error loading font '${state.fontInfo.cssString}'`, error);\n        this.scheduleUpdateState(state);\n    }\n}\n//# sourceMappingURL=CanvasTextRenderer.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { startLoop, getTimeStamp } from './platform.js';\nimport { WebGlCoreRenderer } from './renderers/webgl/WebGlCoreRenderer.js';\nimport { assertTruthy } from '../utils.js';\nimport { AnimationManager } from './animations/AnimationManager.js';\nimport { CoreNode } from './CoreNode.js';\nimport { CoreTextureManager } from './CoreTextureManager.js';\nimport { TrFontManager } from './text-rendering/TrFontManager.js';\nimport { CoreShaderManager } from './CoreShaderManager.js';\nimport { SdfTextRenderer } from './text-rendering/renderers/SdfTextRenderer/SdfTextRenderer.js';\nimport { CanvasTextRenderer } from './text-rendering/renderers/CanvasTextRenderer.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nconst bufferMemory = 2e6;\nconst autoStart = true;\nexport class Stage extends EventEmitter {\n    options;\n    /// Module Instances\n    animationManager;\n    txManager;\n    fontManager;\n    textRenderers;\n    shManager;\n    renderer;\n    root;\n    /// State\n    deltaTime = 0;\n    lastFrameTime = 0;\n    currentFrameTime = 0;\n    fpsNumFrames = 0;\n    fpsElapsedTime = 0;\n    renderRequested = false;\n    /**\n     * Stage constructor\n     */\n    constructor(options) {\n        super();\n        this.options = options;\n        const { canvas, clearColor, rootId, debug, appWidth, appHeight } = options;\n        this.txManager = new CoreTextureManager();\n        this.shManager = new CoreShaderManager();\n        this.animationManager = new AnimationManager();\n        if (debug?.monitorTextureCache) {\n            setInterval(() => {\n                assertTruthy(this.txManager);\n                const debugInfo = this.txManager.getDebugInfo();\n                console.log('Texture ID Cache Size: ', debugInfo.idCacheSize);\n                console.log('Texture Key Cache Size: ', debugInfo.keyCacheSize);\n            }, 1000);\n        }\n        this.renderer = new WebGlCoreRenderer({\n            stage: this,\n            canvas,\n            pixelRatio: options.devicePhysicalPixelRatio * options.deviceLogicalPixelRatio,\n            clearColor: clearColor ?? 0xff000000,\n            bufferMemory,\n            txManager: this.txManager,\n            shManager: this.shManager,\n        });\n        // Must do this after renderer is created\n        this.txManager.renderer = this.renderer;\n        this.textRenderers = {\n            canvas: new CanvasTextRenderer(this),\n            sdf: new SdfTextRenderer(this),\n        };\n        this.fontManager = new TrFontManager(this.textRenderers);\n        // create root node\n        const rootNode = new CoreNode(this, {\n            id: rootId,\n            x: 0,\n            y: 0,\n            width: appWidth,\n            height: appHeight,\n            alpha: 1,\n            clipping: false,\n            color: 0x00000000,\n            colorTop: 0x00000000,\n            colorBottom: 0x00000000,\n            colorLeft: 0x00000000,\n            colorRight: 0x00000000,\n            colorTl: 0x00000000,\n            colorTr: 0x00000000,\n            colorBl: 0x00000000,\n            colorBr: 0x00000000,\n            zIndex: 0,\n            zIndexLocked: 0,\n            scaleX: 1,\n            scaleY: 1,\n            mountX: 0,\n            mountY: 0,\n            mount: 0,\n            pivot: 0.5,\n            pivotX: 0.5,\n            pivotY: 0.5,\n            rotation: 0,\n            parent: null,\n            texture: null,\n            textureOptions: null,\n            shader: null,\n            shaderProps: null,\n        });\n        this.root = rootNode;\n        // execute platform start loop\n        if (autoStart) {\n            startLoop(this);\n        }\n    }\n    /**\n     * Update animations\n     */\n    updateAnimations() {\n        const { animationManager } = this;\n        if (!this.root) {\n            return;\n        }\n        this.lastFrameTime = this.currentFrameTime;\n        this.currentFrameTime = getTimeStamp();\n        this.deltaTime = !this.lastFrameTime\n            ? 100 / 6\n            : this.currentFrameTime - this.lastFrameTime;\n        // step animation\n        animationManager.update(this.deltaTime);\n    }\n    /**\n     * Check if the scene has updates\n     */\n    hasSceneUpdates() {\n        return !!this.root.updateType || this.renderRequested;\n    }\n    /**\n     * Start a new frame draw\n     */\n    drawFrame() {\n        const { renderer, renderRequested } = this;\n        // Update tree if needed\n        if (this.root.updateType !== 0) {\n            this.root.update(this.deltaTime);\n        }\n        // test if we need to update the scene\n        renderer?.reset();\n        this.addQuads(this.root);\n        renderer?.render();\n        // Reset renderRequested flag if it was set\n        if (renderRequested) {\n            this.renderRequested = false;\n        }\n        // If there's an FPS update interval, emit the FPS update event\n        // when the specified interval has elapsed.\n        const { fpsUpdateInterval } = this.options;\n        if (fpsUpdateInterval) {\n            this.fpsNumFrames++;\n            this.fpsElapsedTime += this.deltaTime;\n            if (this.fpsElapsedTime >= fpsUpdateInterval) {\n                const fps = Math.round((this.fpsNumFrames * 1000) / this.fpsElapsedTime);\n                this.fpsNumFrames = 0;\n                this.fpsElapsedTime = 0;\n                this.emit('fpsUpdate', fps);\n            }\n        }\n    }\n    addQuads(node) {\n        assertTruthy(this.renderer && node.globalTransform);\n        if (node.isRenderable) {\n            node.renderQuads(this.renderer);\n        }\n        for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i];\n            if (!child) {\n                continue;\n            }\n            if (child?.worldAlpha === 0) {\n                continue;\n            }\n            this.addQuads(child);\n        }\n    }\n    /**\n     * Request a render pass without forcing an update\n     */\n    requestRender() {\n        this.renderRequested = true;\n    }\n    /**\n     * Given a font name, and possible renderer override, return the best compatible text renderer.\n     *\n     * @remarks\n     * Will always return at least a canvas renderer if no other suitable renderer can be resolved.\n     *\n     * @param fontFamily\n     * @param textRendererOverride\n     * @returns\n     */\n    resolveTextRenderer(trProps, textRendererOverride = null) {\n        let rendererId = textRendererOverride;\n        let overrideFallback = false;\n        // Check if the override is valid (if one is provided)\n        if (rendererId) {\n            const possibleRenderer = this.textRenderers[rendererId];\n            if (!possibleRenderer) {\n                console.warn(`Text renderer override '${rendererId}' not found.`);\n                rendererId = null;\n                overrideFallback = true;\n            }\n            else if (!possibleRenderer.canRenderFont(trProps)) {\n                console.warn(`Cannot use override text renderer '${rendererId}' for font`, trProps);\n                rendererId = null;\n                overrideFallback = true;\n            }\n        }\n        if (!rendererId) {\n            // Iterate through the text renderers and find the first one that can render the font\n            for (const [trId, tr] of Object.entries(this.textRenderers)) {\n                if (trId === 'canvas') {\n                    // Canvas is always a fallback\n                    continue;\n                }\n                if (tr.canRenderFont(trProps)) {\n                    rendererId = trId;\n                    break;\n                }\n            }\n            if (!rendererId) {\n                // If no renderer can be found, use the canvas renderer\n                rendererId = 'canvas';\n            }\n        }\n        if (overrideFallback) {\n            console.warn(`Falling back to text renderer ${String(rendererId)}`);\n        }\n        // By now we are guaranteed to have a valid rendererId (at least Canvas);\n        const resolvedTextRenderer = this.textRenderers[rendererId];\n        assertTruthy(resolvedTextRenderer, 'resolvedTextRenderer undefined');\n        // Need to explicitly cast to TextRenderer because TS doesn't like\n        // the covariant state argument in the setter method map\n        return resolvedTextRenderer;\n    }\n}\n//# sourceMappingURL=Stage.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CoreNode } from './CoreNode.js';\nimport { assertTruthy } from '../utils.js';\nexport class CoreTextNode extends CoreNode {\n    textRenderer;\n    trState;\n    _textRendererOverride = null;\n    constructor(stage, props) {\n        super(stage, props);\n        this._textRendererOverride = props.textRendererOverride;\n        const { resolvedTextRenderer, textRendererState } = this.resolveTextRendererAndState({\n            x: this.absX,\n            y: this.absY,\n            width: props.width,\n            height: props.height,\n            textAlign: props.textAlign,\n            color: props.color,\n            zIndex: props.zIndex,\n            contain: props.contain,\n            scrollable: props.scrollable,\n            scrollY: props.scrollY,\n            offsetY: props.offsetY,\n            letterSpacing: props.letterSpacing,\n            debug: props.debug,\n            fontFamily: props.fontFamily,\n            fontSize: props.fontSize,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            fontWeight: props.fontWeight,\n            text: props.text,\n        }, undefined);\n        this.textRenderer = resolvedTextRenderer;\n        this.trState = textRendererState;\n    }\n    onTextLoaded = () => {\n        const { contain } = this;\n        const setWidth = this.trState.props.width;\n        const setHeight = this.trState.props.height;\n        const calcWidth = this.trState.textW || 0;\n        const calcHeight = this.trState.textH || 0;\n        if (contain === 'both') {\n            this.props.width = setWidth;\n            this.props.height = setHeight;\n        }\n        else if (contain === 'width') {\n            this.props.width = setWidth;\n            this.props.height = calcHeight;\n        }\n        else if (contain === 'none') {\n            this.props.width = calcWidth;\n            this.props.height = calcHeight;\n        }\n        this.updateLocalTransform();\n        // Incase the RAF loop has been stopped already before text was loaded,\n        // we request a render so it can be drawn.\n        this.stage.requestRender();\n        this.emit('loaded', {\n            type: 'text',\n            dimensions: {\n                width: this.trState.textW || 0,\n                height: this.trState.textH || 0,\n            },\n        });\n    };\n    onTextFailed = (target, error) => {\n        this.emit('failed', {\n            type: 'text',\n            error,\n        });\n    };\n    get width() {\n        return this.trState.props.width;\n    }\n    set width(value) {\n        this.textRenderer.set.width(this.trState, value);\n    }\n    get height() {\n        return this.trState.props.height;\n    }\n    set height(value) {\n        this.textRenderer.set.height(this.trState, value);\n    }\n    get color() {\n        return this.trState.props.color;\n    }\n    set color(value) {\n        this.textRenderer.set.color(this.trState, value);\n    }\n    get text() {\n        return this.trState.props.text;\n    }\n    set text(value) {\n        this.textRenderer.set.text(this.trState, value);\n        this.checkIsRenderable();\n    }\n    get textRendererOverride() {\n        return this._textRendererOverride;\n    }\n    set textRendererOverride(value) {\n        this._textRendererOverride = value;\n        const { resolvedTextRenderer, textRendererState } = this.resolveTextRendererAndState(this.trState.props, this.trState);\n        this.textRenderer = resolvedTextRenderer;\n        this.trState = textRendererState;\n    }\n    get fontSize() {\n        return this.trState.props.fontSize;\n    }\n    set fontSize(value) {\n        this.textRenderer.set.fontSize(this.trState, value);\n    }\n    get fontFamily() {\n        return this.trState.props.fontFamily;\n    }\n    set fontFamily(value) {\n        this.textRenderer.set.fontFamily(this.trState, value);\n    }\n    get fontStretch() {\n        return this.trState.props.fontStretch;\n    }\n    set fontStretch(value) {\n        this.textRenderer.set.fontStretch(this.trState, value);\n    }\n    get fontStyle() {\n        return this.trState.props.fontStyle;\n    }\n    set fontStyle(value) {\n        this.textRenderer.set.fontStyle(this.trState, value);\n    }\n    get fontWeight() {\n        return this.trState.props.fontWeight;\n    }\n    set fontWeight(value) {\n        this.textRenderer.set.fontWeight(this.trState, value);\n    }\n    get textAlign() {\n        return this.trState.props.textAlign;\n    }\n    set textAlign(value) {\n        this.textRenderer.set.textAlign(this.trState, value);\n    }\n    get contain() {\n        return this.trState.props.contain;\n    }\n    set contain(value) {\n        this.textRenderer.set.contain(this.trState, value);\n    }\n    get scrollable() {\n        return this.trState.props.scrollable;\n    }\n    set scrollable(value) {\n        this.textRenderer.set.scrollable(this.trState, value);\n    }\n    get scrollY() {\n        return this.trState.props.scrollY;\n    }\n    set scrollY(value) {\n        this.textRenderer.set.scrollY(this.trState, value);\n    }\n    get offsetY() {\n        return this.trState.props.offsetY;\n    }\n    set offsetY(value) {\n        this.textRenderer.set.offsetY(this.trState, value);\n    }\n    get letterSpacing() {\n        return this.trState.props.letterSpacing;\n    }\n    set letterSpacing(value) {\n        this.textRenderer.set.letterSpacing(this.trState, value);\n    }\n    get debug() {\n        return this.trState.props.debug;\n    }\n    set debug(value) {\n        this.textRenderer.set.debug(this.trState, value);\n    }\n    update(delta, parentClippingRect = null) {\n        super.update(delta, parentClippingRect);\n        assertTruthy(this.globalTransform);\n        // globalTransform is updated in super.update(delta)\n        this.textRenderer.set.x(this.trState, this.globalTransform.tx);\n        this.textRenderer.set.y(this.trState, this.globalTransform.ty);\n    }\n    checkIsRenderable() {\n        if (super.checkIsRenderable()) {\n            return true;\n        }\n        if (this.trState.props.text !== '') {\n            return (this.isRenderable = true);\n        }\n        return (this.isRenderable = false);\n    }\n    renderQuads(renderer) {\n        assertTruthy(this.globalTransform);\n        this.textRenderer.renderQuads(this.trState, this.globalTransform, this.clippingRect, this.worldAlpha);\n    }\n    /**\n     * Resolve a text renderer and a new state based on the current text renderer props provided\n     * @param props\n     * @returns\n     */\n    resolveTextRendererAndState(props, prevState) {\n        const resolvedTextRenderer = this.stage.resolveTextRenderer(props, this._textRendererOverride);\n        const textRendererState = resolvedTextRenderer.createState(props);\n        const stateEvents = ['loading', 'loaded', 'failed'];\n        if (prevState) {\n            // Remove the old event listeners from previous state obj there was one\n            stateEvents.forEach((eventName) => {\n                prevState.emitter.off(eventName);\n            });\n        }\n        textRendererState.emitter.on('loaded', this.onTextLoaded);\n        textRendererState.emitter.on('failed', this.onTextFailed);\n        resolvedTextRenderer.scheduleUpdateState(textRendererState);\n        return {\n            resolvedTextRenderer,\n            textRendererState,\n        };\n    }\n}\n//# sourceMappingURL=CoreTextNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { MainOnlyNode, getNewId } from './MainOnlyNode.js';\nimport { CoreTextNode } from '../../core/CoreTextNode.js';\nexport class MainOnlyTextNode extends MainOnlyNode {\n    constructor(props, rendererMain, stage) {\n        super(props, rendererMain, stage, new CoreTextNode(stage, {\n            id: getNewId(),\n            x: props.x,\n            y: props.y,\n            width: props.width,\n            height: props.height,\n            alpha: props.alpha,\n            clipping: props.clipping,\n            color: props.color,\n            colorTop: props.colorTop,\n            colorBottom: props.colorBottom,\n            colorLeft: props.colorLeft,\n            colorRight: props.colorRight,\n            colorTl: props.colorTl,\n            colorTr: props.colorTr,\n            colorBl: props.colorBl,\n            colorBr: props.colorBr,\n            zIndex: props.zIndex,\n            zIndexLocked: props.zIndexLocked,\n            scaleX: props.scaleX,\n            scaleY: props.scaleY,\n            mountX: props.mountX,\n            mountY: props.mountY,\n            mount: props.mount,\n            pivot: props.pivot,\n            pivotX: props.pivotX,\n            pivotY: props.pivotY,\n            rotation: props.rotation,\n            // Text properties\n            text: props.text,\n            fontSize: props.fontSize,\n            fontFamily: props.fontFamily,\n            fontWeight: props.fontWeight,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            contain: props.contain,\n            scrollable: props.scrollable,\n            letterSpacing: props.letterSpacing,\n            textAlign: props.textAlign,\n            scrollY: props.scrollY,\n            offsetY: props.offsetY,\n            textRendererOverride: props.textRendererOverride,\n            debug: props.debug,\n            // These properties will get set appropriately in the base MainOnlyNode class\n            parent: null,\n            texture: null,\n            textureOptions: null,\n            shader: null,\n            shaderProps: null,\n        }));\n    }\n    get text() {\n        return this.coreNode.text;\n    }\n    set text(value) {\n        this.coreNode.text = value;\n    }\n    get textRendererOverride() {\n        return this.coreNode.textRendererOverride;\n    }\n    set textRendererOverride(value) {\n        this.coreNode.textRendererOverride = value;\n    }\n    get fontSize() {\n        return this.coreNode.fontSize;\n    }\n    set fontSize(value) {\n        this.coreNode.fontSize = value;\n    }\n    get fontFamily() {\n        return this.coreNode.fontFamily;\n    }\n    set fontFamily(value) {\n        this.coreNode.fontFamily = value;\n    }\n    get fontWeight() {\n        return this.coreNode.fontWeight;\n    }\n    set fontWeight(value) {\n        this.coreNode.fontWeight = value;\n    }\n    get fontStretch() {\n        return this.coreNode.fontStretch;\n    }\n    set fontStretch(value) {\n        this.coreNode.fontStretch = value;\n    }\n    get fontStyle() {\n        return this.coreNode.fontStyle;\n    }\n    set fontStyle(value) {\n        this.coreNode.fontStyle = value;\n    }\n    get textAlign() {\n        return this.coreNode.textAlign;\n    }\n    set textAlign(value) {\n        this.coreNode.textAlign = value;\n    }\n    get contain() {\n        return this.coreNode.contain;\n    }\n    set contain(value) {\n        this.coreNode.contain = value;\n    }\n    get scrollable() {\n        return this.coreNode.scrollable;\n    }\n    set scrollable(value) {\n        this.coreNode.scrollable = value;\n    }\n    get scrollY() {\n        return this.coreNode.scrollY;\n    }\n    set scrollY(value) {\n        this.coreNode.scrollY = value;\n    }\n    get offsetY() {\n        return this.coreNode.offsetY;\n    }\n    set offsetY(value) {\n        this.coreNode.offsetY = value;\n    }\n    get letterSpacing() {\n        return this.coreNode.letterSpacing;\n    }\n    set letterSpacing(value) {\n        this.coreNode.letterSpacing = value;\n    }\n    get debug() {\n        return this.coreNode.debug;\n    }\n    set debug(value) {\n        this.coreNode.debug = value;\n    }\n}\n//# sourceMappingURL=MainOnlyTextNode.js.map","import { CoreExtension } from '../../exports/core-api.js';\n/**\n * Type guard that checks if a Class extends CoreExtension.\n *\n * @param Class\n * @returns\n */\nexport function classExtendsCoreExtension(Class) {\n    return Class.prototype instanceof CoreExtension;\n}\nexport async function loadCoreExtension(coreExtensionModule, stage) {\n    let module;\n    try {\n        console.log('Loading core extension', coreExtensionModule);\n        module = (await import(coreExtensionModule /* @vite-ignore */));\n    }\n    catch (e) {\n        console.error(`The core extension module at '${coreExtensionModule}' could not be loaded.`);\n        console.error(e);\n        return;\n    }\n    if (!module.default) {\n        console.error(`The core extension module at '${coreExtensionModule}' does not have a default export.`);\n        return;\n    }\n    const ExtensionClass = module.default;\n    if (classExtendsCoreExtension(ExtensionClass)) {\n        const coreExtension = new ExtensionClass();\n        try {\n            await coreExtension.run(stage);\n        }\n        catch (e) {\n            console.error(`The core extension at '${coreExtensionModule}' threw an error.`);\n            console.error(e);\n        }\n    }\n    else {\n        console.error(`The core extension at '${coreExtensionModule}' does not extend CoreExtension.`);\n    }\n}\n//# sourceMappingURL=utils.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { MainOnlyNode, getNewId } from './MainOnlyNode.js';\nimport { Stage } from '../../core/Stage.js';\nimport { MainOnlyTextNode } from './MainOnlyTextNode.js';\nimport { loadCoreExtension } from '../utils.js';\nexport class MainCoreDriver {\n    root = null;\n    stage = null;\n    rendererMain = null;\n    async init(rendererMain, rendererSettings, canvas) {\n        this.stage = new Stage({\n            rootId: getNewId(),\n            appWidth: rendererSettings.appWidth,\n            appHeight: rendererSettings.appHeight,\n            deviceLogicalPixelRatio: rendererSettings.deviceLogicalPixelRatio,\n            devicePhysicalPixelRatio: rendererSettings.devicePhysicalPixelRatio,\n            clearColor: rendererSettings.clearColor,\n            canvas,\n            fpsUpdateInterval: rendererSettings.fpsUpdateInterval,\n            debug: {\n                monitorTextureCache: false,\n            },\n        });\n        this.rendererMain = rendererMain;\n        assertTruthy(this.stage.root);\n        const node = new MainOnlyNode(rendererMain.resolveNodeDefaults({}), this.rendererMain, this.stage, this.stage.root);\n        this.root = node;\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        // Load the Core Extension Module if one was specified.\n        if (rendererSettings.coreExtensionModule) {\n            await loadCoreExtension(rendererSettings.coreExtensionModule, this.stage);\n        }\n        // Forward fpsUpdate events from the stage to RendererMain\n        this.stage.on('fpsUpdate', (stage, fps) => {\n            this.onFpsUpdate(fps);\n        });\n    }\n    createNode(props) {\n        assertTruthy(this.rendererMain);\n        assertTruthy(this.stage);\n        const node = new MainOnlyNode(props, this.rendererMain, this.stage);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        return node;\n    }\n    createTextNode(props) {\n        assertTruthy(this.rendererMain);\n        assertTruthy(this.stage);\n        const node = new MainOnlyTextNode(props, this.rendererMain, this.stage);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        return node;\n    }\n    // TODO: Remove?\n    destroyNode(node) {\n        node.destroy();\n    }\n    releaseTexture(id) {\n        const { stage } = this;\n        assertTruthy(stage);\n        stage.txManager.removeTextureIdFromCache(id);\n    }\n    getRootNode() {\n        assertTruthy(this.root);\n        return this.root;\n    }\n    //#region Event Methods\n    // The implementations for these event methods are provided by RendererMain\n    onCreateNode(node) {\n        throw new Error('Method not implemented.');\n    }\n    onBeforeDestroyNode(node) {\n        throw new Error('Method not implemented.');\n    }\n    onFpsUpdate(fps) {\n        throw new Error('Method not implemented.');\n    }\n}\n//# sourceMappingURL=MainCoreDriver.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  MainCoreDriver,\n  RendererMain,\n  type RendererMainSettings,\n} from '@lightningjs/renderer';\n\nexport let renderer: RendererMain;\nexport let createShader: RendererMain['createShader'];\n\nexport interface SolidRendererOptions extends RendererMainSettings {\n  threadXCoreWorkerUrl?: string;\n  rootId: string | HTMLElement;\n}\n\nexport function startLightningRenderer(\n  options: Partial<SolidRendererOptions> = {},\n): RendererMain {\n  const driver = new MainCoreDriver();\n\n  renderer = new RendererMain(options, options.rootId || 'app', driver);\n\n  createShader = renderer.createShader.bind(renderer);\n  return renderer;\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type { ElementNode, SolidNode } from './index.js';\n\n/**\n * Children class\n */\nexport default class Children extends Array<SolidNode> {\n  _parent: ElementNode;\n\n  constructor(node: ElementNode) {\n    super();\n    this._parent = node;\n  }\n\n  get selected(): ElementNode | undefined {\n    // For selected Elements should always be an ElementNode\n    return this[this._parent.selected || 0] as ElementNode | undefined;\n  }\n\n  get firstChild() {\n    return this[0];\n  }\n\n  insert(node: SolidNode, beforeNode: SolidNode) {\n    if (beforeNode) {\n      const index = this.indexOf(beforeNode);\n      this.splice(index, 0, node);\n    } else {\n      this.push(node);\n    }\n\n    node.parent = this._parent;\n    this._parent._isDirty = true;\n  }\n\n  remove(node: SolidNode) {\n    const nodeIndexToRemove = this.indexOf(node);\n    if (nodeIndexToRemove >= 0) {\n      this.splice(nodeIndexToRemove, 1);\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { AnimationSettings } from '@lightningjs/renderer';\nimport type { IntrinsicTextNodeStyleProps } from './intrinsicTypes.js';\nimport { type ElementNode } from './core/node/index.js';\n\ninterface Config {\n  debug: boolean;\n  animationSettings: Partial<AnimationSettings>;\n  fontSettings: Partial<IntrinsicTextNodeStyleProps>;\n  stateMapperHook?: (node: ElementNode, states: Array<string>) => Array<string>;\n}\n\nimport.meta.env = import.meta.env || { MODE: 'development' };\nexport const isDev = import.meta.env.MODE === 'development';\n\nexport const config: Config = {\n  debug: false,\n  animationSettings: {\n    duration: 250,\n    easing: 'ease-in-out',\n  },\n  fontSettings: {\n    fontFamily: 'Ubuntu',\n    fontSize: 100,\n  },\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { config, isDev } from '../config.js';\nimport type { AnimatableNumberProp } from '../index.js';\nimport type { SolidNode } from './node/index.js';\n\nexport function log(msg: string, node: SolidNode, ...args: any[]) {\n  if (isDev) {\n    if (config.debug || (isObject(node) && node.debug)) {\n      console.log(msg, node, ...args);\n    }\n  }\n}\n\nexport function isFunc(item: unknown): item is (...args: unknown[]) => unknown {\n  return typeof item === 'function';\n}\n\nexport function isObject(\n  item: unknown,\n): item is Record<string | number | symbol, unknown> {\n  return typeof item === 'object';\n}\n\nexport function isArray(item: unknown): item is any[] {\n  return Array.isArray(item);\n}\n\nexport function isString(item: unknown): item is string {\n  return typeof item === 'string';\n}\n\nexport function isNumber(item: unknown): item is number {\n  return typeof item === 'number';\n}\n\nexport function isInteger(item: unknown): item is number {\n  return Number.isInteger(item);\n}\n\nexport function keyExists(\n  obj: Record<string, unknown>,\n  keys: (string | number | symbol)[],\n) {\n  for (const key of keys) {\n    if (key in obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function getAnimatableValue(\n  value: number | AnimatableNumberProp | undefined,\n): number | undefined {\n  return isArray(value) ? (value as AnimatableNumberProp)[0] : value;\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { isArray, isString } from '../utils.js';\n\nexport type NodeStates =\n  | string[]\n  | string\n  | Record<string, boolean | undefined>;\n\nexport default class States extends Array<string> {\n  private onChange: () => void;\n\n  constructor(callback: () => void, initialState: NodeStates = {}) {\n    if (isArray(initialState)) {\n      super(...initialState);\n    } else if (isString(initialState)) {\n      super(initialState);\n    } else {\n      super(\n        ...Object.entries(initialState)\n          .filter(([_key, value]) => value)\n          .map(([key]) => key),\n      );\n    }\n\n    this.onChange = callback;\n    return this;\n  }\n\n  has(state: string) {\n    return this.indexOf(state) >= 0;\n  }\n\n  is(state: string) {\n    return this.indexOf(state) >= 0;\n  }\n\n  add(state: string) {\n    this.push(state);\n    this.onChange();\n  }\n\n  toggle(state: string) {\n    if (this.has(state)) {\n      this.remove(state);\n    } else {\n      this.add(state);\n    }\n  }\n\n  remove(state: string) {\n    const stateIndexToRemove = this.indexOf(state);\n    if (stateIndexToRemove >= 0) {\n      this.splice(stateIndexToRemove, 1);\n      this.onChange();\n    }\n  }\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nimport type { ElementNode, SolidNode } from './node/index.js';\n\nexport default function (node: ElementNode): boolean {\n  const children = [];\n  for (let i = 0; i < node.children.length; i++) {\n    const c = node.children[i]!;\n    // Filter empty text nodes which are place holders for <Show> and elements missing dimensions\n    if (c.name === 'TextNode') {\n      continue;\n    }\n    // text node hasnt loaded yet - skip layout\n    if (c.name === 'text' && !(c.width || c.height)) {\n      return false;\n    }\n\n    children.push(c);\n  }\n\n  const numChildren = children.length;\n  const direction = node.flexDirection || 'row';\n  const isRow = direction === 'row';\n  const dimension = isRow ? 'width' : 'height';\n  const crossDimension = isRow ? 'height' : 'width';\n  const marginOne = isRow ? 'marginLeft' : 'marginTop';\n  const marginTwo = isRow ? 'marginRight' : 'marginBottom';\n  const prop = isRow ? 'x' : 'y';\n  const crossProp = isRow ? 'y' : 'x';\n  const containerSize = node[dimension] || 0;\n  const containerCrossSize = node[crossDimension] || 0;\n  const gap = node.gap || 0;\n  const justify = node.justifyContent || 'flexStart';\n  const align = node.alignItems;\n  let itemSize = 0;\n  if (['center', 'spaceBetween', 'spaceEvenly'].includes(justify)) {\n    itemSize = children.reduce(\n      (prev, c) => prev + (c[dimension] || 0),\n      0,\n    ) ;\n  }\n\n  // Only align children if container has a cross size\n  const crossAlignChild =\n    containerCrossSize && align\n      ? (c: SolidNode) => {\n          if (align === 'flexStart') {\n            c[crossProp] = 0;\n          } else if (align === 'center') {\n            c[crossProp] = (containerCrossSize - (c[crossDimension] || 0)) / 2;\n          } else if (align === 'flexEnd') {\n            c[crossProp] = containerCrossSize - (c[crossDimension] || 0);\n          }\n        }\n      : (c: SolidNode) => c;\n\n  if (justify === 'flexStart') {\n    let start = 0;\n    children.forEach((c) => {\n      c[prop] = start + (c[marginOne] || 0);\n      start +=\n        (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n      crossAlignChild(c);\n    });\n    // Update container size\n    if (node._autosized) {\n      const containerSize = start - gap;\n      if (containerSize !== node[dimension]) {\n        node[dimension] = containerSize;\n        return true;\n      }\n    }\n  } else if (justify === 'flexEnd') {\n    let start = containerSize;\n    for (let i = numChildren - 1; i >= 0; i--) {\n      const c = children[i];\n      assertTruthy(c);\n      c[prop] = start - (c[dimension] || 0) - (c[marginTwo] || 0);\n      start -=\n        (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n      crossAlignChild(c);\n    }\n  } else if (justify === 'center') {\n    let start = (containerSize - (itemSize + gap * (numChildren - 1))) / 2;\n    children.forEach((c) => {\n      c[prop] = start;\n      start += (c[dimension] || 0) + gap;\n      crossAlignChild(c);\n    });\n  } else if (justify === 'spaceBetween') {\n    const toPad = (containerSize - itemSize) / (numChildren - 1);\n    let start = 0;\n    children.forEach((c) => {\n      c[prop] = start;\n      start += (c[dimension] || 0) + toPad;\n      crossAlignChild(c);\n    });\n  } else if (justify === 'spaceEvenly') {\n    const toPad = (containerSize - itemSize) / (numChildren + 1);\n    let start = toPad;\n    children.forEach((c) => {\n      c[prop] = start;\n      start += (c[dimension] || 0) + toPad;\n      crossAlignChild(c);\n    });\n  }\n\n  // Container was not updated\n  return false;\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { renderer, createShader } from '../renderer/index.js';\nimport {\n  type AnimatableNumberProp,\n  type BorderStyleObject,\n  type IntrinsicCommonProps,\n  type NodeStyles,\n  type TextStyles,\n} from '../../index.js';\nimport Children from './children.js';\nimport States, { type NodeStates } from './states.js';\nimport calculateFlex from '../flex.js';\nimport {\n  log,\n  isArray,\n  isNumber,\n  isFunc,\n  keyExists,\n  getAnimatableValue,\n} from '../utils.js';\nimport { config } from '../../config.js';\nimport { setActiveElement } from '../activeElement.js';\nimport type {\n  INode,\n  INodeAnimatableProps,\n  INodeWritableProps,\n  ShaderRef,\n  Dimensions,\n  AnimationSettings,\n  NodeLoadedPayload,\n} from '@lightningjs/renderer';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\n\nconst { animationSettings: defaultAnimationSettings } = config;\n\nfunction convertEffectsToShader(styleEffects: any) {\n  const effects = [];\n\n  for (const [type, props] of Object.entries<Record<string, any>>(\n    styleEffects,\n  )) {\n    effects.push({ type, props });\n  }\n  return createShader('DynamicShader', { effects: effects as any });\n}\n\nfunction borderAccessor(\n  direction: '' | 'Top' | 'Right' | 'Bottom' | 'Left' = '',\n) {\n  return {\n    set(this: ElementNode, value: number | { width: number; color: number }) {\n      // Format: width || { width, color }\n      if (isNumber(value)) {\n        value = { width: value, color: 0x000000ff };\n      }\n      this.effects = {\n        ...(this.effects || {}),\n        ...{ [`border${direction}`]: value },\n      };\n      this[`_border${direction}`] = value;\n    },\n    get(this: ElementNode) {\n      return this[`_border${direction}`];\n    },\n  };\n}\n\nconst LightningRendererNumberProps = [\n  'alpha',\n  'color',\n  'colorTop',\n  'colorRight',\n  'colorLeft',\n  'colorBottom',\n  'colorTl',\n  'colorTr',\n  'colorBl',\n  'colorBr',\n  'height',\n  'fontSize',\n  'lineHeight',\n  'mount',\n  'mountX',\n  'mountY',\n  'pivot',\n  'pivotX',\n  'pivotY',\n  'rotation',\n  'scale',\n  'width',\n  'worldX',\n  'worldY',\n  'x',\n  'y',\n  'zIndex',\n  'zIndexLocked',\n];\n\nconst LightningRendererNonAnimatingProps = [\n  'clipping',\n  'contain',\n  'fontFamily',\n  'src',\n  'text',\n  'textAlign',\n  'texture',\n  'maxLines',\n  'maxLinesSuffix',\n  'textBaseline',\n  'textOverflow',\n  'verticalAlign',\n  'wordWrap',\n];\n\nexport interface TextNode {\n  name: string;\n  text: string;\n  parent: ElementNode | null;\n  zIndex?: number;\n  states?: States;\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  marginLeft?: number;\n  marginRight?: number;\n  marginTop?: number;\n  marginBottom?: number;\n  /**\n   * Managed by dom-inspector\n   */\n  _dom?: Text; // Public but uses _ prefix\n}\n\nexport type SolidNode = ElementNode | TextNode;\nexport type SolidStyles = NodeStyles | TextStyles;\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nexport interface ElementNode\n  extends Partial<Omit<INodeWritableProps, 'parent' | 'shader'>>,\n    IntrinsicCommonProps {\n  [key: string]: unknown;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nexport class ElementNode extends Object {\n  name: string;\n  lng: INode | null = null;\n  selected?: number;\n  rendered: boolean;\n  autofocus: boolean;\n\n  private _undoStates?: Record<string, any>;\n  private _renderProps: any;\n  private _effects: any;\n  private _parent: ElementNode | null = null;\n  private _shader?: ShaderRef;\n  private _style?: SolidStyles;\n  private _states?: States;\n  private _animationSettings?: Partial<AnimationSettings>;\n  private _width?: number;\n  private _height?: number;\n  private _color?: number;\n  private _borderRadius?: number;\n  private _border?: BorderStyleObject;\n  private _borderLeft?: BorderStyleObject;\n  private _borderRight?: BorderStyleObject;\n  private _borderTop?: BorderStyleObject;\n  private _borderBottom?: BorderStyleObject;\n  public _animate?: boolean; // Public but uses _ prefix\n  public _autosized?: boolean; // Public but uses _ prefix\n  public _isDirty?: boolean; // Public but uses _ prefix\n  /**\n   * Managed by dom-inspector\n   */\n  public _dom?: HTMLDivElement; // Public but uses _ prefix\n  children: Children;\n\n  constructor(name: string) {\n    super();\n    this.name = name;\n    this.rendered = false;\n    this.autofocus = false;\n    this._renderProps = { x: 0, y: 0 };\n    this.children = new Children(this);\n\n    for (const key of LightningRendererNumberProps) {\n      Object.defineProperty(this, key, {\n        get(): number {\n          return this[`_${key}`] || (this.lng && this.lng[key]);\n        },\n        set(v: number | AnimatableNumberProp) {\n          this[`_${key}`] = getAnimatableValue(v);\n          this._sendToLightningAnimatable(key, v);\n        },\n      });\n    }\n\n    for (const key of LightningRendererNonAnimatingProps) {\n      Object.defineProperty(this, key, {\n        get() {\n          return this[`_${key}`] || (this.lng && this.lng[key]);\n        },\n        set(v) {\n          this[`_${key}`] = v;\n          this._sendToLightning(key, v);\n        },\n      });\n    }\n\n    // Add Border Helpers\n    Object.defineProperties(this, {\n      borderRadius: {\n        set(this: ElementNode, radius) {\n          this._borderRadius = radius;\n          this.effects = {\n            ...(this.effects || {}),\n            ...{ radius: { radius } },\n          };\n        },\n        get(this: ElementNode) {\n          return this._borderRadius;\n        },\n      },\n      border: borderAccessor(),\n      borderLeft: borderAccessor('Left'),\n      borderRight: borderAccessor('Right'),\n      borderTop: borderAccessor('Top'),\n      borderBottom: borderAccessor('Bottom'),\n    });\n\n    Object.defineProperties(this, {\n      linearGradient: {\n        set(props = {}) {\n          this._linearGradient = props;\n          this.effects = {\n            ...(this.effects || {}),\n            ...{ linearGradient: props },\n          };\n        },\n        get() {\n          return this._linearGradient;\n        },\n      },\n    });\n  }\n\n  get effects() {\n    return this._effects;\n  }\n\n  set effects(v) {\n    this._effects = v;\n    this.shader = convertEffectsToShader(v);\n  }\n\n  get parent() {\n    return this._parent;\n  }\n\n  set parent(p) {\n    this._parent = p;\n    if (this.rendered && this.lng) {\n      this.lng.parent = p?.lng ?? null;\n    }\n  }\n\n  get shader(): ShaderRef | undefined {\n    return this._shader;\n  }\n\n  set shader(v: Parameters<typeof createShader> | ShaderRef | undefined) {\n    if (isArray(v)) {\n      this._shader = createShader(...v) as ShaderRef;\n    } else {\n      this._shader = v;\n    }\n    this._sendToLightning('shader', this._shader);\n  }\n\n  _sendToLightningAnimatable(\n    name: string,\n    value: AnimatableNumberProp | number | string,\n  ) {\n    if (this.rendered && this.lng) {\n      if (isArray(value)) {\n        return this.createAnimation({ [name]: value[0] }, value[1]).start();\n      }\n\n      if (this._animate) {\n        return this.createAnimation({ [name]: value }).start();\n      }\n\n      (this.lng[name as keyof INode] as number | string) = value;\n    } else {\n      // Need to render before animating\n      if (isArray(value)) {\n        value = value[0];\n      }\n      this._renderProps[name] = value;\n    }\n  }\n\n  _sendToLightning(name: string, value: unknown) {\n    if (this.rendered && this.lng) {\n      (this.lng[name as keyof INodeWritableProps] as unknown) = value;\n    } else {\n      this._renderProps[name] = value;\n    }\n  }\n\n  createAnimation(\n    props: Partial<INodeAnimatableProps>,\n    animationSettings?: Partial<AnimationSettings>,\n  ) {\n    assertTruthy(this.lng, 'Node must be rendered before animating');\n    return this.lng.animate(props, animationSettings || this.animationSettings);\n  }\n\n  setFocus() {\n    if (this.rendered) {\n      setActiveElement<ElementNode>(this);\n    } else {\n      this.autofocus = true;\n    }\n  }\n\n  isTextNode() {\n    return this.name === 'text';\n  }\n\n  _resizeOnTextLoad() {\n    this.lng!.once(\n      'loaded',\n      (_node: INode, loadedPayload: NodeLoadedPayload) => {\n        if (loadedPayload.type === 'text') {\n          const { dimensions } = loadedPayload;\n\n          this.width = dimensions.width;\n          this.height = dimensions.height;\n          this.parent!.updateLayout(this, dimensions);\n        }\n      },\n    );\n  }\n\n  getText() {\n    return this.children.map((c) => c.text).join('');\n  }\n\n  destroy() {\n    this.lng && renderer.destroyNode(this.lng);\n  }\n\n  set style(value: SolidStyles) {\n    // Keys set in JSX are more important\n    for (let key in value) {\n      if (key === 'animate') {\n        key = '_animate';\n      }\n\n      if (!this[key as keyof SolidStyles]) {\n        this[key as keyof SolidStyles] = value[key as keyof SolidStyles];\n      }\n    }\n\n    this._style = value;\n  }\n\n  get style(): SolidStyles {\n    return this._style!;\n  }\n\n  get hasChildren() {\n    return this.children.length > 0;\n  }\n\n  set states(states: NodeStates) {\n    this._states = new States(this._stateChanged.bind(this), states);\n    if (this.rendered) {\n      this._stateChanged();\n    }\n  }\n\n  get states(): States {\n    this._states = this._states || new States(this._stateChanged.bind(this));\n    return this._states;\n  }\n\n  get animationSettings(): Partial<AnimationSettings> {\n    return this._animationSettings || defaultAnimationSettings;\n  }\n\n  set animationSettings(animationSettings: Partial<AnimationSettings>) {\n    this._animationSettings = animationSettings;\n  }\n\n  updateLayout(child?: ElementNode, dimensions?: Dimensions) {\n    if (this.hasChildren) {\n      log('Layout: ', this);\n      isFunc(this.onBeforeLayout) &&\n        this.onBeforeLayout.call(this, child, dimensions);\n\n      if (this.display === 'flex') {\n        if (calculateFlex(this)) {\n          this.parent?.updateLayout();\n        }\n      }\n\n      isFunc(this.onLayout) && this.onLayout.call(this, child, dimensions);\n    }\n  }\n\n  _stateChanged() {\n    log('State Changed: ', this, this.states);\n\n    if (this.forwardStates) {\n      // apply states to children first\n      const states = this.states.slice() as States;\n      this.children.forEach((c) => (c.states = states));\n    }\n\n    const states = config.stateMapperHook?.(this, this.states) || this.states;\n\n    if (this._undoStates || (this.style && keyExists(this.style, states))) {\n      this._undoStates = this._undoStates || {};\n      let stylesToUndo = {};\n\n      for (const [state, undoStyles] of Object.entries(this._undoStates)) {\n        // if state is no longer in the states undo it\n        if (!states.includes(state)) {\n          stylesToUndo = {\n            ...stylesToUndo,\n            ...undoStyles,\n          };\n        }\n      }\n\n      const newStyles = states.reduce((acc, state) => {\n        const styles = this.style[state];\n        if (styles) {\n          acc = {\n            ...acc,\n            ...styles,\n          };\n\n          // get current values to undo state\n          if (this._undoStates && !this._undoStates[state]) {\n            this._undoStates[state] = {};\n            Object.keys(styles).forEach((key) => {\n              this._undoStates![state][key] = this[key as keyof this];\n            });\n          }\n        }\n        return acc;\n      }, {});\n\n      // Apply the styles\n      Object.assign(this, { ...stylesToUndo, ...newStyles });\n    }\n  }\n\n  render() {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const node = this;\n    const parent = this.parent!;\n\n    // Parent is dirty whenever a node is inserted after initial render\n    if (parent._isDirty) {\n      parent.updateLayout();\n      parent._isDirty = false;\n    }\n\n    node.updateLayout();\n\n    if (this.states.length) {\n      this._stateChanged();\n    }\n\n    let props = node._renderProps;\n\n    if (parent.lng) {\n      props.parent = parent.lng;\n    }\n\n    if (node.isTextNode()) {\n      props = {\n        ...config.fontSettings,\n        ...props,\n        text: node.getText(),\n      };\n\n      if (props.contain) {\n        if (!props.width) {\n          props.width =\n            (parent.width || 0) - props.x - (props.marginRight || 0);\n          node._width = props.width;\n          node._autosized = true;\n        }\n\n        if (!props.height && props.contain === 'both') {\n          props.height =\n            (parent.height || 0) - props.y - (props.marginBottom || 0);\n          node._height = props.height;\n          node._autosized = true;\n        }\n      }\n\n      log('Rendering: ', this, props);\n      node.lng = renderer.createTextNode(props);\n\n      isFunc(this.onCreate) && this.onCreate.call(this, node);\n\n      if (isFunc(node.onLoad)) {\n        node.lng.on('loaded', node.onLoad);\n      }\n\n      if (!node.width || !node.height) {\n        node._autosized = true;\n        node._resizeOnTextLoad();\n      }\n    } else {\n      // If its not an image or texture apply some defaults\n      if (!(props.src || props.texture)) {\n        // Set width and height to parent less offset\n        if (isNaN(props.width)) {\n          props.width = (parent.width || 0) - props.x;\n          node._width = props.width;\n          node._autosized = true;\n        }\n\n        if (isNaN(props.height)) {\n          props.height = (parent.height || 0) - props.y;\n          node._height = props.height;\n          node._autosized = true;\n        }\n\n        if (!props.color) {\n          // Default color to transparent - If you later set a src, you'll need\n          // to set color '#ffffffff'\n          node._color = props.color = 0x00000000;\n        }\n      }\n\n      log('Rendering: ', this, props);\n      node.lng = renderer.createNode(props);\n\n      if (node.onFail) {\n        node.lng.on('failed', node.onFail);\n      }\n\n      if (node.onLoad) {\n        node.lng.on('loaded', node.onLoad);\n      }\n\n      isFunc(this.onCreate) && this.onCreate.call(this, node);\n    }\n\n    node.rendered = true;\n    node.autofocus && node.setFocus();\n    // clean up after first render;\n    delete this._renderProps;\n  }\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { type Component } from \"solid-js\";\nimport type { IntrinsicTextProps } from \"../intrinsicTypes.js\";\n\nexport const Text: Component<IntrinsicTextProps> = (props) => <text {...props}></text>\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { type Component } from \"solid-js\";\nimport { type IntrinsicNodeProps } from \"../intrinsicTypes.js\";\n\nexport const View: Component<IntrinsicNodeProps> = (props) =>\n   <node {...props}></node>;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { createEffect, type JSX } from \"solid-js\";\nimport { startLightningRenderer, type SolidRendererOptions } from '../core/renderer/index.js';\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\nimport { ElementNode, type SolidNode } from \"../core/node/index.js\";\nimport { isFunc } from \"../core/utils.js\";\n\nfunction renderTopDown(node: SolidNode) {\n  if (node.name === 'TextNode') {\n    return;\n  }\n  assertTruthy(node instanceof ElementNode);\n  node.render();\n  node.children.forEach(c => renderTopDown(c))\n}\n\nexport interface CanvasOptions {\n  coreExtensionModule?: string,\n  threadXCoreWorkerUrl?: string,\n}\n\nexport interface CanvasProps {\n  options?: Partial<SolidRendererOptions>;\n  onFirstRender?: (callback: () => void) => void;\n  children?: JSX.Element;\n  ref?: (el: ElementNode) => void;\n}\n\nexport const Canvas = (props: CanvasProps) => {\n  const renderer = startLightningRenderer(props.options);\n  const init = renderer.init();\n  let root: ElementNode | undefined;\n\n  createEffect(() => {\n    init.then(() => {\n      assertTruthy(root);\n      root.lng = renderer.root;\n      root.children.forEach(renderTopDown);\n      isFunc(props.onFirstRender) && props.onFirstRender(root);\n    }).catch(console.error);\n  })\n  return (\n    <canvas ref={root}>\n      {props.children}\n    </canvas>\n  )\n};\n","import {\n  createRoot,\n  createRenderEffect,\n  mergeProps,\n  createMemo,\n  createComponent,\n  untrack\n} from \"solid-js\";\n\nfunction createRenderer$1({\n  createElement,\n  createTextNode,\n  isTextNode,\n  replaceText,\n  insertNode,\n  removeNode,\n  setProperty,\n  getParentNode,\n  getFirstChild,\n  getNextSibling\n}) {\n  function insert(parent, accessor, marker, initial) {\n    if (marker !== undefined && !initial) initial = [];\n    if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n    createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n  }\n  function insertExpression(parent, value, current, marker, unwrapArray) {\n    while (typeof current === \"function\") current = current();\n    if (value === current) return current;\n    const t = typeof value,\n      multi = marker !== undefined;\n    if (t === \"string\" || t === \"number\") {\n      if (t === \"number\") value = value.toString();\n      if (multi) {\n        let node = current[0];\n        if (node && isTextNode(node)) {\n          replaceText(node, value);\n        } else node = createTextNode(value);\n        current = cleanChildren(parent, current, marker, node);\n      } else {\n        if (current !== \"\" && typeof current === \"string\") {\n          replaceText(getFirstChild(parent), (current = value));\n        } else {\n          cleanChildren(parent, current, marker, createTextNode(value));\n          current = value;\n        }\n      }\n    } else if (value == null || t === \"boolean\") {\n      current = cleanChildren(parent, current, marker);\n    } else if (t === \"function\") {\n      createRenderEffect(() => {\n        let v = value();\n        while (typeof v === \"function\") v = v();\n        current = insertExpression(parent, v, current, marker);\n      });\n      return () => current;\n    } else if (Array.isArray(value)) {\n      const array = [];\n      if (normalizeIncomingArray(array, value, unwrapArray)) {\n        createRenderEffect(\n          () => (current = insertExpression(parent, array, current, marker, true))\n        );\n        return () => current;\n      }\n      if (array.length === 0) {\n        const replacement = cleanChildren(parent, current, marker);\n        if (multi) return (current = replacement);\n      } else {\n        if (Array.isArray(current)) {\n          if (current.length === 0) {\n            appendNodes(parent, array, marker);\n          } else reconcileArrays(parent, current, array);\n        } else if (current == null || current === \"\") {\n          appendNodes(parent, array);\n        } else {\n          reconcileArrays(parent, (multi && current) || [getFirstChild(parent)], array);\n        }\n      }\n      current = array;\n    } else {\n      if (Array.isArray(current)) {\n        if (multi) return (current = cleanChildren(parent, current, marker, value));\n        cleanChildren(parent, current, null, value);\n      } else if (current == null || current === \"\" || !getFirstChild(parent)) {\n        insertNode(parent, value);\n      } else replaceNode(parent, value, getFirstChild(parent));\n      current = value;\n    }\n    return current;\n  }\n  function normalizeIncomingArray(normalized, array, unwrap) {\n    let dynamic = false;\n    for (let i = 0, len = array.length; i < len; i++) {\n      let item = array[i],\n        t;\n      if (item == null || item === true || item === false);\n      else if (Array.isArray(item)) {\n        dynamic = normalizeIncomingArray(normalized, item) || dynamic;\n      } else if ((t = typeof item) === \"string\" || t === \"number\") {\n        normalized.push(createTextNode(item));\n      } else if (t === \"function\") {\n        if (unwrap) {\n          while (typeof item === \"function\") item = item();\n          dynamic =\n            normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item]) || dynamic;\n        } else {\n          normalized.push(item);\n          dynamic = true;\n        }\n      } else normalized.push(item);\n    }\n    return dynamic;\n  }\n  function reconcileArrays(parentNode, a, b) {\n    let bLength = b.length,\n      aEnd = a.length,\n      bEnd = bLength,\n      aStart = 0,\n      bStart = 0,\n      after = getNextSibling(a[aEnd - 1]),\n      map = null;\n    while (aStart < aEnd || bStart < bEnd) {\n      if (a[aStart] === b[bStart]) {\n        aStart++;\n        bStart++;\n        continue;\n      }\n      while (a[aEnd - 1] === b[bEnd - 1]) {\n        aEnd--;\n        bEnd--;\n      }\n      if (aEnd === aStart) {\n        const node =\n          bEnd < bLength ? (bStart ? getNextSibling(b[bStart - 1]) : b[bEnd - bStart]) : after;\n        while (bStart < bEnd) insertNode(parentNode, b[bStart++], node);\n      } else if (bEnd === bStart) {\n        while (aStart < aEnd) {\n          if (!map || !map.has(a[aStart])) removeNode(parentNode, a[aStart]);\n          aStart++;\n        }\n      } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n        const node = getNextSibling(a[--aEnd]);\n        insertNode(parentNode, b[bStart++], getNextSibling(a[aStart++]));\n        insertNode(parentNode, b[--bEnd], node);\n        a[aEnd] = b[bEnd];\n      } else {\n        if (!map) {\n          map = new Map();\n          let i = bStart;\n          while (i < bEnd) map.set(b[i], i++);\n        }\n        const index = map.get(a[aStart]);\n        if (index != null) {\n          if (bStart < index && index < bEnd) {\n            let i = aStart,\n              sequence = 1,\n              t;\n            while (++i < aEnd && i < bEnd) {\n              if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n              sequence++;\n            }\n            if (sequence > index - bStart) {\n              const node = a[aStart];\n              while (bStart < index) insertNode(parentNode, b[bStart++], node);\n            } else replaceNode(parentNode, b[bStart++], a[aStart++]);\n          } else aStart++;\n        } else removeNode(parentNode, a[aStart++]);\n      }\n    }\n  }\n  function cleanChildren(parent, current, marker, replacement) {\n    if (marker === undefined) {\n      let removed;\n      while ((removed = getFirstChild(parent))) removeNode(parent, removed);\n      replacement && insertNode(parent, replacement);\n      return \"\";\n    }\n    const node = replacement || createTextNode(\"\");\n    if (current.length) {\n      let inserted = false;\n      for (let i = current.length - 1; i >= 0; i--) {\n        const el = current[i];\n        if (node !== el) {\n          const isParent = getParentNode(el) === parent;\n          if (!inserted && !i)\n            isParent ? replaceNode(parent, node, el) : insertNode(parent, node, marker);\n          else isParent && removeNode(parent, el);\n        } else inserted = true;\n      }\n    } else insertNode(parent, node, marker);\n    return [node];\n  }\n  function appendNodes(parent, array, marker) {\n    for (let i = 0, len = array.length; i < len; i++) insertNode(parent, array[i], marker);\n  }\n  function replaceNode(parent, newNode, oldNode) {\n    insertNode(parent, newNode, oldNode);\n    removeNode(parent, oldNode);\n  }\n  function spreadExpression(node, props, prevProps = {}, skipChildren) {\n    props || (props = {});\n    if (!skipChildren) {\n      createRenderEffect(\n        () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n      );\n    }\n    createRenderEffect(() => props.ref && props.ref(node));\n    createRenderEffect(() => {\n      for (const prop in props) {\n        if (prop === \"children\" || prop === \"ref\") continue;\n        const value = props[prop];\n        if (value === prevProps[prop]) continue;\n        setProperty(node, prop, value, prevProps[prop]);\n        prevProps[prop] = value;\n      }\n    });\n    return prevProps;\n  }\n  return {\n    render(code, element) {\n      let disposer;\n      createRoot(dispose => {\n        disposer = dispose;\n        insert(element, code());\n      });\n      return disposer;\n    },\n    insert,\n    spread(node, accessor, skipChildren) {\n      if (typeof accessor === \"function\") {\n        createRenderEffect(current => spreadExpression(node, accessor(), current, skipChildren));\n      } else spreadExpression(node, accessor, undefined, skipChildren);\n    },\n    createElement,\n    createTextNode,\n    insertNode,\n    setProp(node, name, value, prev) {\n      setProperty(node, name, value, prev);\n      return value;\n    },\n    mergeProps,\n    effect: createRenderEffect,\n    memo: createMemo,\n    createComponent,\n    use(fn, element, arg) {\n      return untrack(() => fn(element, arg));\n    }\n  };\n}\n\nfunction createRenderer(options) {\n  const renderer = createRenderer$1(options);\n  renderer.mergeProps = mergeProps;\n  return renderer;\n}\n\nexport { createRenderer };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nimport { renderer } from '../renderer/index.js';\nimport { createEffect } from 'solid-js';\nimport { log } from '../utils.js';\nimport { ElementNode, type SolidNode, type TextNode } from '../node/index.js';\nimport type { createRenderer } from 'solid-js/universal';\n\nexport type SolidRendererOptions = Parameters<\n  typeof createRenderer<SolidNode>\n>[0];\n\nexport default {\n  createElement(name: string): ElementNode {\n    const node = new ElementNode(name);\n    renderer.root && createEffect(() => node.render());\n    return node;\n  },\n  createTextNode(text: string): TextNode {\n    // A text node is just a string - not the <text> node\n    return { name: 'TextNode', text, parent: null };\n  },\n  replaceText(node: TextNode, value: string): void {\n    log('Replace Text: ', node, value);\n    node.text = value;\n    const parent = node.parent;\n    assertTruthy(parent);\n    parent._autosized && parent._resizeOnTextLoad();\n    parent.text = parent.getText();\n  },\n  setProperty(node: ElementNode, name: string, value: any = true): void {\n    if (name === 'animate') {\n      node._animate = value as boolean;\n      return;\n    }\n\n    node[name] = value;\n  },\n  insertNode(parent: ElementNode, node: SolidNode, anchor: SolidNode): void {\n    log('INSERT: ', parent, node, anchor);\n    if (parent) {\n      parent.children.insert(node, anchor);\n\n      if (node.name === 'TextNode') {\n        // TextNodes can be placed outside of <text> nodes when <Show> is used as placeholder\n        if (parent.isTextNode()) {\n          parent._autosized && parent._resizeOnTextLoad();\n          parent.text = parent.getText();\n        }\n      }\n    }\n  },\n  isTextNode(node: ElementNode): boolean {\n    return node.isTextNode();\n  },\n  removeNode(parent: ElementNode, node: SolidNode): void {\n    log('REMOVE: ', parent, node);\n    parent.children.remove(node);\n    if (node instanceof ElementNode) {\n      node.destroy();\n    }\n  },\n  getParentNode(node: SolidNode): ElementNode | undefined {\n    return node.parent ?? undefined;\n  },\n  getFirstChild(node: ElementNode): SolidNode | undefined {\n    return node.children[0];\n  },\n  getNextSibling(node: SolidNode): SolidNode | undefined {\n    if (node.parent) {\n      const children = node.parent.children || [];\n      const index = children.indexOf(node) + 1;\n      if (index < children.length) {\n        return children[index];\n      }\n    }\n    return undefined;\n  },\n} satisfies SolidRendererOptions;\n","/* eslint-disable @typescript-eslint/unbound-method */\n/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { createRenderer } from 'solid-js/universal';\nimport universalLightning from './universal/lightning.js';\nimport universalInspector, {\n  attachInspector,\n} from './universal/dom-inspector.js';\nimport type { SolidNode } from './node/index.js';\nimport type { JSX } from 'solid-js';\nimport { isDev } from '../config.js';\n\nconst loadInspector = isDev;\nif (loadInspector) {\n  attachInspector();\n}\nconst solidRenderer = createRenderer<SolidNode>(\n  loadInspector ? universalInspector : universalLightning,\n);\n\n// TODO: This is a hack to get the `render()` function to work as it is used now in the demo app\n// There's gotta be a better way to fix it\nexport const render = solidRenderer.render as unknown as (\n  code: () => JSX.Element,\n  node?: SolidNode,\n) => () => void;\n\nexport const {\n  effect,\n  memo,\n  createComponent,\n  createElement,\n  createTextNode,\n  insertNode,\n  insert,\n  spread,\n  setProp,\n  mergeProps,\n  use,\n} = solidRenderer;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { isInteger } from './core/utils.js';\n\n/**\n * Converts a color string to a color number value.\n */\nexport function hexColor(color: string | number = ''): number {\n  if (isInteger(color)) {\n    return color;\n  }\n\n  if (typeof color === 'string') {\n    // Renderer expects RGBA values\n    if (color.startsWith('#')) {\n      return Number(\n        color.replace('#', '0x') + (color.length === 7 ? 'ff' : ''),\n      );\n    }\n\n    if (color.startsWith('0x')) {\n      return Number(color);\n    }\n    return Number('0x' + (color.length === 6 ? color + 'ff' : color));\n  }\n\n  return 0x00000000;\n}\n\n/**\n * Converts degrees to radians\n */\nexport function deg2rad(deg: number) {\n  return (deg * Math.PI) / 180;\n}\n","import {\n  createRoot,\n  sharedConfig,\n  createRenderEffect,\n  untrack,\n  enableHydration,\n  getOwner,\n  createEffect,\n  runWithOwner,\n  createMemo,\n  createSignal,\n  onCleanup,\n  splitProps\n} from \"solid-js\";\nexport {\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  createComponent,\n  createRenderEffect as effect,\n  getOwner,\n  createMemo as memo,\n  mergeProps,\n  untrack\n} from \"solid-js\";\n\nconst booleans = [\n  \"allowfullscreen\",\n  \"async\",\n  \"autofocus\",\n  \"autoplay\",\n  \"checked\",\n  \"controls\",\n  \"default\",\n  \"disabled\",\n  \"formnovalidate\",\n  \"hidden\",\n  \"indeterminate\",\n  \"inert\",\n  \"ismap\",\n  \"loop\",\n  \"multiple\",\n  \"muted\",\n  \"nomodule\",\n  \"novalidate\",\n  \"open\",\n  \"playsinline\",\n  \"readonly\",\n  \"required\",\n  \"reversed\",\n  \"seamless\",\n  \"selected\"\n];\nconst Properties = /*#__PURE__*/ new Set([\n  \"className\",\n  \"value\",\n  \"readOnly\",\n  \"formNoValidate\",\n  \"isMap\",\n  \"noModule\",\n  \"playsInline\",\n  ...booleans\n]);\nconst ChildProperties = /*#__PURE__*/ new Set([\n  \"innerHTML\",\n  \"textContent\",\n  \"innerText\",\n  \"children\"\n]);\nconst Aliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? (a[tagName] ? a[\"$\"] : undefined) : a;\n}\nconst DelegatedEvents = /*#__PURE__*/ new Set([\n  \"beforeinput\",\n  \"click\",\n  \"dblclick\",\n  \"contextmenu\",\n  \"focusin\",\n  \"focusout\",\n  \"input\",\n  \"keydown\",\n  \"keyup\",\n  \"mousedown\",\n  \"mousemove\",\n  \"mouseout\",\n  \"mouseover\",\n  \"mouseup\",\n  \"pointerdown\",\n  \"pointermove\",\n  \"pointerout\",\n  \"pointerover\",\n  \"pointerup\",\n  \"touchend\",\n  \"touchmove\",\n  \"touchstart\"\n]);\nconst SVGElements = /*#__PURE__*/ new Set([\n  \"altGlyph\",\n  \"altGlyphDef\",\n  \"altGlyphItem\",\n  \"animate\",\n  \"animateColor\",\n  \"animateMotion\",\n  \"animateTransform\",\n  \"circle\",\n  \"clipPath\",\n  \"color-profile\",\n  \"cursor\",\n  \"defs\",\n  \"desc\",\n  \"ellipse\",\n  \"feBlend\",\n  \"feColorMatrix\",\n  \"feComponentTransfer\",\n  \"feComposite\",\n  \"feConvolveMatrix\",\n  \"feDiffuseLighting\",\n  \"feDisplacementMap\",\n  \"feDistantLight\",\n  \"feFlood\",\n  \"feFuncA\",\n  \"feFuncB\",\n  \"feFuncG\",\n  \"feFuncR\",\n  \"feGaussianBlur\",\n  \"feImage\",\n  \"feMerge\",\n  \"feMergeNode\",\n  \"feMorphology\",\n  \"feOffset\",\n  \"fePointLight\",\n  \"feSpecularLighting\",\n  \"feSpotLight\",\n  \"feTile\",\n  \"feTurbulence\",\n  \"filter\",\n  \"font\",\n  \"font-face\",\n  \"font-face-format\",\n  \"font-face-name\",\n  \"font-face-src\",\n  \"font-face-uri\",\n  \"foreignObject\",\n  \"g\",\n  \"glyph\",\n  \"glyphRef\",\n  \"hkern\",\n  \"image\",\n  \"line\",\n  \"linearGradient\",\n  \"marker\",\n  \"mask\",\n  \"metadata\",\n  \"missing-glyph\",\n  \"mpath\",\n  \"path\",\n  \"pattern\",\n  \"polygon\",\n  \"polyline\",\n  \"radialGradient\",\n  \"rect\",\n  \"set\",\n  \"stop\",\n  \"svg\",\n  \"switch\",\n  \"symbol\",\n  \"text\",\n  \"textPath\",\n  \"tref\",\n  \"tspan\",\n  \"use\",\n  \"view\",\n  \"vkern\"\n]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/ new Set([\n  \"html\",\n  \"base\",\n  \"head\",\n  \"link\",\n  \"meta\",\n  \"style\",\n  \"title\",\n  \"body\",\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"body\",\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"rp\",\n  \"rt\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n  \"area\",\n  \"audio\",\n  \"img\",\n  \"map\",\n  \"track\",\n  \"video\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"param\",\n  \"picture\",\n  \"portal\",\n  \"source\",\n  \"svg\",\n  \"math\",\n  \"canvas\",\n  \"noscript\",\n  \"script\",\n  \"del\",\n  \"ins\",\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  \"details\",\n  \"dialog\",\n  \"menu\",\n  \"summary\",\n  \"details\",\n  \"slot\",\n  \"template\",\n  \"acronym\",\n  \"applet\",\n  \"basefont\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"center\",\n  \"content\",\n  \"dir\",\n  \"font\",\n  \"frame\",\n  \"frameset\",\n  \"hgroup\",\n  \"image\",\n  \"keygen\",\n  \"marquee\",\n  \"menuitem\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"plaintext\",\n  \"rb\",\n  \"rtc\",\n  \"shadow\",\n  \"spacer\",\n  \"strike\",\n  \"tt\",\n  \"xmp\",\n  \"a\",\n  \"abbr\",\n  \"acronym\",\n  \"address\",\n  \"applet\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"basefont\",\n  \"bdi\",\n  \"bdo\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"center\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"content\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"dir\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"font\",\n  \"footer\",\n  \"form\",\n  \"frame\",\n  \"frameset\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"image\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"keygen\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"marquee\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"plaintext\",\n  \"portal\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"shadow\",\n  \"slot\",\n  \"small\",\n  \"source\",\n  \"spacer\",\n  \"span\",\n  \"strike\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"template\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"tt\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\",\n  \"xmp\",\n  \"input\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\"\n]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? (bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart]) : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document\n      ? code()\n      : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE\n    ? () => untrack(() => document.importNode(node || (node = create()), true))\n    : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setProperty(node, name, value) {\n  !sharedConfig.context && (node[name] = value);\n}\nfunction setAttribute(node, name, value) {\n  if (sharedConfig.context) return;\n  if (value == null) node.removeAttribute(name);\n  else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (sharedConfig.context) return;\n  if (value == null) node.removeAttributeNS(namespace, name);\n  else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (sharedConfig.context) return;\n  if (value == null) node.removeAttribute(\"class\");\n  else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, (handler[0] = e => handlerFn.call(node, handler[1], e)));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return (nodeStyle.cssText = value);\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(\n      () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n    );\n  }\n  createRenderEffect(() => props.ref && props.ref(node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = id => globalThis._$HY.r[id];\n  sharedConfig.has = id => id in globalThis._$HY.r;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  gatherHydratable(element, options.renderId);\n  const dispose = render(code, element, [...element.childNodes], options);\n  sharedConfig.context = null;\n  return dispose;\n}\nfunction getNextElement(template) {\n  let node, key;\n  if (!sharedConfig.context || !(node = sharedConfig.registry.get((key = getHydrationKey())))) {\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (sharedConfig.context) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"$\") count++;\n        else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const { completed, events } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        eventHandler(e);\n        events.shift();\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++)\n    node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if (\n    (forceProp = prop.slice(0, 5) === \"prop:\") ||\n    (isChildProp = ChildProperties.has(prop)) ||\n    (!isSVG &&\n      ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop)))) ||\n    (isCE = node.nodeName.includes(\"-\"))\n  ) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    } else if (sharedConfig.context) return value;\n    if (prop === \"class\" || prop === \"className\") className(node, value);\n    else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;\n    else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);\n    else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  const key = `$$${e.type}`;\n  let node = (e.composedPath && e.composedPath()[0]) || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  if (sharedConfig.context) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();\n      else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = (multi && current[0] && current[0].parentNode) || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (sharedConfig.context) return current;\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (sharedConfig.context) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => (current = insertExpression(parent, array, current, marker, true)));\n      return () => current;\n    }\n    if (sharedConfig.context) {\n      if (!array.length) return current;\n      if (marker === undefined) return [...parent.childNodes];\n      let node = array[0];\n      let nodes = [node];\n      while ((node = node.nextSibling) !== marker) nodes.push(node);\n      return (current = nodes);\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (sharedConfig.context && value.parentNode) return (current = multi ? [value] : value);\n    if (Array.isArray(current)) {\n      if (multi) return (current = cleanChildren(parent, current, marker, value));\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else;\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[i],\n      t;\n    if (item == null || item === true || item === false);\n    else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic =\n          normalizeIncomingArray(\n            normalized,\n            Array.isArray(item) ? item : [item],\n            Array.isArray(prev) ? prev : [prev]\n          ) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);\n      else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return (parent.textContent = \"\");\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i)\n          isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);\n        else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key))\n      sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  const hydrate = sharedConfig.context;\n  return `${hydrate.id}${hydrate.count++}`;\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nfunction voidFn() {}\nconst RequestContext = Symbol();\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const { useShadow } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(\n    () => {\n      if (hydrating) getOwner().user = hydrating = false;\n      content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n      const el = mount();\n      if (el instanceof HTMLHeadElement) {\n        const [clean, setClean] = createSignal(false);\n        const cleanup = () => setClean(true);\n        createRoot(dispose => insert(el, () => (!clean() ? content() : dispose()), null));\n        onCleanup(cleanup);\n      } else {\n        const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n          renderRoot =\n            useShadow && container.attachShadow\n              ? container.attachShadow({\n                  mode: \"open\"\n                })\n              : container;\n        Object.defineProperty(container, \"_$host\", {\n          get() {\n            return marker.parentNode;\n          },\n          configurable: true\n        });\n        insert(renderRoot, content);\n        el.appendChild(container);\n        props.ref && props.ref(container);\n        onCleanup(() => el.removeChild(container));\n      }\n    },\n    undefined,\n    {\n      render: !hydrating\n    }\n  );\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport {\n  Aliases,\n  voidFn as Assets,\n  ChildProperties,\n  DOMElements,\n  DelegatedEvents,\n  Dynamic,\n  Hydration,\n  voidFn as HydrationScript,\n  NoHydration,\n  Portal,\n  Properties,\n  RequestContext,\n  SVGElements,\n  SVGNamespace,\n  addEventListener,\n  assign,\n  classList,\n  className,\n  clearDelegatedEvents,\n  delegateEvents,\n  dynamicProperty,\n  escape,\n  voidFn as generateHydrationScript,\n  voidFn as getAssets,\n  getHydrationKey,\n  getNextElement,\n  getNextMarker,\n  getNextMatch,\n  getPropAlias,\n  voidFn as getRequestEvent,\n  hydrate,\n  innerHTML,\n  insert,\n  isDev,\n  isServer,\n  render,\n  renderToStream,\n  renderToString,\n  renderToStringAsync,\n  resolveSSRNode,\n  runHydrationEvents,\n  setAttribute,\n  setAttributeNS,\n  setProperty,\n  spread,\n  ssr,\n  ssrAttribute,\n  ssrClassList,\n  ssrElement,\n  ssrHydrationKey,\n  ssrSpread,\n  ssrStyle,\n  style,\n  template,\n  use,\n  voidFn as useAssets\n};\n","export function createBeforeLeave() {\n    let listeners = new Set();\n    function subscribe(listener) {\n        listeners.add(listener);\n        return () => listeners.delete(listener);\n    }\n    let ignore = false;\n    function confirm(to, options) {\n        if (ignore)\n            return !(ignore = false);\n        const e = {\n            to,\n            options,\n            defaultPrevented: false,\n            preventDefault: () => (e.defaultPrevented = true)\n        };\n        for (const l of listeners)\n            l.listener({\n                ...e,\n                from: l.location,\n                retry: (force) => {\n                    force && (ignore = true);\n                    l.navigate(to, options);\n                }\n            });\n        return !e.defaultPrevented;\n    }\n    return {\n        subscribe,\n        confirm\n    };\n}\n","import { createMemo, getOwner, runWithOwner } from \"solid-js\";\nconst hasSchemeRegex = /^(?:[a-z0-9]+:)?\\/\\//i;\nconst trimPathRegex = /^\\/+|(\\/)\\/+$/g;\nexport const redirectStatusCodes = new Set([204, 301, 302, 303, 307, 308]);\nexport function normalizePath(path, omitSlash = false) {\n    const s = path.replace(trimPathRegex, \"$1\");\n    return s ? (omitSlash || /^[?#]/.test(s) ? s : \"/\" + s) : \"\";\n}\nexport function resolvePath(base, path, from) {\n    if (hasSchemeRegex.test(path)) {\n        return undefined;\n    }\n    const basePath = normalizePath(base);\n    const fromPath = from && normalizePath(from);\n    let result = \"\";\n    if (!fromPath || path.startsWith(\"/\")) {\n        result = basePath;\n    }\n    else if (fromPath.toLowerCase().indexOf(basePath.toLowerCase()) !== 0) {\n        result = basePath + fromPath;\n    }\n    else {\n        result = fromPath;\n    }\n    return (result || \"/\") + normalizePath(path, !result);\n}\nexport function invariant(value, message) {\n    if (value == null) {\n        throw new Error(message);\n    }\n    return value;\n}\nexport function joinPaths(from, to) {\n    return normalizePath(from).replace(/\\/*(\\*.*)?$/g, \"\") + normalizePath(to);\n}\nexport function extractSearchParams(url) {\n    const params = {};\n    url.searchParams.forEach((value, key) => {\n        params[key] = value;\n    });\n    return params;\n}\nexport function createMatcher(path, partial, matchFilters) {\n    const [pattern, splat] = path.split(\"/*\", 2);\n    const segments = pattern.split(\"/\").filter(Boolean);\n    const len = segments.length;\n    return (location) => {\n        const locSegments = location.split(\"/\").filter(Boolean);\n        const lenDiff = locSegments.length - len;\n        if (lenDiff < 0 || (lenDiff > 0 && splat === undefined && !partial)) {\n            return null;\n        }\n        const match = {\n            path: len ? \"\" : \"/\",\n            params: {}\n        };\n        const matchFilter = (s) => matchFilters === undefined ? undefined : matchFilters[s];\n        for (let i = 0; i < len; i++) {\n            const segment = segments[i];\n            const locSegment = locSegments[i];\n            const dynamic = segment[0] === \":\";\n            const key = dynamic ? segment.slice(1) : segment;\n            if (dynamic && matchSegment(locSegment, matchFilter(key))) {\n                match.params[key] = locSegment;\n            }\n            else if (dynamic || !matchSegment(locSegment, segment)) {\n                return null;\n            }\n            match.path += `/${locSegment}`;\n        }\n        if (splat) {\n            const remainder = lenDiff ? locSegments.slice(-lenDiff).join(\"/\") : \"\";\n            if (matchSegment(remainder, matchFilter(splat))) {\n                match.params[splat] = remainder;\n            }\n            else {\n                return null;\n            }\n        }\n        return match;\n    };\n}\nfunction matchSegment(input, filter) {\n    const isEqual = (s) => s.localeCompare(input, undefined, { sensitivity: \"base\" }) === 0;\n    if (filter === undefined) {\n        return true;\n    }\n    else if (typeof filter === \"string\") {\n        return isEqual(filter);\n    }\n    else if (typeof filter === \"function\") {\n        return filter(input);\n    }\n    else if (Array.isArray(filter)) {\n        return filter.some(isEqual);\n    }\n    else if (filter instanceof RegExp) {\n        return filter.test(input);\n    }\n    return false;\n}\nexport function scoreRoute(route) {\n    const [pattern, splat] = route.pattern.split(\"/*\", 2);\n    const segments = pattern.split(\"/\").filter(Boolean);\n    return segments.reduce((score, segment) => score + (segment.startsWith(\":\") ? 2 : 3), segments.length - (splat === undefined ? 0 : 1));\n}\nexport function createMemoObject(fn) {\n    const map = new Map();\n    const owner = getOwner();\n    return new Proxy({}, {\n        get(_, property) {\n            if (!map.has(property)) {\n                runWithOwner(owner, () => map.set(property, createMemo(() => fn()[property])));\n            }\n            return map.get(property)();\n        },\n        getOwnPropertyDescriptor() {\n            return {\n                enumerable: true,\n                configurable: true\n            };\n        },\n        ownKeys() {\n            return Reflect.ownKeys(fn());\n        }\n    });\n}\nexport function mergeSearchString(search, params) {\n    const merged = new URLSearchParams(search);\n    Object.entries(params).forEach(([key, value]) => {\n        if (value == null || value === \"\") {\n            merged.delete(key);\n        }\n        else {\n            merged.set(key, String(value));\n        }\n    });\n    const s = merged.toString();\n    return s ? `?${s}` : \"\";\n}\nexport function expandOptionals(pattern) {\n    let match = /(\\/?\\:[^\\/]+)\\?/.exec(pattern);\n    if (!match)\n        return [pattern];\n    let prefix = pattern.slice(0, match.index);\n    let suffix = pattern.slice(match.index + match[0].length);\n    const prefixes = [prefix, (prefix += match[1])];\n    // This section handles adjacent optional params. We don't actually want all permuations since\n    // that will lead to equivalent routes which have the same number of params. For example\n    // `/:a?/:b?/:c`? only has the unique expansion: `/`, `/:a`, `/:a/:b`, `/:a/:b/:c` and we can\n    // discard `/:b`, `/:c`, `/:b/:c` by building them up in order and not recursing. This also helps\n    // ensure predictability where earlier params have precidence.\n    while ((match = /^(\\/\\:[^\\/]+)\\?/.exec(suffix))) {\n        prefixes.push((prefix += match[1]));\n        suffix = suffix.slice(match[0].length);\n    }\n    return expandOptionals(suffix).reduce((results, expansion) => [...results, ...prefixes.map(p => p + expansion)], []);\n}\n","import { createComponent, createContext, createMemo, createRenderEffect, createSignal, on, onCleanup, untrack, useContext, startTransition, resetErrorBoundaries } from \"solid-js\";\nimport { isServer, getRequestEvent } from \"solid-js/web\";\nimport { createBeforeLeave } from \"./lifecycle\";\nimport { createMemoObject, extractSearchParams, invariant, resolvePath, createMatcher, joinPaths, scoreRoute, mergeSearchString, expandOptionals } from \"./utils\";\nconst MAX_REDIRECTS = 100;\nexport const RouterContextObj = createContext();\nexport const RouteContextObj = createContext();\nexport const useRouter = () => invariant(useContext(RouterContextObj), \"Make sure your app is wrapped in a <Router />\");\nlet TempRoute;\nexport const useRoute = () => TempRoute || useContext(RouteContextObj) || useRouter().base;\nexport const useResolvedPath = (path) => {\n    const route = useRoute();\n    return createMemo(() => route.resolvePath(path()));\n};\nexport const useHref = (to) => {\n    const router = useRouter();\n    return createMemo(() => {\n        const to_ = to();\n        return to_ !== undefined ? router.renderPath(to_) : to_;\n    });\n};\nexport const useNavigate = () => useRouter().navigatorFactory();\nexport const useLocation = () => useRouter().location;\nexport const useIsRouting = () => useRouter().isRouting;\nexport const useMatch = (path, matchFilters) => {\n    const location = useLocation();\n    const matchers = createMemo(() => expandOptionals(path()).map(path => createMatcher(path, undefined, matchFilters)));\n    return createMemo(() => {\n        for (const matcher of matchers()) {\n            const match = matcher(location.pathname);\n            if (match)\n                return match;\n        }\n    });\n};\nexport const useParams = () => useRoute().params;\nexport const useSearchParams = () => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const setSearchParams = (params, options) => {\n        const searchString = untrack(() => location.pathname + mergeSearchString(location.search, params) + location.hash);\n        navigate(searchString, {\n            scroll: false,\n            resolve: false,\n            ...options\n        });\n    };\n    return [location.query, setSearchParams];\n};\nexport const useBeforeLeave = (listener) => {\n    const s = useRouter().beforeLeave.subscribe({\n        listener,\n        location: useLocation(),\n        navigate: useNavigate()\n    });\n    onCleanup(s);\n};\nexport function createRoutes(routeDef, base = \"\") {\n    const { component, load, children, metadata } = routeDef;\n    const isLeaf = !children || (Array.isArray(children) && !children.length);\n    const shared = {\n        key: routeDef,\n        component,\n        load,\n        metadata\n    };\n    return asArray(routeDef.path).reduce((acc, path) => {\n        for (const originalPath of expandOptionals(path)) {\n            const path = joinPaths(base, originalPath);\n            const pattern = isLeaf ? path : path.split(\"/*\", 1)[0];\n            acc.push({\n                ...shared,\n                originalPath,\n                pattern,\n                matcher: createMatcher(pattern, !isLeaf, routeDef.matchFilters)\n            });\n        }\n        return acc;\n    }, []);\n}\nexport function createBranch(routes, index = 0) {\n    return {\n        routes,\n        score: scoreRoute(routes[routes.length - 1]) * 10000 - index,\n        matcher(location) {\n            const matches = [];\n            for (let i = routes.length - 1; i >= 0; i--) {\n                const route = routes[i];\n                const match = route.matcher(location);\n                if (!match) {\n                    return null;\n                }\n                matches.unshift({\n                    ...match,\n                    route\n                });\n            }\n            return matches;\n        }\n    };\n}\nfunction asArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\nexport function createBranches(routeDef, base = \"\", stack = [], branches = []) {\n    const routeDefs = asArray(routeDef);\n    for (let i = 0, len = routeDefs.length; i < len; i++) {\n        const def = routeDefs[i];\n        if (def && typeof def === \"object\") {\n            if (!def.hasOwnProperty(\"path\"))\n                def.path = \"\";\n            const routes = createRoutes(def, base);\n            for (const route of routes) {\n                stack.push(route);\n                const isEmptyArray = Array.isArray(def.children) && def.children.length === 0;\n                if (def.children && !isEmptyArray) {\n                    createBranches(def.children, route.pattern, stack, branches);\n                }\n                else {\n                    const branch = createBranch([...stack], branches.length);\n                    branches.push(branch);\n                }\n                stack.pop();\n            }\n        }\n    }\n    // Stack will be empty on final return\n    return stack.length ? branches : branches.sort((a, b) => b.score - a.score);\n}\nexport function getRouteMatches(branches, location) {\n    for (let i = 0, len = branches.length; i < len; i++) {\n        const match = branches[i].matcher(location);\n        if (match) {\n            return match;\n        }\n    }\n    return [];\n}\nexport function createLocation(path, state) {\n    const origin = new URL(\"http://sar\");\n    const url = createMemo(prev => {\n        const path_ = path();\n        try {\n            return new URL(path_, origin);\n        }\n        catch (err) {\n            console.error(`Invalid path ${path_}`);\n            return prev;\n        }\n    }, origin, {\n        equals: (a, b) => a.href === b.href\n    });\n    const pathname = createMemo(() => url().pathname);\n    const search = createMemo(() => url().search, true);\n    const hash = createMemo(() => url().hash);\n    const key = () => \"\";\n    return {\n        get pathname() {\n            return pathname();\n        },\n        get search() {\n            return search();\n        },\n        get hash() {\n            return hash();\n        },\n        get state() {\n            return state();\n        },\n        get key() {\n            return key();\n        },\n        query: createMemoObject(on(search, () => extractSearchParams(url())))\n    };\n}\nlet intent;\nexport function getIntent() {\n    return intent;\n}\nexport function createRouterContext(integration, getBranches, options = {}) {\n    const { signal: [source, setSource], utils = {} } = integration;\n    const parsePath = utils.parsePath || (p => p);\n    const renderPath = utils.renderPath || (p => p);\n    const beforeLeave = utils.beforeLeave || createBeforeLeave();\n    const basePath = resolvePath(\"\", options.base || \"\");\n    if (basePath === undefined) {\n        throw new Error(`${basePath} is not a valid base path`);\n    }\n    else if (basePath && !source().value) {\n        setSource({ value: basePath, replace: true, scroll: false });\n    }\n    const [isRouting, setIsRouting] = createSignal(false);\n    const start = async (callback) => {\n        setIsRouting(true);\n        try {\n            await startTransition(callback);\n        }\n        finally {\n            setIsRouting(false);\n        }\n    };\n    const [reference, setReference] = createSignal(source().value);\n    const [state, setState] = createSignal(source().state);\n    const location = createLocation(reference, state);\n    const referrers = [];\n    const submissions = createSignal(isServer ? initFromFlash() : []);\n    const baseRoute = {\n        pattern: basePath,\n        params: {},\n        path: () => basePath,\n        outlet: () => null,\n        resolvePath(to) {\n            return resolvePath(basePath, to);\n        }\n    };\n    createRenderEffect(() => {\n        const { value, state } = source();\n        // Untrack this whole block so `start` doesn't cause Solid's Listener to be preserved\n        untrack(() => {\n            if (value !== reference()) {\n                start(() => {\n                    intent = \"native\";\n                    setReference(value);\n                    setState(state);\n                    resetErrorBoundaries();\n                    submissions[1]([]);\n                }).then(() => {\n                    intent = undefined;\n                });\n            }\n        });\n    });\n    return {\n        base: baseRoute,\n        location,\n        isRouting,\n        renderPath,\n        parsePath,\n        navigatorFactory,\n        beforeLeave,\n        preloadRoute,\n        submissions\n    };\n    function navigateFromRoute(route, to, options) {\n        // Untrack in case someone navigates in an effect - don't want to track `reference` or route paths\n        untrack(() => {\n            if (typeof to === \"number\") {\n                if (!to) {\n                    // A delta of 0 means stay at the current location, so it is ignored\n                }\n                else if (utils.go) {\n                    beforeLeave.confirm(to, options) && utils.go(to);\n                }\n                else {\n                    console.warn(\"Router integration does not support relative routing\");\n                }\n                return;\n            }\n            const { replace, resolve, scroll, state: nextState } = {\n                replace: false,\n                resolve: true,\n                scroll: true,\n                ...options\n            };\n            const resolvedTo = resolve ? route.resolvePath(to) : resolvePath(\"\", to);\n            if (resolvedTo === undefined) {\n                throw new Error(`Path '${to}' is not a routable path`);\n            }\n            else if (referrers.length >= MAX_REDIRECTS) {\n                throw new Error(\"Too many redirects\");\n            }\n            const current = reference();\n            if (resolvedTo !== current || nextState !== state()) {\n                if (isServer) {\n                    const e = getRequestEvent();\n                    e &&\n                        (e.response = new Response(null, { status: 302, headers: { Location: resolvedTo } }));\n                    setSource({ value: resolvedTo, replace, scroll, state: nextState });\n                }\n                else if (beforeLeave.confirm(resolvedTo, options)) {\n                    const len = referrers.push({ value: current, replace, scroll, state: state() });\n                    start(() => {\n                        intent = \"navigate\";\n                        setReference(resolvedTo);\n                        setState(nextState);\n                        resetErrorBoundaries();\n                        submissions[1]([]);\n                    }).then(() => {\n                        if (referrers.length === len) {\n                            intent = undefined;\n                            navigateEnd({\n                                value: resolvedTo,\n                                state: nextState\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    }\n    function navigatorFactory(route) {\n        // Workaround for vite issue (https://github.com/vitejs/vite/issues/3803)\n        route = route || useContext(RouteContextObj) || baseRoute;\n        return (to, options) => navigateFromRoute(route, to, options);\n    }\n    function navigateEnd(next) {\n        const first = referrers[0];\n        if (first) {\n            if (next.value !== first.value || next.state !== first.state) {\n                setSource({\n                    ...next,\n                    replace: first.replace,\n                    scroll: first.scroll\n                });\n            }\n            referrers.length = 0;\n        }\n    }\n    function preloadRoute(url, preloadData) {\n        const matches = getRouteMatches(getBranches(), url.pathname);\n        const prevIntent = intent;\n        intent = \"preload\";\n        for (let match in matches) {\n            const { route, params } = matches[match];\n            route.component &&\n                route.component.preload &&\n                route.component.preload();\n            preloadData &&\n                route.load &&\n                route.load({\n                    params,\n                    location: {\n                        pathname: url.pathname,\n                        search: url.search,\n                        hash: url.hash,\n                        query: extractSearchParams(url),\n                        state: null,\n                        key: \"\"\n                    },\n                    intent: \"preload\"\n                });\n        }\n        intent = prevIntent;\n    }\n    function initFromFlash() {\n        const e = getRequestEvent();\n        return e && e.initialSubmission ? [e.initialSubmission] : [];\n    }\n}\nexport function createRouteContext(router, parent, outlet, match, params) {\n    const { base, location } = router;\n    const { pattern, component, load } = match().route;\n    const path = createMemo(() => match().path);\n    component &&\n        component.preload &&\n        component.preload();\n    const data = load ? load({ params, location, intent: intent || \"initial\" }) : undefined;\n    const route = {\n        parent,\n        pattern,\n        path,\n        params,\n        outlet: () => component\n            ? createComponent(component, {\n                params,\n                location,\n                data,\n                get children() {\n                    return outlet();\n                }\n            })\n            : outlet(),\n        resolvePath(to) {\n            return resolvePath(base.path(), to, path());\n        }\n    };\n    return route;\n}\n","/*@refresh skip*/\nimport { getRequestEvent, isServer } from \"solid-js/web\";\nimport { children, createMemo, createRoot, mergeProps, on, Show } from \"solid-js\";\nimport { createBranches, createRouteContext, createRouterContext, getRouteMatches, RouteContextObj, RouterContextObj } from \"../routing\";\nimport { createMemoObject } from \"../utils\";\nexport const createRouterComponent = (router) => (props) => {\n    const { base } = props;\n    const routeDefs = children(() => props.children);\n    const branches = createMemo(() => createBranches(props.root ? { component: props.root, children: routeDefs() } : routeDefs(), props.base || \"\"));\n    const routerState = createRouterContext(router, branches, { base });\n    router.create && router.create(routerState);\n    return (<RouterContextObj.Provider value={routerState}>\n      <Routes routerState={routerState} branches={branches()}/>\n    </RouterContextObj.Provider>);\n};\nfunction Routes(props) {\n    const matches = createMemo(() => getRouteMatches(props.branches, props.routerState.location.pathname));\n    if (isServer) {\n        const e = getRequestEvent();\n        e &&\n            (e.routerMatches || (e.routerMatches = [])).push(matches().map(({ route, path, params }) => ({\n                path: route.originalPath,\n                pattern: route.pattern,\n                match: path,\n                params,\n                metadata: route.metadata\n            })));\n    }\n    const params = createMemoObject(() => {\n        const m = matches();\n        const params = {};\n        for (let i = 0; i < m.length; i++) {\n            Object.assign(params, m[i].params);\n        }\n        return params;\n    });\n    const disposers = [];\n    let root;\n    const routeStates = createMemo(on(matches, (nextMatches, prevMatches, prev) => {\n        let equal = prevMatches && nextMatches.length === prevMatches.length;\n        const next = [];\n        for (let i = 0, len = nextMatches.length; i < len; i++) {\n            const prevMatch = prevMatches && prevMatches[i];\n            const nextMatch = nextMatches[i];\n            if (prev && prevMatch && nextMatch.route.key === prevMatch.route.key) {\n                next[i] = prev[i];\n            }\n            else {\n                equal = false;\n                if (disposers[i]) {\n                    disposers[i]();\n                }\n                createRoot(dispose => {\n                    disposers[i] = dispose;\n                    next[i] = createRouteContext(props.routerState, next[i - 1] || props.routerState.base, createOutlet(() => routeStates()[i + 1]), () => matches()[i], params);\n                });\n            }\n        }\n        disposers.splice(nextMatches.length).forEach(dispose => dispose());\n        if (prev && equal) {\n            return prev;\n        }\n        root = next[0];\n        return next;\n    }));\n    return (<Show when={routeStates() && root} keyed>\n      {route => <RouteContextObj.Provider value={route}>{route.outlet()}</RouteContextObj.Provider>}\n    </Show>);\n}\nconst createOutlet = (child) => {\n    return () => (<Show when={child()} keyed>\n      {child => <RouteContextObj.Provider value={child}>{child.outlet()}</RouteContextObj.Provider>}\n    </Show>);\n};\nexport const Route = (props) => {\n    const childRoutes = children(() => props.children);\n    return mergeProps(props, {\n        get children() {\n            return childRoutes();\n        }\n    });\n};\n","import { createSignal, onCleanup } from \"solid-js\";\nimport { createRouterComponent } from \"./components\";\nfunction intercept([value, setValue], get, set) {\n    return [get ? () => get(value()) : value, set ? (v) => setValue(set(v)) : setValue];\n}\nfunction querySelector(selector) {\n    if (selector === \"#\") {\n        return null;\n    }\n    // Guard against selector being an invalid CSS selector\n    try {\n        return document.querySelector(selector);\n    }\n    catch (e) {\n        return null;\n    }\n}\nexport function createRouter(config) {\n    let ignore = false;\n    const wrap = (value) => (typeof value === \"string\" ? { value } : value);\n    const signal = intercept(createSignal(wrap(config.get()), { equals: (a, b) => a.value === b.value }), undefined, next => {\n        !ignore && config.set(next);\n        return next;\n    });\n    config.init &&\n        onCleanup(config.init((value = config.get()) => {\n            ignore = true;\n            signal[1](wrap(value));\n            ignore = false;\n        }));\n    return createRouterComponent({\n        signal,\n        create: config.create,\n        utils: config.utils\n    });\n}\nexport function bindEvent(target, type, handler) {\n    target.addEventListener(type, handler);\n    return () => target.removeEventListener(type, handler);\n}\nexport function scrollToHash(hash, fallbackTop) {\n    const el = querySelector(`#${hash}`);\n    if (el) {\n        el.scrollIntoView();\n    }\n    else if (fallbackTop) {\n        window.scrollTo(0, 0);\n    }\n}\n","import { $TRACK, createMemo, createSignal, onCleanup, getOwner } from \"solid-js\";\nimport { isServer } from \"solid-js/web\";\nimport { useRouter } from \"../routing\";\nimport { redirectStatusCodes } from \"../utils\";\nimport { cacheKeyOp, hashKey, revalidate } from \"./cache\";\nexport const actions = /* #__PURE__ */ new Map();\nexport function useSubmissions(fn, filter) {\n    const router = useRouter();\n    const subs = createMemo(() => router.submissions[0]().filter(s => s.url === fn.toString() && (!filter || filter(s.input))));\n    return new Proxy([], {\n        get(_, property) {\n            if (property === $TRACK)\n                return subs();\n            if (property === \"pending\")\n                return subs().some(sub => !sub.result);\n            return subs()[property];\n        }\n    });\n}\nexport function useSubmission(fn, filter) {\n    const submissions = useSubmissions(fn, filter);\n    return new Proxy({}, {\n        get(_, property) {\n            return submissions[submissions.length - 1]?.[property];\n        }\n    });\n}\nexport function useAction(action) {\n    const router = useRouter();\n    return (...args) => action.apply(router, args);\n}\nexport function action(fn, name) {\n    function mutate(...variables) {\n        const p = fn(...variables);\n        const [result, setResult] = createSignal();\n        let submission;\n        const router = this;\n        async function handler(res) {\n            const data = await handleResponse(res, router.navigatorFactory());\n            data ? setResult({ data }) : submission.clear();\n            return data;\n        }\n        router.submissions[1](s => [\n            ...s,\n            (submission = {\n                input: variables,\n                url,\n                get result() {\n                    return result()?.data;\n                },\n                get pending() {\n                    return !result();\n                },\n                clear() {\n                    router.submissions[1](v => v.filter(i => i.input !== variables));\n                },\n                retry() {\n                    setResult(undefined);\n                    const p = fn(...variables);\n                    p.then(handler, handler);\n                    return p;\n                }\n            })\n        ]);\n        p.then(handler, handler);\n        return p;\n    }\n    const url = fn.url ||\n        (name && `action:${name}`) ||\n        (!isServer ? `action:${hashString(fn.toString())}` : \"\");\n    return toAction(mutate, url);\n}\nfunction toAction(fn, url) {\n    fn.toString = () => {\n        if (!url)\n            throw new Error(\"Client Actions need explicit names if server rendered\");\n        return url;\n    };\n    fn.with = function (...args) {\n        const newFn = function (...passedArgs) {\n            return fn.call(this, ...args, ...passedArgs);\n        };\n        const uri = new URL(url, \"http://sar\");\n        uri.searchParams.set(\"args\", hashKey(args));\n        return toAction(newFn, (uri.protocol === \"action:\" ? uri.protocol : \"\") + uri.pathname + uri.search);\n    };\n    fn.url = url;\n    if (!isServer) {\n        actions.set(url, fn);\n        getOwner() && onCleanup(() => actions.delete(url));\n    }\n    return fn;\n}\nconst hashString = (s) => s.split(\"\").reduce((a, b) => ((a << 5) - a + b.charCodeAt(0)) | 0, 0);\nasync function handleResponse(response, navigate) {\n    let data;\n    let keys;\n    if (response instanceof Response) {\n        if (response.headers.has(\"X-Revalidate\"))\n            keys = response.headers.get(\"X-Revalidate\").split(\",\");\n        if (response.customBody)\n            data = await response.customBody();\n        if (redirectStatusCodes.has(response.status)) {\n            const locationUrl = response.headers.get(\"Location\") || \"/\";\n            if (locationUrl.startsWith(\"http\")) {\n                window.location.href = locationUrl;\n            }\n            else {\n                navigate(locationUrl);\n            }\n        }\n    }\n    else\n        data = response;\n    // invalidate\n    cacheKeyOp(keys, entry => (entry[0] = 0));\n    // trigger revalidation\n    await revalidate(keys, false);\n    return data;\n}\n","import { delegateEvents } from \"solid-js/web\";\nimport { onCleanup } from \"solid-js\";\nimport { actions } from \"./action\";\nexport function setupNativeEvents(preload = true, explicitLinks = false, actionBase = \"/_server\") {\n    return (router) => {\n        const basePath = router.base.path();\n        const navigateFromRoute = router.navigatorFactory(router.base);\n        let preloadTimeout = {};\n        function isSvg(el) {\n            return el.namespaceURI === \"http://www.w3.org/2000/svg\";\n        }\n        function handleAnchor(evt) {\n            if (evt.defaultPrevented ||\n                evt.button !== 0 ||\n                evt.metaKey ||\n                evt.altKey ||\n                evt.ctrlKey ||\n                evt.shiftKey)\n                return;\n            const a = evt\n                .composedPath()\n                .find(el => el instanceof Node && el.nodeName.toUpperCase() === \"A\");\n            if (!a || (explicitLinks && !a.getAttribute(\"link\")))\n                return;\n            const svg = isSvg(a);\n            const href = svg ? a.href.baseVal : a.href;\n            const target = svg ? a.target.baseVal : a.target;\n            if (target || (!href && !a.hasAttribute(\"state\")))\n                return;\n            const rel = (a.getAttribute(\"rel\") || \"\").split(/\\s+/);\n            if (a.hasAttribute(\"download\") || (rel && rel.includes(\"external\")))\n                return;\n            const url = svg ? new URL(href, document.baseURI) : new URL(href);\n            if (url.origin !== window.location.origin ||\n                (basePath && url.pathname && !url.pathname.toLowerCase().startsWith(basePath.toLowerCase())))\n                return;\n            return [a, url];\n        }\n        function handleAnchorClick(evt) {\n            const res = handleAnchor(evt);\n            if (!res)\n                return;\n            const [a, url] = res;\n            const to = router.parsePath(url.pathname + url.search + url.hash);\n            const state = a.getAttribute(\"state\");\n            evt.preventDefault();\n            navigateFromRoute(to, {\n                resolve: false,\n                replace: a.hasAttribute(\"replace\"),\n                scroll: !a.hasAttribute(\"noscroll\"),\n                state: state && JSON.parse(state)\n            });\n        }\n        function handleAnchorPreload(evt) {\n            const res = handleAnchor(evt);\n            if (!res)\n                return;\n            const [a, url] = res;\n            if (!preloadTimeout[url.pathname])\n                router.preloadRoute(url, a.getAttribute(\"preload\") !== \"false\");\n        }\n        function handleAnchorIn(evt) {\n            const res = handleAnchor(evt);\n            if (!res)\n                return;\n            const [a, url] = res;\n            if (preloadTimeout[url.pathname])\n                return;\n            preloadTimeout[url.pathname] = setTimeout(() => {\n                router.preloadRoute(url, a.getAttribute(\"preload\") !== \"false\");\n                delete preloadTimeout[url.pathname];\n            }, 200);\n        }\n        function handleAnchorOut(evt) {\n            const res = handleAnchor(evt);\n            if (!res)\n                return;\n            const [, url] = res;\n            if (preloadTimeout[url.pathname]) {\n                clearTimeout(preloadTimeout[url.pathname]);\n                delete preloadTimeout[url.pathname];\n            }\n        }\n        function handleFormSubmit(evt) {\n            let actionRef = evt.submitter && evt.submitter.hasAttribute(\"formaction\")\n                ? evt.submitter.formAction\n                : evt.target.action;\n            if (!actionRef)\n                return;\n            if (!actionRef.startsWith(\"action:\")) {\n                const url = new URL(actionRef);\n                actionRef = router.parsePath(url.pathname + url.search);\n                if (!actionRef.startsWith(actionBase))\n                    return;\n            }\n            if (evt.target.method.toUpperCase() !== \"POST\")\n                throw new Error(\"Only POST forms are supported for Actions\");\n            const handler = actions.get(actionRef);\n            if (handler) {\n                evt.preventDefault();\n                const data = new FormData(evt.target);\n                handler.call(router, data);\n            }\n        }\n        // ensure delegated event run first\n        delegateEvents([\"click\", \"submit\"]);\n        document.addEventListener(\"click\", handleAnchorClick);\n        if (preload) {\n            document.addEventListener(\"mouseover\", handleAnchorIn);\n            document.addEventListener(\"mouseout\", handleAnchorOut);\n            document.addEventListener(\"focusin\", handleAnchorPreload);\n            document.addEventListener(\"touchstart\", handleAnchorPreload);\n        }\n        document.addEventListener(\"submit\", handleFormSubmit);\n        onCleanup(() => {\n            document.removeEventListener(\"click\", handleAnchorClick);\n            if (preload) {\n                document.removeEventListener(\"mouseover\", handleAnchorIn);\n                document.removeEventListener(\"mouseout\", handleAnchorOut);\n                document.removeEventListener(\"focusin\", handleAnchorPreload);\n                document.removeEventListener(\"touchstart\", handleAnchorPreload);\n            }\n            document.removeEventListener(\"submit\", handleFormSubmit);\n        });\n    };\n}\n","import { setupNativeEvents } from \"../data/events\";\nimport { createRouter, scrollToHash, bindEvent } from \"./createRouter\";\nexport function hashParser(str) {\n    const to = str.replace(/^.*?#/, \"\");\n    // Hash-only hrefs like `#foo` from plain anchors will come in as `/#foo` whereas a link to\n    // `/foo` will be `/#/foo`. Check if the to starts with a `/` and if not append it as a hash\n    // to the current path so we can handle these in-page anchors correctly.\n    if (!to.startsWith(\"/\")) {\n        const [, path = \"/\"] = window.location.hash.split(\"#\", 2);\n        return `${path}#${to}`;\n    }\n    return to;\n}\nexport function HashRouter(props) {\n    return createRouter({\n        get: () => window.location.hash.slice(1),\n        set({ value, replace, scroll, state }) {\n            if (replace) {\n                window.history.replaceState(state, \"\", \"#\" + value);\n            }\n            else {\n                window.location.hash = value;\n            }\n            const hashIndex = value.indexOf(\"#\");\n            const hash = hashIndex >= 0 ? value.slice(hashIndex + 1) : \"\";\n            scrollToHash(hash, scroll);\n        },\n        init: notify => bindEvent(window, \"hashchange\", () => notify()),\n        create: setupNativeEvents(props.preload, props.explicitLinks, props.actionBase),\n        utils: {\n            go: delta => window.history.go(delta),\n            renderPath: path => `#${path}`,\n            parsePath: hashParser\n        }\n    })(props);\n}\n","import { DEV, equalFn, untrack, getOwner, onCleanup, createSignal, sharedConfig, onMount } from 'solid-js';\nimport { isServer } from 'solid-js/web';\nexport { isServer } from 'solid-js/web';\n\n// src/index.ts\nvar isClient = !isServer;\nvar isDev = isClient && !!DEV;\nvar isProd = !isDev;\nvar noop = () => void 0;\nvar trueFn = () => true;\nvar falseFn = () => false;\nvar defaultEquals = equalFn;\nvar EQUALS_FALSE_OPTIONS = { equals: false };\nvar INTERNAL_OPTIONS = { internal: true };\nvar ofClass = (v, c) => v instanceof c || v && v.constructor === c;\nfunction isObject(value) {\n  return value !== null && (typeof value === \"object\" || typeof value === \"function\");\n}\nvar isNonNullable = (i) => i != null;\nvar filterNonNullable = (arr) => arr.filter(isNonNullable);\nvar compare = (a, b) => a < b ? -1 : a > b ? 1 : 0;\nvar arrayEquals = (a, b) => a === b || a.length === b.length && a.every((e, i) => e === b[i]);\nfunction chain(callbacks) {\n  return (...args) => {\n    for (const callback of callbacks)\n      callback && callback(...args);\n  };\n}\nfunction reverseChain(callbacks) {\n  return (...args) => {\n    for (let i = callbacks.length - 1; i >= 0; i--) {\n      const callback = callbacks[i];\n      callback && callback(...args);\n    }\n  };\n}\nvar clamp = (n, min, max) => Math.min(Math.max(n, min), max);\nvar access = (v) => typeof v === \"function\" && !v.length ? v() : v;\nvar asArray = (value) => Array.isArray(value) ? value : value ? [value] : [];\nvar accessArray = (list) => list.map((v) => access(v));\nvar withAccess = (value, fn) => {\n  const _value = access(value);\n  typeof _value != null && fn(_value);\n};\nvar asAccessor = (v) => typeof v === \"function\" ? v : () => v;\nfunction accessWith(valueOrFn, ...args) {\n  return typeof valueOrFn === \"function\" ? valueOrFn(...args) : valueOrFn;\n}\nfunction defer(deps, fn, initialValue) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let shouldDefer = true;\n  return (prevValue) => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++)\n        input[i] = deps[i]();\n    } else\n      input = deps();\n    if (shouldDefer) {\n      shouldDefer = false;\n      prevInput = input;\n      return initialValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nvar entries = Object.entries;\nvar keys = Object.keys;\nvar tryOnCleanup = isDev ? (fn) => getOwner() ? onCleanup(fn) : fn : onCleanup;\nvar createCallbackStack = () => {\n  let stack = [];\n  const clear = () => stack = [];\n  return {\n    push: (...callbacks) => stack.push(...callbacks),\n    execute(arg0, arg1, arg2, arg3) {\n      stack.forEach((cb) => cb(arg0, arg1, arg2, arg3));\n      clear();\n    },\n    clear\n  };\n};\nfunction createMicrotask(fn) {\n  let calls = 0;\n  let args;\n  onCleanup(() => calls = 0);\n  return (...a) => {\n    args = a, calls++;\n    queueMicrotask(() => --calls === 0 && fn(...args));\n  };\n}\nfunction createHydratableSignal(serverValue, update, options) {\n  if (isServer) {\n    return createSignal(serverValue, options);\n  }\n  if (sharedConfig.context) {\n    const [state, setState] = createSignal(serverValue, options);\n    onMount(() => setState(() => update()));\n    return [state, setState];\n  }\n  return createSignal(update(), options);\n}\nvar createHydrateSignal = createHydratableSignal;\nfunction handleDiffArray(current, prev, handleAdded, handleRemoved) {\n  const currLength = current.length;\n  const prevLength = prev.length;\n  let i = 0;\n  if (!prevLength) {\n    for (; i < currLength; i++)\n      handleAdded(current[i]);\n    return;\n  }\n  if (!currLength) {\n    for (; i < prevLength; i++)\n      handleRemoved(prev[i]);\n    return;\n  }\n  for (; i < prevLength; i++) {\n    if (prev[i] !== current[i])\n      break;\n  }\n  let prevEl;\n  let currEl;\n  prev = prev.slice(i);\n  current = current.slice(i);\n  for (prevEl of prev) {\n    if (!current.includes(prevEl))\n      handleRemoved(prevEl);\n  }\n  for (currEl of current) {\n    if (!prev.includes(currEl))\n      handleAdded(currEl);\n  }\n}\n\nexport { EQUALS_FALSE_OPTIONS, INTERNAL_OPTIONS, access, accessArray, accessWith, arrayEquals, asAccessor, asArray, chain, clamp, compare, createCallbackStack, createHydratableSignal, createHydrateSignal, createMicrotask, defaultEquals, defer, entries, falseFn, filterNonNullable, handleDiffArray, isClient, isDev, isNonNullable, isObject, isProd, keys, noop, ofClass, reverseChain, trueFn, tryOnCleanup, withAccess };\n","import { tryOnCleanup, entries, createCallbackStack, asArray, access, keys } from '@solid-primitives/utils';\nimport { createEffect, createRenderEffect, createSignal, onCleanup } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/eventListener.ts\nfunction makeEventListener(target, type, handler, options) {\n  target.addEventListener(type, handler, options);\n  return tryOnCleanup(target.removeEventListener.bind(target, type, handler, options));\n}\nfunction createEventListener(targets, type, handler, options) {\n  if (isServer)\n    return;\n  const attachListeners = () => {\n    asArray(access(targets)).forEach((el) => {\n      if (el)\n        asArray(access(type)).forEach((type2) => makeEventListener(el, type2, handler, options));\n    });\n  };\n  if (typeof targets === \"function\")\n    createEffect(attachListeners);\n  else\n    createRenderEffect(attachListeners);\n}\nfunction createEventSignal(target, type, options) {\n  if (isServer) {\n    return () => void 0;\n  }\n  const [lastEvent, setLastEvent] = createSignal();\n  createEventListener(target, type, setLastEvent, options);\n  return lastEvent;\n}\nvar eventListener = (target, props) => {\n  createEffect(() => {\n    const [type, handler, options] = props();\n    makeEventListener(target, type, handler, options);\n  });\n};\nfunction createEventListenerMap(targets, handlersMap, options) {\n  if (isServer) {\n    return;\n  }\n  for (const [eventName, handler] of entries(handlersMap)) {\n    if (handler)\n      createEventListener(targets, eventName, handler, options);\n  }\n}\nvar attachPropListeners = (target, props) => {\n  keys(props).forEach((attr) => {\n    if (attr.startsWith(\"on\") && typeof props[attr] === \"function\")\n      makeEventListener(target, attr.substring(2).toLowerCase(), props[attr]);\n  });\n};\nvar WindowEventListener = (props) => {\n  if (isServer)\n    return null;\n  attachPropListeners(window, props);\n};\nvar DocumentEventListener = (props) => {\n  if (isServer)\n    return null;\n  attachPropListeners(document, props);\n};\nfunction makeEventListenerStack(target, options) {\n  if (isServer) {\n    return [() => () => void 0, () => void 0];\n  }\n  const { push, execute } = createCallbackStack();\n  return [\n    (type, handler, overwriteOptions) => {\n      const clear = makeEventListener(target, type, handler, overwriteOptions ?? options);\n      push(clear);\n      return clear;\n    },\n    onCleanup(execute)\n  ];\n}\n\n// src/callbackWrappers.ts\nvar preventDefault = (callback) => (e) => {\n  e.preventDefault();\n  callback(e);\n};\nvar stopPropagation = (callback) => (e) => {\n  e.stopPropagation();\n  callback(e);\n};\nvar stopImmediatePropagation = (callback) => (e) => {\n  e.stopImmediatePropagation();\n  callback(e);\n};\n\nexport { DocumentEventListener, WindowEventListener, createEventListener, createEventListenerMap, createEventSignal, eventListener, makeEventListener, makeEventListenerStack, preventDefault, stopImmediatePropagation, stopPropagation };\n","import { getOwner, createRoot, runWithOwner, onCleanup, sharedConfig, createSignal, batch } from 'solid-js';\nimport { isServer } from 'solid-js/web';\nimport { asArray, access, trueFn, noop, createMicrotask } from '@solid-primitives/utils';\n\n// src/index.ts\nfunction createSubRoot(fn, ...owners) {\n  if (owners.length === 0)\n    owners = [getOwner()];\n  return createRoot((dispose) => {\n    asArray(access(owners)).forEach(\n      (owner) => owner && runWithOwner(owner, onCleanup.bind(void 0, dispose))\n    );\n    return fn(dispose);\n  }, owners[0]);\n}\nvar createBranch = createSubRoot;\nvar createCallback = (callback, owner = getOwner()) => owner ? (...args) => runWithOwner(owner, () => callback(...args)) : callback;\nfunction createDisposable(fn, ...owners) {\n  return createSubRoot((dispose) => {\n    fn(dispose);\n    return dispose;\n  }, ...owners);\n}\nfunction createSingletonRoot(factory, detachedOwner = getOwner()) {\n  let listeners = 0, value, disposeRoot;\n  return () => {\n    listeners++;\n    onCleanup(() => {\n      listeners--;\n      queueMicrotask(() => {\n        if (!listeners && disposeRoot) {\n          disposeRoot();\n          disposeRoot = value = void 0;\n        }\n      });\n    });\n    if (!disposeRoot) {\n      createRoot((dispose) => value = factory(disposeRoot = dispose), detachedOwner);\n    }\n    return value;\n  };\n}\nvar createSharedRoot = createSingletonRoot;\nfunction createHydratableSingletonRoot(factory) {\n  const owner = getOwner();\n  const singleton = createSingletonRoot(factory, owner);\n  return () => isServer || sharedConfig.context ? createRoot(factory, owner) : singleton();\n}\nfunction createRootPool(factory, options = {}) {\n  if (isServer) {\n    const owner2 = getOwner();\n    return (args) => createRoot((dispose) => factory(() => args, trueFn, dispose), owner2);\n  }\n  let length = 0;\n  const { limit = 100 } = options, pool = new Array(limit), owner = getOwner(), mapRoot = factory.length > 1 ? (dispose, [args, set]) => {\n    const [active, setA] = createSignal(true);\n    const root = {\n      dispose,\n      set,\n      setA,\n      active,\n      v: factory(args, active, () => disposeRoot(root))\n    };\n    return root;\n  } : (dispose, [args, set]) => ({\n    dispose,\n    set,\n    setA: trueFn,\n    active: trueFn,\n    v: factory(args, trueFn, noop)\n  }), limitPool = createMicrotask(() => {\n    if (length > limit) {\n      for (let i = limit; i < length; i++) {\n        pool[i].dispose();\n        pool[i] = void 0;\n      }\n      length = limit;\n    }\n  }), cleanupRoot = (root) => {\n    if (root.dispose !== noop) {\n      pool[length++] = root;\n      root.setA(false);\n      limitPool();\n    }\n  }, disposeRoot = (root) => {\n    root.dispose();\n    root.dispose = noop;\n    if (root.active())\n      root.setA(false);\n    else {\n      pool[pool.indexOf(root)] = pool[--length];\n      pool[length] = void 0;\n    }\n  };\n  onCleanup(() => {\n    for (let i = 0; i < length; i++)\n      pool[i].dispose();\n    length = 0;\n  });\n  return (arg) => {\n    let root;\n    if (length) {\n      root = pool[--length];\n      pool[length] = void 0;\n      batch(() => {\n        root.set(() => arg);\n        root.setA(true);\n      });\n    } else\n      root = createRoot((dispose) => mapRoot(dispose, createSignal(arg)), owner);\n    onCleanup(() => cleanupRoot(root));\n    return root.v;\n  };\n}\n\nexport { createBranch, createCallback, createDisposable, createHydratableSingletonRoot, createRootPool, createSharedRoot, createSingletonRoot, createSubRoot };\n","import { makeEventListener } from '@solid-primitives/event-listener';\nimport { createSingletonRoot } from '@solid-primitives/rootless';\nimport { arrayEquals } from '@solid-primitives/utils';\nimport { createSignal, untrack, createMemo, createEffect, on } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/index.ts\nfunction equalsKeyHoldSequence(sequence, model) {\n  for (let i = sequence.length - 1; i >= 0; i--) {\n    const _model = model.slice(0, i + 1);\n    if (!arrayEquals(sequence[i], _model))\n      return false;\n  }\n  return true;\n}\nvar useKeyDownEvent = /* @__PURE__ */ createSingletonRoot(\n  () => {\n    if (isServer) {\n      return () => null;\n    }\n    const [event, setEvent] = createSignal(null);\n    makeEventListener(window, \"keydown\", (e) => {\n      setEvent(e);\n      setTimeout(() => setEvent(null));\n    });\n    return event;\n  }\n);\nvar useKeyDownList = /* @__PURE__ */ createSingletonRoot(() => {\n  if (isServer) {\n    const keys = () => [];\n    keys[0] = keys;\n    keys[1] = { event: () => null };\n    keys[Symbol.iterator] = function* () {\n      yield keys[0];\n      yield keys[1];\n    };\n    return keys;\n  }\n  const [pressedKeys, setPressedKeys] = createSignal([]), reset = () => setPressedKeys([]), event = useKeyDownEvent();\n  makeEventListener(window, \"keydown\", (e) => {\n    if (e.repeat || typeof e.key !== \"string\")\n      return;\n    const key = e.key.toUpperCase(), currentKeys = pressedKeys();\n    if (currentKeys.includes(key))\n      return;\n    const keys = [...currentKeys, key];\n    if (currentKeys.length === 0 && key !== \"ALT\" && key !== \"CONTROL\" && key !== \"META\" && key !== \"SHIFT\") {\n      if (e.shiftKey)\n        keys.unshift(\"SHIFT\");\n      if (e.altKey)\n        keys.unshift(\"ALT\");\n      if (e.ctrlKey)\n        keys.unshift(\"CONTROL\");\n      if (e.metaKey)\n        keys.unshift(\"META\");\n    }\n    setPressedKeys(keys);\n  });\n  makeEventListener(window, \"keyup\", (e) => {\n    if (typeof e.key !== \"string\")\n      return;\n    const key = e.key.toUpperCase();\n    setPressedKeys((prev) => prev.filter((_key) => _key !== key));\n  });\n  makeEventListener(window, \"blur\", reset);\n  makeEventListener(window, \"contextmenu\", (e) => {\n    e.defaultPrevented || reset();\n  });\n  pressedKeys[0] = pressedKeys;\n  pressedKeys[1] = { event };\n  pressedKeys[Symbol.iterator] = function* () {\n    yield pressedKeys[0];\n    yield pressedKeys[1];\n  };\n  return pressedKeys;\n});\nvar useCurrentlyHeldKey = /* @__PURE__ */ createSingletonRoot(\n  () => {\n    if (isServer) {\n      return () => null;\n    }\n    const keys = useKeyDownList();\n    let prevKeys = untrack(keys);\n    return createMemo(() => {\n      const _keys = keys();\n      const prev = prevKeys;\n      prevKeys = _keys;\n      if (prev.length === 0 && _keys.length === 1)\n        return _keys[0];\n      return null;\n    });\n  }\n);\nvar useKeyDownSequence = /* @__PURE__ */ createSingletonRoot(() => {\n  if (isServer) {\n    return () => [];\n  }\n  const keys = useKeyDownList();\n  return createMemo((prev) => {\n    if (keys().length === 0)\n      return [];\n    return [...prev, keys()];\n  }, []);\n});\nfunction createKeyHold(key, options = {}) {\n  if (isServer) {\n    return () => false;\n  }\n  key = key.toUpperCase();\n  const { preventDefault = true } = options, event = useKeyDownEvent(), heldKey = useCurrentlyHeldKey();\n  return createMemo(() => heldKey() === key && (preventDefault && event()?.preventDefault(), true));\n}\nfunction createShortcut(keys, callback, options = {}) {\n  if (isServer || !keys.length) {\n    return;\n  }\n  keys = keys.map((key) => key.toUpperCase());\n  const { preventDefault = true } = options, event = useKeyDownEvent(), sequence = useKeyDownSequence();\n  let reset = false;\n  const handleSequenceWithReset = (sequence2) => {\n    if (!sequence2.length)\n      return reset = false;\n    if (reset)\n      return;\n    const e = event();\n    if (sequence2.length < keys.length) {\n      if (equalsKeyHoldSequence(sequence2, keys.slice(0, sequence2.length))) {\n        preventDefault && e && e.preventDefault();\n      } else {\n        reset = true;\n      }\n    } else {\n      reset = true;\n      if (equalsKeyHoldSequence(sequence2, keys)) {\n        preventDefault && e && e.preventDefault();\n        callback(e);\n      }\n    }\n  };\n  const handleSequenceWithoutReset = (sequence2) => {\n    const last = sequence2.at(-1);\n    if (!last)\n      return;\n    const e = event();\n    if (preventDefault && last.length < keys.length) {\n      if (arrayEquals(last, keys.slice(0, keys.length - 1))) {\n        e && e.preventDefault();\n      }\n      return;\n    }\n    if (arrayEquals(last, keys)) {\n      const prev = sequence2.at(-2);\n      if (!prev || arrayEquals(prev, keys.slice(0, keys.length - 1))) {\n        preventDefault && e && e.preventDefault();\n        callback(e);\n      }\n    }\n  };\n  createEffect(\n    on(sequence, options.requireReset ? handleSequenceWithReset : handleSequenceWithoutReset)\n  );\n}\n\nexport { createKeyHold, createShortcut, useCurrentlyHeldKey, useKeyDownEvent, useKeyDownList, useKeyDownSequence };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nexport function isFunc(item) {\n    return typeof item === 'function';\n}\nexport function isObject(item) {\n    return typeof item === 'object';\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isArray(item) {\n    return Array.isArray(item);\n}\nexport function isString(item) {\n    return typeof item === 'string';\n}\nexport function isNumber(item) {\n    return typeof item === 'number';\n}\nexport function isInteger(item) {\n    return Number.isInteger(item);\n}\nexport function keyExists(obj, keys) {\n    for (const key of keys) {\n        if (key in obj) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Asserts a condition is truthy, otherwise throws an error\n *\n * @remarks\n * Useful at the top of functions to ensure certain conditions, arguments and\n * properties are set/met before continuing. When using this function,\n * TypeScript will narrow away falsy types from the condition.\n *\n * @param condition\n * @param message\n * @returns\n */\nexport function assertTruthy(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createEffect, on, createSignal, untrack } from 'solid-js';\nimport { useKeyDownEvent } from '@solid-primitives/keyboard';\nimport { activeElement, ElementNode } from '@lightningjs/solid';\nimport { isFunc } from './utils.js';\nlet keyMap = {\n    Left: 'ArrowLeft',\n    Right: 'ArrowRight',\n    Up: 'ArrowUp',\n    Down: 'ArrowDown',\n    Enter: 'Enter',\n    Last: 'l',\n};\nconst [focusPath, setFocusPath] = createSignal([]);\nexport { focusPath };\nexport const useFocusManager = (userKeyMap = {}) => {\n    const keypressEvent = useKeyDownEvent();\n    keyMap = {\n        ...keyMap,\n        ...userKeyMap,\n    };\n    const keyMapEntries = Object.entries(keyMap);\n    createEffect(on(activeElement, (currentFocusedElm, prevFocusedElm, prevFocusPath = []) => {\n        const newFocusedElms = [];\n        let current = currentFocusedElm;\n        const fp = [];\n        while (current) {\n            if (!current.states.has('focus')) {\n                current.states.add('focus');\n                isFunc(current.onFocus) &&\n                    current.onFocus.call(current, currentFocusedElm, prevFocusedElm ?? null);\n                newFocusedElms.push(current);\n            }\n            fp.push(current);\n            current = current.parent ?? null;\n        }\n        prevFocusPath.forEach((elm) => {\n            if (!fp.includes(elm)) {\n                elm.states.remove('focus');\n                isFunc(elm.onBlur) &&\n                    elm.onBlur.call(elm, currentFocusedElm, prevFocusedElm ?? null);\n            }\n        });\n        setFocusPath(fp);\n        return fp;\n    }, { defer: true }));\n    createEffect(() => {\n        const e = keypressEvent();\n        if (e) {\n            // Search keyMap for the value of the pressed key\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const foundKeyEntry = keyMapEntries.find(([key, value]) => {\n                return value === e.key;\n            });\n            untrack(() => {\n                const fp = focusPath();\n                for (const elm of fp) {\n                    const mappedKeyEvent = foundKeyEntry ? foundKeyEntry[0] : undefined;\n                    if (mappedKeyEvent) {\n                        const onKeyHandler = elm[`on${mappedKeyEvent}`];\n                        if (isFunc(onKeyHandler)) {\n                            if (onKeyHandler.call(elm, e, elm) === true) {\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        console.log(`Unhandled key event: ${e.key}`);\n                    }\n                    if (isFunc(elm.onKeyPress)) {\n                        if (elm.onKeyPress.call(elm, e, mappedKeyEvent, elm) === true) {\n                            break;\n                        }\n                    }\n                }\n                return false;\n            });\n        }\n    });\n    return focusPath;\n};\n//# sourceMappingURL=useFocusManager.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ElementNode } from '@lightningjs/solid';\n// To use with TS import withPadding and then put withPadding; on the next line to prevent tree shaking\nexport function withPadding(el, padding) {\n    const pad = padding();\n    let top, left, right, bottom;\n    if (Array.isArray(pad)) {\n        // top right bottom left\n        if (pad.length === 2) {\n            top = bottom = pad[0];\n            left = right = pad[1];\n        }\n        else if (pad.length === 3) {\n            top = pad[0];\n            left = right = pad[1];\n            bottom = pad[2];\n        }\n        else {\n            [top, right, bottom, left] = pad;\n        }\n    }\n    else {\n        top = right = bottom = left = pad;\n    }\n    el.onBeforeLayout = (node, size) => {\n        if (size) {\n            el.width =\n                el.children.reduce((acc, c) => {\n                    return acc + (c.width || 0);\n                }, 0) +\n                    left +\n                    right;\n            const firstChild = el.children[0];\n            if (firstChild) {\n                // set padding or marginLeft for flex\n                firstChild.x = left;\n                firstChild.marginLeft = left;\n            }\n            let maxHeight = 0;\n            el.children.forEach((c) => {\n                c.y = (c.y || 0) + top;\n                c.marginTop = top;\n                maxHeight = Math.max(maxHeight, c.height || 0);\n            });\n            el.height = maxHeight + top + bottom;\n        }\n    };\n}\n//# sourceMappingURL=withPadding.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n/* global SpeechSynthesisErrorEvent */\nfunction flattenStrings(series = []) {\n    const flattenedSeries = [];\n    let i;\n    for (i = 0; i < series.length; i++) {\n        const s = series[i];\n        if (typeof s === 'string' && !s.includes('PAUSE-')) {\n            flattenedSeries.push(series[i]);\n        }\n        else {\n            break;\n        }\n    }\n    // add a \"word boundary\" to ensure the Announcer doesn't automatically try to\n    // interpret strings that look like dates but are not actually dates\n    // for example, if \"Rising Sun\" and \"1993\" are meant to be two separate lines,\n    // when read together, \"Sun 1993\" is interpretted as \"Sunday 1993\"\n    return [flattenedSeries.join(',\\b ')].concat(series.slice(i));\n}\nfunction delay(pause) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, pause);\n    });\n}\n/**\n * Speak a string\n *\n * @param phrase Phrase to speak\n * @param utterances An array which the new SpeechSynthesisUtterance instance representing this utterance will be appended\n * @param lang Language to speak in\n * @return {Promise<void>} Promise resolved when the utterance has finished speaking, and rejected if there's an error\n */\nfunction speak(phrase, utterances, lang = 'en-US') {\n    const synth = window.speechSynthesis;\n    return new Promise((resolve, reject) => {\n        const utterance = new SpeechSynthesisUtterance(phrase);\n        utterance.lang = lang;\n        utterance.onend = () => {\n            resolve();\n        };\n        utterance.onerror = (e) => {\n            reject(e);\n        };\n        utterances.push(utterance);\n        synth.speak(utterance);\n    });\n}\nfunction speakSeries(series, lang, root = true) {\n    const synth = window.speechSynthesis;\n    const remainingPhrases = flattenStrings(Array.isArray(series) ? series : [series]);\n    const nestedSeriesResults = [];\n    /*\n      We hold this array of SpeechSynthesisUtterances in order to prevent them from being\n      garbage collected prematurely on STB hardware which can cause the 'onend' events of\n      utterances to not fire consistently.\n    */\n    const utterances = [];\n    let active = true;\n    const seriesChain = (async () => {\n        try {\n            while (active && remainingPhrases.length) {\n                const phrase = await Promise.resolve(remainingPhrases.shift());\n                if (!active) {\n                    // Exit\n                    // Need to check this after the await in case it was cancelled in between\n                    break;\n                }\n                else if (typeof phrase === 'string' && phrase.includes('PAUSE-')) {\n                    // Pause it\n                    let pause = Number(phrase.split('PAUSE-')[1]) * 1000;\n                    if (isNaN(pause)) {\n                        pause = 0;\n                    }\n                    await delay(pause);\n                }\n                else if (typeof phrase === 'string' && phrase.length) {\n                    // Speak it\n                    const totalRetries = 3;\n                    let retriesLeft = totalRetries;\n                    while (active && retriesLeft > 0) {\n                        try {\n                            await speak(phrase, utterances, lang);\n                            retriesLeft = 0;\n                        }\n                        catch (e) {\n                            // eslint-disable-next-line no-undef\n                            if (e instanceof SpeechSynthesisErrorEvent) {\n                                if (e.error === 'network') {\n                                    retriesLeft--;\n                                    console.warn(`Speech synthesis network error. Retries left: ${retriesLeft}`);\n                                    await delay(500 * (totalRetries - retriesLeft));\n                                }\n                                else if (e.error === 'canceled' ||\n                                    e.error === 'interrupted') {\n                                    // Cancel or interrupt error (ignore)\n                                    retriesLeft = 0;\n                                }\n                                else {\n                                    throw new Error(`SpeechSynthesisErrorEvent: ${e.error}`);\n                                }\n                            }\n                            else {\n                                throw e;\n                            }\n                        }\n                    }\n                }\n                else if (typeof phrase === 'function') {\n                    const seriesResult = speakSeries(phrase(), lang, false);\n                    nestedSeriesResults.push(seriesResult);\n                    await seriesResult.series;\n                }\n                else if (Array.isArray(phrase)) {\n                    // Speak it (recursively)\n                    const seriesResult = speakSeries(phrase, lang, false);\n                    nestedSeriesResults.push(seriesResult);\n                    await seriesResult.series;\n                }\n            }\n        }\n        finally {\n            active = false;\n        }\n    })();\n    return {\n        series: seriesChain,\n        get active() {\n            return active;\n        },\n        append: (toSpeak) => {\n            remainingPhrases.push(toSpeak);\n        },\n        cancel: () => {\n            if (!active) {\n                return;\n            }\n            if (root) {\n                synth.cancel();\n            }\n            nestedSeriesResults.forEach((nestedSeriesResults) => {\n                nestedSeriesResults.cancel();\n            });\n            active = false;\n        },\n    };\n}\nlet currentSeries;\nexport default function (toSpeak, lang = 'en-US') {\n    currentSeries && currentSeries.cancel();\n    currentSeries = speakSeries(toSpeak, lang);\n    return currentSeries;\n}\n//# sourceMappingURL=speech.js.map","import { getOwner, onCleanup, createSignal, getListener } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/index.ts\nvar debounce = (callback, wait) => {\n  if (isServer) {\n    return Object.assign(() => void 0, { clear: () => void 0 });\n  }\n  let timeoutId;\n  const clear = () => clearTimeout(timeoutId);\n  if (getOwner())\n    onCleanup(clear);\n  const debounced = (...args) => {\n    if (timeoutId !== void 0)\n      clear();\n    timeoutId = setTimeout(() => callback(...args), wait);\n  };\n  return Object.assign(debounced, { clear });\n};\nvar throttle = (callback, wait) => {\n  if (isServer) {\n    return Object.assign(() => void 0, { clear: () => void 0 });\n  }\n  let isThrottled = false, timeoutId, lastArgs;\n  const throttled = (...args) => {\n    lastArgs = args;\n    if (isThrottled)\n      return;\n    isThrottled = true;\n    timeoutId = setTimeout(() => {\n      callback(...lastArgs);\n      isThrottled = false;\n    }, wait);\n  };\n  const clear = () => {\n    clearTimeout(timeoutId);\n    isThrottled = false;\n  };\n  if (getOwner())\n    onCleanup(clear);\n  return Object.assign(throttled, { clear });\n};\nvar scheduleIdle = isServer ? () => Object.assign(() => void 0, { clear: () => void 0 }) : (\n  // requestIdleCallback is not supported in Safari\n  window.requestIdleCallback ? (callback, maxWait) => {\n    let isDeferred = false, id, lastArgs;\n    const deferred = (...args) => {\n      lastArgs = args;\n      if (isDeferred)\n        return;\n      isDeferred = true;\n      id = requestIdleCallback(\n        () => {\n          callback(...lastArgs);\n          isDeferred = false;\n        },\n        { timeout: maxWait }\n      );\n    };\n    const clear = () => {\n      cancelIdleCallback(id);\n      isDeferred = false;\n    };\n    if (getOwner())\n      onCleanup(clear);\n    return Object.assign(deferred, { clear });\n  } : (\n    // fallback to setTimeout (throttle)\n    (callback) => throttle(callback)\n  )\n);\nfunction leading(schedule, callback, wait) {\n  if (isServer) {\n    let called = false;\n    const scheduled2 = (...args) => {\n      if (called)\n        return;\n      called = true;\n      callback(...args);\n    };\n    return Object.assign(scheduled2, { clear: () => void 0 });\n  }\n  let isScheduled = false;\n  const scheduled = schedule(() => isScheduled = false, wait);\n  const func = (...args) => {\n    if (!isScheduled)\n      callback(...args);\n    isScheduled = true;\n    scheduled();\n  };\n  const clear = () => {\n    isScheduled = false;\n    scheduled.clear();\n  };\n  if (getOwner())\n    onCleanup(clear);\n  return Object.assign(func, { clear });\n}\nfunction leadingAndTrailing(schedule, callback, wait) {\n  if (isServer) {\n    let called = false;\n    const scheduled2 = (...args) => {\n      if (called)\n        return;\n      called = true;\n      callback(...args);\n    };\n    return Object.assign(scheduled2, { clear: () => void 0 });\n  }\n  let State;\n  ((State2) => {\n    State2[State2[\"Ready\"] = 0] = \"Ready\";\n    State2[State2[\"Leading\"] = 1] = \"Leading\";\n    State2[State2[\"Trailing\"] = 2] = \"Trailing\";\n  })(State || (State = {}));\n  let state = 0 /* Ready */;\n  const scheduled = schedule((args) => {\n    state === 2 /* Trailing */ && callback(...args);\n    state = 0 /* Ready */;\n  }, wait);\n  const fn = (...args) => {\n    if (state !== 2 /* Trailing */) {\n      if (state === 0 /* Ready */)\n        callback(...args);\n      state += 1;\n    }\n    scheduled(args);\n  };\n  const clear = () => {\n    state = 0 /* Ready */;\n    scheduled.clear();\n  };\n  if (getOwner())\n    onCleanup(clear);\n  return Object.assign(fn, { clear });\n}\nfunction createScheduled(schedule) {\n  let listeners = 0;\n  let isDirty = false;\n  const [track, dirty] = createSignal(void 0, { equals: false });\n  const call = schedule(() => {\n    isDirty = true;\n    dirty();\n  });\n  return () => {\n    if (!isDirty)\n      call(), track();\n    if (isDirty) {\n      isDirty = !!listeners;\n      return true;\n    }\n    if (getListener()) {\n      listeners++;\n      onCleanup(() => listeners--);\n    }\n    return false;\n  };\n}\n\nexport { createScheduled, debounce, leading, leadingAndTrailing, scheduleIdle, throttle };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { untrack } from 'solid-js';\nimport SpeechEngine, {} from './speech.js';\nimport { debounce } from '@solid-primitives/scheduled';\nimport { focusPath } from '../useFocusManager.js';\nlet resetFocusPathTimer;\nlet prevFocusPath = [];\nlet currentlySpeaking;\nlet voiceOutDisabled = false;\nconst fiveMinutes = 300000;\nfunction debounceWithFlush(callback, time) {\n    const trigger = debounce(callback, time);\n    let scopedValue;\n    const debounced = (newValue) => {\n        scopedValue = newValue;\n        trigger(newValue);\n    };\n    debounced.flush = () => {\n        trigger.clear();\n        callback(scopedValue);\n    };\n    debounced.clear = trigger.clear;\n    return debounced;\n}\nfunction getElmName(elm) {\n    return elm.id || elm.name;\n}\nfunction onFocusChangeCore(focusPath = []) {\n    if (!Announcer.onFocusChange || !Announcer.enabled) {\n        return;\n    }\n    const loaded = focusPath.every((elm) => !elm.loading);\n    const focusDiff = focusPath.filter((elm) => !prevFocusPath.includes(elm));\n    resetFocusPathTimer();\n    if (!loaded && Announcer.onFocusChange) {\n        Announcer.onFocusChange([]);\n        return;\n    }\n    prevFocusPath = focusPath.slice(0);\n    const toAnnounceText = [];\n    const toAnnounce = focusDiff.reduce((acc, elm) => {\n        if (elm.announce) {\n            acc.push([getElmName(elm), 'Announce', elm.announce]);\n            toAnnounceText.push(elm.announce);\n        }\n        else if (elm.title) {\n            acc.push([getElmName(elm), 'Title', elm.title]);\n            toAnnounceText.push(elm.title);\n        }\n        else {\n            acc.push([getElmName(elm), 'No Announce', '']);\n        }\n        return acc;\n    }, []);\n    focusDiff.reverse().reduce((acc, elm) => {\n        if (elm.announceContext) {\n            acc.push([getElmName(elm), 'Context', elm.announceContext]);\n            toAnnounceText.push(elm.announceContext);\n        }\n        else {\n            acc.push([getElmName(elm), 'No Context', '']);\n        }\n        return acc;\n    }, toAnnounce);\n    if (Announcer.debug) {\n        console.table(toAnnounce);\n    }\n    if (toAnnounceText.length) {\n        return Announcer.speak(toAnnounceText.reduce((acc, val) => acc.concat(val), []));\n    }\n}\nfunction textToSpeech(toSpeak) {\n    if (voiceOutDisabled) {\n        return;\n    }\n    return (currentlySpeaking = SpeechEngine(toSpeak));\n}\nexport const Announcer = {\n    debug: false,\n    enabled: true,\n    cancel: function () {\n        currentlySpeaking && currentlySpeaking.cancel();\n    },\n    clearPrevFocus: function (depth = 0) {\n        prevFocusPath = prevFocusPath.slice(0, depth);\n        resetFocusPathTimer();\n    },\n    speak: function (text, { append = false, notification = false } = {}) {\n        if (Announcer.onFocusChange && Announcer.enabled) {\n            Announcer.onFocusChange.flush();\n            if (append && currentlySpeaking && currentlySpeaking.active) {\n                currentlySpeaking.append(text);\n            }\n            else {\n                Announcer.cancel();\n                textToSpeech(text);\n            }\n            if (notification) {\n                voiceOutDisabled = true;\n                currentlySpeaking?.series\n                    .finally(() => {\n                    voiceOutDisabled = false;\n                    Announcer.refresh();\n                })\n                    .catch(console.error);\n            }\n        }\n        return currentlySpeaking;\n    },\n    refresh: function (depth = 0) {\n        Announcer.clearPrevFocus(depth);\n        Announcer.onFocusChange &&\n            Announcer.onFocusChange(untrack(() => focusPath()));\n    },\n    setupTimers: function ({ focusDebounce = 400, focusChangeTimeout = fiveMinutes, } = {}) {\n        Announcer.onFocusChange = debounceWithFlush(onFocusChangeCore, focusDebounce);\n        resetFocusPathTimer = debounceWithFlush(() => {\n            // Reset focus path for full announce\n            prevFocusPath = [];\n        }, focusChangeTimeout);\n    },\n};\n//# sourceMappingURL=announcer.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createEffect, on } from 'solid-js';\nimport { Announcer } from './announcer.js';\nimport { focusPath } from '../useFocusManager.js';\nexport const useAnnouncer = () => {\n    Announcer.setupTimers();\n    createEffect(on(focusPath, Announcer.onFocusChange, { defer: true }));\n    return Announcer;\n};\n//# sourceMappingURL=index.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ElementNode, setActiveElement } from '@lightningjs/solid';\nimport { assertTruthy } from './utils.js';\nexport function handleNavigation(direction) {\n    return function () {\n        const numChildren = this.children.length;\n        const wrap = this.wrap;\n        const lastSelected = this.selected;\n        if (direction === 'right' || direction === 'down') {\n            do {\n                this.selected = ((this.selected || 0) % numChildren) + 1;\n                if (this.selected >= numChildren) {\n                    if (!wrap) {\n                        this.selected = null;\n                        break;\n                    }\n                    this.selected = 0;\n                }\n            } while (this.children[this.selected]?.skipFocus);\n        }\n        else if (direction === 'left' || direction === 'up') {\n            do {\n                this.selected = ((this.selected || 0) % numChildren) - 1;\n                if (this.selected < 0) {\n                    if (!wrap) {\n                        this.selected = null;\n                        break;\n                    }\n                    this.selected = numChildren - 1;\n                }\n            } while (this.children[this.selected]?.skipFocus);\n        }\n        if (this.selected === null) {\n            this.selected = lastSelected;\n            return false;\n        }\n        const active = this.children[this.selected];\n        assertTruthy(active instanceof ElementNode);\n        this.onSelectedChanged &&\n            this.onSelectedChanged.call(this, this, active, this.selected, lastSelected);\n        if (this.plinko && lastSelected !== null) {\n            // Set the next item to have the same selected index\n            // so we move up / down directly\n            const lastSelectedChild = this.children[lastSelected];\n            assertTruthy(lastSelectedChild instanceof ElementNode);\n            const num = lastSelectedChild.selected;\n            active.selected = num;\n        }\n        setActiveElement(active);\n        return true;\n    };\n}\n//# sourceMappingURL=navigation.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { handleNavigation } from \"./navigation.js\";\nimport { ElementNode } from '@lightningjs/solid';\nexport function Row(props) {\n    const left = handleNavigation('left');\n    const right = handleNavigation('right');\n    const defaultStyle = {\n        display: 'flex',\n        justifyContent: 'flexStart',\n    };\n    return <node onLeft={left} onRight={right} selected={props.selected || 0} onFocus={props.onFocus || (elm => {\n            if (!elm || elm.selected === null)\n                return;\n            let child = elm.children[elm.selected];\n            while (child?.skipFocus) {\n                elm.selected++;\n                child = elm.children[elm.selected];\n            }\n            if (!(child instanceof ElementNode))\n                return;\n            child.setFocus();\n        })} style={props.style || defaultStyle} {...props}>{props.children}</node>;\n}\n//# sourceMappingURL=Row.jsx.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ElementNode } from \"@lightningjs/solid\";\nimport { handleNavigation } from \"./navigation.js\";\nexport function Column(props) {\n    const up = handleNavigation('up');\n    const down = handleNavigation('down');\n    const defaultStyle = {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'flexStart',\n    };\n    return <node onUp={up} onDown={down} onFocus={props.onFocus || (elm => {\n            if (!elm || elm.selected === null)\n                return;\n            let child = elm.children[elm.selected];\n            while (child?.skipFocus) {\n                elm.selected++;\n                child = elm.children[elm.selected];\n            }\n            if (!(child instanceof ElementNode))\n                return;\n            child.setFocus();\n        })} selected={props.selected || 0} style={props.style || defaultStyle} {...props}>{props.children}</node>;\n}\n//# sourceMappingURL=Column.jsx.map","import { createSignal } from \"solid-js\";\r\nexport const [globalBackground, setGlobalBackground] = createSignal<string>('');\r\nexport const [focusMenu, setFocusMenu] = createSignal<boolean>(false);\r\nexport const [openMenuBG, setOpenMenuBG] = createSignal<boolean>(false);\r\nexport const [homeBackgroundState, setHomeBackgroundState] = createSignal<string>('');\r\nexport const [movieDetailState, setMovieDetailState] = createSignal<any>(null);\r\nexport const [language, setLanguage] = createSignal<string>('en');\r\nexport const [openNotify, setOpenNotify] = createSignal<boolean>(false);\r\nexport const [tiviBackgroundState, setTiviBackgroundState] = createSignal<string>('');\r\n","import { type AnimationSettings } from \"@lightningjs/renderer\";\r\nimport { globalBackground } from \"../state.js\";\r\nimport { type IntrinsicNodeStyleProps, View, hexColor } from \"@lightningjs/solid\";\r\nimport { createEffect, on } from \"solid-js\";\r\nimport theme from 'theme';\r\n\r\nexport default function Background() {\r\n  let bg1, bg2;\r\n  let active = 0;\r\n  const alpha = 1;\r\n  const bgStyles = { alpha, color: 0xffffffff } satisfies IntrinsicNodeStyleProps;\r\n  const animationSettings = { duration: 1000, easing: 'ease-in-out' } satisfies Partial<AnimationSettings>;\r\n\r\n  createEffect(on(globalBackground, (img: string) => {\r\n    if (img.startsWith('#')) {\r\n      bg1.color = img;\r\n      bg1.src = '';\r\n      bg1.alpha = 1;\r\n      active = 1;\r\n      bg2.alpha = 0;\r\n      return;\r\n    } else {\r\n      bg1.color = 0xffffffff;\r\n    }\r\n\r\n    if (active === 0) {\r\n      bg1.src = img;\r\n      active = 1;\r\n      return;\r\n    }\r\n\r\n    if (active === 1) {\r\n      bg2.src = img;\r\n      active = 2;\r\n      // array animation works\r\n      bg2.alpha = [alpha];\r\n      bg1.alpha = [0];\r\n      return;\r\n    }\r\n\r\n    if (active === 2) {\r\n      bg1.src = img;\r\n      active = 1;\r\n      // or use the animate property\r\n      bg1.alpha = alpha;\r\n      bg2.alpha = 0;\r\n    }\r\n  }, { defer: true}))\r\n\r\n  return (<>\r\n  <View width={1920} height={1080} zIndex={-5}>\r\n    <View ref={bg1} animate animationSettings={animationSettings} style={bgStyles} />\r\n    <View ref={bg2} animate animationSettings={animationSettings} style={bgStyles} alpha={0} />\r\n    <View\r\n      effects={{\r\n        radialGradient: {\r\n          colors: [hexColor(\"#3b3b3b\"), hexColor(\"#272727\"), hexColor(\"#181818\")],\r\n          stops: [0, 0.3, 0.8],\r\n          height: 800,\r\n          width: 1920,\r\n          pivot: [0.8, 0], \r\n        },\r\n      }}\r\n    />\r\n    </View>\r\n  </>);\r\n}\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport const menuContainerStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  justifyContent: 'flexStart',\r\n  gap: 8,\r\n  width: 120,\r\n  x: -2,\r\n  zIndex: 999,\r\n  alpha: 1,\r\n  y: 0,\r\n  color: hexColor('#000000'),\r\n  height: theme.layout.screenH,\r\n  // borderRight: { width: 2, color: hexColor('#2f2f2f') },\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const menuMainStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  gap: 80,\r\n  x: 35,\r\n  marginTop: 200\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const menuIconStyle = {\r\n  width: 50,\r\n  height: 50,\r\n  x: 0,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const menuLineStyle = {\r\n  width: 50,\r\n  height: 0,\r\n  x: 0,\r\n  y: 58,\r\n  focus: {\r\n    height: 6,\r\n    color: hexColor('#ffffff'),\r\n  },\r\n  active: {\r\n    height: 6,\r\n    color: hexColor('#ff0000'),\r\n  },\r\n} satisfies IntrinsicNodeStyleProps;","import { IntrinsicNodeStyleProps, deg2rad, hexColor } from \"@lightningjs/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n  Column: {\r\n    ...(theme.flexColumn as IntrinsicNodeStyleProps),\r\n    width: 320,\r\n    height: 600,\r\n    y: 220,\r\n    gap: 60,\r\n    zIndex: 101,\r\n    colors: hexColor(theme.color.primary),\r\n    x: [\r\n      20,\r\n      {\r\n        duration: 250,\r\n        easing: \"ease-in-out\",\r\n      },\r\n    ] as any, \r\n  } satisfies IntrinsicNodeStyleProps,\r\n  menuLineStyle: {\r\n    width: 50,\r\n    height: 0,\r\n    x: 0,\r\n    y: 58,\r\n    selected: {\r\n      height: 6,\r\n      color: hexColor('#ff0000'),\r\n    }\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  MenuWrapper: {\r\n    zIndex: 1000,\r\n    // angle: deg2rad(270),\r\n    // stops: [0, 0.4, 0.8],\r\n    width: 100,\r\n    height: window.devicePixelRatio > 1 ? 1080 : window.innerHeight,\r\n    color: hexColor(theme.color.primary),\r\n    active: {\r\n      width: [\r\n        380,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n          alpha: 1,\r\n        },\r\n      ] as any,\r\n    },\r\n    unactive: {\r\n      width: [\r\n        100,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ] as any,\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  MenuText: {\r\n    zIndex: 1,\r\n    fontSize: 30,\r\n    x: 86,\r\n    y: 10,\r\n    height: 50,\r\n    alpha: 0,\r\n    color: hexColor(\"#5b5b5b\"),\r\n    scale: 1,\r\n    lineHeight: 1,\r\n    focus: {\r\n      scale: [\r\n        1.1,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ],\r\n      color: hexColor(\"#ffffff\"),\r\n    },\r\n    active: {\r\n      alpha: [\r\n        1,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n    unactive: {\r\n      alpha: [\r\n        0,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","export const menuItems = [\r\n    {\r\n        name: 'Home', path: \"/\", icon: 'assets/icon-home.png'\r\n    },\r\n    {\r\n        name: 'Search', path: \"/search\", icon: 'assets/icon-search.png'\r\n    },\r\n    {\r\n        name: 'TV', path: \"/tv\", icon: 'assets/icon-tivi.png'\r\n    },\r\n    // {\r\n    //     name: 'Setting', path: \"/setting\", icon: 'assets/setting.png'\r\n    // }\r\n    // {\r\n    //     name: 'List column', path: \"/videos\", icon: 'assets/icon-video.png'\r\n    // },\r\n    // {\r\n    //     name: 'List Slider', path: \"/list\", icon: 'assets/icon-list.png'\r\n    // },\r\n    {\r\n        name: 'Notifications', path: \"/no-path\", icon: 'assets/icon-bell.png'\r\n    },\r\n]","import { useLocation, useNavigate } from \"@solidjs/router\";\r\nimport { View, Text, ElementNode } from \"@lightningjs/solid\";\r\nimport { menuIconStyle } from \"../../../assets/styles/menuStyle\";\r\nimport { Column } from \"@lightningjs/solid-primitives\";\r\nimport styles from \"./Menu.styles\";\r\nimport { menuItems } from \"./constant\";\r\nimport { createEffect, createSignal, on, onMount } from \"solid-js\";\r\nimport { setOpenMenuBG, setOpenNotify } from \"../../state\";\r\n\r\nconst basePath = import.meta.env.BASE_URL;\r\nexport default function Menu(props) {\r\n  let backdrop, menuWrapperRef;\r\n  const navigate = useNavigate();\r\n  const location :any = useLocation();\r\n\r\n  function onFocus(this: ElementNode) {\r\n    this.states!.add(\"active\");\r\n    this.children.forEach((c :any) => {\r\n      c.states!.add(\"active\");\r\n    });\r\n    this.children.selected!.setFocus();\r\n    menuWrapperRef.states!.add(\"active\");\r\n    menuWrapperRef.states!.remove(\"unactive\");\r\n  }\r\n\r\n  function onBlur(this: ElementNode) {\r\n    this.states!.add(\"unactive\");\r\n    menuWrapperRef.states!.add(\"unactive\");\r\n    menuWrapperRef.states!.remove(\"active\");\r\n    this.children.forEach((c) => c.states!.remove(\"active\"));\r\n    this.children.forEach((c) => c.states!.add(\"unactive\"));\r\n  }\r\n\r\n  function handleOnEnter(menuItem) {\r\n    if (menuItem.path === \"/no-path\") {\r\n      // TODO\r\n      setOpenNotify(true);\r\n    } else {\r\n      navigate(`${menuItem.path}`);\r\n    }\r\n  }  \r\n\r\n  return (\r\n    <View style={styles.MenuWrapper} ref={menuWrapperRef}>\r\n      <Column\r\n        {...props}\r\n        onFocus={onFocus}\r\n        onBlur={onBlur}\r\n        style={styles.Column}\r\n        animate\r\n        plinko\r\n      >\r\n        {(menuItems || []).map((menuItem) => (\r\n          <View\r\n            src={basePath + `${menuItem.icon}`}\r\n            style={menuIconStyle}\r\n            forwardStates\r\n            onEnter={() => handleOnEnter(menuItem)}\r\n            animate\r\n            id={menuItem.path}\r\n            states={location.pathname == menuItem.path ? [\"selected\"] : [\"\"]}\r\n          >\r\n            <View style={styles.menuLineStyle}/>\r\n            <Text\r\n              style={styles.MenuText}\r\n            >\r\n              {menuItem.name}\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </Column>\r\n      <View ref={backdrop}></View>\r\n    </View>\r\n  );\r\n}\r\n","import { IntrinsicNodeStyleProps, deg2rad, hexColor, IntrinsicTextNodeStyleProps } from \"@lightningjs/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n  Column: {\r\n    ...(theme.flexColumn as IntrinsicNodeStyleProps),\r\n    width: 320,\r\n    height: 600,\r\n    y: 80,\r\n    gap: 60,\r\n    zIndex: 1,\r\n    colors: hexColor(theme.color.primary),\r\n    x: [\r\n      20,\r\n      {\r\n        duration: 250,\r\n        easing: \"ease-in-out\",\r\n      },\r\n    ] as any, \r\n  } satisfies IntrinsicNodeStyleProps,\r\n  NoticeWrapper: {\r\n    alpha: 0,\r\n    width: 380,\r\n    height: 50,\r\n    top: 0,\r\n    zIndex: 3000,\r\n    color: hexColor('#191919'),\r\n    active: {\r\n      alpha: 1,\r\n    }\r\n  },\r\n  MenuWrapper: {\r\n    zIndex: 1000,\r\n    angle: deg2rad(270),\r\n    stops: [0, 0.4, 0.8],\r\n    width: 0,\r\n    height: 1080,\r\n    color: hexColor('#191919'),\r\n    active: {\r\n      width: [\r\n        380,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n          alpha: 1,\r\n        },\r\n      ] as any,\r\n    },\r\n    unactive: {\r\n      width: [\r\n        0,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ] as any,\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  NotifyImage: {\r\n    zIndex: 10,\r\n    x: 0,\r\n    y: 0,\r\n    width: 100,\r\n    height: 90,\r\n    alpha: 0,\r\n    scale: 1,\r\n    active: {\r\n      alpha: [\r\n        1,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n    unactive: {\r\n      alpha: [\r\n        0,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  MenuText: {\r\n    zIndex: 1,\r\n    fontSize: 28,\r\n    x: 110,\r\n    y: 10,\r\n    height: 50,\r\n    alpha: 0,\r\n    width: 268,\r\n    contain: 'both',\r\n    color: hexColor(\"#5b5b5b\"),\r\n    scale: 1,\r\n    focus: {\r\n      color: hexColor(\"#ffffff\"),\r\n    },\r\n    active: {\r\n      alpha: [\r\n        1,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n    unactive: {\r\n      alpha: [\r\n        0,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n  },\r\n  NoticeDesc: {\r\n    zIndex: 1,\r\n    fontSize: 26,\r\n    x: 110,\r\n    y: 50,\r\n    height: 50,\r\n    width: 268,\r\n    contain: 'both',\r\n    alpha: 0,\r\n    color: hexColor(\"#5b5b5b\"),\r\n    scale: 1,\r\n    active: {\r\n      alpha: [\r\n        1,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n    unactive: {\r\n      alpha: [\r\n        0,\r\n        {\r\n          duration: 250,\r\n          easing: 'ease-in-out',\r\n        },\r\n      ]\r\n    },\r\n  },\r\n};\r\n","import {\r\n  View,\r\n  Text,\r\n  ElementNode,\r\n  hexColor,\r\n} from \"@lightningjs/solid\";\r\nimport {\r\n  menuIconStyle,\r\n} from \"../../../../assets/styles/menuStyle\";\r\nimport { Column, Row } from \"@lightningjs/solid-primitives\";\r\nimport styles from \"./../Notice.styles\";\r\nimport { For, Show, createEffect, createSignal, on } from 'solid-js';\r\nimport { setOpenNotify } from \"../../../state\";\r\nimport theme from 'theme';\r\nconst basePath = import.meta.env.BASE_URL;\r\n\r\nexport default function NoticeItem(props) {\r\n  let backdrop, menuWrapperRef;\r\n  const [columnY, setcolumnY] = createSignal(60);\r\n  \r\n  function onFocus(this: ElementNode) {\r\n    this.states!.add(\"active\");\r\n    this.children.forEach((c: any) => {\r\n      c.states!.add(\"active\");\r\n    });\r\n    this.children.selected!.setFocus();\r\n    menuWrapperRef.children.forEach((c) => c.states!.add(\"active\"));\r\n    menuWrapperRef.states!.add(\"active\");\r\n    menuWrapperRef.states!.remove(\"unactive\");\r\n  }\r\n\r\n  function onBlur(this: ElementNode) {\r\n    this.states!.add(\"unactive\");\r\n    menuWrapperRef.states!.add(\"unactive\");\r\n    menuWrapperRef.states!.remove(\"active\");\r\n    menuWrapperRef.children.forEach((c) => c.states!.remove(\"active\"));\r\n    this.children.forEach((c) => c.states!.remove(\"active\"));\r\n    this.children.forEach((c) => c.states!.add(\"unactive\"));\r\n    this.children.forEach((c) => c.states!.add(\"not-set\"));\r\n  }\r\n\r\n  function onLeft(this: ElementNode) {\r\n    setOpenNotify(false);\r\n    this.children.forEach((c) => c.states!.add(\"not-set\"));\r\n  }\r\n\r\n  function handleFocus(this: ElementNode) {\r\n    if ((this.y || 0) > theme.layout.screenH / 2) {\r\n      setcolumnY(80 + ((this.y || 0) - theme.layout.screenH / 2) * -1)\r\n      if (this.parent) {\r\n        this.parent.children.forEach((c: any) => {\r\n          if (!c.states.has(\"active\")) {\r\n            c.states!.add(\"active\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <View style={styles.MenuWrapper} ref={menuWrapperRef}>\r\n      <View style={styles.NoticeWrapper}>\r\n        <View src={basePath + `assets/icon-back.png`} y={5} width={40} height={40}></View>\r\n        <View display=\"flex\" justifyContent=\"center\" width={360}>\r\n          <Text fontSize={30} x={40} y={10}>Notifications {props.len}</Text>\r\n        </View>\r\n      </View>\r\n      <Column\r\n        {...props}\r\n        onFocus={onFocus}\r\n        onBlur={onBlur}\r\n        style={styles.Column}\r\n        y={columnY()}\r\n        onLeft={onLeft}\r\n        animate\r\n        plinko\r\n        key={props.len}\r\n      >\r\n        <For each={props?.items}>\r\n        {(item, i) => (\r\n          <View\r\n            style={menuIconStyle}\r\n            forwardStates\r\n            animate\r\n            onFocus={handleFocus}\r\n            id={item.path}\r\n          >\r\n            <View\r\n              src={item?.image || basePath + \"assets/default-thumbnail.jpg\"}\r\n              style={styles.NotifyImage}\r\n            ></View>\r\n            <Text style={styles.MenuText}>\r\n              {item.name}\r\n            </Text>\r\n            <Text style={styles.NoticeDesc}>\r\n              {item.desc}\r\n            </Text>\r\n          </View>\r\n        )}\r\n        </For>\r\n      </Column>\r\n      <View ref={backdrop}></View>\r\n    </View>\r\n  );\r\n}\r\n","import { createSignal, createComputed, batch, createResource } from \"solid-js\";\r\n\r\nexport function createInfiniteScroll(fetcher: (page: number) => Promise<any>) {\r\n  const [pages, setPages] = createSignal<any[]>([]);\r\n  const [page, setPage] = createSignal(1);\r\n  const [end, setEnd] = createSignal(false);\r\n\r\n  const [contents] = createResource(page, fetcher);\r\n  createComputed(() => {\r\n    const content = contents();\r\n    if (!content)\r\n      return;\r\n    batch(() => {\r\n      if (content.length === 0)\r\n        setEnd(true);\r\n        setPages((p) => [...p, ...content]);\r\n    });\r\n  });\r\n\r\n  return {\r\n      pages,\r\n      page,\r\n      setPage,\r\n      setPages,\r\n      end,\r\n      setEnd\r\n    };\r\n}\r\n","export const page1 = [\r\n  {\r\n    path: \"123A\",\r\n    name: \"Netflix Lookahead\",\r\n    desc: \"Explore what is coming soon\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n  {\r\n    path: \"123B\",\r\n    name: \"New Arrival\",\r\n    desc: \"See you on Venus\",\r\n  },\r\n];\r\n\r\nexport const page2 = [\r\n    {\r\n      path: \"123A\",\r\n      name: \"Netflix2\",\r\n      desc: \"Explore what is coming soon\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Netflix2\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Netflix2\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Netflix2\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Netflix2\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n    {\r\n      path: \"123B\",\r\n      name: \"New Arrival\",\r\n      desc: \"See you on Venus\",\r\n    },\r\n  ];\r\n  ","const VITE_API_KEY_V4=\"e9e9d8da18ae29fc430845952232787c\";\r\nconst VITE_REQUEST_TOKEN=\"596e02522af6fe40f284e6de58fd0865f2cbaae3\";\r\nconst API_BASE = 'https://api.themoviedb.org/3';\r\nlet tmdbConfig;\r\nlet baseImageUrl;\r\nconst basePosterSize = 'w185';\r\n\r\nconst defaultFetchParams = {\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    Authorization: 'Bearer ' + VITE_REQUEST_TOKEN,\r\n  },\r\n};\r\n\r\nexport function getImageUrl(path: string, posterSize: string = basePosterSize) {\r\n  return baseImageUrl + posterSize + path;\r\n}\r\n\r\nfunction get(path: string, params: RequestInit = {}) {\r\n  if (tmdbConfig) {\r\n    return _get(path, params);\r\n  } else {\r\n    return loadConfig().then(() => _get(path, params))\r\n  }\r\n}\r\n\r\nfunction _get(path: string, params: RequestInit = {}) {\r\n  return fetch(API_BASE + path + (path.includes('?') ? '&' : '?') + 'api_key=' + VITE_API_KEY_V4, {\r\n    ...defaultFetchParams,\r\n    ...params,\r\n  }).then((r) => r.json());\r\n}\r\n\r\nfunction loadConfig() {\r\n  return _get('/configuration').then((data) => {\r\n    tmdbConfig = data;\r\n    baseImageUrl = data.images?.secure_base_url;\r\n    return data;\r\n  });\r\n}\r\n\r\nexport default {\r\n  get,\r\n  loadConfig,\r\n};\r\n","import { getImageUrl } from '../index';\r\n\r\nfunction truncateString(str: string, maxLength: number): string {\r\n  if (str.length > maxLength) {\r\n    return str.substring(0, maxLength - 3) + '...';\r\n  }\r\n  return str;\r\n}\r\n\r\nexport function chunkArray(array: string[], size = 7) {\r\n  let result: string[][] = [];\r\n  for (let i = 0, j = array.length; i < j; i += size) {\r\n    result.push(array.slice(i, i + size));\r\n  }\r\n  return result;\r\n}\r\n\r\nexport interface Tile {\r\n  src: string;\r\n  tileSrc: string;\r\n  backdrop: string;\r\n  href: string;\r\n  shortTitle: string;\r\n  title: string;\r\n  data: unknown;\r\n  entityInfo: {\r\n      type: string;\r\n      id: string;\r\n  };\r\n  heroContent: {\r\n      title: string;\r\n      description: string;\r\n  };\r\n}\r\n\r\n// TODO: Remove `any` type\r\nexport function convertItemsToTiles(items: any[] = []): Tile[] {\r\n  return items.map((item) => ({\r\n      src: getImageUrl(item.poster_path || item.profile_path),\r\n      tileSrc: getImageUrl(item.backdrop_path || item.profile_path, 'w300'),\r\n      backdrop: getImageUrl(item.backdrop_path, 'w1280'),\r\n      href: `/entity/${item.media_type || 'people'}/${item.id}`,\r\n      shortTitle: truncateString(item.title || item.name, 30),\r\n      title: item.title || item.name,\r\n      data: item,\r\n      entityInfo: {\r\n        type: item.media_type || 'people',\r\n        id: item.id\r\n      },\r\n      heroContent: {\r\n        title: item.title || item.name,\r\n        description: item.overview\r\n      }\r\n  }));\r\n}\r\n","import { createEffect, createMemo, on } from \"solid-js\";\r\nimport NoticeItem from \"./Item\"\r\nimport { createInfiniteScroll } from \"../pagination\";\r\nimport { page1, page2 } from \"./mock.js\";\r\nimport { chunkArray } from \"../../api/formatters/ItemFormatter\";\r\nimport { View, Text } from \"@lightningjs/solid\";\r\n\r\nexport default function Notice(props) {\r\n\r\n  function fakeAPi(page) {\r\n    return new Promise(resolve => {\r\n        setTimeout(() => {\r\n            let fakeData;\r\n            if (page === 1) {\r\n              fakeData = {\r\n                page: 1,\r\n                results: page1,\r\n                total_pages: 2,\r\n                total_results: 40\r\n              }\r\n            } else {\r\n              fakeData = {\r\n                page: 2,\r\n                results: page2,\r\n                total_pages: 2,\r\n                total_results: 40\r\n              }\r\n            }\r\n            resolve(fakeData);\r\n        }, 0);\r\n    });\r\n  }\r\n\r\n  function mockData(size?: number) {\r\n    return (pageIndex: number): Promise<any> => {\r\n\r\n      const sizePage = size ? size : 20;\r\n      let result = fakeAPi(pageIndex).then((item: any) => {\r\n        let results = item.results;\r\n        let chunks = chunkArray(results, sizePage);\r\n        return chunks;\r\n      });\r\n  \r\n      return result;\r\n    }\r\n  }\r\n\r\n  const provider = createMemo(() => {\r\n    return createInfiniteScroll(mockData());\r\n  });\r\n\r\n  function moveChange(item) {\r\n    if([].concat.apply([], provider().pages()).length - item.selected < 4) {\r\n      provider().setPage(p => p + 1);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <NoticeItem {...props} items={[].concat.apply([], provider().pages())} onSelectedChanged={moveChange} />\r\n  );\r\n}\r\n","import { IntrinsicNodeStyleProps, IntrinsicTextNodeStyleProps, hexColor } from '@lightningjs/solid';\r\nimport theme from 'theme';\r\n\r\n// Augment existing intrinsic style prop interfaces to include our own\r\n// app-specific states\r\ndeclare module '@lightningjs/solid' {\r\n  interface IntrinsicNodeStyleProps {\r\n    // TODO: Refactor states to use a $ prefix\r\n    active?: IntrinsicNodeStyleProps;\r\n    disabled?: IntrinsicNodeStyleProps;\r\n  }\r\n\r\n  interface IntrinsicTextNodeStyleProps {\r\n    // TODO: Refactor states to use a $ prefix\r\n    active?: IntrinsicTextNodeStyleProps;\r\n    disabled?: IntrinsicTextNodeStyleProps;\r\n  }\r\n}\r\n\r\nexport default {\r\n  Page: {\r\n    width: window.innerWidth, height: window.innerHeight\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  pageWrapper: {\r\n    x: 99,\r\n    y: 0,\r\n    height: window.innerHeight,\r\n    width: window.innerWidth,\r\n  },\r\n  headlineText: {\r\n    width: 1200, height: 240,\r\n    x: 360,\r\n    // lineHeight: 170, // TODO: Add back when lineHeight is supported\r\n    y: 455, contain: 'both',\r\n    fontSize: 66,\r\n    textAlign: 'center'\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n  headlineSubText: {\r\n    width: 1920,\r\n    height: 170,\r\n    // lineHeight: 170, // TODO: Add back when lineHeight is supported\r\n    x: 530,\r\n    y: 655, contain: 'both',\r\n    fontSize: 48,\r\n    textAlign: 'center'\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n  itemsContainer: {\r\n    width: theme.layout.screenW,\r\n    height: 600,\r\n    y: 350,\r\n    x: 0,\r\n    zIndex: 2,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  FocusRing: {\r\n    borderRadius: 0,\r\n    width: 194, height: 286, y: -5, x: -5, zIndex: -1\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  showHeadline: { x: 70, y: 20 } satisfies IntrinsicNodeStyleProps,\r\n  headlineBlur: {\r\n    width: 1920,\r\n    height: 150,\r\n    x: 0,\r\n    y: 0,\r\n    zIndex: 14,\r\n    alpha: 0.9,\r\n    color: hexColor('#000000')\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  RowTitle: {\r\n    height: 60,\r\n    width: 400,\r\n    marginTop: 20,\r\n    fontSize: 36,\r\n    color: hexColor('#f0f0f0'),\r\n    zIndex: 2\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n  Row: {\r\n    display: 'flex',\r\n    justifyContent: 'spaceBetween',\r\n    height: 290,\r\n    gap: 10,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Column: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'flexStart',\r\n    gap: 10,\r\n    width: theme.layout.screenW - (2 * theme.layout.marginX),\r\n    x: theme.layout.marginX + theme.layout.gutterX,\r\n    y: 100,\r\n    zIndex: 2\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Rect: {\r\n    width: 250,\r\n    height: 100,\r\n    y: 10,\r\n    x: 300,\r\n    color: hexColor('#0000ff')\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  peopleBio: {\r\n    ...theme.typography.body1,\r\n    contain: 'both',\r\n    width: 1500,\r\n    height: 400\r\n  } satisfies IntrinsicTextNodeStyleProps,\r\n};\r\n\r\nconst Button = {\r\n  width: 120,\r\n  height: 40,\r\n  color: hexColor('#000000'),\r\n  borderRadius: 8,\r\n  border: { width: 2, color: hexColor('#3333ff') },\r\n  scale: 1,\r\n  focus: {\r\n    scale: 1.1,\r\n    border: { width: 5, color: hexColor('#333333') },\r\n  },\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nconst TopBar = {\r\n  color: hexColor('#00A699'),\r\n  height: 8,\r\n  y: 2,\r\n  x: -4,\r\n  width: Button.width + 8\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nconst ButtonText = {\r\n  fontSize: 12,\r\n  y: 12,\r\n  // lineHeight: Button.height, // TODO: Add back when lineHeight is supported\r\n  contain: 'width',\r\n  textAlign: 'center',\r\n  color: hexColor('#F6F6F9'),\r\n  height: Button.height,\r\n  width: Button.width\r\n} satisfies IntrinsicTextNodeStyleProps;\r\n\r\nexport const buttonStyles = {\r\n  container: Button,\r\n  topBar: TopBar,\r\n  text: ButtonText\r\n} satisfies Record<string, IntrinsicTextNodeStyleProps>;\r\n\r\n\r\nexport const MaterialButton = {\r\n  width: 386,\r\n  height: 136,\r\n  color: hexColor('#715cab'),\r\n  focus: {\r\n    color: hexColor('#5a39a2'),\r\n  },\r\n  disabled: {\r\n    color: hexColor('#291d43'),\r\n  }\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const Backdrop = {\r\n  color: hexColor('#000000'),\r\n  alpha: 0.85,\r\n  zIndex: 998,\r\n}\r\n\r\nexport const MaterialButtonText = {\r\n  fontSize: 32,\r\n  contain: 'width',\r\n  textAlign: 'center',\r\n  mountY: -0.35,\r\n  color: hexColor('#FFFFFF'),\r\n  height: MaterialButton.height,\r\n  width: MaterialButton.width,\r\n  focus: {\r\n    fontSize: 40\r\n  },\r\n  disabled: {\r\n    color: hexColor('#909090'),\r\n  }\r\n} satisfies IntrinsicTextNodeStyleProps;\r\n\r\nexport const Wraper = {\r\n  marginX: 320\r\n} satisfies IntrinsicNodeStyleProps;\r\n","import { useLocation, useNavigate } from \"@solidjs/router\";\r\nimport { View, activeElement } from \"@lightningjs/solid\";\r\nimport { useFocusManager, useAnnouncer } from \"@lightningjs/solid-primitives\";\r\nimport Background from \"../components/Background\";\r\nimport Menu from \"../components/Menu/Menu\";\r\nimport Notice from \"../components/Notice\"\r\nimport { Show, createEffect, createSignal, on, onMount } from \"solid-js\";\r\nimport styles from \"../styles\";\r\nimport { focusMenu, setFocusMenu, setOpenMenuBG, openNotify } from \"../state\";\r\n\r\nconst App = (props) => {\r\n  const announcer = useAnnouncer();\r\n  announcer.enabled = false;\r\n  const navigate = useNavigate();\r\n  const location: any = useLocation();\r\n  let navDrawer, lastFocused, notifyRef;\r\n  const [localtionActive, setLocaltionActive] = createSignal(location);\r\n  const [loaded, setLoaded] = createSignal(false);\r\n\r\n  onMount(async () => {\r\n    setLoaded(true);\r\n  });\r\n\r\n  useFocusManager({\r\n    Menu: \"m\",\r\n    Escape: \"Escape\",\r\n  });\r\n\r\n  onMount(() => {\r\n    setFocusMenu(true);\r\n  });\r\n\r\n  createEffect(() => {\r\n    setLocaltionActive(location.pathname);\r\n  });\r\n\r\n  createEffect(on(openNotify, (elm) => {\r\n    if (elm) {\r\n      return navDrawer.states.has(\"focus\") && notifyRef.setFocus()\r\n    } else {\r\n      navDrawer.setFocus();\r\n      setOpenMenuBG(true);\r\n    }\r\n  }, { defer: true}))\r\n\r\n  return (\r\n    <Show\r\n      when={loaded()}\r\n    >\r\n      <View\r\n        ref={window.APP}\r\n        onLast={() => history.back()}\r\n        onMenu={() => navigate(\"/\")}\r\n        style={{ width: 1920, height: 1080 }}\r\n        onLeft={() => {\r\n          if (\r\n            navDrawer.states.has(\"focus\") ||\r\n            (focusMenu() == false && (localtionActive() == \"/search\" || localtionActive().includes('/movie/')))\r\n          ) {\r\n            return false;\r\n          }\r\n          var tempActive = activeElement();\r\n          if (!tempActive?.states.has(\"not-set\")) {\r\n            lastFocused = tempActive;\r\n          }\r\n          navDrawer.setFocus();\r\n          setOpenMenuBG(true);\r\n        }}\r\n        onRight={() => {\r\n          setFocusMenu(false);\r\n          setOpenMenuBG(false);\r\n          return navDrawer.states.has(\"focus\") && lastFocused.setFocus()\r\n        }}\r\n        plinko\r\n      >\r\n        <Background />\r\n        <View style={styles.pageWrapper}>{props.children}</View>\r\n        <Menu ref={navDrawer} />\r\n        <Notice ref={notifyRef}/>\r\n      </View>\r\n    </Show>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","export default import.meta.ROLLUP_FILE_URL_5178690f;","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n  WrapperTitleStyles: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    gap: 4,\r\n    alignItems: \"flexEnd\",\r\n    height: 40\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  TitleStyles: {\r\n    color: hexColor(theme.color.white),\r\n    scale: 1,\r\n    fontSize: 30,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  IconStyles: {\r\n    width: 26,\r\n    height: 26,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { View, Text } from '@lightningjs/solid';\r\nimport styles from \"./Title.styles\";\r\nconst basePath = import.meta.env.BASE_URL;\r\n\r\nexport default function Title(props) {\r\n  return (\r\n    <View skipFocus forwardStates style={styles.WrapperTitleStyles}>\r\n      <Text style={{\r\n        ...styles.TitleStyles,\r\n        ...props.style\r\n      }}>{props.title}</Text>\r\n      {/* {\r\n        props.icon ? (\r\n          <View\r\n            style={styles.IconStyles}\r\n            src={basePath + `${props.icon}`}\r\n          ></View>\r\n        ) : (\r\n          <></>\r\n        )\r\n      } */}\r\n      \r\n    </View>\r\n  );\r\n}\r\n","import { IntrinsicNodeStyleProps } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport default {\r\n    HomeWrapper: {\r\n        x: 0,\r\n        y: 0,\r\n        width: window.devicePixelRatio > 1 ? 1920 : window.innerWidth,\r\n    } satisfies IntrinsicNodeStyleProps,\r\n    HomeMain: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: 'spaceBetween',\r\n        gap: 10,\r\n        width: window.devicePixelRatio > 1 ? 1920 : window.innerWidth,\r\n        height: 1200,\r\n        y: 520,\r\n        x: 20,\r\n        zIndex: 2,\r\n    } satisfies IntrinsicNodeStyleProps,\r\n    HomeList: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: 'spaceBetween',\r\n        gap: 10,\r\n        width: window.devicePixelRatio > 1 ? 1920 : window.innerWidth,\r\n        height: 1200,\r\n        y: 0,\r\n        x: 0,\r\n        zIndex: 2,\r\n    } satisfies IntrinsicNodeStyleProps,\r\n    HomeItem: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'spaceBetween',\r\n        height: 355,\r\n    } satisfies IntrinsicNodeStyleProps,\r\n    Row: {\r\n        y: 0,\r\n        x: 0,\r\n        zIndex: 999,\r\n        display: 'flex',\r\n        justifyContent: 'spaceBetween',\r\n        gap: 10,\r\n        height: 290,\r\n    } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import api from '..';\r\nimport { convertItemsToTiles, chunkArray } from '../formatters/ItemFormatter';\r\n\r\nlet cache = new Map();\r\nconst leftoverTiles = new Map();\r\n\r\nexport default function (size: number) {\r\n  const filter = '';\r\n  return async (pageIndex: number): Promise<any> => {\r\n    const url = `/movie/popular?language=en-US&page=${pageIndex}`;\r\n    if (cache.has(url)) {\r\n      return cache.get(url);\r\n    }\r\n\r\n    const sizePage = size;\r\n\r\n    let result = await api.get(url).then((trending) => {\r\n      let results = trending.results.filter((r) => !r.adult);\r\n      let tiles = (leftoverTiles.has(filter) ? leftoverTiles.get(filter) : []).concat(convertItemsToTiles(results));\r\n      let chunks = chunkArray(tiles, sizePage);\r\n      if (chunks[chunks.length - 1].length < sizePage) {\r\n        leftoverTiles.set(filter, chunks.pop());\r\n      } else {\r\n        leftoverTiles.delete(filter);\r\n      }\r\n      return chunks;\r\n    });\r\n    return result;\r\n  }\r\n}\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n    SliderMain: {\r\n        y: 0,\r\n        x: 0,\r\n        zIndex: 999,\r\n        display: 'flex',\r\n        justifyContent: 'spaceBetween',\r\n        gap: 10,\r\n        height: 290,\r\n    }\r\n};\r\n","import { IntrinsicNodeStyleProps, deg2rad, hexColor } from \"@lightningjs/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n  Thumbnail: {\r\n    borderRadius: 10,\r\n    width: 187,\r\n    height: 294,\r\n    scale: 1,\r\n    zIndex: 2,\r\n    focus: {\r\n      scale: 1.02,\r\n    }\r\n  } satisfies IntrinsicNodeStyleProps,\r\n\r\n  FocusRing: {\r\n    borderRadius: 10,\r\n    y: -2,\r\n    x:-2,\r\n    zIndex: -1,\r\n    color: hexColor(\"#ffffff\"),\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import {\r\n  IntrinsicNodeProps,\r\n  View,\r\n  ElementNode,\r\n  activeElement,\r\n} from \"@lightningjs/solid\";\r\nimport styles from \"./Thumnail.styles\";\r\nimport { createEffect, on } from \"solid-js\";\r\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\r\nimport { useNavigate } from '@solidjs/router';\r\nimport { setMovieDetailState } from \"../../state\";\r\n\r\nexport default function Thumbnail(props: IntrinsicNodeProps) {\r\n  const navigate = useNavigate();\r\n  let focusRingRef;\r\n  createEffect(on(activeElement, (elm) => {\r\n    assertTruthy(elm);\r\n    setTimeout(() => {\r\n      if (elm.heroContent) {\r\n        focusRingRef.parent = elm.parent;\r\n        focusRingRef.alpha = 1;\r\n        focusRingRef.scale = 1;\r\n        focusRingRef.x = elm.x! - 2;\r\n        focusRingRef.y = elm.y! - 2;\r\n        focusRingRef.width = elm.width! + 4;\r\n        focusRingRef.height = elm.height! + 4;\r\n        focusRingRef.createAnimation({ scale: 1.03}).start();\r\n        // focusRingRef.zIndex = (elm.zIndex! - 0.00000001);\r\n      } else {\r\n        focusRingRef.alpha = 0;\r\n      }\r\n    }, 10)\r\n  }, { defer: true}))\r\n\r\n  function onRowFocus(this: ElementNode) {\r\n    this.children.selected?.setFocus();\r\n  }\r\n\r\n  function command(jsonString) {\r\n    try {\r\n        let jsonData = window['CrossPlatformBridge'].command(jsonString)\r\n        let object = JSON.parse(jsonData)\r\n        return object\r\n    } catch (e: any) {\r\n        return null\r\n    }\r\n  }\r\n\r\n  function ACPB3(url) {\r\n    let data = {\r\n      \"param\": {\r\n          \"service_no\": \"A_CPB3\",\r\n          \"version\": \"1\"\r\n      },\r\n      \"payload\": {\r\n          \"url\": url\r\n      }\r\n    }\r\n    command(JSON.stringify(data))\r\n  }\r\n\r\n\r\n  function viewDetailVideo(this :any) {\r\n    // setMovieDetailState(this.data);\r\n    // navigate(`/movie/${this.data.id}`);\r\n    ACPB3('https://gstreamer.freedesktop.org/media/sintel_trailer-480p.webm')\r\n  }\r\n\r\n  // console.log('props',props)\r\n  return (\r\n    <View {...props} animate style={styles.Thumbnail} onEnter={viewDetailVideo}>\r\n      <View\r\n        onFocus={onRowFocus}\r\n        {...props}\r\n        animate\r\n        style={styles.Thumbnail}\r\n      ></View>\r\n      <View ref={focusRingRef} style={styles.FocusRing}></View>\r\n    </View>\r\n  );\r\n}\r\n","import { View, Text, For } from '@lightningjs/solid';\r\nimport styles from \"./Slider.styles\";\r\nimport { Row } from '@lightningjs/solid-primitives';\r\nimport Thumbnail from '../Thumnail';\r\nimport { createSelector } from 'solid-js';\r\n\r\nexport default function Slider(props) {\r\n  const isFirst = createSelector(() => {\r\n    return 0;\r\n  });\r\n\r\n  return (\r\n    <Row\r\n      transition={{ x: {delay: 20, duration: 300}}}\r\n      animate\r\n      width={4400}\r\n      style={styles.SliderMain}\r\n      justifyContent={'flexStart'}\r\n      gap={40}\r\n      x={props.rowX()}\r\n      onSelectedChanged={props.moveRow}\r\n      plinko\r\n    >\r\n      <For each={props.data}>\r\n        {(items :any, i) => <Thumbnail {...items} autofocus={props.autofocus && isFirst(i())}/>}\r\n      </For>\r\n    </Row>\r\n  );\r\n}\r\n","import { View, Text, Show, IntrinsicNodeStyleProps, For } from '@lightningjs/solid';\r\nimport { withPadding } from '@lightningjs/solid-primitives';\r\nimport theme from 'theme';\r\nwithPadding;\r\n\r\nconst blockWidth = 1100;\r\nconst HeadlineStyles = {\r\n  ...theme.typography.display2,\r\n  width: blockWidth,\r\n  height: 58,\r\n  contain: 'both',\r\n};\r\nconst Headline = (props) => (\r\n  <Text {...props} style={HeadlineStyles}>\r\n    {props.children}\r\n  </Text>\r\n);\r\n\r\nconst DescriptionStyles = {\r\n  fontFamily: \"Roboto\",\r\n  fontSize: 32,\r\n  lineHeight: 40,\r\n  height: 160,\r\n  background: \"#ffff\",\r\n  width: 1000,\r\n  clipping: true,\r\n  maxLines: 4\r\n};\r\n\r\nconst BadgeStyle = {\r\n  fontSize: 20,\r\n  lineHeight: 20,\r\n};\r\n\r\nconst Description = (props) => (\r\n  <Text {...props} style={DescriptionStyles}>\r\n    {props.children}\r\n  </Text>\r\n);\r\n\r\nfunction getReviews(reviews) {\r\n  return (\r\n    <>\r\n      <Show when={reviews?.rtCrit && reviews?.rtCrit !== '0'}>\r\n        <View\r\n          src=\"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png\"\r\n          title=\"Rotten Tomatoes Rating\"\r\n          style={{ width: 30, height: 30, marginRight: -6 }}\r\n        />\r\n        <Text style={MetaTextStyle}>{reviews.rtCrit + '%'}</Text>\r\n      </Show>\r\n      <Show when={reviews?.rtFan && reviews?.rtFan !== '0'}>\r\n        <View\r\n          src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png\"\r\n          title=\"Rotten Tomatoes Rating\"\r\n          style={{ width: 24, height: 30, marginRight: -6 }}\r\n        />\r\n        <Text style={MetaTextStyle}>{reviews.rtFan + '%'}</Text>\r\n      </Show>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Badge = (props) => {\r\n  return (\r\n    <node\r\n      use:withPadding={[8, 15, 13, 15]}\r\n      {...props}\r\n      style={{\r\n        color: '0x00000099',\r\n        borderRadius: 8,\r\n        border: { width: 3, color: '0xffffffff' },\r\n      }}\r\n    >\r\n      <Text style={BadgeStyle}>{props.children}</Text>\r\n    </node>\r\n  );\r\n};\r\n\r\nconst MetaTextStyle = theme.typography.body2;\r\n\r\nconst Metadata = (props) => (\r\n  <View\r\n    style={{\r\n      ...theme.flexRow as IntrinsicNodeStyleProps,\r\n      gap: 12,\r\n      width: blockWidth,\r\n      height: 48,\r\n    }}\r\n  >\r\n    <Text style={MetaTextStyle}>{props.metaText}</Text>\r\n    <For each={props.badges}>{(item) => <Badge y={-5}>{item}</Badge>}</For>\r\n    {getReviews(props.reviews)}\r\n  </View>\r\n);\r\n\r\nconst ContentBlock = (props) => {\r\n  console.log('badges', props.badges)\r\n  return <View\r\n      {...props}\r\n      style={{\r\n        ...theme.flexColumn,\r\n        width: blockWidth,\r\n        height: 160,\r\n        gap: 16,\r\n      }}\r\n    >\r\n      <Headline>{props.title}</Headline>\r\n      <Description>{props.description}</Description>\r\n      <Metadata\r\n        metaText={props.metaText}\r\n        badges={props.badges}\r\n        reviews={props.reviews}\r\n      />\r\n    </View>;\r\n};\r\n\r\nexport default ContentBlock;\r\n","import { type AnimationSettings } from \"@lightningjs/renderer\";\r\nimport { homeBackgroundState } from \"../state.js\";\r\nimport { type IntrinsicNodeStyleProps, View, hexColor } from \"@lightningjs/solid\";\r\nimport { createEffect, on } from \"solid-js\";\r\nimport theme from 'theme';\r\n\r\nexport default function HomeBackground() {\r\n  let bg1, bg2;\r\n  let active = 0;\r\n  const alpha = 1;\r\n  const animationSettings = { duration: 1000, easing: 'ease-in-out' } satisfies Partial<AnimationSettings>;\r\n  const bgStyles = { alpha, color: 0xffffffff, transition: {\r\n    alpha: animationSettings\r\n  } } satisfies IntrinsicNodeStyleProps;\r\n\r\n  createEffect(on(homeBackgroundState, (img: string) => {\r\n    if (img.startsWith('#')) {\r\n      bg1.color = img;\r\n      bg1.src = '';\r\n      bg1.alpha = 1;\r\n      active = 1;\r\n      bg2.alpha = 0;\r\n      return;\r\n    } else {\r\n      bg1.color = 0xffffffff;\r\n    }\r\n\r\n    if (active === 0) {\r\n      bg1.src = img;\r\n      active = 1;\r\n      return;\r\n    }\r\n\r\n    if (active === 1) {\r\n      bg2.src = img;\r\n      active = 2;\r\n      bg1.alpha = 0;\r\n      bg2.alpha = 1;\r\n      return;\r\n    }\r\n\r\n    if (active === 2) {\r\n      bg1.src = img;\r\n      active = 1;\r\n      bg1.alpha = alpha;\r\n      bg2.alpha = 0;\r\n    }\r\n  }, { defer: true}))\r\n\r\n  return (<>\r\n  <View width={window.devicePixelRatio > 1 ? 1920 : window.innerWidth} height={window.devicePixelRatio > 1 ? 1080 : window.innerHeight} zIndex={-5} x={-21}>\r\n    <View ref={bg1} style={bgStyles} animate/>\r\n    <View ref={bg2} style={bgStyles} alpha={0} animate/>\r\n    <View\r\n      animate\r\n      effects={{\r\n        radialGradient: {\r\n          colors: [0x0000007C, 0x0000007C, hexColor(\"#000000\")],\r\n          stops: [0.6, 0.1, 1.2],\r\n          height: 500,\r\n          width: (window.devicePixelRatio > 1 ? 1920 : window.innerWidth) - 300,\r\n          pivot: [0.8, 0], \r\n        },\r\n      }}\r\n    />\r\n    </View>\r\n  </>);\r\n}\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport default {\r\n  LoadingWrapper: {\r\n    x: 0,\r\n    y: 0,\r\n    width: window.devicePixelRatio > 1 ? 1820 : window.innerWidth - 100,\r\n    height: window.devicePixelRatio > 1 ? 1080 : window.innerHeight,\r\n    color: hexColor(\"#000000\"),\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    zIndex: 999,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  LoadingMain: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    gap: 30,\r\n    height: 30\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  LoadingItem: {\r\n    x: 0,\r\n    y: 0,\r\n    width: 15,\r\n    height: 15,\r\n    color: hexColor(\"#ffffff\"),\r\n    borderRadius: 7.5,\r\n    choose: {\r\n      transition: {\r\n        duration: 0.5,\r\n        timingFunction: \"ease-in-out\"\r\n      },\r\n      color: hexColor(\"#ff0000\"),\r\n      scale: 1.3\r\n    }\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { View, Text, activeElement } from '@lightningjs/solid';\r\nimport styles from '../../assets/styles/loadingStyles';\r\nimport { createEffect, createSignal, on, onMount } from 'solid-js';\r\n\r\nexport default function Loading(props) {\r\n  let LoadingMainRef;\r\n  const [itemFocus, setItemFocus] = createSignal(0);\r\n  const [direction, setDirection] = createSignal(true);\r\n\r\n  onMount(() => {\r\n    setInterval(() => {\r\n     \r\n      if(itemFocus() == 0) {\r\n        setDirection(true);\r\n      } \r\n      if(itemFocus() == 5) {\r\n        setDirection(false);\r\n      }\r\n      if(direction()) {\r\n        if(itemFocus() > 0) {\r\n          LoadingMainRef.children[itemFocus()].states.remove('choose');\r\n        }\r\n        LoadingMainRef.children[itemFocus()].states.add('choose');\r\n        setItemFocus(prev => prev + 1);\r\n      } else {\r\n        setItemFocus(prev => prev - 1);\r\n        LoadingMainRef.children[itemFocus()].states.remove('choose');\r\n      }\r\n    }, 200)\r\n  })\r\n\r\n  return (\r\n    <View forwardStates animate style={styles.LoadingWrapper} autofocus>\r\n      <View style={styles.LoadingMain} ref={LoadingMainRef} skipFocus>\r\n        <View style={styles.LoadingItem} skipFocus animate></View>\r\n        <View style={styles.LoadingItem} skipFocus animate></View>\r\n        <View style={styles.LoadingItem} skipFocus animate></View>\r\n        <View style={styles.LoadingItem} skipFocus animate></View>\r\n        <View style={styles.LoadingItem} skipFocus animate></View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import { ElementNode, View, activeElement } from '@lightningjs/solid';\r\nimport { Column, Row } from '@lightningjs/solid-primitives';\r\nimport Title from '../components/Title';\r\nimport styles from '../../assets/styles/homeStyles';\r\nimport popularApi from \"../api/providers/popular\";\r\nimport { Show, createEffect, createMemo, createSignal, on } from 'solid-js';\r\nimport { createInfiniteScroll } from '../components/pagination';\r\nimport Slider from '../components/Slider';\r\nimport ContentBlock from '../components/ContentBlock';\r\nimport HomeBackground from '../components/HomeBackground';\r\nimport { setHomeBackgroundState } from '../state';\r\nimport Loading from '../components/Loading';\r\n\r\nconst HomePage = () => {\r\n  const [heroContent, setHeroContent] = createSignal({});\r\n  const [rowXTrending, setRowXTrending] = createSignal(10);\r\n  const [rowXPopular, setRowXPopular] = createSignal(10);\r\n  const [rowXRecommend, setRowXRecommend] = createSignal(10);\r\n  const [columnY, setcolumnY] = createSignal(0);\r\n\r\n  const popularProvider = createMemo(() => {\r\n    return createInfiniteScroll(popularApi(1));\r\n  });\r\n\r\n  const moveRowPopular = (row) => {\r\n    row.children.selected?.setFocus();\r\n    setRowXPopular(row.selected * -227 + 10);\r\n    if([].concat.apply([], popularProvider().pages()).length - row.selected < 15) {\r\n      popularProvider().setPage(p => p + 1);\r\n    }\r\n  };\r\n\r\n  const moveRowTrending = (row) => {\r\n    setRowXTrending(row.selected * -227 + 10);\r\n    if([].concat.apply([], popularProvider().pages()).length - row.selected < 15) {\r\n      popularProvider().setPage(p => p + 1);\r\n    }\r\n  };\r\n\r\n  const moveRowRecommend = (row) => {\r\n    setRowXRecommend(row.selected * -227 + 10);\r\n    if([].concat.apply([], popularProvider().pages()).length - row.selected < 15) {\r\n      popularProvider().setPage(p => p + 1);\r\n    }\r\n  };\r\n\r\n\r\n  createEffect(on(activeElement, (elm :any) => {\r\n    console.log(elm);\r\n    if (elm.backdrop) {\r\n      setHomeBackgroundState(`https://image.tmdb.org/t/p/original/${elm.data.backdrop_path}`);\r\n    }\r\n\r\n    if (elm.heroContent) {\r\n      setHeroContent(elm.heroContent);\r\n    }\r\n  }, { defer: true}));\r\n\r\n  function onRowFocus(this: ElementNode) {\r\n    this.children.selected?.setFocus();\r\n    setcolumnY((this.y || 0) * -1 + 24);\r\n  }\r\n\r\n  function onRowTrendingFocus(this: ElementNode) {\r\n    this.children.selected?.setFocus();\r\n    setcolumnY((this.y || 0) * -1 + 24);\r\n  }\r\n\r\n  function onRowRecommendFocus(this: ElementNode) {\r\n    this.children.selected?.setFocus();\r\n    setcolumnY((this.y || 0) * -1 + 24);\r\n  }\r\n\r\n  return (\r\n    <View style={styles.HomeWrapper}>\r\n      <Show when={popularProvider().pages().length == 0}>\r\n        <Loading />\r\n      </Show>\r\n      <HomeBackground />\r\n      <ContentBlock y={360} x={20} {...heroContent()}></ContentBlock>\r\n      <View style={styles.HomeMain} clipping autofocus>\r\n        <Column style={styles.HomeList} clipping plinko y={columnY()} animate>\r\n          <Row style={styles.HomeItem} onFocus={onRowFocus} autofocus>\r\n            <Title title={'Popular'} icon={'assets/popular.png'}></Title>\r\n            <Slider\r\n              data={[].concat.apply([], popularProvider().pages())}\r\n              rowX={rowXPopular}\r\n              moveRow={moveRowPopular}\r\n              autofocus={true}\r\n            ></Slider>\r\n          </Row>\r\n          <Row style={styles.HomeItem} onFocus={onRowTrendingFocus}>\r\n            <Title title={'Trending'} icon={'assets/trending.png'}></Title>\r\n            <Slider\r\n              data={[].concat.apply([], popularProvider().pages())}\r\n              rowX={rowXTrending}\r\n              moveRow={moveRowTrending}\r\n            ></Slider>\r\n          </Row>\r\n          <Row style={styles.HomeItem} onFocus={onRowRecommendFocus}>\r\n            <Title title={'Recommend'} icon={'assets/recommend.png'}></Title>\r\n            <Slider\r\n              data={[].concat.apply([], popularProvider().pages())}\r\n              rowX={rowXRecommend}\r\n              moveRow={moveRowRecommend}\r\n            ></Slider>\r\n          </Row>\r\n        </Column>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","export const keyBoards = ['a', 'b', 'c', 'd', 'e', 'f', 'g',\r\n                   'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n                   'o', 'p', 'q', 'r', 's', 't', 'u',\r\n                   'v', 'w', 'x', 'y', 'z', '0', '1',\r\n                   '2', '3', '4', '5', '6', '7', '8',\r\n                   '9'\r\n                  ];","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport const keyboardContainerStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  gap: 40,\r\n  y: 0,\r\n  color: hexColor('#000000'),\r\n  height: theme.layout.screenH,\r\n  alpha: 1,\r\n}\r\n\r\nexport const KeyboardMainStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'row',\r\n  justifyContent: 'flexStart',\r\n  gap: 16,\r\n  x: 40,\r\n  zIndex: 999,\r\n  height: theme.layout.screenH,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const KeyboardChooseStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  justifyContent: 'flexStart',\r\n  gap: 16,\r\n  width: 540,\r\n  x: 40,\r\n  zIndex: 999,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\n\r\n\r\nexport const KeyboardRowStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'row',\r\n  justifyContent: 'spaceBetween',\r\n  gap: 8,\r\n  height: 70,\r\n  width: 500,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const backdropKeyboardStyle = {\r\n  color: hexColor('#000000'),\r\n  alpha: 0.8,\r\n  zIndex: 998,\r\n  x: 0,\r\n  y: 0,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const KeyboardItemStyle = {\r\n  display: 'flex',\r\n  borderRadius: 6,\r\n  border: { width: 0, color: hexColor('#ffffff') },\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n  gap: 6,\r\n  width: 70,\r\n  height: 70,\r\n  color: hexColor('#2e3743'),\r\n  focus: {\r\n    border: { width: 4, color: hexColor('#ffffff') },\r\n    color: hexColor('#000000'),\r\n  },\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const KeyboardTextStyle = {\r\n  fontSize: 40,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const inputSearchStyle = {\r\n  color: hexColor('#red'),\r\n  width: 500,\r\n  x: 40,\r\n  height: 70,\r\n  alpha: 1,\r\n  backgroundColor: hexColor('#ffffff'),\r\n  borderRadius: 8,\r\n  border: { width: 4, color: hexColor('#ffffff') },\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'flexStart',\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const resultSearchStyle = {\r\n  width: 500,\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'flexStart',\r\n  justifyContent: 'flexStart',\r\n  gap: 20,\r\n  x: 0,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const KeyboardItemSpecalStyle = {\r\n  height: 70,\r\n  width: 240,\r\n  color: hexColor('#2e3743'),\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  borderRadius: 6,\r\n  border: { width: 0, color: hexColor('#ffffff') },\r\n  focus: {\r\n    border: { width: 4, color: hexColor('#ffffff') },\r\n    color: hexColor('#000000'),\r\n  },\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const KeyboardItemSpecalIconStyle = {\r\n  width: 70,\r\n  height: 50,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const spaceSearchStyle = {\r\n  height: 10,\r\n  x: 0,\r\n  y: 0,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const resultVideosStyle = {\r\n  color: hexColor(\"#09121a\"),\r\n  y: -160,\r\n  fontSize: 30,\r\n  x: 40,\r\n  width: theme.layout.screenW - (580 + 116),\r\n  height: theme.layout.screenH,\r\n  zIndex: 999,\r\n  // display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const resultVideoItemStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  justifyContent: 'flexStart',\r\n  gap: 20,\r\n  width: theme.layout.screenW - (2 * theme.layout.marginX + 532 + ((theme.layout.marginX + theme.layout.gutterX) * 2)),\r\n  x: 48,\r\n  y: 48,\r\n  zIndex: 2\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const KeyboardItemNormalStyle = {\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  justifyContent: 'flexStart',\r\n  gap: 20,\r\n} satisfies IntrinsicNodeStyleProps;\r\n\r\nexport const noDataStyle = {\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  alignItems: 'center',\r\n} satisfies IntrinsicNodeStyleProps;\r\n","import { IntrinsicNodeProps, View, Text } from '@lightningjs/solid';\r\nimport { Row } from '@lightningjs/solid-primitives';\r\nimport { For, splitProps } from 'solid-js';\r\nimport styles, { buttonStyles } from '../styles';\r\nimport { type Tile } from '../api/formatters/ItemFormatter';\r\nimport Thumbnail from './Thumnail';\r\n\r\n\r\nexport function FocusRing(props: IntrinsicNodeProps) {\r\n  return <View {...props} style={styles.FocusRing} />\r\n}\r\n\r\nexport interface TileRowProps extends IntrinsicNodeProps {\r\n  items: Tile[];\r\n}\r\n\r\nexport function TileRow(props: TileRowProps) {\r\n  const [local, others] = splitProps(props, [\"items\"]);\r\n\r\n  return <Row {...others} style={styles.Row}>\r\n   <For each={local.items}>\r\n      {(item) => <Thumbnail {...item} /> }\r\n    </For>\r\n  </Row>\r\n\r\n}\r\n\r\nexport function Button(props) {\r\n  return (\r\n    <View {...props} forwardStates animate\r\n      style={buttonStyles.container}>\r\n      <Text style={buttonStyles.text}>{props.children}</Text>\r\n    </View>\r\n  );\r\n}","import api from '..';\r\nimport { convertItemsToTiles, chunkArray } from '../formatters/ItemFormatter';\r\n\r\nlet cache = new Map();\r\nconst leftoverTiles = new Map();\r\n\r\nexport default function (size: number, query?:any) {\r\n  const filter = '';\r\n  return async (pageIndex: number): Promise<any> => {\r\n    const url = `/search/movie?include_adult=false&page=${pageIndex}&query==${query}`;\r\n    if (cache.has(url)) {\r\n      return cache.get(url);\r\n    }\r\n\r\n    const sizePage = size;\r\n\r\n    let result = await api.get(url).then((trending) => {\r\n      let results = trending.results.filter((r) => !r.adult);\r\n      let tiles = (leftoverTiles.has(filter) ? leftoverTiles.get(filter) : []).concat(convertItemsToTiles(results));\r\n      let chunks = chunkArray(tiles, sizePage);\r\n      if (chunks[chunks.length - 1].length < sizePage) {\r\n        leftoverTiles.set(filter, chunks.pop());\r\n      } else {\r\n        leftoverTiles.delete(filter);\r\n      }\r\n      return chunks;\r\n    });\r\n    return result;\r\n  }\r\n}\r\n","import { ElementNode, For, Text, View, hexColor } from \"@lightningjs/solid\";\r\nimport { Column, Row } from \"@lightningjs/solid-primitives\";\r\nimport { keyBoards } from \"../../keyBoards\";\r\nimport { \r\n  KeyboardChooseStyle,\r\n  KeyboardItemNormalStyle,\r\n  KeyboardItemSpecalIconStyle,\r\n  KeyboardItemSpecalStyle,\r\n  KeyboardItemStyle,\r\n  KeyboardMainStyle,\r\n  KeyboardRowStyle,\r\n  KeyboardTextStyle,\r\n  backdropKeyboardStyle,\r\n  inputSearchStyle,\r\n  keyboardContainerStyle,\r\n  noDataStyle,\r\n  resultSearchStyle,\r\n  resultVideoItemStyle,\r\n  resultVideosStyle,\r\n  spaceSearchStyle\r\n} from \"../../assets/styles/keyboardStyle\";\r\nimport { Show, createEffect, createMemo, createSelector, createSignal, on } from \"solid-js\";\r\nimport { TileRow } from \"../components\";\r\nimport { createInfiniteScroll } from \"../components/pagination\";\r\nimport { setFocusMenu } from \"../state\";\r\nconst basePath = import.meta.env.BASE_URL;\r\nimport searchProvider from '../api/providers/search';\r\n\r\nexport default function Search(props) {\r\n    let backdropKeyboardRef, inputSearchRef, resultSearchRef, keyboardContainerRef, keyboardMainRef, resultVideosRef, keyboardChooseRef, resultVideosMainRef, KeyboardItemSpecalRef;\r\n    const [searchValue, setSearchValue] = createSignal('');\r\n    const [columnY, setcolumnY] = createSignal(0);\r\n\r\n    let searchResultProvider = createMemo(() => {\r\n      return createInfiniteScroll(searchProvider(5, searchValue()));\r\n    });\r\n\r\n    createEffect(on(searchValue, (value) => {\r\n      setcolumnY(0);\r\n      searchResultProvider().setPage(1);\r\n    }));\r\n\r\n    const isFirst = createSelector(() => {\r\n      return 0;\r\n    });\r\n  \r\n    function onFocus(this: ElementNode) {\r\n      this.states.add('focus');\r\n    };\r\n  \r\n    function onBlur(this: ElementNode) {\r\n      this.states.remove('focus');\r\n    };\r\n\r\n    const selectKeySpace = () => {\r\n      return () => {\r\n        setSearchValue(prev => prev + ' ')\r\n      }\r\n    };\r\n\r\n    const selectKeyBackSpace = () => {\r\n      return () => {\r\n        setSearchValue(prev => prev.slice(0, -1))\r\n      }\r\n    };\r\n\r\n    function selectKeyBoard(key: string) {\r\n      return () => {\r\n        setSearchValue(prev => prev + key)\r\n      }\r\n    };\r\n\r\n    const renderKeyboard = () => {\r\n      let data :any = []\r\n      const elementsPerDiv = 6;\r\n      for (let i = 0; i < keyBoards.length; i += elementsPerDiv) {\r\n        const divElements = keyBoards.slice(i, i + elementsPerDiv);\r\n        data.push(divElements);\r\n      }\r\n  \r\n      return (\r\n        <For each={data}>\r\n          {(item, i) =>\r\n            <Row style={KeyboardRowStyle} autofocus={false} plinko>\r\n              <For each={item}>\r\n                {(key, j) => (\r\n                  <View\r\n                    style={KeyboardItemStyle}\r\n                    onEnter={selectKeyBoard(key)}\r\n                    animate\r\n                    onBlur={onBlur}\r\n                    onFocus={onFocus}\r\n                    forwardStates\r\n                    autofocus={false}\r\n                  >\r\n                    <Text style={KeyboardTextStyle}>\r\n                      {key}\r\n                    </Text>\r\n                  </View>\r\n                ) }\r\n              </For>\r\n            </Row>\r\n          }\r\n        </For> \r\n      )\r\n    }\r\n\r\n    function onRowFocus(this: ElementNode) {\r\n      this.children.selected?.setFocus();\r\n      setcolumnY((this.y || 0) * -1 + 24);\r\n      let numPages = searchResultProvider().pages().length;\r\n      if(this.parent){\r\n        if (numPages === 0 || this.parent.selected && this.parent.selected >= numPages - 2) {\r\n          searchResultProvider().setPage(p => p + 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    function onEnter(this: ElementNode) {\r\n    };\r\n  \r\n    return (\r\n      <View ref={backdropKeyboardRef} animate style={backdropKeyboardStyle} autofocus>\r\n        <View\r\n          ref={keyboardContainerRef}\r\n          animate\r\n          style={keyboardContainerStyle}\r\n          autofocus\r\n          plinko\r\n        >\r\n          <View ref={inputSearchRef} style={spaceSearchStyle} skipFocus></View>\r\n          <View ref={inputSearchRef} style={inputSearchStyle} animate skipFocus>\r\n            <Text style={{\r\n              color: hexColor('#ffffff'),\r\n              fontSize: 30,\r\n              marginLeft: 20,\r\n            }}>\r\n              { searchValue() }\r\n            </Text>\r\n          </View>\r\n          <Column\r\n            style={KeyboardMainStyle}\r\n            ref={keyboardMainRef}\r\n            autofocus\r\n            onDown={() => {\r\n              if(keyboardChooseRef.states.has('focus')){\r\n                return false;\r\n              }\r\n            }}\r\n            plinko\r\n          >\r\n            <Column\r\n              style={KeyboardChooseStyle}\r\n              ref={keyboardChooseRef}\r\n              onRight={() => {\r\n                resultVideosRef.setFocus();\r\n                if(searchResultProvider().pages().length > 0) {\r\n                  resultVideosMainRef.setFocus();\r\n                }\r\n              }}\r\n              onLeft={() => {\r\n                setFocusMenu(true);\r\n              }}\r\n              >\r\n              <Row style={KeyboardRowStyle} autofocus={false}>\r\n                <View\r\n                  style={KeyboardItemSpecalStyle}\r\n                  ref={KeyboardItemSpecalRef}\r\n                  onEnter={selectKeySpace()}\r\n                  animate\r\n                  autofocus={false}\r\n                >\r\n                  <View\r\n                    style={KeyboardItemSpecalIconStyle}\r\n                    src={basePath + 'assets/icon-space.png'}\r\n                    forwardStates\r\n                    animate\r\n                  ></View>\r\n                </View>\r\n                <View\r\n                  style={KeyboardItemSpecalStyle}\r\n                  onEnter={selectKeyBackSpace()}\r\n                  animate\r\n                  autofocus={false}\r\n                >\r\n                  <View\r\n                    style={KeyboardItemSpecalIconStyle}\r\n                    src={basePath + 'assets/icon-back-space.png'}\r\n                    forwardStates\r\n                    animate\r\n                  ></View>\r\n                </View>\r\n              </Row>\r\n              <Column plinko style={KeyboardItemNormalStyle}>\r\n                {\r\n                  renderKeyboard()\r\n                }\r\n              </Column>\r\n              <Column\r\n                ref={resultSearchRef}\r\n                animate\r\n                style={resultSearchStyle}\r\n                forwardStates\r\n              >\r\n                <Text style={{\r\n                  color: hexColor('#504d4d'),\r\n                  fontSize: 30,\r\n                  focus: {\r\n                    color: hexColor('#ffffff'),\r\n                  }\r\n                }}>\r\n                  {/* Result Search */}\r\n                </Text>\r\n              </Column>\r\n            </Column>\r\n            <View\r\n              style={resultVideosStyle}\r\n              ref={resultVideosRef}\r\n              onLeft={() => {\r\n                keyboardChooseRef.setFocus();\r\n              }}\r\n            >\r\n              <Show when={searchResultProvider().pages().length == 0}>\r\n                <View style={noDataStyle}>\r\n                  <Text\r\n                    style={{\r\n                      fontSize: 40,\r\n                      display: 'flex',\r\n                      justifyContent: 'center',\r\n                      textAlign: 'center'\r\n                    }}\r\n                  >\r\n                    No Data\r\n                  </Text>\r\n                </View>\r\n              </Show>\r\n              <Show when={searchResultProvider().pages().length > 0}>\r\n                <Column ref={resultVideosMainRef} animate y={columnY()} style={resultVideoItemStyle} plinko>\r\n                  <For each={searchResultProvider().pages()}>\r\n                    {(items, i) =>\r\n                      <TileRow autofocus={isFirst(i()) && resultVideosRef.states.has('focus')} items={items} onFocus={onRowFocus} onEnter={onEnter} />\r\n                    }\r\n                  </For>\r\n                </Column>\r\n              </Show>\r\n            </View>\r\n          </Column>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n  ","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport default {\r\n  TiviWrapper: {\r\n    x: 0,\r\n    y: 0,\r\n    width: 1920,\r\n    height: 1080,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Content: {\r\n    y: 580,\r\n    zIndex: 2,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Container: {\r\n    width: 1720,\r\n    x: 50,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    gap: 40,\r\n    y: 0,\r\n    zIndex: 2,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Row: {\r\n    display: 'flex',\r\n    height: 290,\r\n    width: 1720,\r\n    justifyContent: 'spaceBetween',\r\n    clipping: true,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Item: {\r\n    borderRadius: 10,\r\n    width: 187,\r\n    height: 294,\r\n    scale: 1,\r\n    zIndex: 2,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    color: hexColor('#0e0e0e'),\r\n    focus: {\r\n      scale: 1.02,\r\n      color: hexColor('#3d3d3d'),\r\n    }\r\n  },\r\n  IdChannel: {\r\n    color: hexColor(\"#ffffff\"),\r\n    fontSize: 32\r\n  },\r\n  NameChannel: {\r\n    fontFamily: \"Roboto\",\r\n    fontSize: 25,\r\n    lineHeight: 25,\r\n    contain: 'both',\r\n    width: 150,\r\n    height: 200,\r\n    textAlign: 'center',\r\n  }\r\n};\r\n","import { View, Text, hexColor } from '@lightningjs/solid';\r\nimport { withPadding } from '@lightningjs/solid-primitives';\r\nimport theme from 'theme';\r\nwithPadding;\r\n\r\nconst blockWidth = 1100;\r\nconst HeadlineStyles = {\r\n  ...theme.typography.display2,\r\n  width: blockWidth,\r\n  height: 58,\r\n  contain: 'both',\r\n};\r\nconst Headline = (props) => (\r\n  <Text {...props} style={HeadlineStyles}>\r\n    {props.children}\r\n  </Text>\r\n);\r\n\r\nconst DescriptionStyles = {\r\n  ...theme.typography.body1,\r\n  width: blockWidth,\r\n  height: 72,\r\n  contain: 'both',\r\n};\r\n\r\nconst Description = (props) => (\r\n  <Text {...props} style={DescriptionStyles}>\r\n    {props.children}\r\n  </Text>\r\n);\r\n\r\n\r\nconst ContentBlockTivi = (props) => {\r\n  return <View\r\n      {...props}\r\n      style={{\r\n        ...theme.flexColumn,\r\n        width: blockWidth,\r\n        height: 160,\r\n        gap: 16,\r\n        x: 50,\r\n        y: 50\r\n      }}\r\n    >\r\n      <Headline>{props.data?.channel_name}</Headline>\r\n      <Description>{props.data?.description}</Description>\r\n    </View>;\r\n};\r\n\r\nexport default ContentBlockTivi;\r\n","import { ElementNode, Text, View, activeElement, hexColor } from '@lightningjs/solid';\r\nimport { Column, Row } from '@lightningjs/solid-primitives';\r\nimport styles from '../../assets/styles/tiviStyles';\r\nimport { For, createEffect, createSignal, on, onMount } from 'solid-js';\r\nimport { dataChannels } from './dataChannels';\r\nimport TiviBackground from '../components/TiviBackground';\r\nimport { setTiviBackgroundState } from '../state';\r\nimport ContentBlockTivi from '../components/ContentBlockTivi';\r\nimport Slider from '../components/Slider';\r\nimport sliderStyles from \"../components/Slider/Slider.styles\";\r\nimport { assertTruthy } from '@lightningjs/renderer/utils';\r\n\r\nconst HomePage = () => {\r\n  const [content, setContent] = createSignal<any>();\r\n  const [listChannels, setListChannels] = createSignal<any>([]);\r\n  const [columnY, setcolumnY] = createSignal(0);\r\n  const [rowX, setRowX] = createSignal(10);\r\n  let focusRingRef;\r\n  function command(jsonString) {\r\n    try {\r\n        let jsonData = window['CrossPlatformBridge'].command(jsonString)\r\n        let object = JSON.parse(jsonData)\r\n        return object\r\n    } catch (e: any) {\r\n        return null\r\n    }\r\n  }\r\n\r\n  function ACPB1() {\r\n    let data = {\r\n        \"param\": {\r\n            \"service_no\": \"A_CPB1\",\r\n            \"version\": \"1\"\r\n        },\r\n        \"payload\": {\r\n            \"type\": \"all\"\r\n        }\r\n    }\r\n\r\n    let channelList = command(JSON.stringify(data))\r\n    if (channelList && channelList.data) {\r\n      return channelList.data\r\n    }\r\n  }\r\n\r\n  function A_CPB4(channel_id) {\r\n    let data = {\r\n        \"param\": {\r\n            \"service_no\": \"A_CPB4\",\r\n            \"version\": \"1\"\r\n        },\r\n        \"payload\": {\r\n            \"channel_id\": channel_id\r\n        }\r\n    }\r\n    let channelList = command(JSON.stringify(data));\r\n    return channelList;\r\n  }\r\n  onMount(async () => {\r\n    try {\r\n      const data = await ACPB1();\r\n      fetch('https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1=' +\r\n            JSON.stringify(data) + \"&field_2=\" + \"\" + \"&field_3=\" + \"\"\r\n      );\r\n      setListChannels(data);\r\n      // if(data && data.length > 0) {\r\n      //   let result: any[][] = [];\r\n      //   for (let i = 0, j = data.length; i < j; i += 6) {\r\n      //     result.push(data.slice(i, i + 6));\r\n      //   }\r\n      //   setListChannels(data);\r\n      // }\r\n    } catch (e) {\r\n      fetch('https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1=' +\r\n        JSON.stringify(e) + \"&field_2=\" + \"\" + \"&field_3=\" + \"\"\r\n      );\r\n    }\r\n  });\r\n\r\n  const focusItem = (e) => {\r\n    console.log('focusItem', e);\r\n  };\r\n\r\n  const openTivi = async (id) => {\r\n    try {\r\n      const data = await A_CPB4(id);\r\n      fetch('https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1=' +\r\n            JSON.stringify(data) + \"&field_2=\" + \"\" + \"&field_3=\" + \"\"\r\n      );\r\n    } catch (e) {\r\n      fetch('https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1=' +\r\n        JSON.stringify(e) + \"&field_2=\" + \"\" + \"&field_3=\" + \"\"\r\n      );\r\n      console.log('error', e);\r\n    }\r\n  }\r\n\r\n  createEffect(on(activeElement, (elm :any) => {\r\n    console.log(elm.channel_name);\r\n    setContent({\r\n      channel_name: elm.channel_name,\r\n      description: elm.channel_description || ''\r\n    });\r\n    console.log(content());\r\n    if(elm.channel_name) {\r\n      setTiviBackgroundState(elm.channel_name);\r\n    }\r\n  }, { defer: true}));\r\n\r\n  const moveRow = (row) => {\r\n    setRowX(row.selected * -227 + 10);\r\n  };\r\n\r\n  function insertSpaceAfter5Chars(text) {\r\n      if (text.length > 6) {\r\n          let result = '';\r\n          for (let i = 0; i < text.length; i++) {\r\n              result += text[i];\r\n              if ((i + 1) % 6 === 0 && i !== text.length - 1) {\r\n                  result += ' ';\r\n              }\r\n          }\r\n          return result;\r\n      } else {\r\n          return text;\r\n      }\r\n  }\r\n\r\n  createEffect(on(activeElement, (elm) => {\r\n    assertTruthy(elm);\r\n    setTimeout(() => {\r\n      if (elm.heroContent) {\r\n        focusRingRef.parent = elm.parent;\r\n        focusRingRef.alpha = 1;\r\n        focusRingRef.scale = 1;\r\n        focusRingRef.x = elm.x! - 2;\r\n        focusRingRef.y = elm.y! - 2;\r\n        focusRingRef.width = elm.width! + 4;\r\n        focusRingRef.height = elm.height! + 4;\r\n        focusRingRef.createAnimation({ scale: 1.03}).start();\r\n        // focusRingRef.zIndex = (elm.zIndex! - 0.00000001);\r\n      } else {\r\n        focusRingRef.alpha = 0;\r\n      }\r\n    }, 10)\r\n  }, { defer: true}))\r\n\r\n  return (\r\n    <View style={styles.TiviWrapper} clipping autofocus>\r\n      {/* <TiviBackground /> */}\r\n      <ContentBlockTivi data={content()}/>\r\n      <View style={styles.Content}>\r\n        <Column autofocus animate style={styles.Container}>\r\n          <Row\r\n            transition={{ x: {delay: 20, duration: 300}}}\r\n            animate\r\n            width={4400}\r\n            style={sliderStyles.SliderMain}\r\n            justifyContent={'flexStart'}\r\n            gap={40}\r\n            x={rowX()}\r\n            onSelectedChanged={moveRow}\r\n            plinko\r\n          >\r\n            <For each={listChannels()}>\r\n              {(item :any, i) => (\r\n                <>\r\n                  <View\r\n                  style={styles.Item}\r\n                  onFocus={focusItem}\r\n                  channel_id={item.id}\r\n                  channel_name={item.channel_name}\r\n                  channel_description={item.description}\r\n                  animate\r\n                  onEnter={() => openTivi(item.id)}\r\n                >\r\n                  <Text style={styles.NameChannel} wordBreak={true}>{insertSpaceAfter5Chars(item.channel_name)}</Text>\r\n                  <View ref={focusRingRef} style={styles.FocusRing}></View>\r\n                </View>\r\n                </>\r\n              )}\r\n            </For>\r\n          </Row>\r\n        </Column>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import { Text, View } from \"@lightningjs/solid\";\r\n\r\nexport default () => {\r\n  return (\r\n    <View style={{ width: 1920, height: 1080, color: 0x33c40000 }} >\r\n       <Text >Not Found</Text>\r\n    </View>\r\n   \r\n  );\r\n};\r\n","import api from '..';\r\nimport { convertItemsToTiles, chunkArray } from '../formatters/ItemFormatter';\r\n\r\nlet cache = new Map();\r\nconst leftoverTiles = new Map();\r\n\r\nexport default function (filter: string, size?: number) {\r\n  return (pageIndex: number): Promise<any> => {\r\n    const url = `/trending/${filter}/week?page=${pageIndex}`;\r\n    if (cache.has(url)) {\r\n      return cache.get(url);\r\n    }\r\n\r\n    const sizePage = size ? size : 7;\r\n\r\n    let result = api.get(url).then((trending) => {\r\n      let results = trending.results.filter((r) => !r.adult);\r\n      let tiles = (leftoverTiles.has(filter) ? leftoverTiles.get(filter) : []).concat(convertItemsToTiles(results));\r\n      let chunks = chunkArray(tiles, sizePage);\r\n      if (chunks[chunks.length - 1].length < sizePage) {\r\n        leftoverTiles.set(filter, chunks.pop());\r\n      } else {\r\n        leftoverTiles.delete(filter);\r\n      }\r\n      return chunks;\r\n    });\r\n\r\n    cache.set(url, result);\r\n    return result;\r\n  }\r\n}\r\n","import api, { getImageUrl } from '..';\r\nimport { convertItemsToTiles } from '../formatters/ItemFormatter';\r\n\r\nexport function minutesToHMM(minutes) {\r\n  const hours = Math.floor(minutes / 60);\r\n  const remainingMinutes = minutes % 60;\r\n  return hours + 'h ' + (remainingMinutes < 10 ? '0' : '') + remainingMinutes + 'm';\r\n}\r\n\r\nfunction justYear(dateString) {\r\n  const parts = dateString.split(\"-\");\r\n  return parts[0];\r\n}\r\n\r\nexport function getRecommendations({type, id}) {\r\n  return api.get(`/${type}/${id}/recommendations`).then(\r\n    ({ results }) => {\r\n      if (results.length) {\r\n        return convertItemsToTiles(results.slice(0, 7));\r\n      }\r\n      return api.get(`/trending/${type}/week?page=1`).then(\r\n        ({ results }) => convertItemsToTiles(results.slice(0, 7)));\r\n    }\r\n  );\r\n}\r\n\r\nexport function getCredits({type, id}) {\r\n  return api.get(`/${type}/${id}/credits`).then(\r\n    ({ cast }) => convertItemsToTiles(cast.slice(0, 7))\r\n  );\r\n}\r\n\r\nexport function getInfo({type, id}) {\r\n  let rt = type === 'movie' ? {\r\n    rtCrit: 86,\r\n    rtFan: 92\r\n  } : {};\r\n\r\n  return api.get(`/${type}/${id}?adult=true`).then(\r\n    (data) => {\r\n      console.log(data);\r\n      return  ({\r\n        backgroundImage: getImageUrl(data.backdrop_path, 'original'),\r\n        heroContent: {\r\n          title: data.title || data.name,\r\n          description: data.overview,\r\n          badges: ['HD'],\r\n          metaText: type === 'movie' ?\r\n            minutesToHMM(data.runtime) + ' - ' + data.release_date : `${justYear(data.first_air_date)} - ${justYear(data.last_air_date)}`,\r\n          reviews: rt,\r\n        },\r\n        ...data\r\n      })\r\n    });\r\n}\r\n","import { IntrinsicNodeStyleProps, deg2rad, hexColor } from \"@lightningjs/solid\";\r\nimport theme from \"theme\";\r\n\r\nexport default {\r\n    Row: {\r\n        display: 'flex',\r\n        justifyContent: 'spaceBetween',\r\n        height: 300,\r\n      } satisfies IntrinsicNodeStyleProps,\r\n      Column: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'flexStart',\r\n        gap: 15,\r\n        width: theme.layout.screenW - (2 * theme.layout.marginX),\r\n        x: theme.layout.marginX + theme.layout.gutterX,\r\n        y: 100,\r\n        zIndex: 2\r\n      } satisfies IntrinsicNodeStyleProps,\r\n      itemsContainer: {\r\n        width: theme.layout.screenW,\r\n        height: 600,\r\n        y: 350,\r\n        x: 0,\r\n        zIndex: 2,\r\n      } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import {\r\n  IntrinsicNodeProps,\r\n  View,\r\n  Text,\r\n  ElementNode,\r\n  activeElement,\r\n  hexColor,\r\n} from \"@lightningjs/solid\";\r\nimport styles from \"./ListColumn.style\";\r\nimport { For, createEffect, createSelector, on } from \"solid-js\";\r\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\r\nimport { FocusRing, TileRow } from \"..\";\r\nimport theme from \"theme\";\r\nimport { Column } from \"@lightningjs/solid-primitives\";\r\nexport default function ListColumn(props: IntrinsicNodeProps) {\r\n  let focusRingRef;\r\n  const isFirst = createSelector(() => {\r\n    return 0;\r\n  });\r\n\r\n  return (\r\n    <View clipping style={styles.itemsContainer}>\r\n      <Column\r\n        plinko\r\n        announce=\"All Trending - Week\"\r\n        animate\r\n        y={props.y}\r\n        style={styles.Column}\r\n      >\r\n        <For each={props?.data || []}>\r\n          {(items, i) => (\r\n            <TileRow\r\n              autofocus={props.autofocus? isFirst(i()): false}\r\n              justifyContent={\"flexStart\"}\r\n              items={items}\r\n              onFocus={props.onFocus}\r\n              onEnter={props.onEnter}\r\n            />\r\n          )}\r\n        </For>\r\n      </Column>\r\n    </View>\r\n  );\r\n}\r\n","import {\r\n  createEffect,\r\n  createMemo,\r\n  on,\r\n  createSignal,\r\n  Show,\r\n  createResource,\r\n  createSelector,\r\n  For,\r\n  onMount,\r\n} from \"solid-js\";\r\nimport { ElementNode, View, activeElement, Text } from \"@lightningjs/solid\";\r\nimport { Column } from \"@lightningjs/solid-primitives\";\r\nimport { useNavigate, useParams } from \"@solidjs/router\";\r\nimport { Button, TileRow } from \"../components\";\r\nimport styles from \"../styles\";\r\nimport { setGlobalBackground } from \"../state\";\r\nimport browseProvider from \"../api/providers/browse\";\r\nimport { createInfiniteScroll } from \"../components/pagination\";\r\nimport ContentBlock from \"../components/ContentBlock\";\r\nimport * as entityProvider from \"../api/providers/entity\";\r\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\r\nimport ListColumn from \"../components/ListColumn\";\r\nimport ListSlider from \"../components/ListSlider\";\r\n\r\nimport theme from \"theme\";\r\nimport { setState, state } from \"../store\";\r\n\r\nconst Browse = () => {\r\n  const params = useParams();\r\n  const [columnY, setcolumnY] = createSignal(0);\r\n  const [entityInfo, setEntityInfo] = createSignal();\r\n  const [entityData] = createResource(entityInfo, entityProvider.getInfo);\r\n  const [heroContent, setHeroContent] = createSignal({});\r\n  const navigate = useNavigate();\r\n\r\n\r\n  const isFirst = createSelector(() => {\r\n    return 0;\r\n  });\r\n  let navDrawer, lastFocused, buttonNoti;\r\n\r\n  const provider = createMemo(() => {\r\n    return createInfiniteScroll(browseProvider(params.filter || \"all\", 8));\r\n  });\r\n  createEffect(\r\n    on(\r\n      activeElement,\r\n      (elm) => {\r\n        if (elm.backdrop) {\r\n          setGlobalBackground(elm.backdrop);\r\n        }\r\n        // if (elm.entityInfo) {\r\n        //   setEntityInfo(elm.entityInfo);\r\n        // }\r\n        if (elm.heroContent) {\r\n          setHeroContent(elm.heroContent);\r\n        }\r\n      },\r\n      { defer: true }\r\n    )\r\n  );\r\n\r\n\r\n  function onRowFocus(this: ElementNode) {\r\n    this.children.selected?.setFocus();\r\n    setcolumnY((this.y || 0) * -1 + 24);\r\n    let numPages = provider().pages().length;\r\n    if (this.parent) {\r\n      if (\r\n        numPages === 0 ||\r\n        (this.parent.selected && this.parent.selected >= numPages - 2)\r\n      ) {\r\n        provider().setPage((p) => p + 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  function onEnter(this: ElementNode) {\r\n    let entity = this.children.selected;\r\n    assertTruthy(entity && entity.href);\r\n    navigate(entity.href);\r\n  }\r\n\r\n  return (\r\n    <View>\r\n      {/* <View y={100} >fgfgfgfgf {state.count}</View> */}\r\n      <Show when={provider().pages().length}>\r\n        <ContentBlock y={150} x={90} {...heroContent()}></ContentBlock>\r\n        <ListColumn\r\n          type=\"sliderList\"\r\n          onEnter={onEnter}\r\n          onFocus={onRowFocus}\r\n          data={provider().pages()}\r\n          y={columnY()}\r\n          autofocus={true}\r\n        />\r\n        {/* <ListSlider x={90} y={450} onEnter={onEnter} data={[...provider().pages()[0]]}/> */}\r\n      </Show>\r\n     \r\n      \r\n    </View>\r\n  );\r\n};\r\n\r\nexport default Browse;\r\n","import { createEffect, createMemo, on, createSignal,\r\n  Show, createSelector, For } from \"solid-js\";\r\nimport { ElementNode, View, activeElement } from '@lightningjs/solid';\r\nimport { Row } from '@lightningjs/solid-primitives';\r\nimport { useNavigate, useParams } from \"@solidjs/router\";\r\nimport styles from '../styles';\r\nimport { setGlobalBackground } from \"../state\";\r\nimport browseProvider from '../api/providers/browse';\r\nimport { createInfiniteScroll } from '../components/pagination';\r\nimport ContentBlock from \"../components/ContentBlock\";\r\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\r\nimport Thumbnail from \"../components/Thumnail\";\r\n\r\nconst Browse = () => {\r\n  const params = useParams();\r\n  const [heroContent, setHeroContent] = createSignal({});\r\n  const navigate = useNavigate();\r\n  let sliderMain;\r\n  const isFirst = createSelector(() => {\r\n    return 0;\r\n  });\r\n\r\n  const provider = createMemo(() => {\r\n    return createInfiniteScroll(browseProvider(params.filter || 'all', 20));\r\n  });\r\n  createEffect(on(activeElement, (elm) => {\r\n    if (elm.backdrop) {\r\n      setGlobalBackground(elm.backdrop);\r\n    }\r\n    if (elm.heroContent) {\r\n      setHeroContent(elm.heroContent);\r\n    }\r\n    \r\n  }, { defer: true}))\r\n\r\n  function onEnter(this: ElementNode) {\r\n    let entity = this.children.selected;\r\n    assertTruthy(entity && entity.href);\r\n    navigate(entity.href)\r\n  };\r\n\r\n  const [rowX, setRowX] = createSignal(90);\r\n\r\n  function moveRow(row) {\r\n    setRowX(row.selected * -227 + 90);\r\n    if([].concat.apply([], provider().pages()).length - row.selected < 9) {\r\n      provider().setPage(p => p + 1);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Show when={provider().pages().length} ref={sliderMain}>\r\n      <View>\r\n        <ContentBlock y={200} x={90} {...heroContent()}></ContentBlock>\r\n        <Row onSelectedChanged={moveRow} onEnter={onEnter}\r\n          transition={{ x: {delay: 20, duration: 300}}} animate\r\n          x={rowX()} y={450} width={4400} style={styles.Row} justifyContent={'flexStart'} gap={40}>\r\n          <For each={[].concat.apply([], provider().pages())}>\r\n            {(items :any, i) => <Thumbnail {...items} autofocus={isFirst(i())}/>}\r\n          </For>\r\n        </Row>\r\n      </View>\r\n    </Show>\r\n  );\r\n};\r\n\r\nexport default Browse;\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport default {\r\n  Wrapper: {\r\n    x: -4,\r\n    y: 0,\r\n    alpha: 1,\r\n    width: window.innerWidth - 100,\r\n    height: window.innerHeight,\r\n    color: hexColor(\"#000000\"),\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  ImageBackground: {\r\n    x: 0,\r\n    y: 0,\r\n    width: window.innerWidth - 100,\r\n    height: window.innerHeight,\r\n    alpha: 1,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  ImageBackgroundGradient: {\r\n    x: 0,\r\n    y: 0,\r\n    zIndex: 10,\r\n    alpha: 1,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  DetailMain: {\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\n\r\nexport default {\r\n  Wrapper: {\r\n    x: 0,\r\n    y: window.innerHeight / 3,\r\n    width: window.innerWidth,\r\n    height: window.innerHeight,\r\n    display: \"flex\",\r\n    alignItems: \"flexEnd\",\r\n    justifyContent: \"center\",\r\n    flexDirection: \"column\",\r\n    gap: 20,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Main: {\r\n    x: 0,\r\n    y: 0,\r\n    alpha: 1,\r\n    width: window.innerWidth - 100,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    gap: 20,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Title: {\r\n    fontSize: 35,\r\n    boxsizing: \"border-box\",\r\n    height: 35,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  QuantityItem: {\r\n    idth: window.innerWidth / 2,\r\n    fontSize: 20,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  OverView: {\r\n    height: 100,\r\n    display: \"flex\",\r\n    alignItems: \"flexStart\",\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  OverViewText: {\r\n    width: window.innerWidth / 2,\r\n    fontSize: 20,\r\n    contain: 'both',\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Quantity: {\r\n    height: 20,\r\n    display: \"flex\",\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Rate: {\r\n    height: 20,\r\n    display: \"flex\",\r\n    gap: 5,\r\n    alignItems: \"center\",\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  RateStar: {\r\n    height: 16,\r\n    width: 16,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Section: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    height: 30,\r\n    gap: 10,\r\n    alignItems: \"center\",\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Control: {\r\n    height: 50,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    gap: 10,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  ControlItem: {\r\n    fontSize: 20,\r\n    width: 150,\r\n    height: 40,\r\n    color: hexColor(\"#121212\"),\r\n    alpha: 0.9,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    borderRadius: 6,\r\n    border: {\r\n      width: 2,\r\n      color: hexColor(\"#ffffff\"),\r\n    },\r\n    focus: {\r\n      scale: [1.1, { duration: 200 }],\r\n    }\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  ControlItemText: {\r\n    color: hexColor(\"#ffffff\"),\r\n    fontSize: 20,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  DetailMain: {\r\n    y: 200,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\n\r\nexport default {\r\n  Wrapper: {\r\n    height: 400,\r\n    width: window.innerWidth - 100,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Title: {\r\n    color: hexColor(\"#ffffff\"),\r\n    fontSize: 20,\r\n    width: window.innerWidth / 2,\r\n    alpha: 0.6,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Tabs: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    gap: 20,\r\n    height: 30,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { Text, View } from \"@lightningjs/solid\";\r\nimport styles from \"./DetailMore.style\";\r\nimport { onMount } from \"solid-js\";\r\n\r\nexport default function DetailMore(props) {\r\n  onMount(() => {\r\n    console.log(window);\r\n  })\r\n  return (\r\n    <View style={styles.Wrapper}>\r\n      <View style={styles.Tabs}>\r\n        <Text style={styles.Title}>More like this</Text>\r\n        <Text style={styles.Title}>Available now</Text>\r\n        <Text style={styles.Title}>On this week</Text>\r\n        <Text style={styles.Title}>Parents' guide</Text>\r\n        <Text style={styles.Title}>Rating</Text>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import { Text, View } from \"@lightningjs/solid\";\r\nimport styles from \"./Detail.style\";\r\nimport { movieDetailState, setFocusMenu } from \"../../state\";\r\nimport { Column, Row } from \"@lightningjs/solid-primitives\";\r\nimport DetailMore from \"./DetailMore\";\r\nconst basePath = import.meta.env.BASE_URL;\r\n\r\nexport default function DetailMovie(props) {\r\n  function focusDetail() {\r\n    console.log(props.data)\r\n  }\r\n\r\n  const displayRuntime = (data) => {\r\n    const hours = Math.floor(data / 60);\r\n    const minutes = data % 60;\r\n    return `${hours}h ${minutes}m`\r\n  }\r\n\r\n  return (\r\n    <View\r\n      style={styles.Wrapper}\r\n      onFocus={focusDetail}\r\n      autofocus\r\n      plinko onLeft={() => {\r\n        setFocusMenu(true);\r\n      }}\r\n    >\r\n      <Column style={styles.Main} skipFocus plinko>\r\n        <Text style={styles.Title} skipFocus forwardStates>{props.data.title}</Text>\r\n        <View style={styles.Section}>\r\n          <View style={styles.Rate} skipFocus forwardStates>\r\n            <View src={basePath + 'assets/star-active.png'} style={styles.RateStar}></View>\r\n            <View src={basePath + 'assets/star-active.png'} style={styles.RateStar}></View>\r\n            <View src={basePath + 'assets/star-active.png'} style={styles.RateStar}></View>\r\n            <View src={basePath + 'assets/star.png'} style={styles.RateStar}></View>\r\n            <View src={basePath + 'assets/star.png'} style={styles.RateStar}></View>\r\n          </View>\r\n          <View style={styles.Quantity} skipFocus forwardStates>\r\n            {props.data.heroContent.badges.map((quantity, index) => (\r\n              <Text key={index} style={styles.QuantityItem}>{quantity}</Text>\r\n            ))}\r\n          </View>\r\n          <Text style={styles.QuantityItem} skipFocus forwardStates>{displayRuntime(props.data.runtime)}</Text>\r\n        </View>\r\n        <Row style={styles.Control} skipFocus plinko>\r\n          <View style={styles.ControlItem} skipFocus><Text style={styles.ControlItemText}>Play</Text></View>\r\n          <View style={styles.ControlItem} skipFocus><Text style={styles.ControlItemText}>Add</Text></View>\r\n        </Row>\r\n        <View style={styles.OverView}>\r\n          <Text style={styles.OverViewText} skipFocus forwardStates>{props.data.overview}</Text>\r\n        </View>\r\n      </Column>\r\n      <DetailMore />\r\n    </View>\r\n  );\r\n}\r\n","import { View, hexColor } from '@lightningjs/solid';\r\nimport styles from '../../assets/styles/detailStyles';\r\nimport DetailMovie from '../components/DetailMovie';\r\nimport { useParams, useLocation } from \"@solidjs/router\";\r\nimport { Show, createEffect, createResource, on } from 'solid-js';\r\nimport * as provider from '../api/providers/entity';\r\n\r\nexport default function DetailPage() {\r\n  const params = useParams();\r\n  const location = useLocation();\r\n  const [data] = createResource(() => ({...params}), provider.getInfo);\r\n\r\n  createEffect(on(data, (data) => {\r\n    console.log(location)\r\n    console.log(data);\r\n  }, { defer: true}))\r\n  \r\n  return (\r\n    <>\r\n      <Show when={data()?.backdrop_path}>\r\n        <View\r\n          style={styles.ImageBackground}\r\n          zIndex={-5}\r\n          src={`https://image.tmdb.org/t/p/original/${data()?.backdrop_path}`}\r\n          skipFocus\r\n        ></View>\r\n        <View\r\n          alpha={0.97}\r\n          style={styles.DetailMain}\r\n          animate\r\n          effects={{\r\n            radialGradient: {\r\n              colors: [0x0000007C, 0x0000007C, hexColor(\"#131313\")],\r\n              stops: [1.5, 0.1, 1.3],\r\n              height: 700,\r\n              width: window.innerWidth - 500,\r\n              pivot: [0.9, -0.1], \r\n            },\r\n          }}\r\n          skipFocus\r\n        ></View>\r\n        <DetailMovie data={data()} autofocus/>\r\n      </Show>\r\n    </>\r\n  );\r\n}\r\n","import { IntrinsicNodeStyleProps, hexColor } from \"@lightningjs/solid\";\r\nimport theme from 'theme';\r\n\r\nexport default {\r\n  Wrapper: {\r\n    height: 1080,\r\n    y: 0,\r\n    fontFamily: \"Roboto\",\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Main: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    height: 1080,\r\n    gap: 20,\r\n    x: 20\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  SettingRow: {\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Title: {\r\n    fontSize: 20,\r\n    color: hexColor(\"#ffffff\"),\r\n    y: 0,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n\r\n  // Select styles\r\n  Select: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    gap: 5,\r\n    width: 1000\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  SelectTitle: {\r\n    width: 100,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  SelectTitleContent: {\r\n    fontSize: 20,\r\n    lineHeight: 50,\r\n    color: hexColor(\"#ffffff\"),\r\n    y: 0,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  Option: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    width: 100,\r\n    gap: 10,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  OptionIcon: {\r\n    width: 18,\r\n    height: 18,\r\n    borderRadius: 9,\r\n    color: hexColor(\"#ffffff\"),\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    scale: 1,\r\n    focus: {\r\n      scale: 1.2,\r\n    }\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  OptionCenterIcon: {\r\n    width: 12,\r\n    height: 12,\r\n    borderRadius: 6,\r\n    selected: {\r\n      color: hexColor(\"#f14d4d\"),\r\n    },\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  OptionTitle: {\r\n    contain: 'both',\r\n    fontSize: 20,\r\n    width: 60,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  // \r\n\r\n  btnSave: {\r\n    height: 35,\r\n    width: 100,\r\n    color: hexColor(\"#333333\"),\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    border: {\r\n      color: hexColor(\"#ffffff\"),\r\n      width: 0,\r\n    },\r\n    focus: {\r\n      scale: 1.05,\r\n      border: {\r\n        width: 2,\r\n        color: hexColor(\"#ffffff\"),\r\n      }\r\n    }\r\n  } satisfies IntrinsicNodeStyleProps,\r\n  btnSaveText: {\r\n    fontSize: 20,\r\n  } satisfies IntrinsicNodeStyleProps,\r\n};\r\n","import { ElementNode, Text, View } from '@lightningjs/solid';\r\nimport { Column, Row } from '@lightningjs/solid-primitives';\r\nimport styles from '../../assets/styles/settingStyles';\r\nimport Title from '../components/Title';\r\nimport { createSignal } from 'solid-js';\r\n\r\nexport default function SettingPage() {\r\n  const [language, setLanguage] = createSignal<any>(\"JP\");\r\n\r\n  function focusRowSettingLanguage(this :ElementNode) {\r\n    // console.log(this);\r\n    // this.children[1].setFocus();\r\n    this.setFocus();\r\n  }\r\n\r\n  function focusItem(this :ElementNode) {\r\n    console.log(this.value);\r\n    this.setFocus();\r\n    if(this.value) {\r\n      setLanguage(this.value);\r\n    }\r\n   \r\n  }\r\n\r\n  return (\r\n    <View style={styles.Wrapper}>\r\n      {/* <Column style={styles.Main} autofocus plinko>\r\n        <Title title={\"Setting\"} skipFocus></Title>\r\n        <Row style={styles.Select} onFocus={focusRowSettingLanguage} plinko>\r\n          <View style={styles.SelectTitle} skipFocus>\r\n            <Text style={styles.SelectTitleContent}>Language: </Text>\r\n          </View>\r\n          <View style={styles.Option} forwardStates onFocus={focusItem} value={\"JP\"}>\r\n            <View style={styles.OptionIcon} forwardStates animate>\r\n              <View style={styles.OptionCenterIcon} animate></View>\r\n            </View>\r\n            <Text style={styles.OptionTitle} skipFocus>JP</Text>\r\n          </View>\r\n          <View style={styles.Option} forwardStates onFocus={focusItem} value={\"EN\"}>\r\n            <View style={styles.OptionIcon} forwardStates animate>\r\n              <View style={styles.OptionCenterIcon} animate></View>\r\n            </View>\r\n            <Text style={styles.OptionTitle} skipFocus>EN</Text>\r\n          </View>\r\n        </Row>\r\n        <View style={styles.btnSave} animate><Text style={styles.btnSaveText}>Save</Text></View>\r\n      </Column> */}\r\n    </View>\r\n  );\r\n}\r\n","import { render, Canvas, Config } from '@lightningjs/solid';\r\nimport { HashRouter, Route } from \"@solidjs/router\";\r\nimport App from './pages/App';\r\nimport coreExtensionModuleUrl from './AppCoreExtensions.js?importChunkUrl';\r\nimport coreWorkerUrl from './threadx-core-worker.js?importChunkUrl';\r\nimport HomePage from './pages/Home';\r\nimport SearchPage from './pages/Search';\r\nimport VideoPage from './pages/Video';\r\nimport TiviPage from './pages/Tivi';\r\nimport NotFound from './pages/NotFound';\r\nimport Videos from './pages/Videos';\r\nimport EXListSlider from './pages/EXListSlider';\r\nimport DetailPage from './pages/Detail';\r\nimport SettingPage from './pages/Setting';\r\n\r\nConfig.debug = false;\r\nConfig.fontSettings.fontFamily = 'Roboto';\r\nConfig.fontSettings.color = 0xffffffff;\r\n\r\nconst driver = 'main' as 'main' | 'threadx';\r\n\r\nvar ua = navigator.userAgent.toLowerCase();\r\nvar isAndroid = ua.indexOf(\"mobile\") > -1;\r\n\r\nrender(() =>  (\r\n  <Canvas options={{\r\n    coreExtensionModule: coreExtensionModuleUrl,\r\n    threadXCoreWorkerUrl: driver === 'threadx' ? coreWorkerUrl : undefined,\r\n    appWidth: (isAndroid && window.devicePixelRatio > 1) ? 1920 :  window.innerWidth,\r\n    appHeight: (isAndroid && window.devicePixelRatio > 1) ? 1080 :  window.innerHeight,\r\n    deviceLogicalPixelRatio: (isAndroid && window.devicePixelRatio > 1) ? 0.5 : 1,\r\n  }}>\r\n    <HashRouter root={App}>\r\n      <Route path=\"/\" component={HomePage} />\r\n      <Route path=\"/search\" component={SearchPage} />\r\n      <Route path=\"/videos\" component={Videos} />\r\n      <Route path=\"/tv\" component={TiviPage} />\r\n      <Route path=\"/list\" component={EXListSlider} />\r\n      <Route path=\"/:type/:id\" component={DetailPage} />\r\n      <Route path=\"/setting\" component={SettingPage} />\r\n      <Route path=\"/*all\" component={NotFound} />\r\n    </HashRouter>\r\n  </Canvas>\r\n));\r\n"],"file":"assets/index-99a8d7f2.js"}