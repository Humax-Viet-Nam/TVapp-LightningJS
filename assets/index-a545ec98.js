var Ls=Object.defineProperty;var Ps=(r,t,e)=>t in r?Ls(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var d=(r,t,e)=>(Ps(r,typeof t!="symbol"?t+"":t,e),e);import{E as je,T as Ns,W as Mr,C as ks}from"./CoreExtension-584164f0.js";function Bu(){import.meta.url,import("_").catch(()=>1);async function*r(){}}function Os(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();function Fs(){var r='<video id="video" tabindex="0" poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAEsCAYAAAAhNGCdAAAAAXNSR0IArs4c6QAAELlJREFUeF7t1kERAAAIAkHpX9oeN2sDFh/sHAECBAgQIECAAIGwwMLZRCNAgAABAgQIECBwBq8nIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAgQf4tAEt5FxRQwAAAABJRU5ErkJggg==" hidden></video><div id="video-controls" class="controls display-control"><button id="playpause" tabindex="0" type="button" data-state="play"></button><button id="back" tabindex="0" type="button" data-state="back"></button><button id="next" tabindex="0" type="button" data-state="next"></button><button id="max" tabindex="0" type="button" data-state="max"></button><button id="mute" type="button" data-state="mute">Mute/Unmute</button><div class="dropdown"><button id="quality-btn" class="dropbtn btn-settings"></button><div id="quality" class="dropdown-content"></div></div><div data-type="video" id="live-indicator" class="display_none"><span id="red-dot"></span><span id="live-text">Live</span></div><div id="time"><span id="current-time">10:11</span>/<span id="end-time">11:23</span></div><div class="progress"><progress id="progress" tabindex="0" value="0" min="0"><span id="progress-bar"></span></progress></div></div>',t=document.getElementById("app"),e=document.createElement("div");e.id="player",e.innerHTML=r.trim(),t.parentNode.insertBefore(e,t.nextSibling)}document.addEventListener("DOMContentLoaded",Fs);const Ni=(r,t)=>r===t,fn=Symbol("solid-proxy"),Ds=Symbol("solid-track"),hn={equals:Ni};let ki=Mi;const Se=1,dn=2,Oi={owned:null,cleanups:null,context:null,owner:null},Qn={};var W=null;let zn=null,Y=null,le=null,Be=null,Bn=0;function ht(r,t){const e=Y,n=W,i=r.length===0,s=t===void 0?n:t,o=i?Oi:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=i?r:()=>r(()=>he(()=>Pn(o)));W=o,Y=null;try{return Ne(a,!0)}finally{Y=e,W=n}}function $(r,t){t=t?Object.assign({},hn,t):hn;const e={value:r,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(e.value)),Di(e,i));return[Fi.bind(e),n]}function Jn(r,t,e){const n=$t(r,t,!0,Se);qe(n)}function _e(r,t,e){const n=$t(r,t,!1,Se);qe(n)}function ce(r,t,e){ki=js;const n=$t(r,t,!1,Se),i=Zn&&zt(Zn);i&&(n.suspense=i),(!e||!e.render)&&(n.user=!0),Be?Be.push(n):qe(n)}function K(r,t,e){e=e?Object.assign({},hn,e):hn;const n=$t(r,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=e.equals||void 0,qe(n),Fi.bind(n)}function Ms(r){return r&&typeof r=="object"&&"then"in r}function vr(r,t,e){let n,i,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(n=!0,i=r,s=t||{}):(n=r,i=t,s=e||{});let o=null,a=Qn,l=!1,c="initialValue"in s,u=typeof n=="function"&&K(n);const f=new Set,[h,p]=(s.storage||$)(s.initialValue),[g,m]=$(void 0),[E,S]=$(void 0,{equals:!1}),[y,b]=$(c?"ready":"unresolved");function x(w,v,B,N){return o===w&&(o=null,N!==void 0&&(c=!0),(w===a||v===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(N,{value:v})),a=Qn,_(v,B)),v}function _(w,v){Ne(()=>{v===void 0&&p(()=>w),b(v!==void 0?"errored":c?"ready":"unresolved"),m(v);for(const B of f.keys())B.decrement();f.clear()},!1)}function R(){const w=Zn,v=h(),B=g();if(B!==void 0&&!o)throw B;return Y&&!Y.user&&w&&Jn(()=>{E(),o&&(w.resolved||f.has(w)||(w.increment(),f.add(w)))}),v}function I(w=!0){if(w!==!1&&l)return;l=!1;const v=u?u():n;if(v==null||v===!1){x(o,he(h));return}const B=a!==Qn?a:he(()=>i(v,{value:h(),refetching:w}));return Ms(B)?(o=B,"value"in B?(B.status==="success"?x(o,B.value,void 0,v):x(o,void 0,void 0,v),B):(l=!0,queueMicrotask(()=>l=!1),Ne(()=>{b(c?"refreshing":"pending"),S()},!1),B.then(N=>x(B,N,void 0,v),N=>x(B,void 0,zi(N),v)))):(x(o,B,void 0,v),B)}return Object.defineProperties(R,{state:{get:()=>y()},error:{get:()=>g()},loading:{get(){const w=y();return w==="pending"||w==="refreshing"}},latest:{get(){if(!c)return R();const w=g();if(w&&!o)throw w;return h()}}}),u?Jn(()=>I(!1)):I(!1),[R,{refetch:I,mutate:p}]}function Qt(r,t=Ni,e){const n=new Map,i=$t(s=>{const o=r();for(const[a,l]of n.entries())if(t(a,o)!==t(a,s))for(const c of l.values())c.state=Se,c.pure?le.push(c):Be.push(c);return o},void 0,!0,Se);return qe(i),s=>{const o=Y;if(o){let a;(a=n.get(s))?a.add(o):n.set(s,a=new Set([o])),Ue(()=>{a.delete(o),!a.size&&n.delete(s)})}return t(s,i.value)}}function Qs(r){return Ne(r,!1)}function he(r){if(Y===null)return r();const t=Y;Y=null;try{return r()}finally{Y=t}}function ye(r,t,e){const n=Array.isArray(r);let i,s=e&&e.defer;return o=>{let a;if(n){a=Array(r.length);for(let c=0;c<r.length;c++)a[c]=r[c]()}else a=r();if(s){s=!1;return}const l=he(()=>t(a,i,o));return i=a,l}}function Nt(r){ce(()=>he(r))}function Ue(r){return W===null||(W.cleanups===null?W.cleanups=[r]:W.cleanups.push(r)),r}function Ln(){return W}function zs(r,t){const e=W,n=Y;W=r,Y=null;try{return Ne(t,!0)}catch(i){Cr(i)}finally{W=e,Y=n}}function $s(r){const t=Y,e=W;return Promise.resolve().then(()=>{Y=t,W=e;let n;return Ne(r,!1),Y=W=null,n?n.done:void 0})}function wr(r,t){const e=Symbol("context");return{id:e,Provider:Ws(e),defaultValue:r}}function zt(r){return W&&W.context&&W.context[r.id]!==void 0?W.context[r.id]:r.defaultValue}function br(r){const t=K(r),e=K(()=>er(t()));return e.toArray=()=>{const n=e();return Array.isArray(n)?n:n!=null?[n]:[]},e}let Zn;function Fi(){if(this.sources&&this.state)if(this.state===Se)qe(this);else{const r=le;le=null,Ne(()=>pn(this),!1),le=r}if(Y){const r=this.observers?this.observers.length:0;Y.sources?(Y.sources.push(this),Y.sourceSlots.push(r)):(Y.sources=[this],Y.sourceSlots=[r]),this.observers?(this.observers.push(Y),this.observerSlots.push(Y.sources.length-1)):(this.observers=[Y],this.observerSlots=[Y.sources.length-1])}return this.value}function Di(r,t,e){let n=r.value;return(!r.comparator||!r.comparator(n,t))&&(r.value=t,r.observers&&r.observers.length&&Ne(()=>{for(let i=0;i<r.observers.length;i+=1){const s=r.observers[i],o=zn&&zn.running;o&&zn.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?le.push(s):Be.push(s),s.observers&&Qi(s)),o||(s.state=Se)}if(le.length>1e6)throw le=[],new Error},!1)),t}function qe(r){if(!r.fn)return;Pn(r);const t=Bn;Us(r,r.value,t)}function Us(r,t,e){let n;const i=W,s=Y;Y=W=r;try{n=r.fn(t)}catch(o){return r.pure&&(r.state=Se,r.owned&&r.owned.forEach(Pn),r.owned=null),r.updatedAt=e+1,Cr(o)}finally{Y=s,W=i}(!r.updatedAt||r.updatedAt<=e)&&(r.updatedAt!=null&&"observers"in r?Di(r,n):r.value=n,r.updatedAt=e)}function $t(r,t,e,n=Se,i){const s={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:W,context:W?W.context:null,pure:e};return W===null||W!==Oi&&(W.owned?W.owned.push(s):W.owned=[s]),s}function gn(r){if(r.state===0)return;if(r.state===dn)return pn(r);if(r.suspense&&he(r.suspense.inFallback))return r.suspense.effects.push(r);const t=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Bn);)r.state&&t.push(r);for(let e=t.length-1;e>=0;e--)if(r=t[e],r.state===Se)qe(r);else if(r.state===dn){const n=le;le=null,Ne(()=>pn(r,t[0]),!1),le=n}}function Ne(r,t){if(le)return r();let e=!1;t||(le=[]),Be?e=!0:Be=[],Bn++;try{const n=r();return Hs(e),n}catch(n){e||(Be=null),le=null,Cr(n)}}function Hs(r){if(le&&(Mi(le),le=null),r)return;const t=Be;Be=null,t.length&&Ne(()=>ki(t),!1)}function Mi(r){for(let t=0;t<r.length;t++)gn(r[t])}function js(r){let t,e=0;for(t=0;t<r.length;t++){const n=r[t];n.user?r[e++]=n:gn(n)}for(t=0;t<e;t++)gn(r[t])}function pn(r,t){r.state=0;for(let e=0;e<r.sources.length;e+=1){const n=r.sources[e];if(n.sources){const i=n.state;i===Se?n!==t&&(!n.updatedAt||n.updatedAt<Bn)&&gn(n):i===dn&&pn(n,t)}}}function Qi(r){for(let t=0;t<r.observers.length;t+=1){const e=r.observers[t];e.state||(e.state=dn,e.pure?le.push(e):Be.push(e),e.observers&&Qi(e))}}function Pn(r){let t;if(r.sources)for(;r.sources.length;){const e=r.sources.pop(),n=r.sourceSlots.pop(),i=e.observers;if(i&&i.length){const s=i.pop(),o=e.observerSlots.pop();n<i.length&&(s.sourceSlots[o]=n,i[n]=s,e.observerSlots[n]=o)}}if(r.owned){for(t=r.owned.length-1;t>=0;t--)Pn(r.owned[t]);r.owned=null}if(r.cleanups){for(t=r.cleanups.length-1;t>=0;t--)r.cleanups[t]();r.cleanups=null}r.state=0}function zi(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Cr(r,t=W){throw zi(r)}function er(r){if(typeof r=="function"&&!r.length)return er(r());if(Array.isArray(r)){const t=[];for(let e=0;e<r.length;e++){const n=er(r[e]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return r}function Ws(r,t){return function(n){let i;return _e(()=>i=he(()=>(W.context={...W.context,[r]:n.value},br(()=>n.children))),void 0),i}}const Xs=Symbol("fallback");function Qr(r){for(let t=0;t<r.length;t++)r[t]()}function Ys(r,t,e={}){let n=[],i=[],s=[],o=0,a=t.length>1?[]:null;return Ue(()=>Qr(s)),()=>{let l=r()||[],c,u;return l[Ds],he(()=>{let h=l.length,p,g,m,E,S,y,b,x,_;if(h===0)o!==0&&(Qr(s),s=[],n=[],i=[],o=0,a&&(a=[])),e.fallback&&(n=[Xs],i[0]=ht(R=>(s[0]=R,e.fallback())),o=1);else if(o===0){for(i=new Array(h),u=0;u<h;u++)n[u]=l[u],i[u]=ht(f);o=h}else{for(m=new Array(h),E=new Array(h),a&&(S=new Array(h)),y=0,b=Math.min(o,h);y<b&&n[y]===l[y];y++);for(b=o-1,x=h-1;b>=y&&x>=y&&n[b]===l[x];b--,x--)m[x]=i[b],E[x]=s[b],a&&(S[x]=a[b]);for(p=new Map,g=new Array(x+1),u=x;u>=y;u--)_=l[u],c=p.get(_),g[u]=c===void 0?-1:c,p.set(_,u);for(c=y;c<=b;c++)_=n[c],u=p.get(_),u!==void 0&&u!==-1?(m[u]=i[c],E[u]=s[c],a&&(S[u]=a[c]),u=g[u],p.set(_,u)):s[c]();for(u=y;u<h;u++)u in m?(i[u]=m[u],s[u]=E[u],a&&(a[u]=S[u],a[u](u))):i[u]=ht(f);i=i.slice(0,o=h),n=l.slice(0)}return i});function f(h){if(s[u]=h,a){const[p,g]=$(u);return a[u]=g,t(l[u],p)}return t(l[u])}}}function $i(r,t){return he(()=>r(t||{}))}function Vt(){return!0}const tr={get(r,t,e){return t===fn?e:r.get(t)},has(r,t){return t===fn?!0:r.has(t)},set:Vt,deleteProperty:Vt,getOwnPropertyDescriptor(r,t){return{configurable:!0,enumerable:!0,get(){return r.get(t)},set:Vt,deleteProperty:Vt}},ownKeys(r){return r.keys()}};function $n(r){return(r=typeof r=="function"?r():r)?r:{}}function Gs(){for(let r=0,t=this.length;r<t;++r){const e=this[r]();if(e!==void 0)return e}}function Sr(...r){let t=!1;for(let s=0;s<r.length;s++){const o=r[s];t=t||!!o&&fn in o,r[s]=typeof o=="function"?(t=!0,K(o)):o}if(t)return new Proxy({get(s){for(let o=r.length-1;o>=0;o--){const a=$n(r[o])[s];if(a!==void 0)return a}},has(s){for(let o=r.length-1;o>=0;o--)if(s in $n(r[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<r.length;o++)s.push(...Object.keys($n(r[o])));return[...new Set(s)]}},tr);const e={},n={},i=new Set;for(let s=r.length-1;s>=0;s--){const o=r[s];if(!o)continue;const a=Object.getOwnPropertyNames(o);for(let l=0,c=a.length;l<c;l++){const u=a[l];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(o,u);if(!i.has(u))f.get?(i.add(u),Object.defineProperty(e,u,{enumerable:!0,configurable:!0,get:Gs.bind(n[u]=[f.get.bind(o)])})):(f.value!==void 0&&i.add(u),e[u]=f.value);else{const h=n[u];h?f.get?h.push(f.get.bind(o)):f.value!==void 0&&h.push(()=>f.value):e[u]===void 0&&(e[u]=f.value)}}}return e}function Vs(r,...t){if(fn in r){const i=new Set(t.length>1?t.flat():t[0]),s=t.map(o=>new Proxy({get(a){return o.includes(a)?r[a]:void 0},has(a){return o.includes(a)&&a in r},keys(){return o.filter(a=>a in r)}},tr));return s.push(new Proxy({get(o){return i.has(o)?void 0:r[o]},has(o){return i.has(o)?!1:o in r},keys(){return Object.keys(r).filter(o=>!i.has(o))}},tr)),s}const e={},n=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(r)){const s=Object.getOwnPropertyDescriptor(r,i),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,l=0;for(const c of t)c.includes(i)&&(a=!0,o?n[l][i]=s.value:Object.defineProperty(n[l],i,s)),++l;a||(o?e[i]=s.value:Object.defineProperty(e,i,s))}return[...n,e]}const Ks=r=>"Stale read from <".concat(r,">.");function Le(r){const t="fallback"in r&&{fallback:()=>r.fallback};return K(Ys(()=>r.each,r.children,t||void 0))}function Ee(r){const t=r.keyed,e=K(()=>r.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return K(()=>{const n=e();if(n){const i=r.children;return typeof i=="function"&&i.length>0?he(()=>i(t?n:()=>{if(!he(e))throw Ks("Show");return r.when})):i}return r.fallback},void 0,void 0)}const qs=void 0,[Je,Ui]=$(null);function Js(r){const t={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1};return r.getContext("webgl",t)||r.getContext("experimental-webgl",t)}function O(r,t){if(!r)throw new Error(t||"Assertion failed")}function zr(r,t,e){const n=Math.trunc(r>>>24),i=Math.trunc(r>>>16&255),s=Math.trunc(r>>>8&255),o=Math.trunc(r&255),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),c=Math.trunc(t>>>8&255),u=Math.trunc(t&255),f=Math.round(a*e+n*(1-e)),h=Math.round(l*e+i*(1-e)),p=Math.round(c*e+s*(1-e)),g=Math.round(u*e+o*(1-e));return(f<<24|h<<16|p<<8|g)>>>0}function Zs(r,t){const e=r>>>24,n=r>>>16&255,i=r>>>8&255,s=Math.trunc((r&255)*t);return(e<<24|n<<16|i<<8|s)>>>0}function Ct(r,t,e=!1){const n=(r&255)/255*t,i=Math.trunc((r>>>24)*n),s=Math.trunc((r>>>16&255)*n),o=Math.trunc((r>>>8&255)*n),a=Math.trunc(n*255);return e?(a<<24|o<<16|s<<8|i)>>>0:(i<<24|s<<16|o<<8|a)>>>0}function nr(r,t){return Object.prototype.hasOwnProperty.call(r,t)}class Hi{constructor(t){d(this,"releaseCallback");this.releaseCallback=t}}class eo extends Hi{constructor(e,n){var i,s;super(e);d(this,"textureMap",new Map);d(this,"zeroReferenceTextureSet",new Set);d(this,"options");this.options={textureCleanupIntervalMs:(i=n.textureCleanupIntervalMs)!=null?i:1e4,textureCleanupAgeThreadholdMs:(s=n.textureCleanupAgeThreadholdMs)!=null?s:6e4},setInterval(()=>{const o=Date.now(),a=this.options.textureCleanupAgeThreadholdMs;for(const l of this.zeroReferenceTextureSet)o-l.lastUpdate>a&&(this.releaseCallback(l.id),this.textureMap.delete(l.id),this.zeroReferenceTextureSet.delete(l))},this.options.textureCleanupIntervalMs)}registerTexture(e){var i;const n=(i=e.options)==null?void 0:i.id;if(O(n,"Texture must have an id to be registered"),!this.textureMap.has(n)){const s={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,s),this.zeroReferenceTextureSet.add(s)}}incrementTextureRefCount(e){var s;const n=(s=e.options)==null?void 0:s.id;O(n,"Texture must have an id to be registered");let i=this.textureMap.get(n);i||(this.registerTexture(e),i=this.textureMap.get(n)),O(i,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),i.nodeRefCount++,i.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(i)&&this.zeroReferenceTextureSet.delete(i)}decrementTextureRefCount(e){var s;const n=(s=e.options)==null?void 0:s.id;O(n,"Texture must have an id to be registered");const i=this.textureMap.get(n);O(i,"Texture must have been registered"),i.nodeRefCount--,i.lastUpdate=Date.now(),i.nodeRefCount===0&&this.zeroReferenceTextureSet.add(i),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class to extends Hi{constructor(e){super(e);d(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var n,i;O((n=e.options)==null?void 0:n.id,"Texture must have an ID to be registered"),this.registry.register(e,(i=e.options)==null?void 0:i.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class no extends je{constructor(e,n,i){var E,S;super();d(this,"root",null);d(this,"driver");d(this,"canvas");d(this,"settings");d(this,"nodes",new Map);d(this,"nextTextureId",1);d(this,"textureTracker");const s={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(E=e.clearColor)!=null?E:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(S=e.experimental_FinalizationRegistryTextureUsageTracker)!=null?S:!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0};this.settings=s;const{appWidth:o,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:c}=s,u=y=>{this.driver.releaseTexture(y)},f=s.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=f?new to(u):new eo(u,this.settings.textureCleanupOptions);const h=o*l,p=a*l;this.driver=i;const g=document.createElement("canvas");this.canvas=g,g.width=h*c,g.height=p*c,g.style.width="".concat(h,"px"),g.style.height="".concat(p,"px");let m;if(typeof n=="string"?m=document.getElementById(n):m=n,!m)throw new Error("Could not find target element");i.onCreateNode=y=>{this.nodes.set(y.id,y)},i.onBeforeDestroyNode=y=>{this.nodes.delete(y.id)},i.onFpsUpdate=y=>{this.emit("fpsUpdate",y)},m.appendChild(g)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var n,i,s,o,a,l,c,u,f,h,p,g,m,E;return this.driver.createTextNode({...this.resolveNodeDefaults(e),text:(n=e.text)!=null?n:"",textRendererOverride:(i=e.textRendererOverride)!=null?i:null,fontSize:(s=e.fontSize)!=null?s:16,fontFamily:(o=e.fontFamily)!=null?o:"sans-serif",fontStyle:(a=e.fontStyle)!=null?a:"normal",fontWeight:(l=e.fontWeight)!=null?l:"normal",fontStretch:(c=e.fontStretch)!=null?c:"normal",textAlign:(u=e.textAlign)!=null?u:"left",contain:(f=e.contain)!=null?f:"none",scrollable:(h=e.scrollable)!=null?h:!1,scrollY:(p=e.scrollY)!=null?p:0,offsetY:(g=e.offsetY)!=null?g:0,letterSpacing:(m=e.letterSpacing)!=null?m:0,debug:(E=e.debug)!=null?E:{}})}resolveNodeDefaults(e){var l,c,u,f,h,p,g,m,E,S,y,b,x,_,R,I,w,v,B,N,L,Q,U,C,T,D,M,z,H,de,me,V,se,xe,q,G,Fe,ge,De,Yt,Gt,We,Xe,Ye,pt;const n=(l=e.color)!=null?l:4294967295,i=(f=(u=(c=e.colorTl)!=null?c:e.colorTop)!=null?u:e.colorLeft)!=null?f:n,s=(g=(p=(h=e.colorTr)!=null?h:e.colorTop)!=null?p:e.colorRight)!=null?g:n,o=(S=(E=(m=e.colorBl)!=null?m:e.colorBottom)!=null?E:e.colorLeft)!=null?S:n,a=(x=(b=(y=e.colorBr)!=null?y:e.colorBottom)!=null?b:e.colorRight)!=null?x:n;return{x:(_=e.x)!=null?_:0,y:(R=e.y)!=null?R:0,width:(I=e.width)!=null?I:0,height:(w=e.height)!=null?w:0,alpha:(v=e.alpha)!=null?v:1,clipping:(B=e.clipping)!=null?B:!1,color:n,colorTop:(N=e.colorTop)!=null?N:n,colorBottom:(L=e.colorBottom)!=null?L:n,colorLeft:(Q=e.colorLeft)!=null?Q:n,colorRight:(U=e.colorRight)!=null?U:n,colorBl:o,colorBr:a,colorTl:i,colorTr:s,zIndex:(C=e.zIndex)!=null?C:0,zIndexLocked:(T=e.zIndexLocked)!=null?T:0,parent:(D=e.parent)!=null?D:null,texture:(M=e.texture)!=null?M:null,shader:(z=e.shader)!=null?z:null,src:(H=e.src)!=null?H:"",scale:(de=e.scale)!=null?de:null,scaleX:(V=(me=e.scaleX)!=null?me:e.scale)!=null?V:1,scaleY:(xe=(se=e.scaleY)!=null?se:e.scale)!=null?xe:1,mount:(q=e.mount)!=null?q:0,mountX:(Fe=(G=e.mountX)!=null?G:e.mount)!=null?Fe:0,mountY:(De=(ge=e.mountY)!=null?ge:e.mount)!=null?De:0,pivot:(Yt=e.pivot)!=null?Yt:.5,pivotX:(We=(Gt=e.pivotX)!=null?Gt:e.pivot)!=null?We:.5,pivotY:(Ye=(Xe=e.pivotY)!=null?Xe:e.pivot)!=null?Ye:.5,rotation:(pt=e.rotation)!=null?pt:0}}destroyNode(e){return this.driver.destroyNode(e)}createTexture(e,n,i){const s=this.nextTextureId++,o={descType:"texture",txType:e,props:n,options:{...i,id:s}};return this.textureTracker.registerTexture(o),o}createShader(e,n){return{descType:"shader",shType:e,props:n}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}const $r=r=>r&&!(r&r-1),oe=(r,t,e,n)=>{const i=3*r,s=3*(e-r)-i,o=1-i-s,a=3*t,l=3*(n-t)-a,c=1-a-l;return function(u){if(u>=1)return 1;if(u<=0)return 0;let f=.5,h,p,g;for(let S=0;S<20;S++){if(h=f*(f*(f*o+s)+i),g=u-h,g>-1e-8&&g<1e-8)return f*(f*(f*c+l)+a);if(p=f*(f*(3*o)+2*s)+i,p>1e-10&&p<1e-10)break;f+=g/p}let m=0,E=1;for(let S=0;S<20;S++){if(f=.5*(m+E),h=f*(f*(f*o+s)+i),g=u-h,g>-1e-8&&g<1e-8)return f*(f*(f*c+l)+a);g<0?E=f:m=f}}},ro=r=>{switch(r){case"linear":return function(e){return e};case"ease":return oe(.25,.1,.25,1);case"ease-in":return oe(.42,0,1,1);case"ease-out":return oe(0,0,.58,1);case"ease-in-out":return oe(.42,0,.58,1);case"ease-in-sine":return oe(.12,0,.39,0);case"ease-out-sine":return oe(.12,0,.39,0);case"ease-in-out-sine":return oe(.37,0,.63,1);case"ease-in-cubic":return oe(.32,0,.67,0);case"ease-out-cubic":return oe(.33,1,.68,1);case"ease-in-out-cubic":return oe(.65,0,.35,1);case"ease-in-circ":return oe(.55,0,1,.45);case"ease-out-circ":return oe(0,.55,.45,1);case"ease-in-out-circ":return oe(.85,0,.15,1);case"ease-in-back":return oe(.36,0,.66,-.56);case"ease-out-back":return oe(.34,1.56,.64,1);case"ease-in-out-back":return oe(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return e===1?1:0};default:const t="cubic-bezier(";if(r&&r.indexOf(t)===0){const e=r.substr(t.length,r.length-t.length-1).split(",");if(e.length!==4)return console.warn("Unknown timing function: "+r),function(a){return a};const n=parseFloat(e[0]||"0.42"),i=parseFloat(e[1]||"0"),s=parseFloat(e[2]||"1"),o=parseFloat(e[3]||"1");return isNaN(n)||isNaN(i)||isNaN(s)||isNaN(o)?(console.warn(" Unknown timing function: "+r),function(a){return a}):oe(n,i,s,o)}else return console.warn("Unknown timing function: "+r),function(e){return e}}};Math.hypot||(Math.hypot=(...r)=>{let t=0,e=r.length;for(;e--;)t+=r[e]*r[e];return Math.sqrt(t)});class io extends je{constructor(e,n,i){super();d(this,"node");d(this,"props");d(this,"settings");d(this,"propStartValues",{});d(this,"restoreValues",{});d(this,"progress",0);d(this,"timingFunction");d(this,"propsList");this.node=e,this.props=n,this.settings=i,this.propStartValues={},this.propsList=Object.keys(n),this.propsList.forEach(s=>{this.propStartValues[s]=e[s]}),this.timingFunction=s=>s,i.easing&&typeof i.easing=="string"&&(this.timingFunction=ro(i.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const n=this.props[e],i=this.propStartValues[e];this.props[e]=i,this.propStartValues[e]=n}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,n,i){return(this.timingFunction(e)||e)*(i-n)+n}update(e){const{duration:n,loop:i,easing:s,stopMethod:o}=this.settings;if(!n){this.emit("finished",{});return}if(this.progress+=e/n,this.progress>1&&(this.progress=i?0:1,o)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const l=this.propsList[a],c=this.props[l],u=this.propStartValues[l],f=c;if(l.indexOf("color")!==-1){if(u===f){this.node[l]=u;continue}if(s){const h=this.timingFunction(this.progress)||this.progress,p=zr(u,f,h);this.node[l]=p;continue}this.node[l]=zr(u,f,this.progress);continue}if(s){this.node[l]=this.applyEasing(this.progress,u,f);continue}this.node[l]=u+(f-u)*this.progress}this.progress===1&&this.emit("finished",{})}}class so{constructor(t,e){d(this,"manager");d(this,"animation");d(this,"stoppedPromise",null);d(this,"stoppedResolve",null);d(this,"state");this.manager=t,this.animation=e,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){this.makeStoppedPromise();const t=this.stoppedPromise;return O(t),t}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(t=>{this.stoppedResolve=t}))}finished(){O(this.stoppedResolve);const{loop:t,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!t&&this.manager.unregisterAnimation(this.animation)}}const Ie=r=>{const t=r>>>24,e=r>>>16&255,n=r>>>8&255,i=r&255;return[t/255,e/255,n/255,i/255]};function oo(r){return(r&255)/255}function Un(r){const t=Math.floor(r[0]*255),e=Math.floor(r[1]*255),n=Math.floor(r[2]*255),i=Math.floor(r[3]*255);return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(i.toFixed(4),")")}function dt(r,t,e,n,i){return i?(i.x1=r,i.y1=t,i.x2=e,i.y2=n,i):{x1:r,y1:t,x2:e,y2:n}}function ji(r,t,e){const n=dt(Math.max(r.x1,t.x1),Math.max(r.y1,t.y1),Math.min(r.x2,t.x2),Math.min(r.y2,t.y2),e);return n.x1<n.x2&&n.y1<n.y2?n:dt(0,0,0,0,n)}function Wi(r,t){const e=Math.max(r.x,t.x),n=Math.max(r.y,t.y),i=Math.min(r.x+r.width,t.x+t.width)-e,s=Math.min(r.y+r.height,t.y+t.height)-n;return i>0&&s>0?{x:e,y:n,width:i,height:s}:{x:0,y:0,width:0,height:0}}function ao(r,t){return r===t?!0:r===null||t===null?!1:r.x===t.x&&r.y===t.y&&r.width===t.width&&r.height===t.height}function lo(r){return r.x1<r.x2&&r.y1<r.y2}const Z=0,ee=3,fe=6,J=1,te=4,pe=7,Ae=2,ve=5,we=8;class be{constructor(t){d(this,"data");t?(this.data=new Float32Array(9),this.data[Z]=t[0],this.data[ee]=t[3],this.data[fe]=t[6],this.data[J]=t[1],this.data[te]=t[4],this.data[pe]=t[7],this.data[Ae]=t[2],this.data[ve]=t[5],this.data[we]=t[8]):this.data=new Float32Array(9)}static get temp(){return co}static multiply(t,e,n){const i=t.data[Z]*e.data[Z]+t.data[ee]*e.data[J]+t.data[fe]*e.data[Ae],s=t.data[Z]*e.data[ee]+t.data[ee]*e.data[te]+t.data[fe]*e.data[ve],o=t.data[Z]*e.data[fe]+t.data[ee]*e.data[pe]+t.data[fe]*e.data[we],a=t.data[J]*e.data[Z]+t.data[te]*e.data[J]+t.data[pe]*e.data[Ae],l=t.data[J]*e.data[ee]+t.data[te]*e.data[te]+t.data[pe]*e.data[ve],c=t.data[J]*e.data[fe]+t.data[te]*e.data[pe]+t.data[pe]*e.data[we],u=t.data[Ae]*e.data[Z]+t.data[ve]*e.data[J]+t.data[we]*e.data[Ae],f=t.data[Ae]*e.data[ee]+t.data[ve]*e.data[te]+t.data[we]*e.data[ve],h=t.data[Ae]*e.data[fe]+t.data[ve]*e.data[pe]+t.data[we]*e.data[we];return n||(n=new be),n.data[Z]=i,n.data[ee]=s,n.data[fe]=o,n.data[J]=a,n.data[te]=l,n.data[pe]=c,n.data[Ae]=u,n.data[ve]=f,n.data[we]=h,n}static identity(t){return t||(t=new be),t.data[Z]=1,t.data[ee]=0,t.data[fe]=0,t.data[J]=0,t.data[te]=1,t.data[pe]=0,t.data[Ae]=0,t.data[ve]=0,t.data[we]=1,t}static translate(t,e,n){return n||(n=new be),n.data[Z]=1,n.data[ee]=0,n.data[fe]=t,n.data[J]=0,n.data[te]=1,n.data[pe]=e,n.data[Ae]=0,n.data[ve]=0,n.data[we]=1,n}static scale(t,e,n){return n||(n=new be),n.data[Z]=t,n.data[ee]=0,n.data[fe]=0,n.data[J]=0,n.data[te]=e,n.data[pe]=0,n.data[Ae]=0,n.data[ve]=0,n.data[we]=1,n}static rotate(t,e){const n=Math.cos(t),i=Math.sin(t);return e||(e=new be),e.data[Z]=n,e.data[ee]=-i,e.data[fe]=0,e.data[J]=i,e.data[te]=n,e.data[pe]=0,e.data[Ae]=0,e.data[ve]=0,e.data[we]=1,e}static copy(t,e,n){return e||(e=new be),e.data[0]=t.data[0],e.data[1]=t.data[1],e.data[2]=t.data[2],e.data[3]=t.data[3],e.data[4]=t.data[4],e.data[5]=t.data[5],e.data[6]=t.data[6],e.data[7]=t.data[7],e.data[8]=t.data[8],e}translate(t,e){return this.data[fe]=this.data[Z]*t+this.data[ee]*e+this.data[fe],this.data[pe]=this.data[J]*t+this.data[te]*e+this.data[pe],this}scale(t,e){return this.data[Z]=this.data[Z]*t,this.data[ee]=this.data[ee]*e,this.data[J]=this.data[J]*t,this.data[te]=this.data[te]*e,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),n=Math.sin(t),i=this.data[Z]*e+this.data[ee]*n,s=this.data[ee]*e-this.data[Z]*n,o=this.data[J]*e+this.data[te]*n,a=this.data[te]*e-this.data[J]*n;return this.data[Z]=i,this.data[ee]=s,this.data[J]=o,this.data[te]=a,this}multiply(t){return be.multiply(this,t,this)}get tx(){return this.data[fe]}get ty(){return this.data[pe]}get ta(){return this.data[Z]}get tb(){return this.data[ee]}get tc(){return this.data[J]}get td(){return this.data[te]}transformPoint(t,e){return[this.data[Z]*t+this.data[ee]*e+this.data[fe],this.data[J]*t+this.data[te]*e+this.data[J]]}}const co=new be;var F;(function(r){r[r.Children=1]="Children",r[r.ScaleRotate=2]="ScaleRotate",r[r.Local=4]="Local",r[r.Global=8]="Global",r[r.Clipping=16]="Clipping",r[r.CalculatedZIndex=32]="CalculatedZIndex",r[r.ZIndexSortedChildren=64]="ZIndexSortedChildren",r[r.PremultipliedColors=128]="PremultipliedColors",r[r.WorldAlpha=256]="WorldAlpha",r[r.None=0]="None",r[r.All=511]="All"})(F||(F={}));class Er extends je{constructor(e,n){super();d(this,"stage");d(this,"children",[]);d(this,"props");d(this,"updateType",F.All);d(this,"globalTransform");d(this,"scaleRotateTransform");d(this,"localTransform");d(this,"clippingRect",null);d(this,"isRenderable",!1);d(this,"parentClippingRect",null);d(this,"worldAlpha",1);d(this,"premultipliedColorTl",0);d(this,"premultipliedColorTr",0);d(this,"premultipliedColorBl",0);d(this,"premultipliedColorBr",0);d(this,"calcZIndex",0);d(this,"isComplex",!1);d(this,"onTextureLoaded",(e,n)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:n})});d(this,"onTextureFailed",(e,n)=>{this.emit("failed",{type:"texture",error:n})});this.stage=e,this.props={...n,parent:null},this.parent=n.parent,this.updateScaleRotateTransform()}loadTexture(e,n,i=null){this.props.texture&&this.unloadTexture();const{txManager:s}=this.stage,o=s.loadTexture(e,n,i);this.props.texture=o,this.props.textureOptions=i,this.checkIsRenderable(),queueMicrotask(()=>{o.state==="loaded"?this.onTextureLoaded(o,o.dimensions):o.state==="failed"&&this.onTextureFailed(o,o.error),o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}loadShader(e,n){const i=this.stage.renderer.getShaderManager();O(i);const{shader:s,props:o}=i.loadShader(e,n);this.props.shader=s,this.props.shaderProps=o,this.checkIsRenderable()}setUpdateType(e){this.updateType|=e;const n=this.props.parent;n&&!(n.updateType&F.Children)&&n.setUpdateType(F.Children)}sortChildren(){this.children.sort((e,n)=>e.calcZIndex-n.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=be.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){O(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,n=this.props.pivotY*this.props.height,i=this.props.mountX*this.props.width,s=this.props.mountY*this.props.height;this.localTransform=be.translate(e-i+this.props.x,n-s+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-n),this.setUpdateType(F.Global)}update(e,n=null){this.updateType&F.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(F.Local)),this.updateType&F.Local&&(this.updateLocalTransform(),this.setUpdateType(F.Global));const i=this.props.parent;let s=F.None;this.updateType&F.Global&&(O(this.localTransform),this.globalTransform=be.copy((i==null?void 0:i.globalTransform)||this.localTransform,this.globalTransform),i&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(F.Clipping|F.Children),s|=F.Global),this.updateType&F.Clipping&&(this.calculateClippingRect(n),this.checkIsRenderable(),this.setUpdateType(F.Children),s|=F.Clipping),this.updateType&F.WorldAlpha&&(i?this.worldAlpha=i.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(F.Children|F.PremultipliedColors),s|=F.WorldAlpha),this.updateType&F.PremultipliedColors&&(this.premultipliedColorTl=Ct(this.props.colorTl,this.worldAlpha,!0),this.premultipliedColorTr=Ct(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Ct(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Ct(this.props.colorBr,this.worldAlpha,!0),this.checkIsRenderable(),this.setUpdateType(F.Children),s|=F.PremultipliedColors),i&&this.updateType&F.CalculatedZIndex&&(this.calculateZIndex(),i.setUpdateType(F.ZIndexSortedChildren)),this.updateType&F.Children&&this.children.length&&this.children.forEach(o=>{o.setUpdateType(s),o.updateType!==0&&o.update(e,this.clippingRect)}),this.updateType&F.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkIsRenderable(){return this.props.texture?this.isRenderable=!0:this.props.shader?this.isRenderable=!0:this.props.clipping?this.isRenderable=!0:["color","colorTop","colorBottom","colorLeft","colorRight","colorTl","colorTr","colorBl","colorBr"].some(n=>this.props[n]!==0)?this.isRenderable=!0:this.isRenderable=!1}calculateClippingRect(e=null){if(O(this.globalTransform),this.parentClippingRect===e&&this.clippingRect)return;const n=this.globalTransform,i=n.tb!==0||n.tc!==0;let s=this.props.clipping&&!i?{x:n.tx,y:n.ty,width:this.width*n.ta,height:this.height*n.td}:null;e&&s?s=Wi(e,s):e&&(s=e),this.parentClippingRect=e,this.clippingRect=s}calculateZIndex(){var o,a;const e=this.props,n=e.zIndex||0,i=((o=e.parent)==null?void 0:o.zIndex)||0;let s=n;(a=e.parent)!=null&&a.zIndexLocked&&(s=n<i?n:i),this.calcZIndex=s}renderQuads(e){const{width:n,height:i,texture:s,textureOptions:o,shader:a,shaderProps:l}=this.props,{premultipliedColorTl:c,premultipliedColorTr:u,premultipliedColorBl:f,premultipliedColorBr:h}=this,{zIndex:p,worldAlpha:g,globalTransform:m,clippingRect:E}=this;O(m),e.addQuad({width:n,height:i,colorTl:c,colorTr:u,colorBl:f,colorBr:h,texture:s,textureOptions:o,zIndex:p,shader:a,shaderProps:l,alpha:g,clippingRect:E,tx:m.tx,ty:m.ty,ta:m.ta,tb:m.tb,tc:m.tc,td:m.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(F.Local))}get absX(){var e,n,i;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((i=(n=this.props.parent)==null?void 0:n.globalTransform)==null?void 0:i.tx)||0)}get absY(){var e,n;return this.props.y+((n=(e=this.props.parent)==null?void 0:e.absY)!=null?n:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(F.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(F.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(F.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(F.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(F.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(F.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(F.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(F.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(F.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(F.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(F.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(F.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(F.PremultipliedColors|F.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(F.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(F.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(F.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(F.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(F.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(F.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(F.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(F.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(F.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(F.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(F.CalculatedZIndex|F.Children),this.children.forEach(n=>{n.setUpdateType(F.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(F.CalculatedZIndex|F.Children),this.children.forEach(n=>{n.setUpdateType(F.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const n=this.props.parent;if(n!==e){if(this.props.parent=e,n){const i=n.children.indexOf(this);O(i!==-1,"CoreNode.parent: Node not found in old parent's children!"),n.children.splice(i,1)}e&&(e.children.push(this),this.setUpdateType(F.All),e.setUpdateType(F.Children|F.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let uo=1;function Ir(){return uo++}class rr extends je{constructor(e,n,i,s){var o;super();d(this,"rendererMain");d(this,"stage");d(this,"id");d(this,"coreNode");d(this,"_children",[]);d(this,"_src","");d(this,"_parent",null);d(this,"_texture",null);d(this,"_shader",null);d(this,"onTextureLoaded",(e,n)=>{this.emit("loaded",n)});d(this,"onTextureFailed",(e,n)=>{this.emit("failed",n)});this.rendererMain=n,this.stage=i,this.id=(o=s==null?void 0:s.id)!=null?o:Ir(),this.coreNode=s||new Er(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var i;const n=this._parent;if(this._parent=e,this.coreNode.parent=(i=e==null?void 0:e.coreNode)!=null?i:null,n){const s=n.children.indexOf(this);O(s!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),n.children.splice(s,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,n){const i=new io(this.coreNode,e,n);return new so(this.stage.animationManager,i)}}const fo=r=>{const t=()=>{if(r.updateAnimations(),!r.hasSceneUpdates()){setTimeout(t,16.666666666666668);return}r.drawFrame(),requestAnimationFrame(t)};requestAnimationFrame(t)},ho=()=>performance?performance.now():Date.now();class go{constructor(t){d(this,"textureSource");this.textureSource=t}}class po{constructor(t){d(this,"stage");this.stage=t}}class mo{}class xo{static makeCacheKey(t){return!1}static resolveDefaults(t){return{}}}function Ur(r,t,e){const n=r.createShader(t);if(!n)throw new Error;if(r.shaderSource(n,e),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS))return n;console.log(r.getShaderInfoLog(n)),r.deleteShader(n)}function yo(r,t,e){const n=r.createProgram();if(!n)throw new Error;if(r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS))return n;console.log(r.getProgramInfoLog(n)),r.deleteProgram(n)}function ir(r){return self.WebGL2RenderingContext&&r instanceof self.WebGL2RenderingContext}class He extends xo{constructor(e){super();d(this,"boundBufferCollection",null);d(this,"buffersBound",!1);d(this,"program");d(this,"vao");d(this,"renderer");d(this,"gl");d(this,"attributeBuffers");d(this,"attributeLocations");d(this,"attributeNames");d(this,"uniformLocations");d(this,"uniformTypes");d(this,"supportsIndexedTextures");const n=this.renderer=e.renderer,i=this.gl=this.renderer.gl;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const s=ir(i),o=s&&e.webgl2Extensions||!s&&e.webgl1Extensions||[],a=s?"2.0":"1.0";o.forEach(m=>{if(!i.getExtension(m))throw new Error('Shader "'.concat(this.constructor.name,'" requires extension "').concat(m,'" for WebGL ').concat(a," but wasn't found"))});const l=e.shaderSources||this.constructor.shaderSources;if(l)s&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error('Shader "'.concat(this.constructor.name,'" is missing shaderSources.'));const c=n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,u=l.vertex instanceof Function?l.vertex(c):l.vertex,f=l.fragment instanceof Function?l.fragment(c):l.fragment,h=Ur(i,i.VERTEX_SHADER,u),p=Ur(i,i.FRAGMENT_SHADER,f);if(!h||!p)throw new Error;const g=yo(i,h,p);if(!g)throw new Error;if(this.program=g,s){const m=i.createVertexArray();if(!m)throw new Error;this.vao=m,i.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(m=>{const E=i.getAttribLocation(this.program,m);if(E<0)throw new Error("".concat(this.constructor.name,': Vertex shader must have an attribute "').concat(m,'"!'));const S=i.createBuffer();if(!S)throw new Error("".concat(this.constructor.name,': Could not create buffer for attribute "').concat(m,'"'));this.attributeLocations[m]=E,this.attributeBuffers[m]=S,this.attributeNames.push(m)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(m=>{const E=i.getUniformLocation(this.program,m.name);if(this.uniformTypes[m.name]=m.uniform,!E){console.warn('Shader "'.concat(this.constructor.name,'" could not get uniform location for "').concat(m.name,'"'));return}this.uniformLocations[m.name]=E})}bindBufferAttribute(e,n,i){const s=this.gl;s.enableVertexAttribArray(e),s.bindBuffer(s.ARRAY_BUFFER,n),s.vertexAttribPointer(e,i.size,i.type,i.normalized,i.stride,i.offset)}disableAttribute(e){this.gl.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,n){return!1}bindRenderOp(e,n){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{gl:i}=e;if(this.setUniform("u_resolution",[i.canvas.width,i.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),n){if(nr(n,"$dimensions")){let s=n.$dimensions;s||(s=e.dimensions),this.setUniform("u_dimensions",[s.width,s.height])}if(nr(n,"$alpha")){let s=n.$alpha;s||(s=e.alpha),this.setUniform("u_alpha",s)}this.bindProps(n)}}setUniform(e,...n){this.gl[this.uniformTypes[e]](this.uniformLocations[e],...n)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const n in this.attributeLocations){const i=e.getBuffer(n),s=e.getAttributeInfo(n);O(i,'Buffer for "'.concat(n,'" not found')),O(s),this.bindBufferAttribute(this.attributeLocations[n],i,s)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.gl.useProgram(this.program),ir(this.gl)&&this.vao&&this.gl.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}d(He,"shaderSources");class Xi extends mo{constructor(e,n,i,s,o,a,l,c,u,f){super();d(this,"gl");d(this,"options");d(this,"buffers");d(this,"shader");d(this,"shaderProps");d(this,"alpha");d(this,"clippingRect");d(this,"dimensions");d(this,"bufferIdx");d(this,"zIndex");d(this,"length",0);d(this,"numQuads",0);d(this,"textures",[]);d(this,"maxTextures");this.gl=e,this.options=n,this.buffers=i,this.shader=s,this.shaderProps=o,this.alpha=a,this.clippingRect=l,this.dimensions=c,this.bufferIdx=u,this.zIndex=f,this.gl=e,this.maxTextures=s.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:n,maxTextures:i}=this,s=n.findIndex(a=>a===e);if(s!==-1)return s;const o=n.length;return o>=i?4294967295:(this.textures.push(e),o)}draw(){const{gl:e,shader:n,shaderProps:i,options:s}=this,{shManager:o}=s;o.useShader(n),n.bindRenderOp(this,i);const a=this.bufferIdx/24*6*2;if(e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.clippingRect){const{x:l,y:c,width:u,height:f}=this.clippingRect,h=s.pixelRatio,p=s.canvas.height,g=Math.round(l*h),m=Math.round(u*h),E=Math.round(f*h),S=Math.round(p-E-c*h);e.enable(e.SCISSOR_TEST),e.scissor(g,S,m,E)}else e.disable(e.SCISSOR_TEST);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,a)}}function Ao(r){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(n=>{t[n]=r.getParameter(r[n])}),t}function vo(r){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(n=>{t[n]=r.getExtension(n)}),t}function wo(r,t){if(!r)throw new Error("No WebGL context");const e=~~(t/80),n=new Uint16Array(e*6);for(let s=0,o=0;s<e;s+=6,o+=4)n[s]=o,n[s+1]=o+1,n[s+2]=o+2,n[s+3]=o+2,n[s+4]=o+1,n[s+5]=o+3;const i=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i),r.bufferData(r.ELEMENT_ARRAY_BUFFER,n,r.STATIC_DRAW)}const Hr=new Uint8Array([0,0,0,0]);class sr extends go{constructor(e,n){super(n);d(this,"gl");d(this,"_nativeCtxTexture",null);d(this,"_state","freed");d(this,"_w",0);d(this,"_h",0);this.gl=e}get ctxTexture(){return this._state==="freed"&&this.load(),O(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then(({width:e,height:n})=>{this._state="loaded",this._w=e,this._h=n,this.textureSource.setState("loaded",{width:e,height:n})}).catch(e=>{this._state="failed",this.textureSource.setState("failed",e),console.error(e)}))}async onLoadRequest(){var o;this._nativeCtxTexture=this.createNativeCtxTexture();const{gl:e}=this;e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Hr);const n=await((o=this.textureSource)==null?void 0:o.getTextureData());let i=0,s=0;if(O(this._nativeCtxTexture),n.data instanceof ImageBitmap||n.data instanceof ImageData){const a=n.data;i=a.width,s=a.height,e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!n.premultiplyAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),(ir(e)||$r(i)&&$r(s))&&e.generateMipmap(e.TEXTURE_2D)}else n.data===null?(i=0,s=0,e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Hr)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",n);return{width:i,height:s}}free(){this._state!=="freed"&&(this._state="freed",this._w=0,this._h=0,this._nativeCtxTexture&&(this.gl.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null))}createNativeCtxTexture(){const e=this.gl.createTexture();if(!e)throw new Error("Could not create WebGL Texture");return e}}class Ut extends je{constructor(e){super();d(this,"txManager");d(this,"dimensions",null);d(this,"error",null);d(this,"state","loading");this.txManager=e}setState(e,...n){if(this.state!==e){if(this.state=e,e==="loaded"){const i=n;this.dimensions=i[0]}else if(e==="failed"){const i=n;this.error=i[0]}this.emit(e,...n)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const Bt=class Bt extends Ut{constructor(e,n){super(e);d(this,"props");this.props=Bt.resolveDefaults(n||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),n=new Uint8ClampedArray(e.buffer);return{data:new ImageData(n,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){const n=Bt.resolveDefaults(e);return"ColorTexture,".concat(n.color)}static resolveDefaults(e){return{color:e.color||4294967295}}};d(Bt,"z$__type__Props");let mn=Bt;const _n=class _n extends Ut{constructor(e,n){super(e);d(this,"props");d(this,"parentTexture");d(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});d(this,"onParentTxFailed",(e,n)=>{this.setState("failed",n)});this.parentTexture=this.txManager.loadTexture(n.texture.txType,n.texture.props,n.texture.options),this.props=_n.resolveDefaults(n||{}),queueMicrotask(()=>{const i=this.parentTexture;i.state==="loaded"?this.onParentTxLoaded(i,i.dimensions):i.state==="failed"&&this.onParentTxFailed(i,i.error),i.on("loaded",this.onParentTxLoaded),i.on("failed",this.onParentTxFailed)})}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};d(_n,"z$__type__Props");let kt=_n;class bo extends sr{constructor(t,e){super(t,e)}async onLoadRequest(){var e,n;const t=await this.textureSource.getTextureData();return{width:((e=t.data)==null?void 0:e.width)||0,height:((n=t.data)==null?void 0:n.height)||0}}}class Yi extends He{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{gl:e}=this;e.getParameter(e.TEXTURE_BINDING_2D)!==t[0].ctxTexture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture))}}d(Yi,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Gi extends He{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});d(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:n,gl:i}=this;if(e.length>n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((o,a)=>{i.activeTexture(i.TEXTURE0+a),i.bindTexture(i.TEXTURE_2D,o.ctxTexture)});const s=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",s)}}d(Gi,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(n=>"\n          ".concat(n!==0?"else ":"","if (idx == ").concat(n,") {\n            return texture2D(textures[").concat(n,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class ae{constructor(t){d(this,"priority",1);d(this,"name","");d(this,"ref");d(this,"target");d(this,"passParameters","");d(this,"declaredUniforms","");d(this,"uniformInfo",{});const{ref:e,target:n,props:i={}}=t;this.ref=e,this.target=n;const s={},o=[];let a="";const l=this.constructor.uniforms||{};for(const c in l){const u=l[c],f=u.type,h="".concat(e,"_").concat(c);let p="";u.size&&(p="[".concat(u.size(i),"]")),o.push(h),a+="uniform ".concat(f," ").concat(h).concat(p,";"),s[c]={name:h,uniform:l[c].method}}this.passParameters=o.join(","),this.declaredUniforms=a,this.uniformInfo=s}static getEffectKey(t){return""}static getMethodParameters(t,e){const n=[];for(const i in t){const s=t[i];let o="";s.size&&(o="[".concat(s.size(e),"]")),n.push("".concat(s.type," ").concat(i).concat(o))}return n.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}d(ae,"uniforms",{}),d(ae,"methods"),d(ae,"onShaderMask"),d(ae,"onColorize"),d(ae,"onEffectMask");const ke=class ke extends He{constructor(e,n,i){const s=ke.createShader(n,i);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...s.uniforms],shaderSources:{vertex:s.vertex,fragment:s.fragment}});d(this,"effects",[]);this.effects=s.effects}bindTextures(e){const{gl:n}=this;n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e[0].ctxTexture)}bindProps(e){var i;const n=this.renderer.shManager.getRegisteredEffects();(i=e.effects)==null||i.forEach((s,o)=>{var f;const a=this.effects[o],l=n[a.name],c=(f=s.props)!=null?f:{},u=a.uniformInfo;Object.keys(c).forEach(h=>{const p=l.uniforms[h],g=u[h];let m=p.validator?p.validator(c[h],c):c[h];Array.isArray(m)&&(m=new Float32Array(m)),this.setUniform(g.name,m)})})}static createShader(e,n){const i={},s={};let o="";const a=[],l=[],c=e.effects.map(g=>{const m=n[g.type],E=m.getEffectKey(g.props||{});i[E]=i[E]?++i[E]:1;const S=i[E];S===1&&l.push({key:E,type:g.type,props:g.props});const y=new m({ref:"".concat(E).concat(S===1?"":S),target:E,props:g.props});return o+=y.declaredUniforms,a.push(...Object.values(y.uniformInfo)),y});let u="";l==null||l.forEach(g=>{var I;const m=n[g.type],E=m.resolveDefaults((I=g.props)!=null?I:{}),S=[];for(const w in m.methods){let v=w;const B=m.methods[w];s[w]&&s[w]!==B&&(v=ke.resolveMethodDuplicate(w,B,s)),s[v]=B.replace("function",v),S.push({m:w,cm:v})}let y=m.onShaderMask instanceof Function?m.onShaderMask(E):m.onShaderMask,b=m.onColorize instanceof Function?m.onColorize(E):m.onColorize,x=m.onEffectMask instanceof Function?m.onEffectMask(E):m.onEffectMask;S.forEach(w=>{const{m:v,cm:B}=w,N=new RegExp("\\$".concat(v),"g");y&&(y=y.replace(N,B)),b&&(b=b.replace(N,B)),x&&(x=x.replace(N,B))});const _=m.getMethodParameters(m.uniforms,E),R=_.length>0?", ".concat(_):"";y&&(u+="\n        float fx_".concat(g.key,"_onShaderMask(float shaderMask ").concat(R,") {\n          ").concat(y,"\n        }\n        ")),b&&(u+="\n          vec4 fx_".concat(g.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(R,") {\n            ").concat(b,"\n          }\n        ")),x&&(u+="\n          vec4 fx_".concat(g.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(R,") {\n            ").concat(x,"\n          }\n        "))});let f="";for(const g in s)f+=s[g];let h="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",p="\n\n    ";for(let g=0;g<c.length;g++){const m=c[g],E=m.passParameters.length>0?", ".concat(m.passParameters):"",S=n[m.name];S.onShaderMask&&(p+="\n        shaderMask = fx_".concat(m.target,"_onShaderMask(shaderMask ").concat(E,");\n        ")),S.onColorize&&(p+="\n        maskColor = fx_".concat(m.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(E,");\n        ")),S.onEffectMask&&(h="fx_".concat(m.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(E,")"));const y=c[g+1];(y===void 0||n[y.name].onEffectMask)&&(p+="\n          shaderColor = ".concat(h,";\n        "))}return{effects:c,uniforms:a,fragment:ke.fragment(o,f,u,p),vertex:ke.vertex()}}static resolveMethodDuplicate(e,n,i,s=0){const o=e+(s>0?s:"");return i[o]&&i[o]!==n?this.resolveMethodDuplicate(e,n,i,++s):o}static resolveDefaults(e,n){var i;return{effects:((i=e.effects)!=null?i:[]).map(s=>({type:s.type,props:n[s.type].resolveDefaults(s.props||{})})),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,n){var s;let i="";return(s=e.effects)==null||s.forEach(o=>{const l=n[o.type].getEffectKey(o.props||{});i+=",".concat(l)}),"DynamicShader".concat(i)}};d(ke,"z$__type__Props"),d(ke,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),d(ke,"fragment",(e,n,i,s)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(n,"\n\n    ").concat(i,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(s,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let ft=ke;class or extends He{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}d(or,"z$__type__Props"),d(or,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const Co=new Float32Array([1,0,0,0,1,0,0,0,1]),Rn=class Rn extends He{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){const e=Rn.resolveDefaults(t);for(const n in e)if(n==="transform")this.setUniform("u_transform",!1,e[n]);else if(n==="scrollY")this.setUniform("u_scrollY",e[n]);else if(n==="color"){const i=Ie(e.color);this.setUniform("u_color",i)}else n==="size"?this.setUniform("u_size",e[n]):n==="distanceRange"?this.setUniform("u_distanceRange",e[n]):n==="debug"&&this.setUniform("u_debug",e[n]?1:0)}static resolveDefaults(t={}){var e,n,i,s,o,a;return{transform:(e=t.transform)!=null?e:Co,scrollY:(n=t.scrollY)!=null?n:0,color:(i=t.color)!=null?i:4294967295,size:(s=t.size)!=null?s:16,distanceRange:(o=t.distanceRange)!=null?o:1,debug:(a=t.debug)!=null?a:!1}}};d(Rn,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let ar=Rn;class rt extends ae{constructor(){super(...arguments);d(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var n;return{radius:(n=e.radius)!=null?n:10}}}d(rt,"z$__type__Props"),d(rt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),d(rt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),d(rt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),d(rt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class St extends ae{constructor(){super(...arguments);d(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}d(St,"z$__type__Props"),d(St,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ie(e),method:"uniform4fv",type:"vec4"}}),d(St,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),d(St,"onColorize","\n    return color;\n  ");class it extends ae{constructor(){super(...arguments);d(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var s,o;const n=(s=e.colors)!=null?s:[4278190080,4294967295];let i=e.stops;if(!i){i=[];const a=n.length-1;for(let l=0;l<n.length;l++)i.push(l*(1/a))}return{colors:n,stops:i,angle:(o=e.angle)!=null?o:0}}}d(it,"z$__type__Props"),d(it,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(i=>Ie(i)).reduce((i,s)=>i.concat(s),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,n)=>{var a;const i=(a=n.colors)!=null?a:[];let s=e;const o=e;if(s.length===0||s&&s.length!==i.length){for(let l=0;l<i.length;l++)s[l]?(o[l]=s[l],s[l-1]===void 0&&o[l-2]!==void 0&&(o[l-1]=o[l-2]+(s[l]-o[l-2])/2)):o[l]=l*(1/(i.length-1));s=o}return o},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(it,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),d(it,"ColorLoop",e=>{let n="";for(let i=2;i<e;i++)n+="colorOut = mix(colorOut, colors[".concat(i,"], clamp((dist - stops[").concat(i-1,"]) / (stops[").concat(i,"] - stops[").concat(i-1,"]), 0.0, 1.0));");return n}),d(it,"onColorize",e=>{const n=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(n,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class Vi extends ae{constructor(){super(...arguments);d(this,"name","grayscale")}static getEffectKey(){return"grayscale"}}d(Vi,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");class st extends ae{constructor(){super(...arguments);d(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}d(st,"z$__type__Props"),d(st,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ie(e),method:"uniform4fv",type:"vec4"}}),d(st,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(st,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(st,"onColorize","\n    return color;\n  ");class ot extends ae{constructor(){super(...arguments);d(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}d(ot,"z$__type__Props"),d(ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ie(e),method:"uniform4fv",type:"vec4"}}),d(ot,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(ot,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(ot,"onColorize","\n    return color;\n  ");class at extends ae{constructor(){super(...arguments);d(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}d(at,"z$__type__Props"),d(at,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ie(e),method:"uniform4fv",type:"vec4"}}),d(at,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(at,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(at,"onColorize","\n    return color;\n  ");class lt extends ae{constructor(){super(...arguments);d(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}d(lt,"z$__type__Props"),d(lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ie(e),method:"uniform4fv",type:"vec4"}}),d(lt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(lt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(lt,"onColorize","\n    return color;\n  ");class Et extends ae{constructor(){super(...arguments);d(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var n,i,s,o,a;return{amplitude:(n=e.amplitude)!=null?n:.2,narrowness:(i=e.narrowness)!=null?i:4,blockiness:(s=e.blockiness)!=null?s:2,minimizer:(o=e.minimizer)!=null?o:8,time:(a=e.time)!=null?a:Date.now()}}}d(Et,"z$__type__Props"),d(Et,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),d(Et,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),d(Et,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class sn extends ae{constructor(){super(...arguments);d(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var n;return{fade:(n=e.fade)!=null?n:10}}}d(sn,"z$__type__Props"),d(sn,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),d(sn,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class on extends ae{constructor(){super(...arguments);d(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var s,o,a,l,c;const n=(s=e.colors)!=null?s:[4278190080,4294967295];let i=e.stops;if(!i){i=[];const u=n.length-1;for(let f=0;f<n.length;f++)i.push(f*(1/u))}return{colors:n,stops:i,width:(o=e.width)!=null?o:0,height:(l=(a=e.height)!=null?a:e.width)!=null?l:0,pivot:(c=e.pivot)!=null?c:[.5,.5]}}}d(on,"z$__type__Props"),d(on,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(i=>Ie(i)).reduce((i,s)=>i.concat(s),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,n)=>{var a;const i=(a=n.colors)!=null?a:[];let s=e;const o=e;if(s.length===0||s&&s.length!==i.length){for(let l=0;l<i.length;l++)s[l]?(o[l]=s[l],s[l-1]===void 0&&o[l-2]!==void 0&&(o[l-1]=o[l-2]+(s[l]-o[l-2])/2)):o[l]=l*(1/(i.length-1));s=o}return o},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(on,"onColorize",e=>{const n=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(n,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class ct extends ae{constructor(){super(...arguments);d(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var n,i,s,o,a,l,c;return{width:(n=e.width)!=null?n:10,progress:(i=e.progress)!=null?i:.5,offset:(s=e.offset)!=null?s:0,range:(o=e.range)!=null?o:Math.PI*2,rounded:(a=e.rounded)!=null?a:!1,radius:(l=e.radius)!=null?l:1,color:(c=e.color)!=null?c:4294967295}}}d(ct,"z$__type__Props"),d(ct,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Ie(e),method:"uniform4fv",type:"vec4"}}),d(ct,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),d(ct,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),d(ct,"onColorize","\n    return color;\n  ");class So{constructor(){d(this,"shCache",new Map);d(this,"shConstructors",{});d(this,"attachedShader",null);d(this,"effectConstructors",{});d(this,"renderer");this.registerShaderType("DefaultShader",Yi),this.registerShaderType("DefaultShaderBatched",Gi),this.registerShaderType("RoundedRectangle",or),this.registerShaderType("DynamicShader",ft),this.registerShaderType("SdfShader",ar),this.registerEffectType("border",St),this.registerEffectType("borderBottom",at),this.registerEffectType("borderLeft",lt),this.registerEffectType("borderRight",st),this.registerEffectType("borderTop",ot),this.registerEffectType("fadeOut",sn),this.registerEffectType("linearGradient",it),this.registerEffectType("radialGradient",on),this.registerEffectType("grayscale",Vi),this.registerEffectType("glitch",Et),this.registerEffectType("radius",rt),this.registerEffectType("radialProgress",ct)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const n=this.shConstructors[t];if(!n)throw new Error('Shader type "'.concat(t,'" is not registered'));if(t==="DynamicShader")return this.loadDynamicShader(e);const i=n.resolveDefaults(e),s=n.makeCacheKey(i)||n.name;if(s&&this.shCache.has(s))return{shader:this.shCache.get(s),props:i};const o=new n(this.renderer,e);return s&&this.shCache.set(s,o),{shader:o,props:i}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=ft.resolveDefaults(t,this.effectConstructors),n=ft.makeCacheKey(e,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:e};const i=new ft(this.renderer,t,this.effectConstructors);return n&&this.shCache.set(n,i),{shader:i,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}class Ki{constructor(t){d(this,"config");this.config=t}getBuffer(t){var e;return(e=this.config.find(n=>n.attributes[t]))==null?void 0:e.buffer}getAttributeInfo(t){var e;return(e=this.config.find(n=>n.attributes[t]))==null?void 0:e.attributes[t]}}const Eo=24;class qi extends po{constructor(e){super(e.stage);d(this,"gl");d(this,"system");d(this,"txManager");d(this,"shManager");d(this,"options");d(this,"quadBuffer",new ArrayBuffer(1024*1024*4));d(this,"fQuadBuffer",new Float32Array(this.quadBuffer));d(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));d(this,"renderOps",[]);d(this,"curBufferIdx",0);d(this,"curRenderOp",null);d(this,"renderables",[]);d(this,"defaultShader");d(this,"quadBufferCollection");d(this,"defaultTexture");const{canvas:n,clearColor:i,bufferMemory:s}=e;this.options=e,this.txManager=e.txManager,this.shManager=e.shManager,this.defaultTexture=new mn(this.txManager);const o=Js(n);if(!o)throw new Error("Unable to create WebGL context");this.gl=o;const a=Ie(i);o.viewport(0,0,n.width,n.height),o.clearColor(a[0],a[1],a[2],a[3]),wo(o,s),this.system={parameters:Ao(o),extensions:vo(o)},this.shManager.renderer=this,this.defaultShader=this.shManager.loadShader("DefaultShader").shader;const l=o.createBuffer();O(l);const c=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Ki([{buffer:l,attributes:{a_position:{name:"a_position",size:2,type:o.FLOAT,normalized:!1,stride:c,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:o.FLOAT,normalized:!1,stride:c,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:o.UNSIGNED_BYTE,normalized:!0,stride:c,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:o.FLOAT,normalized:!1,stride:c,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,this.gl.disable(this.gl.SCISSOR_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof kt?new bo(this.gl,e):new sr(this.gl,e)}addQuad(e){var H,de;const{fQuadBuffer:n,uiQuadBuffer:i}=this,{width:s,height:o,colorTl:a,colorTr:l,colorBl:c,colorBr:u,textureOptions:f,shader:h,shaderProps:p,alpha:g,clippingRect:m,tx:E,ty:S,ta:y,tb:b,tc:x,td:_}=e;let{texture:R}=e;if(p&&nr(p,"$dimensions")){const me=p.$dimensions;me.width=s,me.height=o}R=R!=null?R:this.defaultTexture,O(R instanceof Ut,"Invalid texture type");let{curBufferIdx:I,curRenderOp:w}=this;const v={width:s,height:o},B=h||this.defaultShader;O(B instanceof He),w&&(w.shader!==B||!ao(w.clippingRect,m)||w.shader!==this.defaultShader&&(!p||!w.shader.canBatchShaderProps(w.shaderProps,p)))&&(w=null),O(B instanceof He),w||(this.newRenderOp(B,p,g,v,m,I),w=this.curRenderOp,O(w));const N=(H=f==null?void 0:f.flipX)!=null?H:!1,L=(de=f==null?void 0:f.flipY)!=null?de:!1;let Q=0,U=0,C=1,T=1;if(R instanceof kt){const{x:me,y:V,width:se,height:xe}=R.props,{width:q=0,height:G=0}=R.parentTexture.dimensions||{width:0,height:0};Q=me/q,C=Q+se/q,U=V/G,T=U+xe/G,R=R.parentTexture}N&&([Q,C]=[C,Q]),L&&([U,T]=[T,U]);const{txManager:D}=this.stage,M=D.getCtxTexture(R);O(M instanceof sr);const z=this.addTexture(M,I);if(w=this.curRenderOp,O(w),b!==0||x!==0)n[I++]=E,n[I++]=S,n[I++]=Q,n[I++]=U,i[I++]=a,n[I++]=z,n[I++]=E+s*y,n[I++]=S+s*x,n[I++]=C,n[I++]=U,i[I++]=l,n[I++]=z,n[I++]=E+o*b,n[I++]=S+o*_,n[I++]=Q,n[I++]=T,i[I++]=c,n[I++]=z,n[I++]=E+s*y+o*b,n[I++]=S+s*x+o*_,n[I++]=C,n[I++]=T,i[I++]=u,n[I++]=z;else{const me=E+s*y,V=S+o*_;n[I++]=E,n[I++]=S,n[I++]=Q,n[I++]=U,i[I++]=a,n[I++]=z,n[I++]=me,n[I++]=S,n[I++]=C,n[I++]=U,i[I++]=l,n[I++]=z,n[I++]=E,n[I++]=V,n[I++]=Q,n[I++]=T,i[I++]=c,n[I++]=z,n[I++]=me,n[I++]=V,n[I++]=C,n[I++]=T,i[I++]=u,n[I++]=z}w.length+=Eo,w.numQuads++,this.curBufferIdx=I}newRenderOp(e,n,i,s,o,a){const l=new Xi(this.gl,this.options,this.quadBufferCollection,e,n,i,o,s,a,0);this.curRenderOp=l,this.renderOps.push(l)}addTexture(e,n,i){const{curRenderOp:s}=this;O(s);const o=s.addTexture(e);if(o===4294967295){if(i)throw new Error("Unable to add texture to render op");const{shader:a,shaderProps:l,dimensions:c,clippingRect:u,alpha:f}=s;return this.newRenderOp(a,l,f,c,u,n),this.addTexture(e,n,!0)}return o}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){var a;const{gl:n,quadBuffer:i}=this,s=new Float32Array(i,0,this.curBufferIdx),o=(a=this.quadBufferCollection.getBuffer("a_position"))!=null?a:null;n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,s,n.DYNAMIC_DRAW),this.renderOps.forEach((l,c)=>{l.draw()}),this.renderables=[]}}class Io{constructor(){d(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}const Lt=class Lt extends Ut{constructor(e,n){super(e);d(this,"props");this.props=Lt.resolveDefaults(n)}async getTextureData(){const{src:e,premultiplyAlpha:n}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:n};const s=await(await fetch(e)).blob();return{data:await createImageBitmap(s,{premultiplyAlpha:n?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}static makeCacheKey(e){const n=Lt.resolveDefaults(e);return n.src instanceof ImageData?!1:"ImageTexture,".concat(n.src,",").concat(n.premultiplyAlpha)}static resolveDefaults(e){var n,i;return{src:(n=e.src)!=null?n:"",premultiplyAlpha:(i=e.premultiplyAlpha)!=null?i:!0}}};d(Lt,"z$__type__Props");let lr=Lt;const Pt=class Pt extends Ut{constructor(e,n){super(e);d(this,"props");this.props=Pt.resolveDefaults(n)}async getTextureData(){const{width:e,height:n}=this.props,i=e*n*4,s=new Uint8ClampedArray(i);for(let o=0;o<i;o+=4){const a=Math.floor(Math.random()*256);s[o]=a,s[o+1]=a,s[o+2]=a,s[o+3]=255}return{data:new ImageData(s,e,n)}}static makeCacheKey(e){const n=Pt.resolveDefaults(e);return"NoiseTexture,".concat(n.width,",").concat(n.height,",").concat(n.cacheId)}static resolveDefaults(e){var n,i,s;return{width:(n=e.width)!=null?n:128,height:(i=e.height)!=null?i:128,cacheId:(s=e.cacheId)!=null?s:0}}};d(Pt,"z$__type__Props");let cr=Pt;class To{constructor(){d(this,"usedMemory",0);d(this,"txConstructors",{});d(this,"textureKeyCache",new Map);d(this,"textureIdCache",new Map);d(this,"ctxTextureCache",new WeakMap);d(this,"textureRefCountMap",new WeakMap);d(this,"renderer");this.registerTextureType("ImageTexture",lr),this.registerTextureType("ColorTexture",mn),this.registerTextureType("NoiseTexture",cr),this.registerTextureType("SubTexture",kt)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,n=null){var o;const i=this.txConstructors[t];if(!i)throw new Error('Texture type "'.concat(t,'" is not registered'));let s;if((n==null?void 0:n.id)!==void 0&&this.textureIdCache.has(n.id)&&(s=this.textureIdCache.get(n.id)),!s){const a=n==null?void 0:n.id,l=(o=n==null?void 0:n.cacheKey)!=null?o:i.makeCacheKey(e);l&&this.textureKeyCache.has(l)?s=this.textureKeyCache.get(l):s=new i(this,e),a&&this.addTextureIdToCache(a,l,s)}return n!=null&&n.preload&&this.getCtxTexture(s).load(),s}addTextureIdToCache(t,e,n){const{textureIdCache:i,textureRefCountMap:s}=this;i.set(t,n),s.has(n)?s.get(n).count++:(s.set(n,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,n))}removeTextureIdFromCache(t){const{textureIdCache:e,textureRefCountMap:n}=this,i=e.get(t);if(i&&(e.delete(t),n.has(i))){const s=n.get(i);O(s),s.count--,s.count===0&&(n.delete(i),s.cacheKey&&this.textureKeyCache.delete(s.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}const _o={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class Ro{}class Bo extends Ro{constructor(e){super();d(this,"data");d(this,"kernings");this.data=e;const n=this.kernings={};e.kernings.forEach(i=>{const s=i.second,o=n[s]=n[s]||{};o[i.first]=i.amount}),this.kernings=n}*shapeText(e,n){var o;let i,s;for(;(i=n.peek())&&!i.done;){const a=i.value,l=this.data.chars.find(c=>c.id===a);if(n.next(),l!==void 0){const c=s!==void 0?(((o=this.kernings[l.id])==null?void 0:o[s])||0)+e.letterSpacing:0;s=l.id,yield{mapped:!0,glyphId:l.id,codepoint:a,cluster:n.lastIndex,xAdvance:l.xadvance+c,yAdvance:0,xOffset:l.xoffset+c,yOffset:l.yoffset,xBearing:0,yBearing:0,width:l.width,height:l.height}}else a===_o.LINE_FEED&&(s=void 0),yield{mapped:!1,codepoint:a,cluster:n.lastIndex}}}}class jr extends Ns{constructor(e,n,i,s,o,a){super(e,n);d(this,"type");d(this,"texture");d(this,"data");d(this,"shaper");d(this,"glyphMap",new Map);this.type=i;const l=s.renderer;O(l instanceof qi,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=s.txManager.loadTexture("ImageTexture",{src:o,premultiplyAlpha:!1},{preload:!0}),this.texture.on("loaded",()=>{this.checkLoaded()}),fetch(a).then(async c=>{this.data=await c.json(),this.shaper=new Bo(this.data),this.data.chars.forEach(u=>{this.glyphMap.set(u.id,u)}),this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const n=this.glyphMap.get(e);if(n===void 0)throw new Error("Glyph ".concat(e," not found in font ").concat(this.fontFamily));return{x:n.x,y:n.y,width:n.width,height:n.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}class Ji{constructor(t){d(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const n=this.textRenderers[e];n&&n.isFontFaceSupported(t)&&n.addFontFace(t)}}static resolveFontFace(t,e){const n=[];return t.reduce((s,o)=>{if(s)return s;const a=o[e.fontFamily];if(!a)return;const l=new Set(a);for(const c of l)(c.descriptors.stretch!==e.fontStretch||c.descriptors.style!==e.fontStyle||c.descriptors.weight!==e.fontWeight)&&l.delete(c);return l.values().next().value},void 0)||n[0]}}const Lo={x:(r,t)=>{r.props.x=t},y:(r,t)=>{r.props.y=t},width:(r,t)=>{r.props.width=t},height:(r,t)=>{r.props.height=t},color:(r,t)=>{r.props.color=t},zIndex:(r,t)=>{r.props.zIndex=t},fontFamily:(r,t)=>{r.props.fontFamily=t},fontWeight:(r,t)=>{r.props.fontWeight=t},fontStyle:(r,t)=>{r.props.fontStyle=t},fontStretch:(r,t)=>{r.props.fontStretch=t},fontSize:(r,t)=>{r.props.fontSize=t},text:(r,t)=>{r.props.text=t},textAlign:(r,t)=>{r.props.textAlign=t},contain:(r,t)=>{r.props.contain=t},offsetY:(r,t)=>{r.props.offsetY=t},scrollable:(r,t)=>{r.props.scrollable=t},scrollY:(r,t)=>{r.props.scrollY=t},letterSpacing:(r,t)=>{r.props.letterSpacing=t},debug:(r,t)=>{r.props.debug=t}};class Zi{constructor(t){d(this,"stage");d(this,"set");this.stage=t;const e={...Lo,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([n,i])=>[n,(s,o)=>{s.props[n]!==o&&i(s,o)}])))}setStatus(t,e,n){t.status!==e&&(t.status=e,t.emitter.emit(e,n))}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.updateScheduled=!1,this.updateState(t)}))}}const Po=24;function No(r,t,e,n,i,s,o){let a=0;i&&(a=Math.min(Math.max(Math.floor(i.y1/r),0),s.length));const l=0,c=t/e+a*n;if(!(o&&c>=o/e))return{x:l,y:c,lineIndex:a}}class an{constructor(t,e=0){d(this,"iterator");d(this,"peekBuffer",[]);d(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*ln(r,t=0){let e=t;for(;e<r.length;){const n=r.codePointAt(e);if(n===void 0)throw new Error("Invalid Unicode code point");yield n,e+=n<=65535?1:2}}function ko(r,t,e){const n=e.shapeText(t,new an(ln(r,0),0));let i=0;for(const s of n)s.mapped&&(i+=s.xAdvance);return i}function Oo(r,t,e,n,i,s,o,a,l,c,u,f,h,p,g,m){O(p,"Font face must be loaded"),O(p.loaded,"Font face must be loaded"),O(p.data,"Font face must be loaded"),O(p.shaper,"Font face must be loaded");const E=p.data.info.size,S=a/E,y=s/S,b=l/S,x=f[r],_=(x==null?void 0:x.codepointIndex)||0,R=(x==null?void 0:x.maxX)||0,I=(x==null?void 0:x.maxY)||0;let w=R,v=I,B=t,N=e,L=0;const Q={codepointIndex:-1,bufferOffset:-1,xStart:-1},U=p.shaper,C={letterSpacing:b};let T=U.shapeText(C,new an(ln(n,_),_)),D,M=-1;const z=[],H="...",de=o/S,me=ko(H,C,U);let V=!0;for(;V;){const se=u!=="both"||m||N+E+E<=de,xe=se?y:y-me;let q=0;for(;(D=T.next())&&!D.done;){const G=D.value;if(r===f.length)f.push({codepointIndex:G.cluster,maxY:v,maxX:w});else if(r>f.length)throw new Error("Unexpected lineCache length");if(G.codepoint===32||G.codepoint===10?Q.codepointIndex!==-1&&(Q.codepointIndex=-1,q=B):Q.codepointIndex===-1&&(Q.codepointIndex=G.cluster,Q.bufferOffset=L,Q.xStart=q),G.mapped){const Fe=B+G.xOffset+G.width;if(u!=="none"&&Fe>=xe&&Q.codepointIndex!==-1&&Q.codepointIndex<G.cluster&&Q.xStart>0)if(se){T=U.shapeText(C,new an(ln(n,Q.codepointIndex),Q.codepointIndex)),L=Q.bufferOffset;break}else T=U.shapeText(C,new an(ln(H,0),0)),B=Q.xStart,L=Q.bufferOffset;else{const ge=B+G.xOffset,De=N+G.yOffset,Yt=h?N+E>=h.y1/S:!0,Gt=h?N<=h.y2/S:!0;if(Yt&&Gt){M===-1&&(M=L);const We=p.getAtlasEntry(G.glyphId),Xe=We.x/p.data.common.scaleW,Ye=We.y/p.data.common.scaleH,pt=We.width/p.data.common.scaleW,Dr=We.height/p.data.common.scaleH;c[L++]=ge,c[L++]=De,c[L++]=Xe,c[L++]=Ye,c[L++]=ge+G.width,c[L++]=De,c[L++]=Xe+pt,c[L++]=Ye,c[L++]=ge,c[L++]=De+G.height,c[L++]=Xe,c[L++]=Ye+Dr,c[L++]=ge+G.width,c[L++]=De+G.height,c[L++]=Xe+pt,c[L++]=Ye+Dr}v=Math.max(v,De+G.height),B+=G.xAdvance,w=Math.max(w,B)}}else if(G.codepoint===10)break}M!==-1&&(z.push({bufferStart:M,bufferEnd:L}),M=-1),B=0,N+=E,r++,Q.codepointIndex=-1,q=0,(!g&&u==="both"&&h&&N>h.y2/S||D&&D.done||u==="both"&&!m&&!se)&&(V=!1)}if(i==="center"){const se=u==="none"?w:y;for(let xe=0;xe<z.length;xe++){const q=z[xe],G=c[q.bufferEnd-4]-c[q.bufferStart],Fe=(se-G)/2;for(let ge=q.bufferStart;ge<q.bufferEnd;ge+=4)c[ge]+=Fe}}else if(i==="right"){const se=u==="none"?w:y;for(let xe=0;xe<z.length;xe++){const q=z[xe],G=q.bufferEnd===q.bufferStart?0:c[q.bufferEnd-4]-c[q.bufferStart],Fe=se-G;for(let ge=q.bufferStart;ge<q.bufferEnd;ge+=4)c[ge]+=Fe}}return O(D),{bufferNumFloats:L,bufferNumQuads:L/16,layoutNumCharacters:D.done?n.length-_:D.value.cluster-_+1,fullyProcessed:!!D.done,maxX:w,maxY:v}}function Fo(r,t,e,n,i,s){const o=n*i,a=s.x1-r,l=s.y1-t;return lo(s)?{x1:a,y1:l+e-o,x2:a+(s.x2-s.x1),y2:l+e+(s.y2-s.y1)+o}:{x1:0,y1:0,x2:0,y2:0}}const Do=dt(0,0,0,0);class Mo extends Zi{constructor(e){super(e);d(this,"ssdfFontFamilies",{});d(this,"msdfFontFamilies",{});d(this,"sdfShader");d(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,n)=>{e.props.fontFamily=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,n)=>{e.props.fontWeight=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,n)=>{e.props.fontStyle=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,n)=>{e.props.fontStretch=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,n)=>{e.props.fontSize=n,this.invalidateLayoutCache(e)},text:(e,n)=>{e.props.text=n,this.invalidateLayoutCache(e)},textAlign:(e,n)=>{e.props.textAlign=n,this.invalidateLayoutCache(e)},color:(e,n)=>{e.props.color=n},x:(e,n)=>{e.props.x=n,this.invalidateVisibleWindowCache(e)},y:(e,n)=>{e.props.y=n,this.invalidateVisibleWindowCache(e)},contain:(e,n)=>{e.props.contain=n,this.invalidateLayoutCache(e)},width:(e,n)=>{e.props.width=n,this.invalidateLayoutCache(e)},height:(e,n)=>{e.props.height=n,this.invalidateLayoutCache(e)},offsetY:(e,n)=>{e.props.offsetY=n,this.invalidateLayoutCache(e)},scrollable:(e,n)=>{e.props.scrollable=n,this.invalidateLayoutCache(e)},scrollY:(e,n)=>{e.props.scrollY=n,this.scheduleUpdateState(e)},letterSpacing:(e,n)=>{e.props.letterSpacing=n,this.invalidateLayoutCache(e)},debug:(e,n)=>{e.props.debug=n}}}canRenderFont(e){const{fontFamily:n}=e;return n in this.ssdfFontFamilies||n in this.msdfFontFamilies||n==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof jr}addFontFace(e){O(e instanceof jr);const n=e.fontFamily,i=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!i){console.warn("Invalid font face type: ".concat(e.type));return}let s=i[n];s||(s=new Set,i[n]=s),s.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new je,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:n}=e;const{textH:i,lineCache:s,debugData:o,forceFullLayoutCalc:a}=e;if(o.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!n&&(n=this.resolveFontFace(e.props),e.trFontFace=n,!n)){const L="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(L),this.setStatus(e,"failed",new Error(L));return}if(!n.loaded){n.once("loaded",()=>{this.scheduleUpdateState(e)});return}O(n.data,"Font face data should be loaded");const{text:l,fontSize:c,x:u,y:f,contain:h,width:p,height:g,scrollable:m}=e.props,E=h==="both"&&m?e.props.scrollY:0;let{renderWindow:S}=e;const y=n.data.info.size,b=c/y;e.distanceRange=b*n.data.distanceField.distanceRange;const x=l.length*Po;let _=e.vertexBuffer;(!_||_.length<x)&&(_=new Float32Array(x*2));const R=e.visibleWindow;if(!R.valid){const L=dt(u,f,h!=="none"?u+p:1/0,h==="both"?f+g:1/0,Do);ji(this.rendererBounds,L,e.visibleWindow),R.valid=!0}if(!a&&S){if(u+S.x1<=R.x1&&u+S.x2>=R.x2&&f-E+S.y1<=R.y1&&f-E+S.y2>=R.y2){this.setStatus(e,"loaded");return}S=e.renderWindow=void 0,this.setStatus(e,"loading")}const{offsetY:I,textAlign:w}=e.props;if(!S){const L=R.y2-R.y1,Q=Math.ceil(L/y);S=Fo(u,f,E,y,Q,R)}const v=No(c,I,b,y,S,s,i);if(!v){this.setStatus(e,"loaded");return}const{letterSpacing:B}=e.props,N=Oo(v.lineIndex,v.x,v.y,l,w,p,g,c,B,_,h,s,S,n,a,m);e.bufferUploaded=!1,e.bufferNumFloats=N.bufferNumFloats,e.bufferNumQuads=N.bufferNumQuads,e.vertexBuffer=_,e.renderWindow=S,o.lastLayoutNumCharacters=N.layoutNumCharacters,o.bufferSize=_.byteLength,N.fullyProcessed&&(e.textW=N.maxX*b,e.textH=N.maxY*b),this.setStatus(e,"loaded")}renderQuads(e,n,i,s){var w,v,B;if(!e.vertexBuffer)return;performance.now();const{renderer:o}=this.stage;this.stage.options;const{fontSize:a,color:l,contain:c,scrollable:u,zIndex:f,debug:h}=e.props,p=c==="both"&&u?e.props.scrollY:0,{textW:g=0,textH:m=0,distanceRange:E,vertexBuffer:S,bufferUploaded:y,trFontFace:b}=e;let{webGlBuffers:x}=e;if(!x){const N=o.gl,L=4*Float32Array.BYTES_PER_ELEMENT,Q=N.createBuffer();O(Q),e.webGlBuffers=new Ki([{buffer:Q,attributes:{a_position:{name:"a_position",size:2,type:N.FLOAT,normalized:!1,stride:L,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:N.FLOAT,normalized:!1,stride:L,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,O(e.webGlBuffers),x=e.webGlBuffers}if(!y){const N=o.gl,L=(w=x==null?void 0:x.getBuffer("a_textureCoordinate"))!=null?w:null;N.bindBuffer(N.ARRAY_BUFFER,L),N.bufferData(N.ARRAY_BUFFER,S,N.STATIC_DRAW),e.bufferUploaded=!0}O(b);const _=new Xi(o.gl,o.options,x,this.sdfShader,{transform:n.data,color:Zs(l,s),size:a/(((v=b.data)==null?void 0:v.info.size)||0),scrollY:p,distanceRange:E,debug:h.sdfShaderDebug},s,i,{height:m,width:g},0,f),R=(B=e.trFontFace)==null?void 0:B.texture;O(R);const I=this.stage.txManager.getCtxTexture(R);_.addTexture(I),_.length=e.bufferNumFloats,_.numQuads=e.bufferNumQuads,o.addRenderOp(_)}resolveFontFace(e){return Ji.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.visibleWindow.valid=!1,e.renderWindow=void 0,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}}const Wr=2048;class Qo{constructor(t,e){d(this,"_canvas");d(this,"_context");d(this,"_settings");d(this,"renderInfo");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFace],e=[];for(let n=0,i=t.length;n<i;n++)t[n]==="serif"||t[n]==="sans-serif"?e.push(t[n]):e.push('"'.concat(t[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(e){console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),n=this._settings.paddingLeft*e,i=this._settings.paddingRight*e,s=this._settings.fontSize*e;let o=this._settings.offsetY===null?null:this._settings.offsetY*e,a=(this._settings.lineHeight||s)*e;const l=this._settings.w*e,c=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const f=this._settings.cutSx*e,h=this._settings.cutEx*e,p=this._settings.cutSy*e,g=this._settings.cutEy*e,m=(this._settings.letterSpacing||0)*e,E=this._settings.textIndent*e;this.setFontProperties();let S=l||2048/this.getPrecision(),y=S-n;if(y<10&&(S+=10-y,y=10),u||(u=y),this._settings.textOverflow&&!this._settings.wordWrap){let w;switch(this._settings.textOverflow){case"clip":w="";break;case"ellipsis":w=this._settings.maxLinesSuffix;break;default:w=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-E,w)}let b;if(this._settings.wordWrap)b=this.wrapText(this._settings.text,u,m,E);else{b={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const w=b.l.length;for(let v=0;v<w-1;v++)b.n.push(v)}let x=b.l;if(this._settings.maxLines&&x.length>this._settings.maxLines){const w=x.slice(0,this._settings.maxLines);let v=null;if(this._settings.maxLinesSuffix){const U=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,C=this.wrapText(w[w.length-1],u-U,m,E);w[w.length-1]="".concat(C.l[0]).concat(this._settings.maxLinesSuffix),v=[C.l.length>1?C.l[1]:""]}else v=[""];let B;const N=x.length;let L=0;const Q=b.n.length;for(B=this._settings.maxLines;B<N;B++)v[L]+="".concat(v[L]?" ":"").concat(x[B]),B+1<Q&&b.n[B+1]&&L++;t.remainingText=v.join("\n"),t.moreTextLines=!0,x=w}else t.moreTextLines=!1,t.remainingText="";let _=0;const R=[];for(let w=0;w<x.length;w++){const v=this.measureText(x[w],m)+(w===0?E:0);R.push(v),_=Math.max(_,v)}t.lineWidths=R,l||(S=_+n+i,y=_),a=a||s;let I;if(c)I=c;else{const w=this._settings.textBaseline!="bottom"?.5*s:0;I=a*(x.length-1)+w+Math.max(a,s)+(o||0)}return o===null&&(o=s),t.w=S,t.h=I,t.lines=x,t.precision=e,S||(S=1),I||(I=1),(f||h)&&(S=Math.min(S,h-f)),(p||g)&&(I=Math.min(I,g-p)),t.width=S,t.innerWidth=y,t.height=I,t.fontSize=s,t.cutSx=f,t.cutSy=p,t.cutEx=h,t.cutEy=g,t.lineHeight=a,t.lineWidths=R,t.offsetY=o,t.paddingLeft=n,t.paddingRight=i,t.letterSpacing=m,t.textIndent=E,t}draw(t,e){const n=this.getPrecision(),i=(e==null?void 0:e.lines)||t.lines,s=(e==null?void 0:e.lineWidths)||t.lineWidths,o=e?e.lines.length*t.lineHeight:t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),Wr),this._canvas.height=Math.min(Math.ceil(o),Wr),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let a,l;const c=[];for(let f=0,h=i.length;f<h;f++)a=f===0?t.textIndent:0,l=f*t.lineHeight+t.offsetY,this._settings.verticalAlign=="middle"?l+=(t.lineHeight-t.fontSize)/2:this._settings.verticalAlign=="bottom"&&(l+=t.lineHeight-t.fontSize),this._settings.textAlign==="right"?a+=t.innerWidth-s[f]:this._settings.textAlign==="center"&&(a+=(t.innerWidth-s[f])/2),a+=t.paddingLeft,c.push({text:i[f],x:a,y:l,w:s[f]});if(this._settings.highlight){const f=this._settings.highlightColor,h=this._settings.highlightHeight*n||t.fontSize*1.5,p=this._settings.highlightOffset*n,g=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*n:t.paddingLeft,m=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*n:t.paddingRight;this._context.fillStyle=Un(f);for(let E=0;E<c.length;E++){const S=c[E];this._context.fillRect(S.x-g,S.y-t.offsetY+p,S.w+m+g,h)}}let u=null;this._settings.shadow&&(u=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Un(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*n,this._context.shadowOffsetY=this._settings.shadowOffsetY*n,this._context.shadowBlur=this._settings.shadowBlur*n),this._context.fillStyle=Un(this._settings.textColor);for(let f=0,h=c.length;f<h;f++){const p=c[f];if(t.letterSpacing===0)this._context.fillText(p.text,p.x,p.y);else{const g=p.text.split("");let m=p.x;for(let E=0,S=g.length;E<S;E++)this._context.fillText(g[E],m,p.y),m+=this.measureText(g[E],t.letterSpacing)}}u&&(this._context.shadowColor=u[0],this._context.shadowOffsetX=u[1],this._context.shadowOffsetY=u[2],this._context.shadowBlur=u[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,n){const i=this._context.measureText(n).width,s=t.length,o=this._context.measureText(t).width;if(o<=e)return t;let a=Math.floor(e*s/o),l=this._context.measureText(t.substring(0,a)).width+i;if(l>e)for(;a>0&&(l=this._context.measureText(t.substring(0,a)).width+i,l>e);)a-=1;else for(;a<s;)if(l=this._context.measureText(t.substring(0,a)).width+i,l<e)a+=1;else{a-=1;break}return t.substring(0,a)+(e>=i?n:"")}wrapText(t,e,n,i=0){const s=t.split(/\r?\n/g);let o=[];const a=[];for(let l=0;l<s.length;l++){const c=[];let u="",f=e-i;const h=s[l].split(" ");for(let p=0;p<h.length;p++){const g=this.measureText(h[p],n),m=g+this.measureText(" ",n);p===0||m>f?(p>0&&(c.push(u),u=""),u+=h[p],f=e-g-(p===0?i:0)):(f-=m,u+=" ".concat(h[p]))}c.push(u),u="",o=o.concat(c),l<s.length-1&&a.push(o.length)}return{l:o,n:a}}measureText(t,e=0){return e?t.split("").reduce((n,i)=>n+this._context.measureText(i).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const Xr=typeof self>"u"?globalThis:self;var Pi;const Yr=((Pi=Xr.document)==null?void 0:Pi.fonts)||Xr.fonts;function zo(r){const{fontFamily:t,fontStyle:e,fontWeight:n,fontStretch:i,fontSize:s}=r;return[e,n,i,"".concat(s,"px"),t].join(" ")}const $o=dt(0,0,0,0);class Uo extends Zi{constructor(e){super(e);d(this,"canvas");d(this,"context");d(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let n=this.canvas.getContext("2d");n||(this.canvas=document.createElement("canvas"),n=this.canvas.getContext("2d")),O(n),this.context=n,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,n)=>{e.props.fontFamily=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,n)=>{e.props.fontWeight=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,n)=>{e.props.fontStyle=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,n)=>{e.props.fontStretch=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,n)=>{e.props.fontSize=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,n)=>{e.props.text=n,this.invalidateLayoutCache(e)},textAlign:(e,n)=>{e.props.textAlign=n,this.invalidateLayoutCache(e)},color:(e,n)=>{e.props.color=n,this.invalidateLayoutCache(e)},x:(e,n)=>{e.props.x=n,this.invalidateVisibleWindowCache(e)},y:(e,n)=>{e.props.y=n,this.invalidateVisibleWindowCache(e)},contain:(e,n)=>{e.props.contain=n,this.invalidateLayoutCache(e)},width:(e,n)=>{e.props.width=n,this.invalidateLayoutCache(e)},height:(e,n)=>{e.props.height=n,this.invalidateLayoutCache(e)},offsetY:(e,n)=>{e.props.offsetY=n,this.invalidateLayoutCache(e)},scrollY:(e,n)=>{e.props.scrollY=n},letterSpacing:(e,n)=>{e.props.letterSpacing=n,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Mr}addFontFace(e){O(e instanceof Mr),Yr.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new je,canvasPages:void 0,lightning2TextRenderer:new Qo(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const g=zo(e.props);if(e.fontInfo={cssString:g,loaded:!1},!e.fontInfo.loaded){Yr.load(g).then(this.onFontLoaded.bind(this,e,g)).catch(this.onFontLoadError.bind(this,e,g));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Ie(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:n,y:i,width:s,height:o,scrollY:a,contain:l}=e.props,{visibleWindow:c}=e;let{renderWindow:u,canvasPages:f}=e;if(!c.valid){const g=dt(n,i,l!=="none"?n+s:1/0,l==="both"?i+o:1/0,$o);ji(this.rendererBounds,g,c),c.valid=!0}const h=c.y2-c.y1,p=Math.ceil(h/e.renderInfo.lineHeight);if(h===0){f=void 0,u=void 0,this.setStatus(e,"loaded");return}else if(u&&f){const g=n+u.x1,m=i-a+u.y1,E=n+u.x2,S=i-a+u.y2;if(g<=c.x1&&E>=c.x2&&m<=c.y1&&S>=c.y2){this.setStatus(e,"loaded");return}S<c.y2?(u.y1+=p*e.renderInfo.lineHeight,u.y2+=p*e.renderInfo.lineHeight,f.push(f.shift()),f[2].lineNumStart=f[1].lineNumStart+p,f[2].lineNumEnd=f[2].lineNumStart+p,f[2].valid=!1):m>c.y1&&(u.y1-=p*e.renderInfo.lineHeight,u.y2-=p*e.renderInfo.lineHeight,f.unshift(f.pop()),f[0].lineNumStart=f[1].lineNumStart-p,f[0].lineNumEnd=f[0].lineNumStart+p,f[0].valid=!1)}else{const g=e.renderInfo.lineHeight*p,m=Math.ceil(a/g),E=m*p,S=E-p,y=E+p;f=[{texture:f==null?void 0:f[0].texture,lineNumStart:S,lineNumEnd:S+p,valid:!1},{texture:f==null?void 0:f[1].texture,lineNumStart:E,lineNumEnd:E+p,valid:!1},{texture:f==null?void 0:f[2].texture,lineNumStart:y,lineNumEnd:y+p,valid:!1}],e.canvasPages=f;const b=m*g;u={x1:0,y1:b-g,x2:s,y2:b+g*2}}e.renderWindow=u,performance.now();for(const g of f)if(!g.valid){if(g.lineNumStart<0){g.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),g.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(g.lineNumStart,g.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(g.lineNumStart,g.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(g.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),g.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,n,i,s){var w,v,B,N,L,Q,U,C,T,D,M,z;const{stage:o}=this,{canvasPages:a,textW:l=0,textH:c=0,renderWindow:u}=e;if(!a||!u)return;const{x:f,y:h,scrollY:p,contain:g,width:m,height:E}=e.props,S={x:f,y:h,width:g!=="none"?m:l,height:g==="both"?E:c};Wi({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},S),O(a,"canvasPages is not defined"),O(u,"renderWindow is not defined");const b=(u.y2-u.y1)/3,{zIndex:x,color:_}=e.props,R=s*oo(_),I=Ct(4294967295,R);a[0].valid&&this.stage.renderer.addQuad({alpha:R,clippingRect:i,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:((v=(w=a[0].texture)==null?void 0:w.dimensions)==null?void 0:v.width)||0,height:((N=(B=a[0].texture)==null?void 0:B.dimensions)==null?void 0:N.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:x,tx:n.tx,ty:n.ty-p+u.y1,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td}),a[1].valid&&this.stage.renderer.addQuad({alpha:R,clippingRect:i,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:((Q=(L=a[1].texture)==null?void 0:L.dimensions)==null?void 0:Q.width)||0,height:((C=(U=a[1].texture)==null?void 0:U.dimensions)==null?void 0:C.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:x,tx:n.tx,ty:n.ty-p+u.y1+b,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td}),a[2].valid&&this.stage.renderer.addQuad({alpha:R,clippingRect:i,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:((D=(T=a[2].texture)==null?void 0:T.dimensions)==null?void 0:D.width)||0,height:((z=(M=a[2].texture)==null?void 0:M.dimensions)==null?void 0:z.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:x,tx:n.tx,ty:n.ty-p+u.y1+b+b,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,n){var i;n!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,n,i){var s;n!==((s=e.fontInfo)==null?void 0:s.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),i),this.scheduleUpdateState(e))}}const Ho=2e6;class jo extends je{constructor(e){super();d(this,"options");d(this,"animationManager");d(this,"txManager");d(this,"fontManager");d(this,"textRenderers");d(this,"shManager");d(this,"renderer");d(this,"root");d(this,"deltaTime",0);d(this,"lastFrameTime",0);d(this,"currentFrameTime",0);d(this,"fpsNumFrames",0);d(this,"fpsElapsedTime",0);d(this,"renderRequested",!1);this.options=e;const{canvas:n,clearColor:i,rootId:s,debug:o,appWidth:a,appHeight:l}=e;this.txManager=new To,this.shManager=new So,this.animationManager=new Io,o!=null&&o.monitorTextureCache&&setInterval(()=>{O(this.txManager);const u=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",u.idCacheSize),console.log("Texture Key Cache Size: ",u.keyCacheSize)},1e3),this.renderer=new qi({stage:this,canvas:n,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:i!=null?i:4278190080,bufferMemory:Ho,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new Uo(this),sdf:new Mo(this)},this.fontManager=new Ji(this.textRenderers);const c=new Er(this,{id:s,x:0,y:0,width:a,height:l,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=c,fo(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=ho(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:n}=this;this.root.updateType!==0&&this.root.update(this.deltaTime),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),n&&(this.renderRequested=!1);const{fpsUpdateInterval:i}=this.options;if(i&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=i)){const s=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",s)}}addQuads(e){O(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let n=0;n<e.children.length;n++){const i=e.children[n];i&&(i==null?void 0:i.worldAlpha)!==0&&this.addQuads(i)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,n=null){let i=n,s=!1;if(i){const a=this.textRenderers[i];a?a.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(i,"' for font"),e),i=null,s=!0):(console.warn("Text renderer override '".concat(i,"' not found.")),i=null,s=!0)}if(!i){for(const[a,l]of Object.entries(this.textRenderers))if(a!=="canvas"&&l.canRenderFont(e)){i=a;break}i||(i="canvas")}s&&console.warn("Falling back to text renderer ".concat(String(i)));const o=this.textRenderers[i];return O(o,"resolvedTextRenderer undefined"),o}}class Wo extends Er{constructor(e,n){super(e,n);d(this,"textRenderer");d(this,"trState");d(this,"_textRendererOverride",null);d(this,"onTextLoaded",()=>{const{contain:e}=this,n=this.trState.props.width,i=this.trState.props.height,s=this.trState.textW||0,o=this.trState.textH||0;e==="both"?(this.props.width=n,this.props.height=i):e==="width"?(this.props.width=n,this.props.height=o):e==="none"&&(this.props.width=s,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});d(this,"onTextFailed",(e,n)=>{this.emit("failed",{type:"text",error:n})});this._textRendererOverride=n.textRendererOverride;const{resolvedTextRenderer:i,textRendererState:s}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:n.width,height:n.height,textAlign:n.textAlign,color:n.color,zIndex:n.zIndex,contain:n.contain,scrollable:n.scrollable,scrollY:n.scrollY,offsetY:n.offsetY,letterSpacing:n.letterSpacing,debug:n.debug,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStretch:n.fontStretch,fontStyle:n.fontStyle,fontWeight:n.fontWeight,text:n.text},void 0);this.textRenderer=i,this.trState=s}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e)}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:n,textRendererState:i}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=n,this.trState=i}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,n=null){super.update(e,n),O(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkIsRenderable(){return super.checkIsRenderable()?!0:this.trState.props.text!==""?this.isRenderable=!0:this.isRenderable=!1}renderQuads(e){O(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,n){const i=this.stage.resolveTextRenderer(e,this._textRendererOverride),s=i.createState(e);return n&&["loading","loaded","failed"].forEach(a=>{n.emitter.off(a)}),s.emitter.on("loaded",this.onTextLoaded),s.emitter.on("failed",this.onTextFailed),i.scheduleUpdateState(s),{resolvedTextRenderer:i,textRendererState:s}}}class Xo extends rr{constructor(t,e,n){super(t,e,n,new Wo(n,{id:Ir(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}const Yo="modulepreload",Go=function(r,t){return new URL(r,t).href},Gr={},Vo=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(s=>{if(s=Go(s,n),s in Gr)return;Gr[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(s,'"]').concat(a)))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Yo,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error("Unable to preload CSS for ".concat(s))))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Ko(r){return r.prototype instanceof ks}async function qo(r,t){let e;try{console.log("Loading core extension",r),e=await Vo(()=>import(r),[],import.meta.url)}catch(i){console.error("The core extension module at '".concat(r,"' could not be loaded.")),console.error(i);return}if(!e.default){console.error("The core extension module at '".concat(r,"' does not have a default export."));return}const n=e.default;if(Ko(n)){const i=new n;try{await i.run(t)}catch(s){console.error("The core extension at '".concat(r,"' threw an error.")),console.error(s)}}else console.error("The core extension at '".concat(r,"' does not extend CoreExtension."))}class Jo{constructor(){d(this,"root",null);d(this,"stage",null);d(this,"rendererMain",null)}async init(t,e,n){this.stage=new jo({rootId:Ir(),appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:n,fpsUpdateInterval:e.fpsUpdateInterval,debug:{monitorTextureCache:!1}}),this.rendererMain=t,O(this.stage.root);const i=new rr(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=i,i.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,i)),this.onCreateNode(i),e.coreExtensionModule&&await qo(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(s,o)=>{this.onFpsUpdate(o)})}createNode(t){O(this.rendererMain),O(this.stage);const e=new rr(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){O(this.rendererMain),O(this.stage);const e=new Xo(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;O(e),e.txManager.removeTextureIdFromCache(t)}getRootNode(){return O(this.root),this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}onFpsUpdate(t){throw new Error("Method not implemented.")}}let ze,Tr;function Zo(r={}){const t=new Jo;return ze=new no(r,r.rootId||"app",t),Tr=ze.createShader.bind(ze),ze}class ea extends Array{constructor(t){super(),this._parent=t}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(t,e){if(e){const n=this.indexOf(e);this.splice(n,0,t)}else this.push(t);t.parent=this._parent,this._parent._isDirty=!0}remove(t){const e=this.indexOf(t);e>=0&&this.splice(e,1)}}import.meta.env={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1};const $e={debug:!1,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function ta(r,t,...e){}function ut(r){return typeof r=="function"}function It(r){return Array.isArray(r)}function na(r){return typeof r=="string"}function ra(r){return typeof r=="number"}function ia(r){return Number.isInteger(r)}function sa(r,t){for(const e of t)if(e in r)return!0;return!1}function oa(r){return It(r)?r[0]:r}class Vr extends Array{constructor(t,e={}){var n=(...i)=>{super(...i)};return It(e)?n(...e):na(e)?n(e):n(...Object.entries(e).filter(([i,s])=>s).map(([i])=>i)),this.onChange=t,this}has(t){return this.indexOf(t)>=0}is(t){return this.indexOf(t)>=0}add(t){this.push(t),this.onChange()}toggle(t){this.has(t)?this.remove(t):this.add(t)}remove(t){const e=this.indexOf(t);e>=0&&(this.splice(e,1),this.onChange())}}function aa(r){const t=[];for(let y=0;y<r.children.length;y++){const b=r.children[y];if(b.name!=="TextNode"){if(b.name==="text"&&!(b.width||b.height))return!1;t.push(b)}}const e=t.length,i=(r.flexDirection||"row")==="row",s=i?"width":"height",o=i?"height":"width",a=i?"marginLeft":"marginTop",l=i?"marginRight":"marginBottom",c=i?"x":"y",u=i?"y":"x",f=r[s]||0,h=r[o]||0,p=r.gap||0,g=r.justifyContent||"flexStart",m=r.alignItems;let E=0;["center","spaceBetween","spaceEvenly"].includes(g)&&(E=t.reduce((y,b)=>y+(b[s]||0),0));const S=h&&m?y=>{m==="flexStart"?y[u]=0:m==="center"?y[u]=(h-(y[o]||0))/2:m==="flexEnd"&&(y[u]=h-(y[o]||0))}:y=>y;if(g==="flexStart"){let y=0;if(t.forEach(b=>{b[c]=y+(b[a]||0),y+=(b[s]||0)+p+(b[a]||0)+(b[l]||0),S(b)}),r._autosized){const b=y-p;if(b!==r[s])return r[s]=b,!0}}else if(g==="flexEnd"){let y=f;for(let b=e-1;b>=0;b--){const x=t[b];O(x),x[c]=y-(x[s]||0)-(x[l]||0),y-=(x[s]||0)+p+(x[a]||0)+(x[l]||0),S(x)}}else if(g==="center"){let y=(f-(E+p*(e-1)))/2;t.forEach(b=>{b[c]=y,y+=(b[s]||0)+p,S(b)})}else if(g==="spaceBetween"){const y=(f-E)/(e-1);let b=0;t.forEach(x=>{x[c]=b,b+=(x[s]||0)+y,S(x)})}else if(g==="spaceEvenly"){const y=(f-E)/(e+1);let b=y;t.forEach(x=>{x[c]=b,b+=(x[s]||0)+y,S(x)})}return!1}const{animationSettings:la}=$e;function ca(r){const t=[];for(const[e,n]of Object.entries(r))t.push({type:e,props:n});return Tr("DynamicShader",{effects:t})}function mt(r=""){return{set(t){ra(t)&&(t={width:t,color:255}),this.effects={...this.effects||{},["border".concat(r)]:t},this["_border".concat(r)]=t},get(){return this["_border".concat(r)]}}}const ua=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],fa=["clipping","contain","fontFamily","src","text","textAlign","texture","maxLines","maxLinesSuffix","textBaseline","textOverflow","verticalAlign","wordWrap"];class Ke extends Object{constructor(t){super(),this.lng=null,this._parent=null,this.name=t,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new ea(this);for(const e of ua)Object.defineProperty(this,e,{get(){return this["_".concat(e)]||this.lng&&this.lng[e]},set(n){this["_".concat(e)]=oa(n),this._sendToLightningAnimatable(e,n)}});for(const e of fa)Object.defineProperty(this,e,{get(){return this["_".concat(e)]||this.lng&&this.lng[e]},set(n){this["_".concat(e)]=n,this._sendToLightning(e,n)}});Object.defineProperties(this,{borderRadius:{set(e){this._borderRadius=e,this.effects={...this.effects||{},radius:{radius:e}}},get(){return this._borderRadius}},border:mt(),borderLeft:mt("Left"),borderRight:mt("Right"),borderTop:mt("Top"),borderBottom:mt("Bottom")}),Object.defineProperties(this,{linearGradient:{set(e={}){this._linearGradient=e,this.effects={...this.effects||{},linearGradient:e}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(t){this._effects=t,this.shader=ca(t)}get parent(){return this._parent}set parent(t){var e;this._parent=t,this.rendered&&this.lng&&(this.lng.parent=(e=t==null?void 0:t.lng)!=null?e:null)}get shader(){return this._shader}set shader(t){It(t)?this._shader=Tr(...t):this._shader=t,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(t,e){if(this.rendered&&this.lng){if(It(e))return this.createAnimation({[t]:e[0]},e[1]).start();if(this._animate)return this.createAnimation({[t]:e}).start();this.lng[t]=e}else It(e)&&(e=e[0]),this._renderProps[t]=e}_sendToLightning(t,e){this.rendered&&this.lng?this.lng[t]=e:this._renderProps[t]=e}createAnimation(t,e){return O(this.lng,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}setFocus(){this.rendered?Ui(this):this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){this.lng.once("loaded",(t,e)=>{if(e.type==="text"){const{dimensions:n}=e;this.width=n.width,this.height=n.height,this.parent.updateLayout(this,n)}})}getText(){return this.children.map(t=>t.text).join("")}destroy(){this.lng&&ze.destroyNode(this.lng)}set style(t){for(let e in t)e==="animate"&&(e="_animate"),this[e]||(this[e]=t[e]);this._style=t}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(t){this._states=new Vr(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new Vr(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||la}set animationSettings(t){this._animationSettings=t}updateLayout(t,e){var n;this.hasChildren&&(ut(this.onBeforeLayout)&&this.onBeforeLayout.call(this,t,e),this.display==="flex"&&aa(this)&&((n=this.parent)==null||n.updateLayout()),ut(this.onLayout)&&this.onLayout.call(this,t,e))}_stateChanged(){var e;if(ta("State Changed: ",this,this.states),this.forwardStates){const n=this.states.slice();this.children.forEach(i=>i.states=n)}const t=((e=$e.stateMapperHook)==null?void 0:e.call($e,this,this.states))||this.states;if(this._undoStates||this.style&&sa(this.style,t)){this._undoStates=this._undoStates||{};let n={};for(const[s,o]of Object.entries(this._undoStates))t.includes(s)||(n={...n,...o});const i=t.reduce((s,o)=>{const a=this.style[o];return a&&(s={...s,...a},this._undoStates&&!this._undoStates[o]&&(this._undoStates[o]={},Object.keys(a).forEach(l=>{this._undoStates[o][l]=this[l]}))),s},{});Object.assign(this,{...n,...i})}}render(){const t=this,e=this.parent;e._isDirty&&(e.updateLayout(),e._isDirty=!1),t.updateLayout(),this.states.length&&this._stateChanged();let n=t._renderProps;e.lng&&(n.parent=e.lng),t.isTextNode()?(n={...$e.fontSettings,...n,text:t.getText()},n.contain&&(n.width||(n.width=(e.width||0)-n.x-(n.marginRight||0),t._width=n.width,t._autosized=!0),!n.height&&n.contain==="both"&&(n.height=(e.height||0)-n.y-(n.marginBottom||0),t._height=n.height,t._autosized=!0)),t.lng=ze.createTextNode(n),ut(this.onCreate)&&this.onCreate.call(this,t),ut(t.onLoad)&&t.lng.on("loaded",t.onLoad),(!t.width||!t.height)&&(t._autosized=!0,t._resizeOnTextLoad())):(n.src||n.texture||(isNaN(n.width)&&(n.width=(e.width||0)-n.x,t._width=n.width,t._autosized=!0),isNaN(n.height)&&(n.height=(e.height||0)-n.y,t._height=n.height,t._autosized=!0),n.color||(t._color=n.color=0)),t.lng=ze.createNode(n),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),ut(this.onCreate)&&this.onCreate.call(this,t)),t.rendered=!0,t.autofocus&&t.setFocus(),delete this._renderProps}}const X=r=>(()=>{const t=gt("text");return jt(t,r,!1),t})(),P=r=>(()=>{const t=gt("node");return jt(t,r,!1),t})();function es(r){r.name!=="TextNode"&&(O(r instanceof Ke),r.render(),r.children.forEach(t=>es(t)))}const ha=r=>{const t=Zo(r.options),e=t.init();let n;return ce(()=>{e.then(()=>{O(n),n.lng=t.root,n.children.forEach(es),ut(r.onFirstRender)&&r.onFirstRender(n)}).catch(console.error)}),(()=>{const i=gt("canvas"),s=n;return typeof s=="function"?ns(s,i):n=i,Nn(i,()=>r.children),i})()};function da({createElement:r,createTextNode:t,isTextNode:e,replaceText:n,insertNode:i,removeNode:s,setProperty:o,getParentNode:a,getFirstChild:l,getNextSibling:c}){function u(y,b,x,_){if(x!==void 0&&!_&&(_=[]),typeof b!="function")return f(y,b,_,x);_e(R=>f(y,b(),R,x),_)}function f(y,b,x,_,R){for(;typeof x=="function";)x=x();if(b===x)return x;const I=typeof b,w=_!==void 0;if(I==="string"||I==="number")if(I==="number"&&(b=b.toString()),w){let v=x[0];v&&e(v)?n(v,b):v=t(b),x=g(y,x,_,v)}else x!==""&&typeof x=="string"?n(l(y),x=b):(g(y,x,_,t(b)),x=b);else if(b==null||I==="boolean")x=g(y,x,_);else{if(I==="function")return _e(()=>{let v=b();for(;typeof v=="function";)v=v();x=f(y,v,x,_)}),()=>x;if(Array.isArray(b)){const v=[];if(h(v,b,R))return _e(()=>x=f(y,v,x,_,!0)),()=>x;if(v.length===0){const B=g(y,x,_);if(w)return x=B}else Array.isArray(x)?x.length===0?m(y,v,_):p(y,x,v):x==null||x===""?m(y,v):p(y,w&&x||[l(y)],v);x=v}else{if(Array.isArray(x)){if(w)return x=g(y,x,_,b);g(y,x,null,b)}else x==null||x===""||!l(y)?i(y,b):E(y,b,l(y));x=b}}return x}function h(y,b,x){let _=!1;for(let R=0,I=b.length;R<I;R++){let w=b[R],v;if(!(w==null||w===!0||w===!1))if(Array.isArray(w))_=h(y,w)||_;else if((v=typeof w)=="string"||v==="number")y.push(t(w));else if(v==="function")if(x){for(;typeof w=="function";)w=w();_=h(y,Array.isArray(w)?w:[w])||_}else y.push(w),_=!0;else y.push(w)}return _}function p(y,b,x){let _=x.length,R=b.length,I=_,w=0,v=0,B=c(b[R-1]),N=null;for(;w<R||v<I;){if(b[w]===x[v]){w++,v++;continue}for(;b[R-1]===x[I-1];)R--,I--;if(R===w){const L=I<_?v?c(x[v-1]):x[I-v]:B;for(;v<I;)i(y,x[v++],L)}else if(I===v)for(;w<R;)(!N||!N.has(b[w]))&&s(y,b[w]),w++;else if(b[w]===x[I-1]&&x[v]===b[R-1]){const L=c(b[--R]);i(y,x[v++],c(b[w++])),i(y,x[--I],L),b[R]=x[I]}else{if(!N){N=new Map;let Q=v;for(;Q<I;)N.set(x[Q],Q++)}const L=N.get(b[w]);if(L!=null)if(v<L&&L<I){let Q=w,U=1,C;for(;++Q<R&&Q<I&&!((C=N.get(b[Q]))==null||C!==L+U);)U++;if(U>L-v){const T=b[w];for(;v<L;)i(y,x[v++],T)}else E(y,x[v++],b[w++])}else w++;else s(y,b[w++])}}}function g(y,b,x,_){if(x===void 0){let I;for(;I=l(y);)s(y,I);return _&&i(y,_),""}const R=_||t("");if(b.length){let I=!1;for(let w=b.length-1;w>=0;w--){const v=b[w];if(R!==v){const B=a(v)===y;!I&&!w?B?E(y,R,v):i(y,R,x):B&&s(y,v)}else I=!0}}else i(y,R,x);return[R]}function m(y,b,x){for(let _=0,R=b.length;_<R;_++)i(y,b[_],x)}function E(y,b,x){i(y,b,x),s(y,x)}function S(y,b,x={},_){return b||(b={}),_||_e(()=>x.children=f(y,b.children,x.children)),_e(()=>b.ref&&b.ref(y)),_e(()=>{for(const R in b){if(R==="children"||R==="ref")continue;const I=b[R];I!==x[R]&&(o(y,R,I,x[R]),x[R]=I)}}),x}return{render(y,b){let x;return ht(_=>{x=_,u(b,y())}),x},insert:u,spread(y,b,x){typeof b=="function"?_e(_=>S(y,b(),_,x)):S(y,b,void 0,x)},createElement:r,createTextNode:t,insertNode:i,setProp(y,b,x,_){return o(y,b,x,_),x},mergeProps:Sr,effect:_e,memo:K,createComponent:$i,use(y,b,x){return he(()=>y(b,x))}}}function ga(r){const t=da(r);return t.mergeProps=Sr,t}const pa={createElement(r){const t=new Ke(r);return ze.root&&ce(()=>t.render()),t},createTextNode(r){return{name:"TextNode",text:r,parent:null}},replaceText(r,t){r.text=t;const e=r.parent;O(e),e._autosized&&e._resizeOnTextLoad(),e.text=e.getText()},setProperty(r,t,e=!0){if(t==="animate"){r._animate=e;return}r[t]=e},insertNode(r,t,e){r&&(r.children.insert(t,e),t.name==="TextNode"&&r.isTextNode()&&(r._autosized&&r._resizeOnTextLoad(),r.text=r.getText()))},isTextNode(r){return r.isTextNode()},removeNode(r,t){r.children.remove(t),t instanceof Ke&&t.destroy()},getParentNode(r){var t;return(t=r.parent)!=null?t:void 0},getFirstChild(r){return r.children[0]},getNextSibling(r){if(r.parent){const t=r.parent.children||[],e=t.indexOf(r)+1;if(e<t.length)return t[e]}}},ts=ga(pa),ma=ts.render,{effect:Pu,memo:Ht,createComponent:A,createElement:gt,createTextNode:Nu,insertNode:ku,insert:Nn,spread:jt,setProp:xn,mergeProps:re,use:ns}=ts;function k(r=""){return ia(r)?r:typeof r=="string"?r.startsWith("#")?+(r.replace("#","0x")+(r.length===7?"ff":"")):r.startsWith("0x")?Number(r):+("0x"+(r.length===6?r+"ff":r)):0}function xa(r){return r*Math.PI/180}const Kr="_$DX_DELEGATE";function ya(r,t=window.document){const e=t[Kr]||(t[Kr]=new Set);for(let n=0,i=r.length;n<i;n++){const s=r[n];e.has(s)||(e.add(s),t.addEventListener(s,Aa))}}function Aa(r){const t="$$".concat(r.type);let e=r.composedPath&&r.composedPath()[0]||r.target;for(r.target!==e&&Object.defineProperty(r,"target",{configurable:!0,value:e}),Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}});e;){const n=e[t];if(n&&!e.disabled){const i=e["".concat(t,"Data")];if(i!==void 0?n.call(e,i,r):n.call(e,r),r.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const va=!1;function wa(){let r=new Set;function t(i){return r.add(i),()=>r.delete(i)}let e=!1;function n(i,s){if(e)return!(e=!1);const o={to:i,options:s,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of r)a.listener({...o,from:a.location,retry:l=>{l&&(e=!0),a.navigate(i,s)}});return!o.defaultPrevented}return{subscribe:t,confirm:n}}const ba=/^(?:[a-z0-9]+:)?\/\//i,Ca=/^\/+|(\/)\/+$/g;function Tt(r,t=!1){const e=r.replace(Ca,"$1");return e?t||/^[?#]/.test(e)?e:"/"+e:""}function cn(r,t,e){if(ba.test(t))return;const n=Tt(r),i=e&&Tt(e);let s="";return!i||t.startsWith("/")?s=n:i.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+i:s=i,(s||"/")+Tt(t,!s)}function Sa(r,t){if(r==null)throw new Error(t);return r}function Ea(r,t){return Tt(r).replace(/\/*(\*.*)?$/g,"")+Tt(t)}function rs(r){const t={};return r.searchParams.forEach((e,n)=>{t[n]=e}),t}function Ia(r,t,e){const[n,i]=r.split("/*",2),s=n.split("/").filter(Boolean),o=s.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&i===void 0&&!t)return null;const u={path:o?"":"/",params:{}},f=h=>e===void 0?void 0:e[h];for(let h=0;h<o;h++){const p=s[h],g=l[h],m=p[0]===":",E=m?p.slice(1):p;if(m&&Hn(g,f(E)))u.params[E]=g;else if(m||!Hn(g,p))return null;u.path+="/".concat(g)}if(i){const h=c?l.slice(-c).join("/"):"";if(Hn(h,f(i)))u.params[i]=h;else return null}return u}}function Hn(r,t){const e=n=>n.localeCompare(r,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?e(t):typeof t=="function"?t(r):Array.isArray(t)?t.some(e):t instanceof RegExp?t.test(r):!1}function Ta(r){const[t,e]=r.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((i,s)=>i+(s.startsWith(":")?2:3),n.length-(e===void 0?0:1))}function is(r){const t=new Map,e=Ln();return new Proxy({},{get(n,i){return t.has(i)||zs(e,()=>t.set(i,K(()=>r()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function ss(r){let t=/(\/?\:[^\/]+)\?/.exec(r);if(!t)return[r];let e=r.slice(0,t.index),n=r.slice(t.index+t[0].length);const i=[e,e+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(n);)i.push(e+=t[1]),n=n.slice(t[0].length);return ss(n).reduce((s,o)=>[...s,...i.map(a=>a+o)],[])}const _a=100,os=wr(),kn=wr(),_r=()=>Sa(zt(os),"Make sure your app is wrapped in a <Router />"),Ra=()=>zt(kn)||_r().base,Wt=()=>_r().navigatorFactory(),Rr=()=>_r().location,Br=()=>Ra().params;function Ba(r,t=""){const{component:e,load:n,children:i,metadata:s}=r,o=!i||Array.isArray(i)&&!i.length,a={key:r,component:e,load:n,metadata:s};return as(r.path).reduce((l,c)=>{for(const u of ss(c)){const f=Ea(t,u),h=o?f:f.split("/*",1)[0];l.push({...a,originalPath:u,pattern:h,matcher:Ia(h,!o,r.matchFilters)})}return l},[])}function La(r,t=0){return{routes:r,score:Ta(r[r.length-1])*1e4-t,matcher(e){const n=[];for(let i=r.length-1;i>=0;i--){const s=r[i],o=s.matcher(e);if(!o)return null;n.unshift({...o,route:s})}return n}}}function as(r){return Array.isArray(r)?r:[r]}function ls(r,t="",e=[],n=[]){const i=as(r);for(let s=0,o=i.length;s<o;s++){const a=i[s];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Ba(a,t);for(const c of l){e.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)ls(a.children,c.pattern,e,n);else{const f=La([...e],n.length);n.push(f)}e.pop()}}}return e.length?n:n.sort((s,o)=>o.score-s.score)}function cs(r,t){for(let e=0,n=r.length;e<n;e++){const i=r[e].matcher(t);if(i)return i}return[]}function Pa(r,t){const e=new URL("http://sar"),n=K(l=>{const c=r();try{return new URL(c,e)}catch(u){return console.error("Invalid path ".concat(c)),l}},e,{equals:(l,c)=>l.href===c.href}),i=K(()=>n().pathname),s=K(()=>n().search,!0),o=K(()=>n().hash),a=()=>"";return{get pathname(){return i()},get search(){return s()},get hash(){return o()},get state(){return t()},get key(){return a()},query:is(ye(s,()=>rs(n())))}}let Qe;function Na(r,t,e={}){const{signal:[n,i],utils:s={}}=r,o=s.parsePath||(v=>v),a=s.renderPath||(v=>v),l=s.beforeLeave||wa(),c=cn("",e.base||"");if(c===void 0)throw new Error("".concat(c," is not a valid base path"));c&&!n().value&&i({value:c,replace:!0,scroll:!1});const[u,f]=$(!1),h=async v=>{f(!0);try{await $s(v)}finally{f(!1)}},[p,g]=$(n().value),[m,E]=$(n().state),S=Pa(p,m),y=[],b=$([]),x={pattern:c,params:{},path:()=>c,outlet:()=>null,resolvePath(v){return cn(c,v)}};return _e(()=>{const{value:v,state:B}=n();he(()=>{v!==p()&&h(()=>{Qe="native",g(v),E(B),b[1]([])}).then(()=>{Qe=void 0})})}),{base:x,location:S,isRouting:u,renderPath:a,parsePath:o,navigatorFactory:R,beforeLeave:l,preloadRoute:w,submissions:b};function _(v,B,N){he(()=>{if(typeof B=="number"){B&&(s.go?l.confirm(B,N)&&s.go(B):console.warn("Router integration does not support relative routing"));return}const{replace:L,resolve:Q,scroll:U,state:C}={replace:!1,resolve:!0,scroll:!0,...N},T=Q?v.resolvePath(B):cn("",B);if(T===void 0)throw new Error("Path '".concat(B,"' is not a routable path"));if(y.length>=_a)throw new Error("Too many redirects");const D=p();if((T!==D||C!==m())&&!va){if(l.confirm(T,N)){const M=y.push({value:D,replace:L,scroll:U,state:m()});h(()=>{Qe="navigate",g(T),E(C),b[1]([])}).then(()=>{y.length===M&&(Qe=void 0,I({value:T,state:C}))})}}})}function R(v){return v=v||zt(kn)||x,(B,N)=>_(v,B,N)}function I(v){const B=y[0];B&&((v.value!==B.value||v.state!==B.state)&&i({...v,replace:B.replace,scroll:B.scroll}),y.length=0)}function w(v,B){const N=cs(t(),v.pathname),L=Qe;Qe="preload";for(let Q in N){const{route:U,params:C}=N[Q];U.component&&U.component.preload&&U.component.preload(),B&&U.load&&U.load({params:C,location:{pathname:v.pathname,search:v.search,hash:v.hash,query:rs(v),state:null,key:""},intent:"preload"})}Qe=L}}function ka(r,t,e,n,i){const{base:s,location:o}=r,{pattern:a,component:l,load:c}=n().route,u=K(()=>n().path);l&&l.preload&&l.preload();const f=c?c({params:i,location:o,intent:Qe||"initial"}):void 0;return{parent:t,pattern:a,path:u,params:i,outlet:()=>l?$i(l,{params:i,location:o,data:f,get children(){return e()}}):e(),resolvePath(p){return cn(s.path(),p,u())}}}const Oa=r=>t=>{const{base:e}=t,n=br(()=>t.children),i=K(()=>ls(t.root?{component:t.root,children:n()}:n(),t.base||"")),s=Na(r,i,{base:e});return r.create&&r.create(s),A(os.Provider,{value:s,get children(){return A(Fa,{routerState:s,get branches(){return i()}})}})};function Fa(r){const t=K(()=>cs(r.branches,r.routerState.location.pathname)),e=is(()=>{const o=t(),a={};for(let l=0;l<o.length;l++)Object.assign(a,o[l].params);return a}),n=[];let i;const s=K(ye(t,(o,a,l)=>{let c=a&&o.length===a.length;const u=[];for(let f=0,h=o.length;f<h;f++){const p=a&&a[f],g=o[f];l&&p&&g.route.key===p.route.key?u[f]=l[f]:(c=!1,n[f]&&n[f](),ht(m=>{n[f]=m,u[f]=ka(r.routerState,u[f-1]||r.routerState.base,Da(()=>s()[f+1]),()=>t()[f],e)}))}return n.splice(o.length).forEach(f=>f()),l&&c?l:(i=u[0],u)}));return A(Ee,{get when(){return s()&&i},keyed:!0,children:o=>A(kn.Provider,{value:o,get children(){return o.outlet()}})})}const Da=r=>()=>A(Ee,{get when(){return r()},keyed:!0,children:t=>A(kn.Provider,{value:t,get children(){return t.outlet()}})}),Me=r=>{const t=br(()=>r.children);return Sr(r,{get children(){return t()}})};function Ma([r,t],e,n){return[e?()=>e(r()):r,n?i=>t(n(i)):t]}function Qa(r){if(r==="#")return null;try{return document.querySelector(r)}catch(t){return null}}function za(r){let t=!1;const e=i=>typeof i=="string"?{value:i}:i,n=Ma($(e(r.get()),{equals:(i,s)=>i.value===s.value}),void 0,i=>(!t&&r.set(i),i));return r.init&&Ue(r.init((i=r.get())=>{t=!0,n[1](e(i)),t=!1})),Oa({signal:n,create:r.create,utils:r.utils})}function $a(r,t,e){return r.addEventListener(t,e),()=>r.removeEventListener(t,e)}function Ua(r,t){const e=Qa("#".concat(r));e?e.scrollIntoView():t&&window.scrollTo(0,0)}const Ha=new Map;function ja(r=!0,t=!1,e="/_server"){return n=>{const i=n.base.path(),s=n.navigatorFactory(n.base);let o={};function a(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function l(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const m=g.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!m||t&&!m.getAttribute("link"))return;const E=a(m),S=E?m.href.baseVal:m.href;if((E?m.target.baseVal:m.target)||!S&&!m.hasAttribute("state"))return;const b=(m.getAttribute("rel")||"").split(/\s+/);if(m.hasAttribute("download")||b&&b.includes("external"))return;const x=E?new URL(S,document.baseURI):new URL(S);if(!(x.origin!==window.location.origin||i&&x.pathname&&!x.pathname.toLowerCase().startsWith(i.toLowerCase())))return[m,x]}function c(g){const m=l(g);if(!m)return;const[E,S]=m,y=n.parsePath(S.pathname+S.search+S.hash),b=E.getAttribute("state");g.preventDefault(),s(y,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:b&&JSON.parse(b)})}function u(g){const m=l(g);if(!m)return;const[E,S]=m;o[S.pathname]||n.preloadRoute(S,E.getAttribute("preload")!=="false")}function f(g){const m=l(g);if(!m)return;const[E,S]=m;o[S.pathname]||(o[S.pathname]=setTimeout(()=>{n.preloadRoute(S,E.getAttribute("preload")!=="false"),delete o[S.pathname]},200))}function h(g){const m=l(g);if(!m)return;const[,E]=m;o[E.pathname]&&(clearTimeout(o[E.pathname]),delete o[E.pathname])}function p(g){let m=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.formAction:g.target.action;if(!m)return;if(!m.startsWith("action:")){const S=new URL(m);if(m=n.parsePath(S.pathname+S.search),!m.startsWith(e))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const E=Ha.get(m);if(E){g.preventDefault();const S=new FormData(g.target);E.call(n,S)}}ya(["click","submit"]),document.addEventListener("click",c),r&&(document.addEventListener("mouseover",f),document.addEventListener("mouseout",h),document.addEventListener("focusin",u),document.addEventListener("touchstart",u)),document.addEventListener("submit",p),Ue(()=>{document.removeEventListener("click",c),r&&(document.removeEventListener("mouseover",f),document.removeEventListener("mouseout",h),document.removeEventListener("focusin",u),document.removeEventListener("touchstart",u)),document.removeEventListener("submit",p)})}}function Wa(r){const t=r.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(t)}return t}function Xa(r){return za({get:()=>window.location.hash.slice(1),set({value:t,replace:e,scroll:n,state:i}){e?window.history.replaceState(i,"","#"+t):window.location.hash=t;const s=t.indexOf("#"),o=s>=0?t.slice(s+1):"";Ua(o,n)},init:t=>$a(window,"hashchange",()=>t()),create:ja(r.preload,r.explicitLinks,r.actionBase),utils:{go:t=>window.history.go(t),renderPath:t=>"#".concat(t),parsePath:Wa}})(r)}var Ya=!!qs,Ga=Ya?r=>Ln()?Ue(r):r:Ue;function Va(r,t,e,n){return r.addEventListener(t,e,n),Ga(r.removeEventListener.bind(r,t,e,n))}function Ka(r,t=Ln()){let e=0,n,i;return()=>(e++,Ue(()=>{e--,queueMicrotask(()=>{!e&&i&&(i(),i=n=void 0)})}),i||ht(s=>n=r(i=s),t),n)}var qa=Ka(()=>{const[r,t]=$(null);return Va(window,"keydown",e=>{t(e),setTimeout(()=>t(null))}),r});function Kt(r){return typeof r=="function"}function qr(r,t){if(!r)throw new Error(t||"Assertion failed")}let jn={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"};const[yn,Ja]=$([]),Za=(r={})=>{const t=qa();jn={...jn,...r};const e=Object.entries(jn);return ce(ye(Je,(n,i,s=[])=>{var l;let o=n;const a=[];for(;o;)o.states.has("focus")||(o.states.add("focus"),Kt(o.onFocus)&&o.onFocus.call(o,n,i!=null?i:null)),a.push(o),o=(l=o.parent)!=null?l:null;return s.forEach(c=>{a.includes(c)||(c.states.remove("focus"),Kt(c.onBlur)&&c.onBlur.call(c,n,i!=null?i:null))}),Ja(a),a},{defer:!0})),ce(()=>{const n=t();if(n){const i=e.find(([s,o])=>o===n.key);he(()=>{const s=yn();for(const o of s){const a=i?i[0]:void 0;if(a){const l=o["on".concat(a)];if(Kt(l)&&l.call(o,n,o)===!0)break}else console.log("Unhandled key event: ".concat(n.key));if(Kt(o.onKeyPress)&&o.onKeyPress.call(o,n,a,o)===!0)break}return!1})}}),yn};function el(r,t){const e=t();let n,i,s,o;Array.isArray(e)?e.length===2?(n=o=e[0],i=s=e[1]):e.length===3?(n=e[0],i=s=e[1],o=e[2]):[n,s,o,i]=e:n=s=o=i=e,r.onBeforeLayout=(a,l)=>{if(l){r.width=r.children.reduce((f,h)=>f+(h.width||0),0)+i+s;const c=r.children[0];c&&(c.x=i,c.marginLeft=i);let u=0;r.children.forEach(f=>{f.y=(f.y||0)+n,f.marginTop=n,u=Math.max(u,f.height||0)}),r.height=u+n+o}}}function tl(r=[]){const t=[];let e;for(e=0;e<r.length;e++){const n=r[e];if(typeof n=="string"&&!n.includes("PAUSE-"))t.push(r[e]);else break}return[t.join(",\b ")].concat(r.slice(e))}function Jr(r){return new Promise(t=>{setTimeout(t,r)})}function nl(r,t,e="en-US"){const n=window.speechSynthesis;return new Promise((i,s)=>{const o=new SpeechSynthesisUtterance(r);o.lang=e,o.onend=()=>{i()},o.onerror=a=>{s(a)},t.push(o),n.speak(o)})}function ur(r,t,e=!0){const n=window.speechSynthesis,i=tl(Array.isArray(r)?r:[r]),s=[],o=[];let a=!0;return{series:(async()=>{try{for(;a&&i.length;){const c=await Promise.resolve(i.shift());if(a){if(typeof c=="string"&&c.includes("PAUSE-")){let u=Number(c.split("PAUSE-")[1])*1e3;isNaN(u)&&(u=0),await Jr(u)}else if(typeof c=="string"&&c.length){let f=3;for(;a&&f>0;)try{await nl(c,o,t),f=0}catch(h){if(h instanceof SpeechSynthesisErrorEvent)if(h.error==="network")f--,console.warn("Speech synthesis network error. Retries left: ".concat(f)),await Jr(500*(3-f));else if(h.error==="canceled"||h.error==="interrupted")f=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(h.error));else throw h}}else if(typeof c=="function"){const u=ur(c(),t,!1);s.push(u),await u.series}else if(Array.isArray(c)){const u=ur(c,t,!1);s.push(u),await u.series}}else break}}finally{a=!1}})(),get active(){return a},append:c=>{i.push(c)},cancel:()=>{a&&(e&&n.cancel(),s.forEach(c=>{c.cancel()}),a=!1)}}}let qt;function rl(r,t="en-US"){return qt&&qt.cancel(),qt=ur(r,t),qt}var il=(r,t)=>{let e;const n=()=>clearTimeout(e);return Ln()&&Ue(n),Object.assign((...s)=>{e!==void 0&&n(),e=setTimeout(()=>r(...s),t)},{clear:n})};let fr,_t=[],Te,hr=!1;const sl=3e5;function Zr(r,t){const e=il(r,t);let n;const i=s=>{n=s,e(s)};return i.flush=()=>{e.clear(),r(n)},i.clear=e.clear,i}function xt(r){return r.id||r.name}function ol(r=[]){if(!ie.onFocusChange||!ie.enabled)return;const t=r.every(s=>!s.loading),e=r.filter(s=>!_t.includes(s));if(fr(),!t&&ie.onFocusChange){ie.onFocusChange([]);return}_t=r.slice(0);const n=[],i=e.reduce((s,o)=>(o.announce?(s.push([xt(o),"Announce",o.announce]),n.push(o.announce)):o.title?(s.push([xt(o),"Title",o.title]),n.push(o.title)):s.push([xt(o),"No Announce",""]),s),[]);if(e.reverse().reduce((s,o)=>(o.announceContext?(s.push([xt(o),"Context",o.announceContext]),n.push(o.announceContext)):s.push([xt(o),"No Context",""]),s),i),ie.debug&&console.table(i),n.length)return ie.speak(n.reduce((s,o)=>s.concat(o),[]))}function al(r){if(!hr)return Te=rl(r)}const ie={debug:!1,enabled:!0,cancel:function(){Te&&Te.cancel()},clearPrevFocus:function(r=0){_t=_t.slice(0,r),fr()},speak:function(r,{append:t=!1,notification:e=!1}={}){return ie.onFocusChange&&ie.enabled&&(ie.onFocusChange.flush(),t&&Te&&Te.active?Te.append(r):(ie.cancel(),al(r)),e&&(hr=!0,Te==null||Te.series.finally(()=>{hr=!1,ie.refresh()}).catch(console.error))),Te},refresh:function(r=0){ie.clearPrevFocus(r),ie.onFocusChange&&ie.onFocusChange(he(()=>yn()))},setupTimers:function({focusDebounce:r=400,focusChangeTimeout:t=sl}={}){ie.onFocusChange=Zr(ol,r),fr=Zr(()=>{_t=[]},t)}},ll=()=>(ie.setupTimers(),ce(ye(yn,ie.onFocusChange,{defer:!0})),ie);function An(r){return function(){var s,o;const t=this.children.length,e=this.wrap,n=this.selected;if(r==="right"||r==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=null;break}this.selected=0}while((s=this.children[this.selected])!=null&&s.skipFocus);else if(r==="left"||r==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=null;break}this.selected=t-1}while((o=this.children[this.selected])!=null&&o.skipFocus);if(this.selected===null)return this.selected=n,!1;const i=this.children[this.selected];if(qr(i instanceof Ke),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,i,this.selected,n),this.plinko&&n!==null){const a=this.children[n];qr(a instanceof Ke);const l=a.selected;i.selected=l}return Ui(i),!0}}function Pe(r){const t=An("left"),e=An("right"),n={display:"flex",justifyContent:"flexStart"};return(()=>{const i=gt("node");return xn(i,"onLeft",t),xn(i,"onRight",e),jt(i,re({get selected(){return r.selected||0},get onFocus(){return r.onFocus||(s=>{if(!s||s.selected===null)return;let o=s.children[s.selected];for(;o!=null&&o.skipFocus;)s.selected++,o=s.children[s.selected];o instanceof Ke&&o.setFocus()})},get style(){return r.style||n}},r),!0),Nn(i,()=>r.children),i})()}function Ce(r){const t=An("up"),e=An("down"),n={display:"flex",flexDirection:"column",justifyContent:"flexStart"};return(()=>{const i=gt("node");return xn(i,"onUp",t),xn(i,"onDown",e),jt(i,re({get onFocus(){return r.onFocus||(s=>{if(!s||s.selected===null)return;let o=s.children[s.selected];for(;o!=null&&o.skipFocus;)s.selected++,o=s.children[s.selected];o instanceof Ke&&o.setFocus()})},get selected(){return r.selected||0},get style(){return r.style||n}},r),!0),Nn(i,()=>r.children),i})()}const[cl,us]=$(""),[ul,vn]=$(!1),[Ou,Wn]=$(!1),[fl,hl]=$(""),[Fu,dl]=$(null);$("en");const[gl,fs]=$(!1),[Du,pl]=$("");function ml(){let r,t,e=0;const n=1,i={alpha:n,color:4294967295},s={duration:1e3,easing:"ease-in-out"};return ce(ye(cl,o=>{if(o.startsWith("#")){r.color=o,r.src="",r.alpha=1,e=1,t.alpha=0;return}else r.color=4294967295;if(e===0){r.src=o,e=1;return}if(e===1){t.src=o,e=2,t.alpha=[n],r.alpha=[0];return}e===2&&(r.src=o,e=1,r.alpha=n,t.alpha=0)},{defer:!0})),A(P,{width:1920,height:1080,zIndex:-5,get children(){return[A(P,{ref(o){const a=r;typeof a=="function"?a(o):r=o},animate:!0,animationSettings:s,style:i}),A(P,{ref(o){const a=t;typeof a=="function"?a(o):t=o},animate:!0,animationSettings:s,style:i,alpha:0}),A(P,{get effects(){return{radialGradient:{colors:[k("#3b3b3b"),k("#272727"),k("#181818")],stops:[0,.3,.8],height:800,width:1920,pivot:[.8,0]}}}})]}})}const xl={display:"flex",flexDirection:"row",justifyContent:"flexStart"},yl={display:"flex",flexDirection:"column",justifyContent:"flexStart"},Al={screenW:1920,screenH:1080,marginX:50,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},vl={primary:"#141414",focus:"#bdbdbd",container:"#4d4d4d",menuBg:"#2021242e",white:"#ffffff"},wl={display1:{fontFamily:"Roboto",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Roboto",fontSize:56,lineHeight:72},headline1:{fontFamily:"Roboto",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Roboto",fontSize:32,lineHeight:44},headline3:{fontFamily:"Roboto",fontSize:28,lineHeight:40},body1:{fontFamily:"Roboto",fontSize:32,lineHeight:40},body2:{fontFamily:"Roboto",fontSize:28,lineHeight:34},button1:{fontFamily:"Roboto",fontSize:32,lineHeight:40,background:"#ffff"}},j={flexRow:xl,flexColumn:yl,layout:Al,color:vl,typography:wl};k("#000000"),j.layout.screenH;const hs={width:50,height:50,x:0};k("#ffffff"),k("#ff0000");const Jt={Column:{...j.flexColumn,width:320,height:600,y:220,gap:60,zIndex:101,colors:k(j.color.primary),x:[20,{duration:250,easing:"ease-in-out"}]},menuLineStyle:{width:50,height:0,x:0,y:58,selected:{height:6,color:k("#ff0000")}},MenuWrapper:{zIndex:1e3,width:100,height:window.devicePixelRatio>1?1080:window.innerHeight,color:k(j.color.primary),active:{width:[380,{duration:250,easing:"ease-in-out",alpha:1}]},unactive:{width:[100,{duration:250,easing:"ease-in-out"}]}},MenuText:{zIndex:1,fontSize:30,x:86,y:10,height:50,alpha:0,color:k("#5b5b5b"),scale:1,lineHeight:1,focus:{scale:[1.1,{duration:250,easing:"ease-in-out"}],color:k("#ffffff")},active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}}},bl=[{name:"Home",path:"/",icon:"assets/icon-home.png"},{name:"Search",path:"/search",icon:"assets/icon-search.png"},{name:"TV",path:"/tv",icon:"assets/icon-tivi.png"},{name:"Notifications",path:"/no-path",icon:"assets/icon-bell.png"}],Cl="./";function Sl(r){let t,e;const n=Wt(),i=Rr();function s(){this.states.add("active"),this.children.forEach(l=>{l.states.add("active")}),this.children.selected.setFocus(),e.states.add("active"),e.states.remove("unactive")}function o(){this.states.add("unactive"),e.states.add("unactive"),e.states.remove("active"),this.children.forEach(l=>l.states.remove("active")),this.children.forEach(l=>l.states.add("unactive"))}function a(l){l.path==="/no-path"?fs(!0):n("".concat(l.path))}return A(P,{get style(){return Jt.MenuWrapper},ref(l){const c=e;typeof c=="function"?c(l):e=l},get children(){return[A(Ce,re(r,{onFocus:s,onBlur:o,get style(){return Jt.Column},animate:!0,plinko:!0,get children(){return(bl||[]).map(l=>A(P,{get src(){return Cl+"".concat(l.icon)},style:hs,forwardStates:!0,onEnter:()=>a(l),animate:!0,get id(){return l.path},get states(){return i.pathname==l.path?["selected"]:[""]},get children(){return[A(P,{get style(){return Jt.menuLineStyle}}),A(X,{get style(){return Jt.MenuText},get children(){return l.name}})]}}))}})),A(P,{ref(l){const c=t;typeof c=="function"?c(l):t=l}})]}})}const Ze={Column:{...j.flexColumn,width:320,height:600,y:80,gap:60,zIndex:1,colors:k(j.color.primary),x:[20,{duration:250,easing:"ease-in-out"}]},NoticeWrapper:{alpha:0,width:380,height:50,top:0,zIndex:3e3,color:k("#191919"),active:{alpha:1}},MenuWrapper:{zIndex:1e3,angle:xa(270),stops:[0,.4,.8],width:0,height:1080,color:k("#191919"),active:{width:[380,{duration:250,easing:"ease-in-out",alpha:1}]},unactive:{width:[0,{duration:250,easing:"ease-in-out"}]}},NotifyImage:{zIndex:10,x:0,y:0,width:100,height:90,alpha:0,scale:1,active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}},MenuText:{zIndex:1,fontSize:28,x:110,y:10,height:50,alpha:0,width:268,contain:"both",color:k("#5b5b5b"),scale:1,focus:{color:k("#ffffff")},active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}},NoticeDesc:{zIndex:1,fontSize:26,x:110,y:50,height:50,width:268,contain:"both",alpha:0,color:k("#5b5b5b"),scale:1,active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}}},ei="./";function El(r){let t,e;const[n,i]=$(60);function s(){this.states.add("active"),this.children.forEach(c=>{c.states.add("active")}),this.children.selected.setFocus(),e.children.forEach(c=>c.states.add("active")),e.states.add("active"),e.states.remove("unactive")}function o(){this.states.add("unactive"),e.states.add("unactive"),e.states.remove("active"),e.children.forEach(c=>c.states.remove("active")),this.children.forEach(c=>c.states.remove("active")),this.children.forEach(c=>c.states.add("unactive")),this.children.forEach(c=>c.states.add("not-set"))}function a(){fs(!1),this.children.forEach(c=>c.states.add("not-set"))}function l(){(this.y||0)>j.layout.screenH/2&&(i(80+((this.y||0)-j.layout.screenH/2)*-1),this.parent&&this.parent.children.forEach(c=>{c.states.has("active")||c.states.add("active")}))}return A(P,{get style(){return Ze.MenuWrapper},ref(c){const u=e;typeof u=="function"?u(c):e=c},get children(){return[A(P,{get style(){return Ze.NoticeWrapper},get children(){return[A(P,{src:ei+"assets/icon-back.png",y:5,width:40,height:40}),A(P,{display:"flex",justifyContent:"center",width:360,get children(){return A(X,{fontSize:30,x:40,y:10,get children(){return["Notifications ",Ht(()=>r.len)]}})}})]}}),A(Ce,re(r,{onFocus:s,onBlur:o,get style(){return Ze.Column},get y(){return n()},onLeft:a,animate:!0,plinko:!0,get key(){return r.len},get children(){return A(Le,{get each(){return r==null?void 0:r.items},children:(c,u)=>A(P,{style:hs,forwardStates:!0,animate:!0,onFocus:l,get id(){return c.path},get children(){return[A(P,{get src(){return(c==null?void 0:c.image)||ei+"assets/default-thumbnail.jpg"},get style(){return Ze.NotifyImage}}),A(X,{get style(){return Ze.MenuText},get children(){return c.name}}),A(X,{get style(){return Ze.NoticeDesc},get children(){return c.desc}})]}})})}})),A(P,{ref(c){const u=t;typeof u=="function"?u(c):t=c}})]}})}function Xt(r){const[t,e]=$([]),[n,i]=$(1),[s,o]=$(!1),[a]=vr(n,r);return Jn(()=>{const l=a();l&&Qs(()=>{l.length===0&&o(!0),e(c=>[...c,...l])})}),{pages:t,page:n,setPage:i,setPages:e,end:s,setEnd:o}}const Il=[{path:"123A",name:"Netflix Lookahead",desc:"Explore what is coming soon"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"}],Tl=[{path:"123A",name:"Netflix2",desc:"Explore what is coming soon"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"}],_l="e9e9d8da18ae29fc430845952232787c",Rl="596e02522af6fe40f284e6de58fd0865f2cbaae3",Bl="https://api.themoviedb.org/3";let ds,gs;const Ll="w185",Pl={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Rl}};function un(r,t=Ll){return gs+t+r}function Nl(r,t={}){return ds?dr(r,t):ps().then(()=>dr(r,t))}function dr(r,t={}){return fetch(Bl+r+(r.includes("?")?"&":"?")+"api_key="+_l,{...Pl,...t}).then(e=>e.json())}function ps(){return dr("/configuration").then(r=>{var t;return ds=r,gs=(t=r.images)==null?void 0:t.secure_base_url,r})}const On={get:Nl,loadConfig:ps};function kl(r,t){return r.length>t?r.substring(0,t-3)+"...":r}function Fn(r,t=7){let e=[];for(let n=0,i=r.length;n<i;n+=t)e.push(r.slice(n,n+t));return e}function Lr(r=[]){return r.map(t=>({src:un(t.poster_path||t.profile_path),tileSrc:un(t.backdrop_path||t.profile_path,"w300"),backdrop:un(t.backdrop_path,"w1280"),href:"/entity/".concat(t.media_type||"people","/").concat(t.id),shortTitle:kl(t.title||t.name,30),title:t.title||t.name,data:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}}))}function Ol(r){function t(s){return new Promise(o=>{setTimeout(()=>{let a;s===1?a={page:1,results:Il,total_pages:2,total_results:40}:a={page:2,results:Tl,total_pages:2,total_results:40},o(a)},0)})}function e(s){return o=>{const a=s||20;return t(o).then(c=>{let u=c.results;return Fn(u,a)})}}const n=K(()=>Xt(e()));function i(s){[].concat.apply([],n().pages()).length-s.selected<4&&n().setPage(o=>o+1)}return A(El,re(r,{get items(){return[].concat.apply([],n().pages())},onSelectedChanged:i}))}const Pr={Page:{width:window.innerWidth,height:window.innerHeight},pageWrapper:{x:99,y:0,height:window.innerHeight,width:window.innerWidth},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:1920,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:j.layout.screenW,height:600,y:350,x:0,zIndex:2},FocusRing:{borderRadius:0,width:194,height:286,y:-5,x:-5,zIndex:-1},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:k("#000000")},RowTitle:{height:60,width:400,marginTop:20,fontSize:36,color:k("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:290,gap:10},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:10,width:j.layout.screenW-2*j.layout.marginX,x:j.layout.marginX+j.layout.gutterX,y:100,zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:k("#0000ff")},peopleBio:{...j.typography.body1,contain:"both",width:1500,height:400}},gr={width:120,height:40,color:k("#000000"),borderRadius:8,border:{width:2,color:k("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:k("#333333")}}};k("#00A699"),gr.width+8;k("#F6F6F9"),gr.height,gr.width;const ti={width:386,height:136,color:k("#715cab"),focus:{color:k("#5a39a2")},disabled:{color:k("#291d43")}};k("#000000");k("#FFFFFF"),ti.height,ti.width,k("#909090");const ms=wr();function Fl(){const r=zt(ms);if(!r)throw new ReferenceError("I18nContext");return r}function Dl(r){return A(ms.Provider,{get value(){return r.i18n},get children(){return r.children}})}const Ml={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,t){console&&console[r]&&console[r].apply(console,t)}};class wn{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||Ml,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,i){return i&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}create(t){return new wn(this.logger,{prefix:"".concat(this.prefix,":").concat(t,":"),...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new wn(this.logger,t)}}var Re=new wn;class Dn{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(n=>{this.observers[n]=this.observers[n]||[],this.observers[n].push(e)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(n=>n!==e)}}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.observers[t]&&[].concat(this.observers[t]).forEach(o=>{o(...n)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(o=>{o.apply(o,[t,...n])})}}function yt(){let r,t;const e=new Promise((n,i)=>{r=n,t=i});return e.resolve=r,e.reject=t,e}function ni(r){return r==null?"":""+r}function Ql(r,t,e){r.forEach(n=>{t[n]&&(e[n]=t[n])})}function Nr(r,t,e){function n(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function i(){return!r||typeof r=="string"}const s=typeof t!="string"?[].concat(t):t.split(".");for(;s.length>1;){if(i())return{};const o=n(s.shift());!r[o]&&e&&(r[o]=new e),Object.prototype.hasOwnProperty.call(r,o)?r=r[o]:r={}}return i()?{}:{obj:r,k:n(s.shift())}}function ri(r,t,e){const{obj:n,k:i}=Nr(r,t,Object);n[i]=e}function zl(r,t,e,n){const{obj:i,k:s}=Nr(r,t,Object);i[s]=i[s]||[],n&&(i[s]=i[s].concat(e)),n||i[s].push(e)}function bn(r,t){const{obj:e,k:n}=Nr(r,t);if(e)return e[n]}function $l(r,t,e){const n=bn(r,e);return n!==void 0?n:bn(t,e)}function xs(r,t,e){for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in r?typeof r[n]=="string"||r[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?e&&(r[n]=t[n]):xs(r[n],t[n],e):r[n]=t[n]);return r}function et(r){return r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ul={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Hl(r){return typeof r=="string"?r.replace(/[&<>"'\/]/g,t=>Ul[t]):r}const jl=[" ",",","?","!",";"];function Wl(r,t,e){t=t||"",e=e||"";const n=jl.filter(o=>t.indexOf(o)<0&&e.indexOf(o)<0);if(n.length===0)return!0;const i=new RegExp("(".concat(n.map(o=>o==="?"?"\\?":o).join("|"),")"));let s=!i.test(r);if(!s){const o=r.indexOf(e);o>0&&!i.test(r.substring(0,o))&&(s=!0)}return s}function Cn(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!r)return;if(r[t])return r[t];const n=t.split(e);let i=r;for(let s=0;s<n.length;++s){if(!i||typeof i[n[s]]=="string"&&s+1<n.length)return;if(i[n[s]]===void 0){let o=2,a=n.slice(s,s+o).join(e),l=i[a];for(;l===void 0&&n.length>s+o;)o++,a=n.slice(s,s+o).join(e),l=i[a];if(l===void 0)return;if(l===null)return null;if(t.endsWith(a)){if(typeof l=="string")return l;if(a&&typeof l[a]=="string")return l[a]}const c=n.slice(s+o).join(e);return c?Cn(l,c,e):void 0}i=i[n[s]]}return i}function Sn(r){return r&&r.indexOf("_")>0?r.replace("_","-"):r}class ii extends Dn{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a=[t,e];n&&typeof n!="string"&&(a=a.concat(n)),n&&typeof n=="string"&&(a=a.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(a=t.split("."));const l=bn(this.data,a);return l||!o||typeof n!="string"?l:Cn(this.data&&this.data[t]&&this.data[t][e],n,s)}addResource(t,e,n,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(a=t.split("."),i=e,e=a[1]),this.addNamespaces(e),ri(this.data,a,i),s.silent||this.emit("added",t,e,n,i)}addResources(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in n)(typeof n[s]=="string"||Object.prototype.toString.apply(n[s])==="[object Array]")&&this.addResource(t,e,s,n[s],{silent:!0});i.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(a=t.split("."),i=n,n=e,e=a[1]),this.addNamespaces(e);let l=bn(this.data,a)||{};i?xs(l,n,s):l={...l,...n},ri(this.data,a,l),o.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(i=>e[i]&&Object.keys(e[i]).length>0)}toJSON(){return this.data}}var ys={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,t,e,n,i){return r.forEach(s=>{this.processors[s]&&(t=this.processors[s].process(t,e,n,i))}),t}};const si={};class En extends Dn{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Ql(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Re.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const n=this.resolve(t,e);return n&&n.res!==void 0}extractFromKey(t,e){let n=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let s=e.ns||this.options.defaultNS||[];const o=n&&t.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!Wl(t,n,i);if(o&&!a){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:s};const c=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),t=c.join(i)}return typeof s=="string"&&(s=[s]),{key:t,namespaces:s}}translate(t,e,n){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const i=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,s=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],e),l=a[a.length-1],c=e.lng||this.language,u=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const x=e.nsSeparator||this.options.nsSeparator;return i?{res:"".concat(l).concat(x).concat(o),usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:"".concat(l).concat(x).concat(o)}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:o}const f=this.resolve(t,e);let h=f&&f.res;const p=f&&f.usedKey||o,g=f&&f.exactUsedKey||o,m=Object.prototype.toString.apply(h),E=["[object Number]","[object Function]","[object RegExp]"],S=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&h&&(typeof h!="string"&&typeof h!="boolean"&&typeof h!="number")&&E.indexOf(m)<0&&!(typeof S=="string"&&m==="[object Array]")){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,h,{...e,ns:a}):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");return i?(f.res=x,f.usedParams=this.getUsedParamsDetails(e),f):x}if(s){const x=m==="[object Array]",_=x?[]:{},R=x?g:p;for(const I in h)if(Object.prototype.hasOwnProperty.call(h,I)){const w="".concat(R).concat(s).concat(I);_[I]=this.translate(w,{...e,joinArrays:!1,ns:a}),_[I]===w&&(_[I]=h[I])}h=_}}else if(y&&typeof S=="string"&&m==="[object Array]")h=h.join(S),h&&(h=this.extendTranslation(h,t,e,n));else{let x=!1,_=!1;const R=e.count!==void 0&&typeof e.count!="string",I=En.hasDefaultValue(e),w=R?this.pluralResolver.getSuffix(c,e.count,e):"",v=e.ordinal&&R?this.pluralResolver.getSuffix(c,e.count,{ordinal:!1}):"",N=R&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi()&&e["defaultValue".concat(this.options.pluralSeparator,"zero")]||e["defaultValue".concat(w)]||e["defaultValue".concat(v)]||e.defaultValue;!this.isValidLookup(h)&&I&&(x=!0,h=N),this.isValidLookup(h)||(_=!0,h=o);const Q=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&_?void 0:h,U=I&&N!==h&&this.options.updateMissing;if(_||x||U){if(this.logger.log(U?"updateKey":"missingKey",c,l,o,U?N:h),s){const M=this.resolve(o,{...e,keySeparator:!1});M&&M.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let C=[];const T=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&T&&T[0])for(let M=0;M<T.length;M++)C.push(T[M]);else this.options.saveMissingTo==="all"?C=this.languageUtils.toResolveHierarchy(e.lng||this.language):C.push(e.lng||this.language);const D=(M,z,H)=>{const de=I&&H!==h?H:Q;this.options.missingKeyHandler?this.options.missingKeyHandler(M,l,z,de,U,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(M,l,z,de,U,e),this.emit("missingKey",M,l,z,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?C.forEach(M=>{this.pluralResolver.getSuffixes(M,e).forEach(z=>{D([M],o+z,e["defaultValue".concat(z)]||N)})}):D(C,o,N))}h=this.extendTranslation(h,t,e,f,n),_&&h===o&&this.options.appendNamespaceToMissingKey&&(h="".concat(l,":").concat(o)),(_||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(o):o,x?h:void 0):h=this.options.parseMissingKeyHandler(h))}return i?(f.res=h,f.usedParams=this.getUsedParamsDetails(e),f):h}extendTranslation(t,e,n,i,s){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const c=typeof t=="string"&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const h=t.match(this.interpolator.nestingRegexp);u=h&&h.length}let f=n.replace&&typeof n.replace!="string"?n.replace:n;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),t=this.interpolator.interpolate(t,f,n.lng||this.language,n),c){const h=t.match(this.interpolator.nestingRegexp),p=h&&h.length;u<p&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(n.lng=i.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return s&&s[0]===p[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(p[0]," in key: ").concat(e[0])),null):o.translate(...p,e)},n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=typeof a=="string"?[a]:a;return t!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(t=ys.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,i,s,o,a;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(n))return;const c=this.extractFromKey(l,e),u=c.key;i=u;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=e.count!==void 0&&typeof e.count!="string",p=h&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),g=e.context!==void 0&&(typeof e.context=="string"||typeof e.context=="number")&&e.context!=="",m=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);f.forEach(E=>{this.isValidLookup(n)||(a=E,!si["".concat(m[0],"-").concat(E)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(si["".concat(m[0],"-").concat(E)]=!0,this.logger.warn('key "'.concat(i,'" for languages "').concat(m.join(", "),'" won\'t get resolved as namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(S=>{if(this.isValidLookup(n))return;o=S;const y=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,u,S,E,e);else{let x;h&&(x=this.pluralResolver.getSuffix(S,e.count,e));const _="".concat(this.options.pluralSeparator,"zero"),R="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(h&&(y.push(u+x),e.ordinal&&x.indexOf(R)===0&&y.push(u+x.replace(R,this.options.pluralSeparator)),p&&y.push(u+_)),g){const I="".concat(u).concat(this.options.contextSeparator).concat(e.context);y.push(I),h&&(y.push(I+x),e.ordinal&&x.indexOf(R)===0&&y.push(I+x.replace(R,this.options.pluralSeparator)),p&&y.push(I+_))}}let b;for(;b=y.pop();)this.isValidLookup(n)||(s=b,n=this.getResource(S,E,b,e))}))})}),{res:n,usedKey:i,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&typeof t.replace!="string";let i=n?t.replace:t;if(n&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const s of e)delete i[s]}return i}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&t[n]!==void 0)return!0;return!1}}function Xn(r){return r.charAt(0).toUpperCase()+r.slice(1)}class oi{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Re.create("languageUtils")}getScriptPartFromCode(t){if(t=Sn(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=Sn(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const e=["hans","hant","latn","cyrl","cans","mong","arab"];let n=t.split("-");return this.options.lowerCaseLng?n=n.map(i=>i.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=Xn(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=Xn(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=Xn(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(n=>{if(e)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(e=i)}),!e&&this.options.supportedLngs&&t.forEach(n=>{if(e)return;const i=this.getLanguagePartFromCode(n);if(this.isSupportedCode(i))return e=i;e=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&s.indexOf(i)===0)return s})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],s=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(o)))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):typeof t=="string"&&s(this.formatLanguageCode(t)),n.forEach(o=>{i.indexOf(o)<0&&s(this.formatLanguageCode(o))}),i}}let Xl=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Yl={1:function(r){return+(r>1)},2:function(r){return+(r!=1)},3:function(r){return 0},4:function(r){return r%10==1&&r%100!=11?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2},5:function(r){return r==0?0:r==1?1:r==2?2:r%100>=3&&r%100<=10?3:r%100>=11?4:5},6:function(r){return r==1?0:r>=2&&r<=4?1:2},7:function(r){return r==1?0:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?1:2},8:function(r){return r==1?0:r==2?1:r!=8&&r!=11?2:3},9:function(r){return+(r>=2)},10:function(r){return r==1?0:r==2?1:r<7?2:r<11?3:4},11:function(r){return r==1||r==11?0:r==2||r==12?1:r>2&&r<20?2:3},12:function(r){return+(r%10!=1||r%100==11)},13:function(r){return+(r!==0)},14:function(r){return r==1?0:r==2?1:r==3?2:3},15:function(r){return r%10==1&&r%100!=11?0:r%10>=2&&(r%100<10||r%100>=20)?1:2},16:function(r){return r%10==1&&r%100!=11?0:r!==0?1:2},17:function(r){return r==1||r%10==1&&r%100!=11?0:1},18:function(r){return r==0?0:r==1?1:2},19:function(r){return r==1?0:r==0||r%100>1&&r%100<11?1:r%100>10&&r%100<20?2:3},20:function(r){return r==1?0:r==0||r%100>0&&r%100<20?1:2},21:function(r){return r%100==1?1:r%100==2?2:r%100==3||r%100==4?3:0},22:function(r){return r==1?0:r==2?1:(r<0||r>10)&&r%10==0?2:3}};const Gl=["v1","v2","v3"],Vl=["v4"],ai={zero:0,one:1,two:2,few:3,many:4,other:5};function Kl(){const r={};return Xl.forEach(t=>{t.lngs.forEach(e=>{r[e]={numbers:t.nr,plurals:Yl[t.fc]}})}),r}class ql{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=Re.create("pluralResolver"),(!this.options.compatibilityJSON||Vl.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Kl()}addRule(t,e){this.rules[t]=e}getRule(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Sn(t),{type:e.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(i=>"".concat(e).concat(i))}getSuffixes(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,e);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((i,s)=>ai[i]-ai[s]).map(i=>"".concat(this.options.prepend).concat(e.ordinal?"ordinal".concat(this.options.prepend):"").concat(i)):n.numbers.map(i=>this.getSuffix(t,i,e)):[]}getSuffix(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(t,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(i.select(e)):this.getSuffixRetroCompatible(i,e):(this.logger.warn("no plural rule found for: ".concat(t)),"")}getSuffixRetroCompatible(t,e){const n=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let i=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const s=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?"_plural_".concat(i.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Gl.includes(this.options.compatibilityJSON)}}function li(r,t,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=$l(r,t,e);return!s&&i&&typeof e=="string"&&(s=Cn(r,e,n),s===void 0&&(s=Cn(t,e,n))),s}class Jl{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Re.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(e=>e),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const e=t.interpolation;this.escape=e.escape!==void 0?e.escape:Hl,this.escapeValue=e.escapeValue!==void 0?e.escapeValue:!0,this.useRawValueToEscape=e.useRawValueToEscape!==void 0?e.useRawValueToEscape:!1,this.prefix=e.prefix?et(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?et(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?et(e.nestingPrefix):e.nestingPrefixEscaped||et("$t("),this.nestingSuffix=e.nestingSuffix?et(e.nestingSuffix):e.nestingSuffixEscaped||et(")"),this.nestingOptionsSeparator=e.nestingOptionsSeparator?e.nestingOptionsSeparator:e.nestingOptionsSeparator||",",this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.alwaysFormat=e.alwaysFormat!==void 0?e.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");const e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");const n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}interpolate(t,e,n,i){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(g){return g.replace(/\$/g,"$$$$")}const u=g=>{if(g.indexOf(this.formatSeparator)<0){const y=li(e,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,n,{...i,...e,interpolationkey:g}):y}const m=g.split(this.formatSeparator),E=m.shift().trim(),S=m.join(this.formatSeparator).trim();return this.format(li(e,l,E,this.options.keySeparator,this.options.ignoreJSONStructure),S,n,{...i,...e,interpolationkey:E})};this.resetRegExp();const f=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>c(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?c(this.escape(g)):c(g)}].forEach(g=>{for(a=0;s=g.regex.exec(t);){const m=s[1].trim();if(o=u(m),o===void 0)if(typeof f=="function"){const S=f(t,s,i);o=typeof S=="string"?S:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(h){o=s[0];continue}else this.logger.warn("missed to pass in variable ".concat(m," for interpolating ").concat(t)),o="";else typeof o!="string"&&!this.useRawValueToEscape&&(o=ni(o));const E=g.safeValue(o);if(t=t.replace(s[0],E),h?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=s[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,s,o;function a(l,c){const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const f=l.split(new RegExp("".concat(u,"[ ]*{")));let h="{".concat(f[1]);l=f[0],h=this.interpolate(h,o);const p=h.match(/'/g),g=h.match(/"/g);(p&&p.length%2===0&&!g||g.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),c&&(o={...c,...o})}catch(m){return this.logger.warn("failed parsing options string in nesting for key ".concat(l),m),"".concat(l).concat(u).concat(h)}return delete o.defaultValue,l}for(;i=this.nestingRegexp.exec(t);){let l=[];o={...n},o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const u=i[1].split(this.formatSeparator).map(f=>f.trim());i[1]=u.shift(),l=u,c=!0}if(s=e(a.call(this,i[1].trim(),o),o),s&&i[0]===t&&typeof s!="string")return s;typeof s!="string"&&(s=ni(s)),s||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(t)),s=""),c&&(s=l.reduce((u,f)=>this.format(u,f,n.lng,{...n,interpolationkey:i[1].trim()}),s.trim())),t=t.replace(i[0],s),this.regexp.lastIndex=0}return t}}function Zl(r){let t=r.toLowerCase().trim();const e={};if(r.indexOf("(")>-1){const n=r.split("(");t=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);t==="currency"&&i.indexOf(":")<0?e.currency||(e.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?e.range||(e.range=i.trim()):i.split(";").forEach(o=>{if(!o)return;const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,"");e[a.trim()]||(e[a.trim()]=c),c==="false"&&(e[a.trim()]=!1),c==="true"&&(e[a.trim()]=!0),isNaN(c)||(e[a.trim()]=parseInt(c,10))})}return{formatName:t,formatOptions:e}}function tt(r){const t={};return function(n,i,s){const o=i+JSON.stringify(s);let a=t[o];return a||(a=r(Sn(i),s),t[o]=a),a(n)}}class ec{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Re.create("formatter"),this.options=t,this.formats={number:tt((e,n)=>{const i=new Intl.NumberFormat(e,{...n});return s=>i.format(s)}),currency:tt((e,n)=>{const i=new Intl.NumberFormat(e,{...n,style:"currency"});return s=>i.format(s)}),datetime:tt((e,n)=>{const i=new Intl.DateTimeFormat(e,{...n});return s=>i.format(s)}),relativetime:tt((e,n)=>{const i=new Intl.RelativeTimeFormat(e,{...n});return s=>i.format(s,n.range||"day")}),list:tt((e,n)=>{const i=new Intl.ListFormat(e,{...n});return s=>i.format(s)})},this.init(t)}init(t){const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=tt(e)}format(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return e.split(this.formatSeparator).reduce((a,l)=>{const{formatName:c,formatOptions:u}=Zl(l);if(this.formats[c]){let f=a;try{const h=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=h.locale||h.lng||i.locale||i.lng||n;f=this.formats[c](a,p,{...u,...i,...h})}catch(h){this.logger.warn(h)}return f}else this.logger.warn("there was no format function for ".concat(c));return a},t)}}function tc(r,t){r.pending[t]!==void 0&&(delete r.pending[t],r.pendingCount--)}class nc extends Dn{constructor(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Re.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(t,e,n,i){const s={},o={},a={},l={};return t.forEach(c=>{let u=!0;e.forEach(f=>{const h="".concat(c,"|").concat(f);!n.reload&&this.store.hasResourceBundle(c,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,u=!1,o[h]===void 0&&(o[h]=!0),s[h]===void 0&&(s[h]=!0),l[f]===void 0&&(l[f]=!0)))}),u||(a[c]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(t,e,n){const i=t.split("|"),s=i[0],o=i[1];e&&this.emit("failedLoading",s,o,e),n&&this.store.addResourceBundle(s,o,n),this.state[t]=e?-1:2;const a={};this.queue.forEach(l=>{zl(l.loaded,[s],o),tc(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const u=l.loaded[c];u.length&&u.forEach(f=>{a[c][f]===void 0&&(a[c][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:n,tried:i,wait:s,callback:o});return}this.readingCalls++;const a=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,n,i+1,s*2,o)},s);return}o(c,u)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const c=l(t,e);c&&typeof c.then=="function"?c.then(u=>a(null,u)).catch(a):a(null,c)}catch(c){a(c)}return}return l(t,e,a)}prepareLoading(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof e=="string"&&(e=[e]);const s=this.queueLoad(t,e,n,i);if(!s.toLoad.length)return s.pending.length||i(),null;s.toLoad.forEach(o=>{this.loadOne(o)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t.split("|"),i=n[0],s=n[1];this.read(i,s,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn("".concat(e,"loading namespace ").concat(s," for language ").concat(i," failed"),o),!o&&a&&this.logger.log("".concat(e,"loaded namespace ").concat(s," for language ").concat(i),a),this.loaded(t,o,a)})}saveMissing(t,e,n,i,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(t,e,n,i,l):u=c(t,e,n,i),u&&typeof u.then=="function"?u.then(f=>a(null,f)).catch(a):a(null,u)}catch(u){a(u)}else c(t,e,n,i,a,l)}!t||!t[0]||this.store.addResource(t[0],e,n,i)}}}function ci(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(i=>{e[i]=n[i]})}return e},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function ui(r){return typeof r.ns=="string"&&(r.ns=[r.ns]),typeof r.fallbackLng=="string"&&(r.fallbackLng=[r.fallbackLng]),typeof r.fallbackNS=="string"&&(r.fallbackNS=[r.fallbackNS]),r.supportedLngs&&r.supportedLngs.indexOf("cimode")<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),r}function Zt(){}function rc(r){Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(e=>{typeof r[e]=="function"&&(r[e]=r[e].bind(r))})}class Ot extends Dn{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=ui(t),this.services={},this.logger=Re,this.modules={external:[]},rc(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(){var t=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;typeof e=="function"&&(n=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(typeof e.ns=="string"?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=ci();this.options={...i,...this.options,...ui(e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);function s(u){return u?typeof u=="function"?new u:u:null}if(!this.options.isClone){this.modules.logger?Re.init(s(this.modules.logger),this.options):Re.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=ec);const f=new oi(this.options);this.store=new ii(this.options.resources,this.options);const h=this.services;h.logger=Re,h.resourceStore=this.store,h.languageUtils=f,h.pluralResolver=new ql(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(h.formatter=s(u),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Jl(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new nc(s(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(p){for(var g=arguments.length,m=new Array(g>1?g-1:0),E=1;E<g;E++)m[E-1]=arguments[E];t.emit(p,...m)}),this.modules.languageDetector&&(h.languageDetector=s(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=s(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new En(this.services,this.options),this.translator.on("*",function(p){for(var g=arguments.length,m=new Array(g>1?g-1:0),E=1;E<g;E++)m[E-1]=arguments[E];t.emit(p,...m)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Zt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return t.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return t.store[u](...arguments),t}});const l=yt(),c=()=>{const u=(f,h)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),n(f,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zt;const i=typeof t=="string"?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const s=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(s,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(a)})}else n(null)}reloadResources(t,e,n){const i=yt();return t||(t=this.languages),e||(e=this.options.ns),n||(n=Zt),this.services.backendConnector.reload(t,e,s=>{i.resolve(),n(s)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&ys.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let e=0;e<this.languages.length;e++){const n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,e){var n=this;this.isLanguageChangingTo=t;const i=yt();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,i.resolve(function(){return n.t(...arguments)}),e&&e(l,function(){return n.t(...arguments)})},a=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const c=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||s(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{o(u,c)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(t),i}getFixedT(t,e,n){var i=this;const s=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),f=2;f<c;f++)u[f-2]=arguments[f];l=i.options.overloadTranslationOptionHandler([o,a].concat(u))}else l={...a};l.lng=l.lng||s.lng,l.lngs=l.lngs||s.lngs,l.ns=l.ns||s.ns,l.keyPrefix=l.keyPrefix||n||s.keyPrefix;const h=i.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(o)?p=o.map(g=>"".concat(l.keyPrefix).concat(h).concat(g)):p=l.keyPrefix?"".concat(l.keyPrefix).concat(h).concat(o):o,i.t(p,l)};return typeof t=="string"?s.lng=t:s.lngs=t,s.ns=e,s.keyPrefix=n,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state["".concat(a,"|").concat(l)];return c===-1||c===2};if(e.precheck){const a=e.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,t)&&(!i||o(s,t)))}loadNamespaces(t,e){const n=yt();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),e&&e(i)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=yt();typeof t=="string"&&(t=[t]);const i=this.options.preload||[],s=t.filter(o=>i.indexOf(o)<0);return s.length?(this.options.preload=i.concat(s),this.loadResources(o=>{n.resolve(),e&&e(o)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new oi(ci());return e.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Ot(t,e)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zt;const n=t.forkResourceStore;n&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},s=new Ot(i);return(t.debug!==void 0||t.prefix!==void 0)&&(s.logger=s.logger.clone(t)),["store","services","language"].forEach(a=>{s[a]=this[a]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n&&(s.store=new ii(this.store.data,i),s.services.resourceStore=s.store),s.translator=new En(s.services,i),s.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.emit(a,...c)}),s.init(i,e),s.translator.options=i,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ue=Ot.createInstance();ue.createInstance=Ot.createInstance;ue.createInstance;ue.dir;ue.init;ue.loadResources;ue.reloadResources;ue.use;ue.changeLanguage;ue.getFixedT;ue.t;ue.exists;ue.setDefaultNamespace;ue.hasLoadedNamespace;ue.loadNamespaces;ue.loadLanguages;function pr(r){"@babel/helpers - typeof";return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(r)}var As=[],ic=As.forEach,sc=As.slice;function mr(r){return ic.call(sc.call(arguments,1),function(t){if(t)for(var e in t)r[e]===void 0&&(r[e]=t[e])}),r}function vs(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":pr(XMLHttpRequest))==="object"}function oc(r){return!!r&&typeof r.then=="function"}function ac(r){return oc(r)?r:Promise.resolve(r)}var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function cc(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xr={exports:{}},en={exports:{}},fi;function uc(){return fi||(fi=1,function(r,t){var e=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Rt<"u"&&Rt,n=function(){function s(){this.fetch=!1,this.DOMException=e.DOMException}return s.prototype=e,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof a<"u"&&a,l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(C){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(C){return C&&DataView.prototype.isPrototypeOf(C)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(C){return C&&u.indexOf(Object.prototype.toString.call(C))>-1};function h(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(C)||C==="")throw new TypeError('Invalid character in header field name: "'+C+'"');return C.toLowerCase()}function p(C){return typeof C!="string"&&(C=String(C)),C}function g(C){var T={next:function(){var D=C.shift();return{done:D===void 0,value:D}}};return l.iterable&&(T[Symbol.iterator]=function(){return T}),T}function m(C){this.map={},C instanceof m?C.forEach(function(T,D){this.append(D,T)},this):Array.isArray(C)?C.forEach(function(T){this.append(T[0],T[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(T){this.append(T,C[T])},this)}m.prototype.append=function(C,T){C=h(C),T=p(T);var D=this.map[C];this.map[C]=D?D+", "+T:T},m.prototype.delete=function(C){delete this.map[h(C)]},m.prototype.get=function(C){return C=h(C),this.has(C)?this.map[C]:null},m.prototype.has=function(C){return this.map.hasOwnProperty(h(C))},m.prototype.set=function(C,T){this.map[h(C)]=p(T)},m.prototype.forEach=function(C,T){for(var D in this.map)this.map.hasOwnProperty(D)&&C.call(T,this.map[D],D,this)},m.prototype.keys=function(){var C=[];return this.forEach(function(T,D){C.push(D)}),g(C)},m.prototype.values=function(){var C=[];return this.forEach(function(T){C.push(T)}),g(C)},m.prototype.entries=function(){var C=[];return this.forEach(function(T,D){C.push([D,T])}),g(C)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function E(C){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}function S(C){return new Promise(function(T,D){C.onload=function(){T(C.result)},C.onerror=function(){D(C.error)}})}function y(C){var T=new FileReader,D=S(T);return T.readAsArrayBuffer(C),D}function b(C){var T=new FileReader,D=S(T);return T.readAsText(C),D}function x(C){for(var T=new Uint8Array(C),D=new Array(T.length),M=0;M<T.length;M++)D[M]=String.fromCharCode(T[M]);return D.join("")}function _(C){if(C.slice)return C.slice(0);var T=new Uint8Array(C.byteLength);return T.set(new Uint8Array(C)),T.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(C){this.bodyUsed=this.bodyUsed,this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:l.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:l.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():l.arrayBuffer&&l.blob&&c(C)?(this._bodyArrayBuffer=_(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||f(C))?this._bodyArrayBuffer=_(C):this._bodyText=C=Object.prototype.toString.call(C):this._bodyText="",this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var C=E(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var C=E(this);return C||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(y)}),this.text=function(){var C=E(this);if(C)return C;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(C){var T=C.toUpperCase();return I.indexOf(T)>-1?T:C}function v(C,T){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T=T||{};var D=T.body;if(C instanceof v){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,T.headers||(this.headers=new m(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!D&&C._bodyInit!=null&&(D=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new m(T.headers)),this.method=w(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(D),(this.method==="GET"||this.method==="HEAD")&&(T.cache==="no-store"||T.cache==="no-cache")){var M=/([?&])_=[^&]*/;if(M.test(this.url))this.url=this.url.replace(M,"$1_="+new Date().getTime());else{var z=/\?/;this.url+=(z.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})};function B(C){var T=new FormData;return C.trim().split("&").forEach(function(D){if(D){var M=D.split("="),z=M.shift().replace(/\+/g," "),H=M.join("=").replace(/\+/g," ");T.append(decodeURIComponent(z),decodeURIComponent(H))}}),T}function N(C){var T=new m,D=C.replace(/\r?\n[\t ]+/g," ");return D.split("\r").map(function(M){return M.indexOf("\n")===0?M.substr(1,M.length):M}).forEach(function(M){var z=M.split(":"),H=z.shift().trim();if(H){var de=z.join(":").trim();T.append(H,de)}}),T}R.call(v.prototype);function L(C,T){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText=T.statusText===void 0?"":""+T.statusText,this.headers=new m(T.headers),this.url=T.url||"",this._initBody(C)}R.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},L.error=function(){var C=new L(null,{status:0,statusText:""});return C.type="error",C};var Q=[301,302,303,307,308];L.redirect=function(C,T){if(Q.indexOf(T)===-1)throw new RangeError("Invalid status code");return new L(null,{status:T,headers:{location:C}})},o.DOMException=a.DOMException;try{new o.DOMException}catch(C){o.DOMException=function(T,D){this.message=T,this.name=D;var M=Error(T);this.stack=M.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function U(C,T){return new Promise(function(D,M){var z=new v(C,T);if(z.signal&&z.signal.aborted)return M(new o.DOMException("Aborted","AbortError"));var H=new XMLHttpRequest;function de(){H.abort()}H.onload=function(){var V={status:H.status,statusText:H.statusText,headers:N(H.getAllResponseHeaders()||"")};V.url="responseURL"in H?H.responseURL:V.headers.get("X-Request-URL");var se="response"in H?H.response:H.responseText;setTimeout(function(){D(new L(se,V))},0)},H.onerror=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},H.ontimeout=function(){setTimeout(function(){M(new TypeError("Network request failed"))},0)},H.onabort=function(){setTimeout(function(){M(new o.DOMException("Aborted","AbortError"))},0)};function me(V){try{return V===""&&a.location.href?a.location.href:V}catch(se){return V}}H.open(z.method,me(z.url),!0),z.credentials==="include"?H.withCredentials=!0:z.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&(l.blob?H.responseType="blob":l.arrayBuffer&&z.headers.get("Content-Type")&&z.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(H.responseType="arraybuffer")),T&&typeof T.headers=="object"&&!(T.headers instanceof m)?Object.getOwnPropertyNames(T.headers).forEach(function(V){H.setRequestHeader(V,p(T.headers[V]))}):z.headers.forEach(function(V,se){H.setRequestHeader(se,V)}),z.signal&&(z.signal.addEventListener("abort",de),H.onreadystatechange=function(){H.readyState===4&&z.signal.removeEventListener("abort",de)}),H.send(typeof z._bodyInit>"u"?null:z._bodyInit)})}return U.polyfill=!0,a.fetch||(a.fetch=U,a.Headers=m,a.Request=v,a.Response=L),o.Headers=m,o.Request=v,o.Response=L,o.fetch=U,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=e.fetch?e:n;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,r.exports=t}(en,en.exports)),en.exports}(function(r,t){var e;if(typeof fetch=="function"&&(typeof Rt<"u"&&Rt.fetch?e=Rt.fetch:typeof window<"u"&&window.fetch?e=window.fetch:e=fetch),typeof cc<"u"&&(typeof window>"u"||typeof window.document>"u")){var n=e||uc();n.default&&(n=n.default),t.default=n,r.exports=t.default}})(xr,xr.exports);var ws=xr.exports;const bs=lc(ws),hi=Os({__proto__:null,default:bs},[ws]);function In(r){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(r)}var Oe;typeof fetch=="function"&&(typeof global<"u"&&global.fetch?Oe=global.fetch:typeof window<"u"&&window.fetch?Oe=window.fetch:Oe=fetch);var Ft;vs()&&(typeof global<"u"&&global.XMLHttpRequest?Ft=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Ft=window.XMLHttpRequest));var Tn;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Tn=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Tn=window.ActiveXObject));!Oe&&hi&&!Ft&&!Tn&&(Oe=bs||hi);typeof Oe!="function"&&(Oe=void 0);var yr=function(t,e){if(e&&In(e)==="object"){var n="";for(var i in e)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(e[i]);if(!n)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+n.slice(1)}return t},di=function(t,e,n){var i=function(o){if(!o.ok)return n(o.statusText||"Error",{status:o.status});o.text().then(function(a){n(null,{status:o.status,data:a})}).catch(n)};typeof fetch=="function"?fetch(t,e).then(i).catch(n):Oe(t,e).then(i).catch(n)},gi=!1,fc=function(t,e,n,i){t.queryStringParams&&(e=yr(e,t.queryStringParams));var s=mr({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(s["Content-Type"]="application/json");var o=typeof t.requestOptions=="function"?t.requestOptions(n):t.requestOptions,a=mr({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:s},gi?{}:o);try{di(e,a,i)}catch(l){if(!o||Object.keys(o).length===0||!l.message||l.message.indexOf("not implemented")<0)return i(l);try{Object.keys(o).forEach(function(c){delete a[c]}),di(e,a,i),gi=!0}catch(c){i(c)}}},hc=function(t,e,n,i){n&&In(n)==="object"&&(n=yr("",n).slice(1)),t.queryStringParams&&(e=yr(e,t.queryStringParams));try{var s;Ft?s=new Ft:s=new Tn("MSXML2.XMLHTTP.3.0"),s.open(n?"POST":"GET",e,1),t.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!t.withCredentials,n&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var o=t.customHeaders;if(o=typeof o=="function"?o():o,o)for(var a in o)s.setRequestHeader(a,o[a]);s.onreadystatechange=function(){s.readyState>3&&i(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(n)}catch(l){console&&console.log(l)}},dc=function(t,e,n,i){if(typeof n=="function"&&(i=n,n=void 0),i=i||function(){},Oe&&e.indexOf("file:")!==0)return fc(t,e,n,i);if(vs()||typeof ActiveXObject=="function")return hc(t,e,n,i);i(new Error("No fetch and no xhr implementation found!"))};function Dt(r){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(r)}function gc(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function pi(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Cs(n.key),n)}}function pc(r,t,e){return t&&pi(r.prototype,t),e&&pi(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function mc(r,t,e){return t=Cs(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Cs(r){var t=xc(r,"string");return Dt(t)==="symbol"?t:String(t)}function xc(r,t){if(Dt(r)!=="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(Dt(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var yc=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,n,i){return mc({},n,i||"")},parseLoadPayload:function(e,n){},request:dc,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Ss=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};gc(this,r),this.services=t,this.options=e,this.allOptions=n,this.type="backend",this.init(t,e,n)}return pc(r,[{key:"init",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=mr(i,this.options||{},yc()),this.allOptions=s,this.services&&this.options.reloadInterval&&setInterval(function(){return n.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(e,n,i){this._readAny(e,e,n,n,i)}},{key:"read",value:function(e,n,i){this._readAny([e],e,[n],n,i)}},{key:"_readAny",value:function(e,n,i,s,o){var a=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(e,i)),l=ac(l),l.then(function(c){if(!c)return o(null,{});var u=a.services.interpolator.interpolate(c,{lng:e.join("+"),ns:i.join("+")});a.loadUrl(u,o,n,s)})}},{key:"loadUrl",value:function(e,n,i,s){var o=this,a=typeof i=="string"?[i]:i,l=typeof s=="string"?[s]:s,c=this.options.parseLoadPayload(a,l);this.options.request(this.options,e,c,function(u,f){if(f&&(f.status>=500&&f.status<600||!f.status))return n("failed loading "+e+"; status code: "+f.status,!0);if(f&&f.status>=400&&f.status<500)return n("failed loading "+e+"; status code: "+f.status,!1);if(!f&&u&&u.message&&u.message.indexOf("Failed to fetch")>-1)return n("failed loading "+e+": "+u.message,!0);if(u)return n(u,!1);var h,p;try{typeof f.data=="string"?h=o.options.parse(f.data,i,s):h=f.data}catch(g){p="failed parsing "+e+" to json"}if(p)return n(p,!1);n(null,h)})}},{key:"create",value:function(e,n,i,s,o){var a=this;if(this.options.addPath){typeof e=="string"&&(e=[e]);var l=this.options.parsePayload(n,i,s),c=0,u=[],f=[];e.forEach(function(h){var p=a.options.addPath;typeof a.options.addPath=="function"&&(p=a.options.addPath(h,n));var g=a.services.interpolator.interpolate(p,{lng:h,ns:n});a.options.request(a.options,g,l,function(m,E){c+=1,u.push(m),f.push(E),c===e.length&&typeof o=="function"&&o(u,f)})})}}},{key:"reload",value:function(){var e=this,n=this.services,i=n.backendConnector,s=n.languageUtils,o=n.logger,a=i.language;if(!(a&&a.toLowerCase()==="cimode")){var l=[],c=function(f){var h=s.toResolveHierarchy(f);h.forEach(function(p){l.indexOf(p)<0&&l.push(p)})};c(a),this.allOptions.preload&&this.allOptions.preload.forEach(function(u){return c(u)}),l.forEach(function(u){e.allOptions.ns.forEach(function(f){i.read(u,f,"read",null,null,function(h,p){h&&o.warn("loading namespace ".concat(f," for language ").concat(u," failed"),h),!h&&p&&o.log("loaded namespace ".concat(f," for language ").concat(u),p),i.loaded("".concat(u,"|").concat(f),h,p)})})})}}}]),r}();Ss.type="backend";function Ac(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(r){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(r)}function vc(r,t){if(Mt(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(Mt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function wc(r){var t=vc(r,"string");return Mt(t)=="symbol"?t:String(t)}function mi(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,wc(n.key),n)}}function bc(r,t,e){return t&&mi(r.prototype,t),e&&mi(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}var Es=[],Cc=Es.forEach,Sc=Es.slice;function Ec(r){return Cc.call(Sc.call(arguments,1),function(t){if(t)for(var e in t)r[e]===void 0&&(r[e]=t[e])}),r}var xi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ic=function(t,e,n){var i=n||{};i.path=i.path||"/";var s=encodeURIComponent(e),o="".concat(t,"=").concat(s);if(i.maxAge>0){var a=i.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(i.domain){if(!xi.test(i.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(i.domain)}if(i.path){if(!xi.test(i.path))throw new TypeError("option path is invalid");o+="; Path=".concat(i.path)}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(i.expires.toUTCString())}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite){var l=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},yi={create:function(t,e,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),i&&(s.domain=i),document.cookie=Ic(t,encodeURIComponent(e),s)},read:function(t){for(var e="".concat(t,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},Tc={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&typeof document<"u"){var n=yi.read(t.lookupCookie);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&typeof document<"u"&&yi.create(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},_c={name:"querystring",lookup:function(t){var e;if(typeof window<"u"){var n=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));for(var i=n.substring(1),s=i.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(e=s[o].substring(a+1))}}}return e}},At=null,Ai=function(){if(At!==null)return At;try{At=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch(e){At=!1}return At},Rc={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&Ai()){var n=window.localStorage.getItem(t.lookupLocalStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&Ai()&&window.localStorage.setItem(e.lookupLocalStorage,t)}},vt=null,vi=function(){if(vt!==null)return vt;try{vt=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch(e){vt=!1}return vt},Bc={name:"sessionStorage",lookup:function(t){var e;if(t.lookupSessionStorage&&vi()){var n=window.sessionStorage.getItem(t.lookupSessionStorage);n&&(e=n)}return e},cacheUserLanguage:function(t,e){e.lookupSessionStorage&&vi()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)}},Lc={name:"navigator",lookup:function(t){var e=[];if(typeof navigator<"u"){if(navigator.languages)for(var n=0;n<navigator.languages.length;n++)e.push(navigator.languages[n]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0}},Pc={name:"htmlTag",lookup:function(t){var e,n=t.htmlTag||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(e=n.getAttribute("lang")),e}},Nc={name:"path",lookup:function(t){var e;if(typeof window<"u"){var n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(n instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof n[t.lookupFromPathIndex]!="string")return;e=n[t.lookupFromPathIndex].replace("/","")}else e=n[0].replace("/","")}return e}},kc={name:"subdomain",lookup:function(t){var e=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,n=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[e]}};function Oc(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(t){return t}}}var Is=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ac(this,r),this.type="languageDetector",this.detectors={},this.init(t,e)}return bc(r,[{key:"init",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=Ec(n,this.options||{},Oc()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(s){return s.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(Tc),this.addDetector(_c),this.addDetector(Rc),this.addDetector(Bc),this.addDetector(Lc),this.addDetector(Pc),this.addDetector(Nc),this.addDetector(kc)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var n=this;e||(e=this.options.order);var i=[];return e.forEach(function(s){if(n.detectors[s]){var o=n.detectors[s].lookup(n.options);o&&typeof o=="string"&&(o=[o]),o&&(i=i.concat(o))}}),i=i.map(function(s){return n.options.convertDetectedLanguage(s)}),this.services.languageUtils.getBestMatchFromCodes?i:i.length>0?i[0]:null}},{key:"cacheUserLanguage",value:function(e,n){var i=this;n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(function(s){i.detectors[s]&&i.detectors[s].cacheUserLanguage(e,i.options)}))}}]),r}();Is.type="languageDetector";const Fc=ue.use(Ss).use(Is).init({fallbackLng:"en",whitelist:["en","jp"],preload:["en","jp"],ns:"translations",defaultNS:"translations",fallbackNS:!1,debug:!0,detection:{order:["querystring","navigator","htmlTag"],lookupQuerystring:"lang"},backend:{loadPath:"http://localhost:5174/i18n/en/translations.json"}},(r,t)=>{if(r)return console.error(r)}),Dc=r=>{const t=ll();t.enabled=!1;const e=Wt(),n=Rr();let i,s,o;const[a,l]=$(n),[c,u]=$(!1);return Nt(async()=>{await Fc,u(!0)}),Za({Menu:"m",Escape:"Escape"}),Nt(()=>{vn(!0)}),ce(()=>{l(n.pathname)}),ce(ye(gl,f=>{if(f)return i.states.has("focus")&&o.setFocus();i.setFocus(),Wn(!0)},{defer:!0})),A(Ee,{get when(){return c()},get children(){return A(Dl,{i18n:ue,get children(){return A(P,{ref(f){const h=window.APP;typeof h=="function"?h(f):window.APP=f},onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onLeft:()=>{if(i.states.has("focus")||ul()==!1&&(a()=="/search"||a().includes("/movie/")))return!1;var f=Je();f!=null&&f.states.has("not-set")||(s=f),i.setFocus(),Wn(!0)},onRight:()=>(vn(!1),Wn(!1),i.states.has("focus")&&s.setFocus()),plinko:!0,get children(){return[A(ml,{}),A(P,{get style(){return Pr.pageWrapper},get children(){return r.children}}),A(Sl,{ref(f){const h=i;typeof h=="function"?h(f):i=f}}),A(Ol,{ref(f){const h=o;typeof h=="function"?h(f):o=f}})]}})}})}})},Mc=new URL("AppCoreExtensions-5e46046a.js",import.meta.url).href,wi={WrapperTitleStyles:{display:"flex",flexDirection:"row",gap:4,alignItems:"flexEnd",height:40},TitleStyles:{color:k(j.color.white),scale:1,fontSize:30},IconStyles:{width:26,height:26}};function Yn(r){return A(P,{skipFocus:!0,forwardStates:!0,get style(){return wi.WrapperTitleStyles},get children(){return A(X,{get style(){return{...wi.TitleStyles,...r.style}},get children(){return r.title}})}})}const nt={HomeWrapper:{x:0,y:0,width:window.devicePixelRatio>1?1920:window.innerWidth},HomeMain:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",gap:10,width:window.devicePixelRatio>1?1920:window.innerWidth,height:1200,y:520,x:20,zIndex:2},HomeList:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",gap:10,width:window.devicePixelRatio>1?1920:window.innerWidth,height:1200,y:0,x:0,zIndex:2},HomeItem:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",height:355},Row:{y:0,x:0,zIndex:999,display:"flex",justifyContent:"spaceBetween",gap:10,height:290}};let bi=new Map;const tn=new Map;function Qc(r){const t="";return async e=>{const n="/movie/popular?language=en-US&page=".concat(e);if(bi.has(n))return bi.get(n);const i=r;return await On.get(n).then(o=>{let a=o.results.filter(u=>!u.adult),l=(tn.has(t)?tn.get(t):[]).concat(Lr(a)),c=Fn(l,i);return c[c.length-1].length<i?tn.set(t,c.pop()):tn.delete(t),c})}}const Ts={SliderMain:{y:0,x:0,zIndex:999,display:"flex",justifyContent:"spaceBetween",gap:10,height:290}},Gn={Thumbnail:{borderRadius:10,width:187,height:294,scale:1,zIndex:2,focus:{scale:1.02}},FocusRing:{borderRadius:10,y:-2,x:-2,zIndex:-1,color:k("#ffffff")}};function kr(r){const t=Wt();let e;ce(ye(Je,s=>{O(s),setTimeout(()=>{s.heroContent?(e.parent=s.parent,e.alpha=1,e.scale=1,e.x=s.x-2,e.y=s.y-2,e.width=s.width+4,e.height=s.height+4,e.createAnimation({scale:1.03}).start()):e.alpha=0},10)},{defer:!0}));function n(){var s;(s=this.children.selected)==null||s.setFocus()}function i(){console.log(this),dl(this.data),t("/movie/".concat(this.data.id))}return A(P,re(r,{animate:!0,get style(){return Gn.Thumbnail},onEnter:i,get children(){return[A(P,re({onFocus:n},r,{animate:!0,get style(){return Gn.Thumbnail}})),A(P,{ref(s){const o=e;typeof o=="function"?o(s):e=s},get style(){return Gn.FocusRing}})]}}))}function Vn(r){const t=Qt(()=>0);return A(Pe,{transition:{x:{delay:20,duration:300}},animate:!0,width:4400,get style(){return Ts.SliderMain},justifyContent:"flexStart",gap:40,get x(){return r.rowX()},get onSelectedChanged(){return r.moveRow},plinko:!0,get children(){return A(Le,{get each(){return r.data},children:(e,n)=>A(kr,re(e,{get autofocus(){return Ht(()=>!!r.autofocus)()&&t(n())}}))})}})}const Mn=1100,zc={...j.typography.display2,width:Mn,height:58,contain:"both"},$c=r=>A(X,re(r,{style:zc,get children(){return r.children}})),Uc={...j.typography.body1,width:Mn,height:72,contain:"both"},Hc={fontSize:20,lineHeight:20},jc=r=>A(X,re(r,{style:Uc,get children(){return r.children}}));function Wc(r){return[A(Ee,{get when(){return(r==null?void 0:r.rtCrit)&&(r==null?void 0:r.rtCrit)!=="0"},get children(){return[A(P,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),A(X,{style:Ar,get children(){return r.rtCrit+"%"}})]}}),A(Ee,{get when(){return(r==null?void 0:r.rtFan)&&(r==null?void 0:r.rtFan)!=="0"},get children(){return[A(P,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),A(X,{style:Ar,get children(){return r.rtFan+"%"}})]}})]}const Xc=r=>(()=>{const t=gt("node");return ns(el,t,()=>[8,15,13,15]),jt(t,re(r,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),Nn(t,A(X,{style:Hc,get children(){return r.children}})),t})(),Ar=j.typography.body2,Yc=r=>A(P,{get style(){return{...j.flexRow,gap:12,width:Mn,height:48}},get children(){return[A(X,{style:Ar,get children(){return r.metaText}}),A(Le,{get each(){return r.badges},children:t=>A(Xc,{y:-5,children:t})}),Ht(()=>Wc(r.reviews))]}}),Or=r=>(console.log("badges",r.badges),A(P,re(r,{get style(){return{...j.flexColumn,width:Mn,height:160,gap:16}},get children(){return[A($c,{get children(){return r.title}}),A(jc,{get children(){return r.description}}),A(Yc,{get metaText(){return r.metaText},get badges(){return r.badges},get reviews(){return r.reviews}})]}})));function Gc(){let r,t,e=0;const n=1,s={alpha:n,color:4294967295,transition:{alpha:{duration:1e3,easing:"ease-in-out"}}};return ce(ye(fl,o=>{if(o.startsWith("#")){r.color=o,r.src="",r.alpha=1,e=1,t.alpha=0;return}else r.color=4294967295;if(e===0){r.src=o,e=1;return}if(e===1){t.src=o,e=2,r.alpha=0,t.alpha=1;return}e===2&&(r.src=o,e=1,r.alpha=n,t.alpha=0)},{defer:!0})),A(P,{get width(){return window.devicePixelRatio>1?1920:window.innerWidth},get height(){return window.devicePixelRatio>1?1080:window.innerHeight},zIndex:-5,x:-21,get children(){return[A(P,{ref(o){const a=r;typeof a=="function"?a(o):r=o},style:s,animate:!0}),A(P,{ref(o){const a=t;typeof a=="function"?a(o):t=o},style:s,alpha:0,animate:!0}),A(P,{animate:!0,get effects(){return{radialGradient:{colors:[124,124,k("#000000")],stops:[.6,.1,1.2],height:500,width:(window.devicePixelRatio>1?1920:window.innerWidth)-300,pivot:[.8,0]}}}})]}})}const Ge={LoadingWrapper:{x:0,y:0,width:window.innerWidth-100,height:window.innerHeight,color:k("#000000"),display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},LoadingMain:{display:"flex",flexDirection:"row",gap:30,height:30},LoadingItem:{x:0,y:0,width:15,height:15,color:k("#ffffff"),borderRadius:7.5,choose:{transition:{duration:.5,timingFunction:"ease-in-out"},color:k("#ff0000"),scale:1.3}}};function Vc(r){let t;const[e,n]=$(0),[i,s]=$(!0);return Nt(()=>{setInterval(()=>{e()==0&&s(!0),e()==5&&s(!1),i()?(e()>0&&t.children[e()].states.remove("choose"),t.children[e()].states.add("choose"),n(o=>o+1)):(n(o=>o-1),t.children[e()].states.remove("choose"))},200)}),A(P,{forwardStates:!0,animate:!0,get style(){return Ge.LoadingWrapper},autofocus:!0,get children(){return A(P,{get style(){return Ge.LoadingMain},ref(o){const a=t;typeof a=="function"?a(o):t=o},skipFocus:!0,get children(){return[A(P,{get style(){return Ge.LoadingItem},skipFocus:!0,animate:!0}),A(P,{get style(){return Ge.LoadingItem},skipFocus:!0,animate:!0}),A(P,{get style(){return Ge.LoadingItem},skipFocus:!0,animate:!0}),A(P,{get style(){return Ge.LoadingItem},skipFocus:!0,animate:!0}),A(P,{get style(){return Ge.LoadingItem},skipFocus:!0,animate:!0})]}})}})}const Kc=()=>{const[r,t]=$({}),[e,n]=$(10),[i,s]=$(10),[o,a]=$(10),[l,c]=$(0),u=K(()=>Xt(Qc(1))),f=S=>{var y;(y=S.children.selected)==null||y.setFocus(),s(S.selected*-227+10),[].concat.apply([],u().pages()).length-S.selected<15&&u().setPage(b=>b+1)},h=S=>{n(S.selected*-227+10),[].concat.apply([],u().pages()).length-S.selected<15&&u().setPage(y=>y+1)},p=S=>{a(S.selected*-227+10),[].concat.apply([],u().pages()).length-S.selected<15&&u().setPage(y=>y+1)};ce(ye(Je,S=>{console.log(S),S.backdrop&&hl("https://image.tmdb.org/t/p/original/".concat(S.data.backdrop_path)),S.heroContent&&t(S.heroContent)},{defer:!0}));function g(){var S;(S=this.children.selected)==null||S.setFocus(),c((this.y||0)*-1+24)}function m(){var S;(S=this.children.selected)==null||S.setFocus(),c((this.y||0)*-1+24)}function E(){var S;(S=this.children.selected)==null||S.setFocus(),c((this.y||0)*-1+24)}return Fl(),A(P,{get style(){return nt.HomeWrapper},get children(){return[A(Ee,{get when(){return u().pages().length==0},get children(){return A(Vc,{})}}),A(Gc,{}),A(Or,re({y:360,x:20},r)),A(P,{get style(){return nt.HomeMain},clipping:!0,autofocus:!0,get children(){return A(Ce,{get style(){return nt.HomeList},clipping:!0,plinko:!0,get y(){return l()},animate:!0,get children(){return[A(Pe,{get style(){return nt.HomeItem},onFocus:g,autofocus:!0,get children(){return[A(Yn,{title:"Popular",icon:"assets/popular.png"}),A(Vn,{get data(){return[].concat.apply([],u().pages())},rowX:i,moveRow:f,autofocus:!0})]}}),A(Pe,{get style(){return nt.HomeItem},onFocus:m,get children(){return[A(Yn,{title:"Trending",icon:"assets/trending.png"}),A(Vn,{get data(){return[].concat.apply([],u().pages())},rowX:e,moveRow:h})]}}),A(Pe,{get style(){return nt.HomeItem},onFocus:E,get children(){return[A(Yn,{title:"Recommend",icon:"assets/recommend.png"}),A(Vn,{get data(){return[].concat.apply([],u().pages())},rowX:o,moveRow:p})]}})]}})}})]}})},Ci=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],qc={display:"flex",flexDirection:"column",gap:40,y:0,color:k("#000000"),height:j.layout.screenH,alpha:1},Jc={display:"flex",flexDirection:"row",justifyContent:"flexStart",gap:16,x:40,zIndex:999,height:j.layout.screenH},Zc={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:16,width:540,x:40,zIndex:999},Si={display:"flex",flexDirection:"row",justifyContent:"spaceBetween",gap:8,height:70,width:500},eu={color:k("#000000"),alpha:.8,zIndex:998,x:0,y:0},tu={display:"flex",borderRadius:6,border:{width:0,color:k("#ffffff")},justifyContent:"center",alignItems:"center",gap:6,width:70,height:70,color:k("#2e3743"),focus:{border:{width:4,color:k("#ffffff")},color:k("#000000")}},nu={fontSize:40},ru={color:k("#red"),width:500,x:40,height:70,alpha:1,backgroundColor:k("#ffffff"),borderRadius:8,border:{width:4,color:k("#ffffff")},display:"flex",alignItems:"center",justifyContent:"flexStart"},iu={width:500,display:"flex",flexDirection:"column",alignItems:"flexStart",justifyContent:"flexStart",gap:20,x:0},Ei={height:70,width:240,color:k("#2e3743"),display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:{width:0,color:k("#ffffff")},focus:{border:{width:4,color:k("#ffffff")},color:k("#000000")}},Ii={width:70,height:50},su={height:10,x:0,y:0},ou={color:k("#09121a"),y:-160,fontSize:30,x:40,width:j.layout.screenW-(580+116),height:j.layout.screenH,zIndex:999,alignItems:"center",justifyContent:"center"},au={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:j.layout.screenW-(2*j.layout.marginX+532+(j.layout.marginX+j.layout.gutterX)*2),x:48,y:48,zIndex:2},lu={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20},cu={display:"flex",justifyContent:"center",alignItems:"center"};function _s(r){const[t,e]=Vs(r,["items"]);return A(Pe,re(e,{get style(){return Pr.Row},get children(){return A(Le,{get each(){return t.items},children:n=>A(kr,n)})}}))}let Ti=new Map;const nn=new Map;function uu(r,t){const e="";return async n=>{const i="/search/movie?include_adult=false&page=".concat(n,"&query==").concat(t);if(Ti.has(i))return Ti.get(i);const s=r;return await On.get(i).then(a=>{let l=a.results.filter(f=>!f.adult),c=(nn.has(e)?nn.get(e):[]).concat(Lr(l)),u=Fn(c,s);return u[u.length-1].length<s?nn.set(e,u.pop()):nn.delete(e),u})}}const _i="./";function fu(r){let t,e,n,i,s,o,a,l,c;const[u,f]=$(""),[h,p]=$(0);let g=K(()=>Xt(uu(5,u())));ce(ye(u,w=>{p(0),g().setPage(1)}));const m=Qt(()=>0);function E(){this.states.add("focus")}function S(){this.states.remove("focus")}const y=()=>()=>{f(w=>w+" ")},b=()=>()=>{f(w=>w.slice(0,-1))};function x(w){return()=>{f(v=>v+w)}}const _=()=>{let w=[];for(let B=0;B<Ci.length;B+=6){const N=Ci.slice(B,B+6);w.push(N)}return A(Le,{each:w,children:(B,N)=>A(Pe,{style:Si,autofocus:!1,plinko:!0,get children(){return A(Le,{each:B,children:(L,Q)=>A(P,{style:tu,get onEnter(){return x(L)},animate:!0,onBlur:S,onFocus:E,forwardStates:!0,autofocus:!1,get children(){return A(X,{style:nu,children:L})}})})}})})};function R(){var v;(v=this.children.selected)==null||v.setFocus(),p((this.y||0)*-1+24);let w=g().pages().length;this.parent&&(w===0||this.parent.selected&&this.parent.selected>=w-2)&&g().setPage(B=>B+1)}function I(){}return A(P,{ref(w){const v=t;typeof v=="function"?v(w):t=w},animate:!0,style:eu,autofocus:!0,get children(){return A(P,{ref(w){const v=i;typeof v=="function"?v(w):i=w},animate:!0,style:qc,autofocus:!0,plinko:!0,get children(){return[A(P,{ref(w){const v=e;typeof v=="function"?v(w):e=w},style:su,skipFocus:!0}),A(P,{ref(w){const v=e;typeof v=="function"?v(w):e=w},style:ru,animate:!0,skipFocus:!0,get children(){return A(X,{get style(){return{color:k("#ffffff"),fontSize:30,marginLeft:20}},get children(){return u()}})}}),A(Ce,{style:Jc,ref(w){const v=s;typeof v=="function"?v(w):s=w},autofocus:!0,onDown:()=>{if(a.states.has("focus"))return!1},plinko:!0,get children(){return[A(Ce,{style:Zc,ref(w){const v=a;typeof v=="function"?v(w):a=w},onRight:()=>{o.setFocus(),g().pages().length>0&&l.setFocus()},onLeft:()=>{vn(!0)},get children(){return[A(Pe,{style:Si,autofocus:!1,get children(){return[A(P,{style:Ei,ref(w){const v=c;typeof v=="function"?v(w):c=w},get onEnter(){return y()},animate:!0,autofocus:!1,get children(){return A(P,{style:Ii,src:_i+"assets/icon-space.png",forwardStates:!0,animate:!0})}}),A(P,{style:Ei,get onEnter(){return b()},animate:!0,autofocus:!1,get children(){return A(P,{style:Ii,src:_i+"assets/icon-back-space.png",forwardStates:!0,animate:!0})}})]}}),A(Ce,{plinko:!0,style:lu,get children(){return _()}}),A(Ce,{ref(w){const v=n;typeof v=="function"?v(w):n=w},animate:!0,style:iu,forwardStates:!0,get children(){return A(X,{get style(){return{color:k("#504d4d"),fontSize:30,focus:{color:k("#ffffff")}}}})}})]}}),A(P,{style:ou,ref(w){const v=o;typeof v=="function"?v(w):o=w},onLeft:()=>{a.setFocus()},get children(){return[A(Ee,{get when(){return g().pages().length==0},get children(){return A(P,{style:cu,get children(){return A(X,{style:{fontSize:40,display:"flex",justifyContent:"center",textAlign:"center"},children:"No Data"})}})}}),A(Ee,{get when(){return g().pages().length>0},get children(){return A(Ce,{ref(w){const v=l;typeof v=="function"?v(w):l=w},animate:!0,get y(){return h()},style:au,plinko:!0,get children(){return A(Le,{get each(){return g().pages()},children:(w,v)=>A(_s,{get autofocus(){return Ht(()=>!!m(v()))()&&o.states.has("focus")},items:w,onFocus:R,onEnter:I})})}})}})]}})]}})]}})}})}const wt={TiviWrapper:{x:0,y:0,width:1920,height:1080},Content:{y:580,zIndex:2},Container:{width:1720,x:50,display:"flex",flexDirection:"column",gap:40,y:0,zIndex:2},Row:{display:"flex",height:290,width:1720,justifyContent:"spaceBetween",clipping:!0},Item:{borderRadius:10,width:187,height:294,scale:1,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:k("#434343"),focus:{scale:1.02}},IdChannel:{color:k("#ffffff"),fontSize:32},NameChannel:{fontFamily:"Roboto",fontSize:25,lineHeight:25,contain:"both",width:150,height:200,textAlign:"center",overflowSuffix:"...",clipping:!0,x:0,maxLines:3}},Fr=1100,hu={...j.typography.display2,width:Fr,height:58,contain:"both"},du=r=>A(X,re(r,{style:hu,get children(){return r.children}})),gu={...j.typography.body1,width:Fr,height:72,contain:"both"},pu=r=>A(X,re(r,{style:gu,get children(){return r.children}})),mu=r=>A(P,re(r,{get style(){return{...j.flexColumn,width:Fr,height:160,gap:16,x:50,y:50}},get children(){return[A(du,{get children(){var t;return(t=r.data)==null?void 0:t.channel_name}}),A(pu,{get children(){var t;return(t=r.data)==null?void 0:t.description}})]}})),xu=()=>{const[r,t]=$(),[e,n]=$([]);$(0);const[i,s]=$(10);function o(p){try{let g=window.CrossPlatformBridge.command(p);return JSON.parse(g)}catch(g){return null}}function a(){let g=o(JSON.stringify({param:{service_no:"A_CPB1",version:"1"},payload:{type:"all"}}));if(g&&g.data)return g.data}function l(p){return o(JSON.stringify({param:{service_no:"A_CPB4",version:"1"},payload:{channel_id:p}}))}Nt(async()=>{try{const p=await a();fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(p)+"&field_2=&field_3="),n(p)}catch(p){fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(p)+"&field_2=&field_3=")}});const c=p=>{console.log("focusItem",p)},u=async p=>{try{const g=await l(p);fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(g)+"&field_2=&field_3=")}catch(g){fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(g)+"&field_2=&field_3="),console.log("error",g)}};ce(ye(Je,p=>{console.log(p.channel_name),t({channel_name:p.channel_name,description:p.channel_description||""}),console.log(r()),p.channel_name&&pl(p.channel_name)},{defer:!0}));const f=p=>{s(p.selected*-227+10)};function h(p){if(p.length>6){let g="";for(let m=0;m<p.length;m++)g+=p[m],(m+1)%6===0&&m!==p.length-1&&(g+=" ");return g}else return p}return A(P,{get style(){return wt.TiviWrapper},clipping:!0,autofocus:!0,get children(){return[A(mu,{get data(){return r()}}),A(P,{get style(){return wt.Content},get children(){return A(Ce,{autofocus:!0,animate:!0,get style(){return wt.Container},get children(){return A(Pe,{transition:{x:{delay:20,duration:300}},animate:!0,width:4400,get style(){return Ts.SliderMain},justifyContent:"flexStart",gap:40,get x(){return i()},onSelectedChanged:f,plinko:!0,get children(){return A(Le,{get each(){return e()},children:(p,g)=>A(P,{get style(){return wt.Item},onFocus:c,get channel_id(){return p.id},get channel_name(){return p.channel_name},get channel_description(){return p.description},animate:!0,onEnter:()=>u(p.id),get children(){return A(X,{get style(){return wt.NameChannel},wordBreak:!0,get children(){return h(p.channel_name)}})}})})}})}})}})]}})},yu=()=>A(P,{style:{width:1920,height:1080,color:868483072},get children(){return A(X,{children:"Not Found"})}});let Kn=new Map;const rn=new Map;function Rs(r,t){return e=>{const n="/trending/".concat(r,"/week?page=").concat(e);if(Kn.has(n))return Kn.get(n);const i=t||7;let s=On.get(n).then(o=>{let a=o.results.filter(u=>!u.adult),l=(rn.has(r)?rn.get(r):[]).concat(Lr(a)),c=Fn(l,i);return c[c.length-1].length<i?rn.set(r,c.pop()):rn.delete(r),c});return Kn.set(n,s),s}}function Au(r){const t=Math.floor(r/60),e=r%60;return t+"h "+(e<10?"0":"")+e+"m"}function Ri(r){return r.split("-")[0]}function Bs({type:r,id:t}){let e=r==="movie"?{rtCrit:86,rtFan:92}:{};return On.get("/".concat(r,"/").concat(t,"?adult=true")).then(n=>(console.log(n),{backgroundImage:un(n.backdrop_path,"original"),heroContent:{title:n.title||n.name,description:n.overview,badges:["HD"],metaText:r==="movie"?Au(n.runtime)+" - "+n.release_date:"".concat(Ri(n.first_air_date)," - ").concat(Ri(n.last_air_date)),reviews:e},...n}))}const Bi={Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:15,width:j.layout.screenW-2*j.layout.marginX,x:j.layout.marginX+j.layout.gutterX,y:100,zIndex:2},itemsContainer:{width:j.layout.screenW,height:600,y:350,x:0,zIndex:2}};function vu(r){const t=Qt(()=>0);return A(P,{clipping:!0,get style(){return Bi.itemsContainer},get children(){return A(Ce,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return r.y},get style(){return Bi.Column},get children(){return A(Le,{get each(){return(r==null?void 0:r.data)||[]},children:(e,n)=>A(_s,{get autofocus(){return Ht(()=>!!r.autofocus)()?t(n()):!1},justifyContent:"flexStart",items:e,get onFocus(){return r.onFocus},get onEnter(){return r.onEnter}})})}})}})}const wu=()=>{const r=Br(),[t,e]=$(0),[n,i]=$();vr(n,Bs);const[s,o]=$({}),a=Wt();Qt(()=>0);const l=K(()=>Xt(Rs(r.filter||"all",8)));ce(ye(Je,f=>{f.backdrop&&us(f.backdrop),f.heroContent&&o(f.heroContent)},{defer:!0}));function c(){var h;(h=this.children.selected)==null||h.setFocus(),e((this.y||0)*-1+24);let f=l().pages().length;this.parent&&(f===0||this.parent.selected&&this.parent.selected>=f-2)&&l().setPage(p=>p+1)}function u(){let f=this.children.selected;O(f&&f.href),a(f.href)}return A(P,{get children(){return A(Ee,{get when(){return l().pages().length},get children(){return[A(Or,re({y:150,x:90},s)),A(vu,{type:"sliderList",onEnter:u,onFocus:c,get data(){return l().pages()},get y(){return t()},autofocus:!0})]}})}})},bu=()=>{const r=Br(),[t,e]=$({}),n=Wt();let i;const s=Qt(()=>0),o=K(()=>Xt(Rs(r.filter||"all",20)));ce(ye(Je,f=>{f.backdrop&&us(f.backdrop),f.heroContent&&e(f.heroContent)},{defer:!0}));function a(){let f=this.children.selected;O(f&&f.href),n(f.href)}const[l,c]=$(90);function u(f){c(f.selected*-227+90),[].concat.apply([],o().pages()).length-f.selected<9&&o().setPage(h=>h+1)}return A(Ee,{get when(){return o().pages().length},ref(f){const h=i;typeof h=="function"?h(f):i=f},get children(){return A(P,{get children(){return[A(Or,re({y:200,x:90},t)),A(Pe,{onSelectedChanged:u,onEnter:a,transition:{x:{delay:20,duration:300}},animate:!0,get x(){return l()},y:450,width:4400,get style(){return Pr.Row},justifyContent:"flexStart",gap:40,get children(){return A(Le,{get each(){return[].concat.apply([],o().pages())},children:(f,h)=>A(kr,re(f,{get autofocus(){return s(h())}}))})}})]}})}})},Li={Wrapper:{x:-4,y:0,alpha:1,width:window.innerWidth-100,height:window.innerHeight,color:k("#000000")},ImageBackground:{x:0,y:0,width:window.innerWidth-100,height:window.innerHeight,alpha:1},ImageBackgroundGradient:{x:0,y:0,zIndex:10,alpha:1},DetailMain:{}},ne={Wrapper:{x:0,y:window.innerHeight/3,width:window.innerWidth,height:window.innerHeight,display:"flex",alignItems:"flexEnd",justifyContent:"center",flexDirection:"column",gap:20},Main:{x:0,y:0,alpha:1,width:window.innerWidth-100,display:"flex",flexDirection:"column",gap:20},Title:{fontSize:35,boxsizing:"border-box",height:35},QuantityItem:{idth:window.innerWidth/2,fontSize:20},OverView:{height:100,display:"flex",alignItems:"flexStart"},OverViewText:{width:window.innerWidth/2,fontSize:20,contain:"both"},Quantity:{height:20,display:"flex"},Rate:{height:20,display:"flex",gap:5,alignItems:"center"},RateStar:{height:16,width:16},Section:{display:"flex",flexDirection:"row",height:30,gap:10,alignItems:"center"},Control:{height:50,display:"flex",flexDirection:"row",gap:10},ControlItem:{fontSize:20,width:150,height:40,color:k("#121212"),alpha:.9,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:{width:2,color:k("#ffffff")},focus:{scale:[1.1,{duration:200}]}},ControlItemText:{color:k("#ffffff"),fontSize:20},DetailMain:{y:200}},Ve={Wrapper:{height:400,width:window.innerWidth-100},Title:{color:k("#ffffff"),fontSize:20,width:window.innerWidth/2,alpha:.6},Tabs:{display:"flex",flexDirection:"row",gap:20,height:30}};function Cu(r){return Nt(()=>{console.log(window)}),A(P,{get style(){return Ve.Wrapper},get children(){return A(P,{get style(){return Ve.Tabs},get children(){return[A(X,{get style(){return Ve.Title},children:"More like this"}),A(X,{get style(){return Ve.Title},children:"Available now"}),A(X,{get style(){return Ve.Title},children:"On this week"}),A(X,{get style(){return Ve.Title},children:"Parents' guide"}),A(X,{get style(){return Ve.Title},children:"Rating"})]}})}})}const bt="./";function Su(r){function t(){console.log(r.data)}const e=n=>{const i=Math.floor(n/60),s=n%60;return"".concat(i,"h ").concat(s,"m")};return A(P,{get style(){return ne.Wrapper},onFocus:t,autofocus:!0,plinko:!0,onLeft:()=>{vn(!0)},get children(){return[A(Ce,{get style(){return ne.Main},skipFocus:!0,plinko:!0,get children(){return[A(X,{get style(){return ne.Title},skipFocus:!0,forwardStates:!0,get children(){return r.data.title}}),A(P,{get style(){return ne.Section},get children(){return[A(P,{get style(){return ne.Rate},skipFocus:!0,forwardStates:!0,get children(){return[A(P,{src:bt+"assets/star-active.png",get style(){return ne.RateStar}}),A(P,{src:bt+"assets/star-active.png",get style(){return ne.RateStar}}),A(P,{src:bt+"assets/star-active.png",get style(){return ne.RateStar}}),A(P,{src:bt+"assets/star.png",get style(){return ne.RateStar}}),A(P,{src:bt+"assets/star.png",get style(){return ne.RateStar}})]}}),A(P,{get style(){return ne.Quantity},skipFocus:!0,forwardStates:!0,get children(){return r.data.heroContent.badges.map((n,i)=>A(X,{key:i,get style(){return ne.QuantityItem},children:n}))}}),A(X,{get style(){return ne.QuantityItem},skipFocus:!0,forwardStates:!0,get children(){return e(r.data.runtime)}})]}}),A(Pe,{get style(){return ne.Control},skipFocus:!0,plinko:!0,get children(){return[A(P,{get style(){return ne.ControlItem},skipFocus:!0,get children(){return A(X,{get style(){return ne.ControlItemText},children:"Play"})}}),A(P,{get style(){return ne.ControlItem},skipFocus:!0,get children(){return A(X,{get style(){return ne.ControlItemText},children:"Add"})}})]}}),A(P,{get style(){return ne.OverView},get children(){return A(X,{get style(){return ne.OverViewText},skipFocus:!0,forwardStates:!0,get children(){return r.data.overview}})}})]}}),A(Cu,{})]}})}function Eu(){const r=Br(),t=Rr(),[e]=vr(()=>({...r}),Bs);return ce(ye(e,n=>{console.log(t),console.log(n)},{defer:!0})),A(Ee,{get when(){var n;return(n=e())==null?void 0:n.backdrop_path},get children(){return[A(P,{get style(){return Li.ImageBackground},zIndex:-5,get src(){var n;return"https://image.tmdb.org/t/p/original/".concat((n=e())==null?void 0:n.backdrop_path)},skipFocus:!0}),A(P,{alpha:.97,get style(){return Li.DetailMain},animate:!0,get effects(){return{radialGradient:{colors:[124,124,k("#131313")],stops:[1.5,.1,1.3],height:700,width:window.innerWidth-500,pivot:[.9,-.1]}}},skipFocus:!0}),A(Su,{get data(){return e()},autofocus:!0})]}})}const Iu={Wrapper:{height:1080,y:0,fontFamily:"Roboto"},Main:{display:"flex",flexDirection:"column",height:1080,gap:20,x:20},SettingRow:{},Title:{fontSize:20,color:k("#ffffff"),y:0},Select:{display:"flex",flexDirection:"row",alignItems:"center",gap:5,width:1e3},SelectTitle:{width:100},SelectTitleContent:{fontSize:20,lineHeight:50,color:k("#ffffff"),y:0},Option:{display:"flex",flexDirection:"row",width:100,gap:10},OptionIcon:{width:18,height:18,borderRadius:9,color:k("#ffffff"),display:"flex",alignItems:"center",justifyContent:"center",scale:1,focus:{scale:1.2}},OptionCenterIcon:{width:12,height:12,borderRadius:6,selected:{color:k("#f14d4d")}},OptionTitle:{contain:"both",fontSize:20,width:60},btnSave:{height:35,width:100,color:k("#333333"),borderRadius:5,display:"flex",alignItems:"center",justifyContent:"center",border:{color:k("#ffffff"),width:0},focus:{scale:1.05,border:{width:2,color:k("#ffffff")}}},btnSaveText:{fontSize:20}};function Tu(){return $("JP"),A(P,{get style(){return Iu.Wrapper}})}$e.debug=!1;$e.fontSettings.fontFamily="Roboto";$e.fontSettings.color=4294967295;var _u=navigator.userAgent.toLowerCase(),qn=_u.indexOf("mobile")>-1;ma(()=>A(ha,{get options(){return{coreExtensionModule:Mc,threadXCoreWorkerUrl:void 0,appWidth:qn&&window.devicePixelRatio>1?1920:window.innerWidth,appHeight:qn&&window.devicePixelRatio>1?1080:window.innerHeight,deviceLogicalPixelRatio:qn&&window.devicePixelRatio>1?.5:1}},get children(){return A(Xa,{root:Dc,get children(){return[A(Me,{path:"/",component:Kc}),A(Me,{path:"/search",component:fu}),A(Me,{path:"/videos",component:wu}),A(Me,{path:"/tv",component:xu}),A(Me,{path:"/list",component:bu}),A(Me,{path:"/:type/:id",component:Eu}),A(Me,{path:"/setting",component:Tu}),A(Me,{path:"/*all",component:yu})]}})}}));export{Bu as __vite_legacy_guard};
//# sourceMappingURL=index-a545ec98.js.map
