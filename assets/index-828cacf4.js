var Si=Object.defineProperty;var Ti=(r,n,e)=>n in r?Si(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e;var d=(r,n,e)=>(Ti(r,typeof n!="symbol"?n+"":n,e),e);import{E as We,T as bi,W as lr,C as Bi}from"./CoreExtension-584164f0.js";function vl(){import.meta.url,import("_").catch(()=>1);async function*r(){}}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function Ri(){var r='<video id="video" tabindex="0" poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAEsCAYAAAAhNGCdAAAAAXNSR0IArs4c6QAAELlJREFUeF7t1kERAAAIAkHpX9oeN2sDFh/sHAECBAgQIECAAIGwwMLZRCNAgAABAgQIECBwBq8nIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAgQf4tAEt5FxRQwAAAABJRU5ErkJggg==" hidden></video><div id="video-controls" class="controls display-control"><button id="playpause" tabindex="0" type="button" data-state="play"></button><button id="back" tabindex="0" type="button" data-state="back"></button><button id="next" tabindex="0" type="button" data-state="next"></button><button id="max" tabindex="0" type="button" data-state="max"></button><button id="mute" type="button" data-state="mute">Mute/Unmute</button><div class="dropdown"><button id="quality-btn" class="dropbtn btn-settings"></button><div id="quality" class="dropdown-content"></div></div><div data-type="video" id="live-indicator" class="display_none"><span id="red-dot"></span><span id="live-text">Live</span></div><div id="time"><span id="current-time">10:11</span>/<span id="end-time">11:23</span></div><div class="progress"><progress id="progress" tabindex="0" value="0" min="0"><span id="progress-bar"></span></progress></div></div>',n=document.getElementById("app"),e=document.createElement("div");e.id="player",e.innerHTML=r.trim(),n.parentNode.insertBefore(e,n.nextSibling)}document.addEventListener("DOMContentLoaded",Ri);const kr=(r,n)=>r===n,jt=Symbol("solid-proxy"),Qi=Symbol("solid-track"),Vt={equals:kr};let zr=Ur;const Ce=1,Kt=2,Or={owned:null,cleanups:null,context:null,owner:null},pn={};var z=null;let mn=null,$=null,oe=null,Se=null,an=0;function lt(r,n){const e=$,t=z,i=r.length===0,o=n===void 0?t:n,s=i?Or:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=i?r:()=>r(()=>le(()=>un(s)));z=s,$=null;try{return Be(a,!0)}finally{$=e,z=t}}function N(r,n){n=n?Object.assign({},Vt,n):Vt;const e={value:r,observers:null,observerSlots:null,comparator:n.equals||void 0},t=i=>(typeof i=="function"&&(i=i(e.value)),Yr(e,i));return[$r.bind(e),t]}function Tn(r,n,e){const t=Tt(r,n,!0,Ce);Ve(t)}function Ie(r,n,e){const t=Tt(r,n,!1,Ce);Ve(t)}function ne(r,n,e){zr=ki;const t=Tt(r,n,!1,Ce),i=bn&&cn(bn);i&&(t.suspense=i),(!e||!e.render)&&(t.user=!0),Se?Se.push(t):Ve(t)}function X(r,n,e){e=e?Object.assign({},Vt,e):Vt;const t=Tt(r,n,!0,0);return t.observers=null,t.observerSlots=null,t.comparator=e.equals||void 0,Ve(t),$r.bind(t)}function Pi(r){return r&&typeof r=="object"&&"then"in r}function Xn(r,n,e){let t,i,o;arguments.length===2&&typeof n=="object"||arguments.length===1?(t=!0,i=r,o=n||{}):(t=r,i=n,o=e||{});let s=null,a=pn,l=!1,c="initialValue"in o,h=typeof t=="function"&&X(t);const u=new Set,[C,_]=(o.storage||N)(o.initialValue),[f,p]=N(void 0),[E,v]=N(void 0,{equals:!1}),[x,w]=N(c?"ready":"unresolved");function m(y,A,S,M){return s===y&&(s=null,M!==void 0&&(c=!0),(y===a||A===a)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(M,{value:A})),a=pn,T(A,S)),A}function T(y,A){Be(()=>{A===void 0&&_(()=>y),w(A!==void 0?"errored":c?"ready":"unresolved"),p(A);for(const S of u.keys())S.decrement();u.clear()},!1)}function b(){const y=bn,A=C(),S=f();if(S!==void 0&&!s)throw S;return $&&!$.user&&y&&Tn(()=>{E(),s&&(y.resolved||u.has(y)||(y.increment(),u.add(y)))}),A}function I(y=!0){if(y!==!1&&l)return;l=!1;const A=h?h():t;if(A==null||A===!1){m(s,le(C));return}const S=a!==pn?a:le(()=>i(A,{value:C(),refetching:y}));return Pi(S)?(s=S,"value"in S?(S.status==="success"?m(s,S.value,void 0,A):m(s,void 0,void 0,A),S):(l=!0,queueMicrotask(()=>l=!1),Be(()=>{w(c?"refreshing":"pending"),v()},!1),S.then(M=>m(S,M,void 0,A),M=>m(S,void 0,Hr(M),A)))):(m(s,S,void 0,A),S)}return Object.defineProperties(b,{state:{get:()=>x()},error:{get:()=>f()},loading:{get(){const y=x();return y==="pending"||y==="refreshing"}},latest:{get(){if(!c)return b();const y=f();if(y&&!s)throw y;return C()}}}),h?Tn(()=>I(!1)):I(!1),[b,{refetch:I,mutate:_}]}function St(r,n=kr,e){const t=new Map,i=Tt(o=>{const s=r();for(const[a,l]of t.entries())if(n(a,s)!==n(a,o))for(const c of l.values())c.state=Ce,c.pure?oe.push(c):Se.push(c);return s},void 0,!0,Ce);return Ve(i),o=>{const s=$;if(s){let a;(a=t.get(o))?a.add(s):t.set(o,a=new Set([s])),ke(()=>{a.delete(s),!a.size&&t.delete(o)})}return n(o,i.value)}}function Mi(r){return Be(r,!1)}function le(r){if($===null)return r();const n=$;$=null;try{return r()}finally{$=n}}function he(r,n,e){const t=Array.isArray(r);let i,o=e&&e.defer;return s=>{let a;if(t){a=Array(r.length);for(let c=0;c<r.length;c++)a[c]=r[c]()}else a=r();if(o){o=!1;return}const l=le(()=>n(a,i,s));return i=a,l}}function Et(r){ne(()=>le(r))}function ke(r){return z===null||(z.cleanups===null?z.cleanups=[r]:z.cleanups.push(r)),r}function ln(){return z}function Li(r,n){const e=z,t=$;z=r,$=null;try{return Be(n,!0)}catch(i){Gn(i)}finally{z=e,$=t}}function Fi(r){const n=$,e=z;return Promise.resolve().then(()=>{$=n,z=e;let t;return Be(r,!1),$=z=null,t?t.done:void 0})}function Wr(r,n){const e=Symbol("context");return{id:e,Provider:zi(e),defaultValue:r}}function cn(r){return z&&z.context&&z.context[r.id]!==void 0?z.context[r.id]:r.defaultValue}function Hn(r){const n=X(r),e=X(()=>Bn(n()));return e.toArray=()=>{const t=e();return Array.isArray(t)?t:t!=null?[t]:[]},e}let bn;function $r(){if(this.sources&&this.state)if(this.state===Ce)Ve(this);else{const r=oe;oe=null,Be(()=>Zt(this),!1),oe=r}if($){const r=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(r)):($.sources=[this],$.sourceSlots=[r]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function Yr(r,n,e){let t=r.value;return(!r.comparator||!r.comparator(t,n))&&(r.value=n,r.observers&&r.observers.length&&Be(()=>{for(let i=0;i<r.observers.length;i+=1){const o=r.observers[i],s=mn&&mn.running;s&&mn.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?oe.push(o):Se.push(o),o.observers&&Xr(o)),s||(o.state=Ce)}if(oe.length>1e6)throw oe=[],new Error},!1)),n}function Ve(r){if(!r.fn)return;un(r);const n=an;Ni(r,r.value,n)}function Ni(r,n,e){let t;const i=z,o=$;$=z=r;try{t=r.fn(n)}catch(s){return r.pure&&(r.state=Ce,r.owned&&r.owned.forEach(un),r.owned=null),r.updatedAt=e+1,Gn(s)}finally{$=o,z=i}(!r.updatedAt||r.updatedAt<=e)&&(r.updatedAt!=null&&"observers"in r?Yr(r,t):r.value=t,r.updatedAt=e)}function Tt(r,n,e,t=Ce,i){const o={fn:r,state:t,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:z,context:z?z.context:null,pure:e};return z===null||z!==Or&&(z.owned?z.owned.push(o):z.owned=[o]),o}function qt(r){if(r.state===0)return;if(r.state===Kt)return Zt(r);if(r.suspense&&le(r.suspense.inFallback))return r.suspense.effects.push(r);const n=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<an);)r.state&&n.push(r);for(let e=n.length-1;e>=0;e--)if(r=n[e],r.state===Ce)Ve(r);else if(r.state===Kt){const t=oe;oe=null,Be(()=>Zt(r,n[0]),!1),oe=t}}function Be(r,n){if(oe)return r();let e=!1;n||(oe=[]),Se?e=!0:Se=[],an++;try{const t=r();return Di(e),t}catch(t){e||(Se=null),oe=null,Gn(t)}}function Di(r){if(oe&&(Ur(oe),oe=null),r)return;const n=Se;Se=null,n.length&&Be(()=>zr(n),!1)}function Ur(r){for(let n=0;n<r.length;n++)qt(r[n])}function ki(r){let n,e=0;for(n=0;n<r.length;n++){const t=r[n];t.user?r[e++]=t:qt(t)}for(n=0;n<e;n++)qt(r[n])}function Zt(r,n){r.state=0;for(let e=0;e<r.sources.length;e+=1){const t=r.sources[e];if(t.sources){const i=t.state;i===Ce?t!==n&&(!t.updatedAt||t.updatedAt<an)&&qt(t):i===Kt&&Zt(t,n)}}}function Xr(r){for(let n=0;n<r.observers.length;n+=1){const e=r.observers[n];e.state||(e.state=Kt,e.pure?oe.push(e):Se.push(e),e.observers&&Xr(e))}}function un(r){let n;if(r.sources)for(;r.sources.length;){const e=r.sources.pop(),t=r.sourceSlots.pop(),i=e.observers;if(i&&i.length){const o=i.pop(),s=e.observerSlots.pop();t<i.length&&(o.sourceSlots[s]=t,i[t]=o,e.observerSlots[t]=s)}}if(r.owned){for(n=r.owned.length-1;n>=0;n--)un(r.owned[n]);r.owned=null}if(r.cleanups){for(n=r.cleanups.length-1;n>=0;n--)r.cleanups[n]();r.cleanups=null}r.state=0}function Hr(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Gn(r,n=z){throw Hr(r)}function Bn(r){if(typeof r=="function"&&!r.length)return Bn(r());if(Array.isArray(r)){const n=[];for(let e=0;e<r.length;e++){const t=Bn(r[e]);Array.isArray(t)?n.push.apply(n,t):n.push(t)}return n}return r}function zi(r,n){return function(t){let i;return Ie(()=>i=le(()=>(z.context={...z.context,[r]:t.value},Hn(()=>t.children))),void 0),i}}const Oi=Symbol("fallback");function cr(r){for(let n=0;n<r.length;n++)r[n]()}function Wi(r,n,e={}){let t=[],i=[],o=[],s=0,a=n.length>1?[]:null;return ke(()=>cr(o)),()=>{let l=r()||[],c,h;return l[Qi],le(()=>{let C=l.length,_,f,p,E,v,x,w,m,T;if(C===0)s!==0&&(cr(o),o=[],t=[],i=[],s=0,a&&(a=[])),e.fallback&&(t=[Oi],i[0]=lt(b=>(o[0]=b,e.fallback())),s=1);else if(s===0){for(i=new Array(C),h=0;h<C;h++)t[h]=l[h],i[h]=lt(u);s=C}else{for(p=new Array(C),E=new Array(C),a&&(v=new Array(C)),x=0,w=Math.min(s,C);x<w&&t[x]===l[x];x++);for(w=s-1,m=C-1;w>=x&&m>=x&&t[w]===l[m];w--,m--)p[m]=i[w],E[m]=o[w],a&&(v[m]=a[w]);for(_=new Map,f=new Array(m+1),h=m;h>=x;h--)T=l[h],c=_.get(T),f[h]=c===void 0?-1:c,_.set(T,h);for(c=x;c<=w;c++)T=t[c],h=_.get(T),h!==void 0&&h!==-1?(p[h]=i[c],E[h]=o[c],a&&(v[h]=a[c]),h=f[h],_.set(T,h)):o[c]();for(h=x;h<C;h++)h in p?(i[h]=p[h],o[h]=E[h],a&&(a[h]=v[h],a[h](h))):i[h]=lt(u);i=i.slice(0,s=C),t=l.slice(0)}return i});function u(C){if(o[h]=C,a){const[_,f]=N(h);return a[h]=f,n(l[h],_)}return n(l[h])}}}function Gr(r,n){return le(()=>r(n||{}))}function Ft(){return!0}const Rn={get(r,n,e){return n===jt?e:r.get(n)},has(r,n){return n===jt?!0:r.has(n)},set:Ft,deleteProperty:Ft,getOwnPropertyDescriptor(r,n){return{configurable:!0,enumerable:!0,get(){return r.get(n)},set:Ft,deleteProperty:Ft}},ownKeys(r){return r.keys()}};function xn(r){return(r=typeof r=="function"?r():r)?r:{}}function $i(){for(let r=0,n=this.length;r<n;++r){const e=this[r]();if(e!==void 0)return e}}function jn(...r){let n=!1;for(let o=0;o<r.length;o++){const s=r[o];n=n||!!s&&jt in s,r[o]=typeof s=="function"?(n=!0,X(s)):s}if(n)return new Proxy({get(o){for(let s=r.length-1;s>=0;s--){const a=xn(r[s])[o];if(a!==void 0)return a}},has(o){for(let s=r.length-1;s>=0;s--)if(o in xn(r[s]))return!0;return!1},keys(){const o=[];for(let s=0;s<r.length;s++)o.push(...Object.keys(xn(r[s])));return[...new Set(o)]}},Rn);const e={},t={},i=new Set;for(let o=r.length-1;o>=0;o--){const s=r[o];if(!s)continue;const a=Object.getOwnPropertyNames(s);for(let l=0,c=a.length;l<c;l++){const h=a[l];if(h==="__proto__"||h==="constructor")continue;const u=Object.getOwnPropertyDescriptor(s,h);if(!i.has(h))u.get?(i.add(h),Object.defineProperty(e,h,{enumerable:!0,configurable:!0,get:$i.bind(t[h]=[u.get.bind(s)])})):(u.value!==void 0&&i.add(h),e[h]=u.value);else{const C=t[h];C?u.get?C.push(u.get.bind(s)):u.value!==void 0&&C.push(()=>u.value):e[h]===void 0&&(e[h]=u.value)}}}return e}function Yi(r,...n){if(jt in r){const i=new Set(n.length>1?n.flat():n[0]),o=n.map(s=>new Proxy({get(a){return s.includes(a)?r[a]:void 0},has(a){return s.includes(a)&&a in r},keys(){return s.filter(a=>a in r)}},Rn));return o.push(new Proxy({get(s){return i.has(s)?void 0:r[s]},has(s){return i.has(s)?!1:s in r},keys(){return Object.keys(r).filter(s=>!i.has(s))}},Rn)),o}const e={},t=n.map(()=>({}));for(const i of Object.getOwnPropertyNames(r)){const o=Object.getOwnPropertyDescriptor(r,i),s=!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable;let a=!1,l=0;for(const c of n)c.includes(i)&&(a=!0,s?t[l][i]=o.value:Object.defineProperty(t[l],i,o)),++l;a||(s?e[i]=o.value:Object.defineProperty(e,i,o))}return[...t,e]}const Ui=r=>"Stale read from <".concat(r,">.");function Te(r){const n="fallback"in r&&{fallback:()=>r.fallback};return X(Wi(()=>r.each,r.children,n||void 0))}function ve(r){const n=r.keyed,e=X(()=>r.when,void 0,{equals:(t,i)=>n?t===i:!t==!i});return X(()=>{const t=e();if(t){const i=r.children;return typeof i=="function"&&i.length>0?le(()=>i(n?t:()=>{if(!le(e))throw Ui("Show");return r.when})):i}return r.fallback},void 0,void 0)}const Xi=void 0,[ze,jr]=N(null);function Hi(r){const n={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1};return r.getContext("webgl",n)||r.getContext("experimental-webgl",n)}function P(r,n){if(!r)throw new Error(n||"Assertion failed")}function ur(r,n,e){const t=Math.trunc(r>>>24),i=Math.trunc(r>>>16&255),o=Math.trunc(r>>>8&255),s=Math.trunc(r&255),a=Math.trunc(n>>>24),l=Math.trunc(n>>>16&255),c=Math.trunc(n>>>8&255),h=Math.trunc(n&255),u=Math.round(a*e+t*(1-e)),C=Math.round(l*e+i*(1-e)),_=Math.round(c*e+o*(1-e)),f=Math.round(h*e+s*(1-e));return(u<<24|C<<16|_<<8|f)>>>0}function Gi(r,n){const e=r>>>24,t=r>>>16&255,i=r>>>8&255,o=Math.trunc((r&255)*n);return(e<<24|t<<16|i<<8|o)>>>0}function pt(r,n,e=!1){const t=(r&255)/255*n,i=Math.trunc((r>>>24)*t),o=Math.trunc((r>>>16&255)*t),s=Math.trunc((r>>>8&255)*t),a=Math.trunc(t*255);return e?(a<<24|s<<16|o<<8|i)>>>0:(i<<24|o<<16|s<<8|a)>>>0}function Qn(r,n){return Object.prototype.hasOwnProperty.call(r,n)}class Vr{constructor(n){d(this,"releaseCallback");this.releaseCallback=n}}class ji extends Vr{constructor(e,t){var i,o;super(e);d(this,"textureMap",new Map);d(this,"zeroReferenceTextureSet",new Set);d(this,"options");this.options={textureCleanupIntervalMs:(i=t.textureCleanupIntervalMs)!=null?i:1e4,textureCleanupAgeThreadholdMs:(o=t.textureCleanupAgeThreadholdMs)!=null?o:6e4},setInterval(()=>{const s=Date.now(),a=this.options.textureCleanupAgeThreadholdMs;for(const l of this.zeroReferenceTextureSet)s-l.lastUpdate>a&&(this.releaseCallback(l.id),this.textureMap.delete(l.id),this.zeroReferenceTextureSet.delete(l))},this.options.textureCleanupIntervalMs)}registerTexture(e){var i;const t=(i=e.options)==null?void 0:i.id;if(P(t,"Texture must have an id to be registered"),!this.textureMap.has(t)){const o={id:t,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(t,o),this.zeroReferenceTextureSet.add(o)}}incrementTextureRefCount(e){var o;const t=(o=e.options)==null?void 0:o.id;P(t,"Texture must have an id to be registered");let i=this.textureMap.get(t);i||(this.registerTexture(e),i=this.textureMap.get(t)),P(i,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),i.nodeRefCount++,i.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(i)&&this.zeroReferenceTextureSet.delete(i)}decrementTextureRefCount(e){var o;const t=(o=e.options)==null?void 0:o.id;P(t,"Texture must have an id to be registered");const i=this.textureMap.get(t);P(i,"Texture must have been registered"),i.nodeRefCount--,i.lastUpdate=Date.now(),i.nodeRefCount===0&&this.zeroReferenceTextureSet.add(i),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Vi extends Vr{constructor(e){super(e);d(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var t,i;P((t=e.options)==null?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,(i=e.options)==null?void 0:i.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class Ki extends We{constructor(e,t,i){var E,v;super();d(this,"root",null);d(this,"driver");d(this,"canvas");d(this,"settings");d(this,"nodes",new Map);d(this,"nextTextureId",1);d(this,"textureTracker");const o={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(E=e.clearColor)!=null?E:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(v=e.experimental_FinalizationRegistryTextureUsageTracker)!=null?v:!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0};this.settings=o;const{appWidth:s,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:c}=o,h=x=>{this.driver.releaseTexture(x)},u=o.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=u?new Vi(h):new ji(h,this.settings.textureCleanupOptions);const C=s*l,_=a*l;this.driver=i;const f=document.createElement("canvas");this.canvas=f,f.width=C*c,f.height=_*c,f.style.width="".concat(C,"px"),f.style.height="".concat(_,"px");let p;if(typeof t=="string"?p=document.getElementById(t):p=t,!p)throw new Error("Could not find target element");i.onCreateNode=x=>{this.nodes.set(x.id,x)},i.onBeforeDestroyNode=x=>{this.nodes.delete(x.id)},i.onFpsUpdate=x=>{this.emit("fpsUpdate",x)},p.appendChild(f)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var t,i,o,s,a,l,c,h,u,C,_,f,p,E;return this.driver.createTextNode({...this.resolveNodeDefaults(e),text:(t=e.text)!=null?t:"",textRendererOverride:(i=e.textRendererOverride)!=null?i:null,fontSize:(o=e.fontSize)!=null?o:16,fontFamily:(s=e.fontFamily)!=null?s:"sans-serif",fontStyle:(a=e.fontStyle)!=null?a:"normal",fontWeight:(l=e.fontWeight)!=null?l:"normal",fontStretch:(c=e.fontStretch)!=null?c:"normal",textAlign:(h=e.textAlign)!=null?h:"left",contain:(u=e.contain)!=null?u:"none",scrollable:(C=e.scrollable)!=null?C:!1,scrollY:(_=e.scrollY)!=null?_:0,offsetY:(f=e.offsetY)!=null?f:0,letterSpacing:(p=e.letterSpacing)!=null?p:0,debug:(E=e.debug)!=null?E:{}})}resolveNodeDefaults(e){var l,c,h,u,C,_,f,p,E,v,x,w,m,T,b,I,y,A,S,M,Q,F,k,O,U,j,se,V,Qe,$e,fe,ge,pe,de,H,Y,Pe,ce,Me,Mt,Lt,Ye,Ue,Xe,ht;const t=(l=e.color)!=null?l:4294967295,i=(u=(h=(c=e.colorTl)!=null?c:e.colorTop)!=null?h:e.colorLeft)!=null?u:t,o=(f=(_=(C=e.colorTr)!=null?C:e.colorTop)!=null?_:e.colorRight)!=null?f:t,s=(v=(E=(p=e.colorBl)!=null?p:e.colorBottom)!=null?E:e.colorLeft)!=null?v:t,a=(m=(w=(x=e.colorBr)!=null?x:e.colorBottom)!=null?w:e.colorRight)!=null?m:t;return{x:(T=e.x)!=null?T:0,y:(b=e.y)!=null?b:0,width:(I=e.width)!=null?I:0,height:(y=e.height)!=null?y:0,alpha:(A=e.alpha)!=null?A:1,clipping:(S=e.clipping)!=null?S:!1,color:t,colorTop:(M=e.colorTop)!=null?M:t,colorBottom:(Q=e.colorBottom)!=null?Q:t,colorLeft:(F=e.colorLeft)!=null?F:t,colorRight:(k=e.colorRight)!=null?k:t,colorBl:s,colorBr:a,colorTl:i,colorTr:o,zIndex:(O=e.zIndex)!=null?O:0,zIndexLocked:(U=e.zIndexLocked)!=null?U:0,parent:(j=e.parent)!=null?j:null,texture:(se=e.texture)!=null?se:null,shader:(V=e.shader)!=null?V:null,src:(Qe=e.src)!=null?Qe:"",scale:($e=e.scale)!=null?$e:null,scaleX:(ge=(fe=e.scaleX)!=null?fe:e.scale)!=null?ge:1,scaleY:(de=(pe=e.scaleY)!=null?pe:e.scale)!=null?de:1,mount:(H=e.mount)!=null?H:0,mountX:(Pe=(Y=e.mountX)!=null?Y:e.mount)!=null?Pe:0,mountY:(Me=(ce=e.mountY)!=null?ce:e.mount)!=null?Me:0,pivot:(Mt=e.pivot)!=null?Mt:.5,pivotX:(Ye=(Lt=e.pivotX)!=null?Lt:e.pivot)!=null?Ye:.5,pivotY:(Xe=(Ue=e.pivotY)!=null?Ue:e.pivot)!=null?Xe:.5,rotation:(ht=e.rotation)!=null?ht:0}}destroyNode(e){return this.driver.destroyNode(e)}createTexture(e,t,i){const o=this.nextTextureId++,s={descType:"texture",txType:e,props:t,options:{...i,id:o}};return this.textureTracker.registerTexture(s),s}createShader(e,t){return{descType:"shader",shType:e,props:t}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}const hr=r=>r&&!(r&r-1),re=(r,n,e,t)=>{const i=3*r,o=3*(e-r)-i,s=1-i-o,a=3*n,l=3*(t-n)-a,c=1-a-l;return function(h){if(h>=1)return 1;if(h<=0)return 0;let u=.5,C,_,f;for(let v=0;v<20;v++){if(C=u*(u*(u*s+o)+i),f=h-C,f>-1e-8&&f<1e-8)return u*(u*(u*c+l)+a);if(_=u*(u*(3*s)+2*o)+i,_>1e-10&&_<1e-10)break;u+=f/_}let p=0,E=1;for(let v=0;v<20;v++){if(u=.5*(p+E),C=u*(u*(u*s+o)+i),f=h-C,f>-1e-8&&f<1e-8)return u*(u*(u*c+l)+a);f<0?E=u:p=u}}},qi=r=>{switch(r){case"linear":return function(e){return e};case"ease":return re(.25,.1,.25,1);case"ease-in":return re(.42,0,1,1);case"ease-out":return re(0,0,.58,1);case"ease-in-out":return re(.42,0,.58,1);case"ease-in-sine":return re(.12,0,.39,0);case"ease-out-sine":return re(.12,0,.39,0);case"ease-in-out-sine":return re(.37,0,.63,1);case"ease-in-cubic":return re(.32,0,.67,0);case"ease-out-cubic":return re(.33,1,.68,1);case"ease-in-out-cubic":return re(.65,0,.35,1);case"ease-in-circ":return re(.55,0,1,.45);case"ease-out-circ":return re(0,.55,.45,1);case"ease-in-out-circ":return re(.85,0,.15,1);case"ease-in-back":return re(.36,0,.66,-.56);case"ease-out-back":return re(.34,1.56,.64,1);case"ease-in-out-back":return re(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return e===1?1:0};default:const n="cubic-bezier(";if(r&&r.indexOf(n)===0){const e=r.substr(n.length,r.length-n.length-1).split(",");if(e.length!==4)return console.warn("Unknown timing function: "+r),function(a){return a};const t=parseFloat(e[0]||"0.42"),i=parseFloat(e[1]||"0"),o=parseFloat(e[2]||"1"),s=parseFloat(e[3]||"1");return isNaN(t)||isNaN(i)||isNaN(o)||isNaN(s)?(console.warn(" Unknown timing function: "+r),function(a){return a}):re(t,i,o,s)}else return console.warn("Unknown timing function: "+r),function(e){return e}}};Math.hypot||(Math.hypot=(...r)=>{let n=0,e=r.length;for(;e--;)n+=r[e]*r[e];return Math.sqrt(n)});class Zi extends We{constructor(e,t,i){super();d(this,"node");d(this,"props");d(this,"settings");d(this,"propStartValues",{});d(this,"restoreValues",{});d(this,"progress",0);d(this,"timingFunction");d(this,"propsList");this.node=e,this.props=t,this.settings=i,this.propStartValues={},this.propsList=Object.keys(t),this.propsList.forEach(o=>{this.propStartValues[o]=e[o]}),this.timingFunction=o=>o,i.easing&&typeof i.easing=="string"&&(this.timingFunction=qi(i.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const t=this.props[e],i=this.propStartValues[e];this.props[e]=i,this.propStartValues[e]=t}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,i){return(this.timingFunction(e)||e)*(i-t)+t}update(e){const{duration:t,loop:i,easing:o,stopMethod:s}=this.settings;if(!t){this.emit("finished",{});return}if(this.progress+=e/t,this.progress>1&&(this.progress=i?0:1,s)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const l=this.propsList[a],c=this.props[l],h=this.propStartValues[l],u=c;if(l.indexOf("color")!==-1){if(h===u){this.node[l]=h;continue}if(o){const C=this.timingFunction(this.progress)||this.progress,_=ur(h,u,C);this.node[l]=_;continue}this.node[l]=ur(h,u,this.progress);continue}if(o){this.node[l]=this.applyEasing(this.progress,h,u);continue}this.node[l]=h+(u-h)*this.progress}this.progress===1&&this.emit("finished",{})}}class Ji{constructor(n,e){d(this,"manager");d(this,"animation");d(this,"stoppedPromise",null);d(this,"stoppedResolve",null);d(this,"state");this.manager=n,this.animation=e,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){this.makeStoppedPromise();const n=this.stoppedPromise;return P(n),n}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(n=>{this.stoppedResolve=n}))}finished(){P(this.stoppedResolve);const{loop:n,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!n&&this.manager.unregisterAnimation(this.animation)}}const _e=r=>{const n=r>>>24,e=r>>>16&255,t=r>>>8&255,i=r&255;return[n/255,e/255,t/255,i/255]};function eo(r){return(r&255)/255}function An(r){const n=Math.floor(r[0]*255),e=Math.floor(r[1]*255),t=Math.floor(r[2]*255),i=Math.floor(r[3]*255);return"rgba(".concat(n,",").concat(e,",").concat(t,",").concat(i.toFixed(4),")")}function ct(r,n,e,t,i){return i?(i.x1=r,i.y1=n,i.x2=e,i.y2=t,i):{x1:r,y1:n,x2:e,y2:t}}function Kr(r,n,e){const t=ct(Math.max(r.x1,n.x1),Math.max(r.y1,n.y1),Math.min(r.x2,n.x2),Math.min(r.y2,n.y2),e);return t.x1<t.x2&&t.y1<t.y2?t:ct(0,0,0,0,t)}function qr(r,n){const e=Math.max(r.x,n.x),t=Math.max(r.y,n.y),i=Math.min(r.x+r.width,n.x+n.width)-e,o=Math.min(r.y+r.height,n.y+n.height)-t;return i>0&&o>0?{x:e,y:t,width:i,height:o}:{x:0,y:0,width:0,height:0}}function to(r,n){return r===n?!0:r===null||n===null?!1:r.x===n.x&&r.y===n.y&&r.width===n.width&&r.height===n.height}function no(r){return r.x1<r.x2&&r.y1<r.y2}const K=0,q=3,ae=6,G=1,Z=4,ue=7,me=2,xe=5,Ae=8;class ye{constructor(n){d(this,"data");n?(this.data=new Float32Array(9),this.data[K]=n[0],this.data[q]=n[3],this.data[ae]=n[6],this.data[G]=n[1],this.data[Z]=n[4],this.data[ue]=n[7],this.data[me]=n[2],this.data[xe]=n[5],this.data[Ae]=n[8]):this.data=new Float32Array(9)}static get temp(){return ro}static multiply(n,e,t){const i=n.data[K]*e.data[K]+n.data[q]*e.data[G]+n.data[ae]*e.data[me],o=n.data[K]*e.data[q]+n.data[q]*e.data[Z]+n.data[ae]*e.data[xe],s=n.data[K]*e.data[ae]+n.data[q]*e.data[ue]+n.data[ae]*e.data[Ae],a=n.data[G]*e.data[K]+n.data[Z]*e.data[G]+n.data[ue]*e.data[me],l=n.data[G]*e.data[q]+n.data[Z]*e.data[Z]+n.data[ue]*e.data[xe],c=n.data[G]*e.data[ae]+n.data[Z]*e.data[ue]+n.data[ue]*e.data[Ae],h=n.data[me]*e.data[K]+n.data[xe]*e.data[G]+n.data[Ae]*e.data[me],u=n.data[me]*e.data[q]+n.data[xe]*e.data[Z]+n.data[Ae]*e.data[xe],C=n.data[me]*e.data[ae]+n.data[xe]*e.data[ue]+n.data[Ae]*e.data[Ae];return t||(t=new ye),t.data[K]=i,t.data[q]=o,t.data[ae]=s,t.data[G]=a,t.data[Z]=l,t.data[ue]=c,t.data[me]=h,t.data[xe]=u,t.data[Ae]=C,t}static identity(n){return n||(n=new ye),n.data[K]=1,n.data[q]=0,n.data[ae]=0,n.data[G]=0,n.data[Z]=1,n.data[ue]=0,n.data[me]=0,n.data[xe]=0,n.data[Ae]=1,n}static translate(n,e,t){return t||(t=new ye),t.data[K]=1,t.data[q]=0,t.data[ae]=n,t.data[G]=0,t.data[Z]=1,t.data[ue]=e,t.data[me]=0,t.data[xe]=0,t.data[Ae]=1,t}static scale(n,e,t){return t||(t=new ye),t.data[K]=n,t.data[q]=0,t.data[ae]=0,t.data[G]=0,t.data[Z]=e,t.data[ue]=0,t.data[me]=0,t.data[xe]=0,t.data[Ae]=1,t}static rotate(n,e){const t=Math.cos(n),i=Math.sin(n);return e||(e=new ye),e.data[K]=t,e.data[q]=-i,e.data[ae]=0,e.data[G]=i,e.data[Z]=t,e.data[ue]=0,e.data[me]=0,e.data[xe]=0,e.data[Ae]=1,e}static copy(n,e,t){return e||(e=new ye),e.data[0]=n.data[0],e.data[1]=n.data[1],e.data[2]=n.data[2],e.data[3]=n.data[3],e.data[4]=n.data[4],e.data[5]=n.data[5],e.data[6]=n.data[6],e.data[7]=n.data[7],e.data[8]=n.data[8],e}translate(n,e){return this.data[ae]=this.data[K]*n+this.data[q]*e+this.data[ae],this.data[ue]=this.data[G]*n+this.data[Z]*e+this.data[ue],this}scale(n,e){return this.data[K]=this.data[K]*n,this.data[q]=this.data[q]*e,this.data[G]=this.data[G]*n,this.data[Z]=this.data[Z]*e,this}rotate(n){if(n===0||!(n%Math.PI*2))return this;const e=Math.cos(n),t=Math.sin(n),i=this.data[K]*e+this.data[q]*t,o=this.data[q]*e-this.data[K]*t,s=this.data[G]*e+this.data[Z]*t,a=this.data[Z]*e-this.data[G]*t;return this.data[K]=i,this.data[q]=o,this.data[G]=s,this.data[Z]=a,this}multiply(n){return ye.multiply(this,n,this)}get tx(){return this.data[ae]}get ty(){return this.data[ue]}get ta(){return this.data[K]}get tb(){return this.data[q]}get tc(){return this.data[G]}get td(){return this.data[Z]}transformPoint(n,e){return[this.data[K]*n+this.data[q]*e+this.data[ae],this.data[G]*n+this.data[Z]*e+this.data[G]]}}const ro=new ye;var L;(function(r){r[r.Children=1]="Children",r[r.ScaleRotate=2]="ScaleRotate",r[r.Local=4]="Local",r[r.Global=8]="Global",r[r.Clipping=16]="Clipping",r[r.CalculatedZIndex=32]="CalculatedZIndex",r[r.ZIndexSortedChildren=64]="ZIndexSortedChildren",r[r.PremultipliedColors=128]="PremultipliedColors",r[r.WorldAlpha=256]="WorldAlpha",r[r.None=0]="None",r[r.All=511]="All"})(L||(L={}));class Vn extends We{constructor(e,t){super();d(this,"stage");d(this,"children",[]);d(this,"props");d(this,"updateType",L.All);d(this,"globalTransform");d(this,"scaleRotateTransform");d(this,"localTransform");d(this,"clippingRect",null);d(this,"isRenderable",!1);d(this,"parentClippingRect",null);d(this,"worldAlpha",1);d(this,"premultipliedColorTl",0);d(this,"premultipliedColorTr",0);d(this,"premultipliedColorBl",0);d(this,"premultipliedColorBr",0);d(this,"calcZIndex",0);d(this,"isComplex",!1);d(this,"onTextureLoaded",(e,t)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:t})});d(this,"onTextureFailed",(e,t)=>{this.emit("failed",{type:"texture",error:t})});this.stage=e,this.props={...t,parent:null},this.parent=t.parent,this.updateScaleRotateTransform()}loadTexture(e,t,i=null){this.props.texture&&this.unloadTexture();const{txManager:o}=this.stage,s=o.loadTexture(e,t,i);this.props.texture=s,this.props.textureOptions=i,this.checkIsRenderable(),queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"&&this.onTextureFailed(s,s.error),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}loadShader(e,t){const i=this.stage.renderer.getShaderManager();P(i);const{shader:o,props:s}=i.loadShader(e,t);this.props.shader=o,this.props.shaderProps=s,this.checkIsRenderable()}setUpdateType(e){this.updateType|=e;const t=this.props.parent;t&&!(t.updateType&L.Children)&&t.setUpdateType(L.Children)}sortChildren(){this.children.sort((e,t)=>e.calcZIndex-t.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=ye.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){P(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,i=this.props.mountX*this.props.width,o=this.props.mountY*this.props.height;this.localTransform=ye.translate(e-i+this.props.x,t-o+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType(L.Global)}update(e,t=null){this.updateType&L.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(L.Local)),this.updateType&L.Local&&(this.updateLocalTransform(),this.setUpdateType(L.Global));const i=this.props.parent;let o=L.None;this.updateType&L.Global&&(P(this.localTransform),this.globalTransform=ye.copy((i==null?void 0:i.globalTransform)||this.localTransform,this.globalTransform),i&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(L.Clipping|L.Children),o|=L.Global),this.updateType&L.Clipping&&(this.calculateClippingRect(t),this.checkIsRenderable(),this.setUpdateType(L.Children),o|=L.Clipping),this.updateType&L.WorldAlpha&&(i?this.worldAlpha=i.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(L.Children|L.PremultipliedColors),o|=L.WorldAlpha),this.updateType&L.PremultipliedColors&&(this.premultipliedColorTl=pt(this.props.colorTl,this.worldAlpha,!0),this.premultipliedColorTr=pt(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=pt(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=pt(this.props.colorBr,this.worldAlpha,!0),this.checkIsRenderable(),this.setUpdateType(L.Children),o|=L.PremultipliedColors),i&&this.updateType&L.CalculatedZIndex&&(this.calculateZIndex(),i.setUpdateType(L.ZIndexSortedChildren)),this.updateType&L.Children&&this.children.length&&this.children.forEach(s=>{s.setUpdateType(o),s.updateType!==0&&s.update(e,this.clippingRect)}),this.updateType&L.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkIsRenderable(){return this.props.texture?this.isRenderable=!0:this.props.shader?this.isRenderable=!0:this.props.clipping?this.isRenderable=!0:["color","colorTop","colorBottom","colorLeft","colorRight","colorTl","colorTr","colorBl","colorBr"].some(t=>this.props[t]!==0)?this.isRenderable=!0:this.isRenderable=!1}calculateClippingRect(e=null){if(P(this.globalTransform),this.parentClippingRect===e&&this.clippingRect)return;const t=this.globalTransform,i=t.tb!==0||t.tc!==0;let o=this.props.clipping&&!i?{x:t.tx,y:t.ty,width:this.width*t.ta,height:this.height*t.td}:null;e&&o?o=qr(e,o):e&&(o=e),this.parentClippingRect=e,this.clippingRect=o}calculateZIndex(){var s,a;const e=this.props,t=e.zIndex||0,i=((s=e.parent)==null?void 0:s.zIndex)||0;let o=t;(a=e.parent)!=null&&a.zIndexLocked&&(o=t<i?t:i),this.calcZIndex=o}renderQuads(e){const{width:t,height:i,texture:o,textureOptions:s,shader:a,shaderProps:l}=this.props,{premultipliedColorTl:c,premultipliedColorTr:h,premultipliedColorBl:u,premultipliedColorBr:C}=this,{zIndex:_,worldAlpha:f,globalTransform:p,clippingRect:E}=this;P(p),e.addQuad({width:t,height:i,colorTl:c,colorTr:h,colorBl:u,colorBr:C,texture:o,textureOptions:s,zIndex:_,shader:a,shaderProps:l,alpha:f,clippingRect:E,tx:p.tx,ty:p.ty,ta:p.ta,tb:p.tb,tc:p.tc,td:p.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(L.Local))}get absX(){var e,t,i;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((i=(t=this.props.parent)==null?void 0:t.globalTransform)==null?void 0:i.tx)||0)}get absY(){var e,t;return this.props.y+((t=(e=this.props.parent)==null?void 0:e.absY)!=null?t:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(L.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(L.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(L.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(L.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(L.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(L.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(L.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(L.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(L.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(L.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(L.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(L.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(L.PremultipliedColors|L.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(L.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(L.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(L.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(L.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(L.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(L.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(L.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(L.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(L.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(L.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(L.CalculatedZIndex|L.Children),this.children.forEach(t=>{t.setUpdateType(L.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(L.CalculatedZIndex|L.Children),this.children.forEach(t=>{t.setUpdateType(L.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const t=this.props.parent;if(t!==e){if(this.props.parent=e,t){const i=t.children.indexOf(this);P(i!==-1,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(i,1)}e&&(e.children.push(this),this.setUpdateType(L.All),e.setUpdateType(L.Children|L.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let io=1;function Kn(){return io++}class Pn extends We{constructor(e,t,i,o){var s;super();d(this,"rendererMain");d(this,"stage");d(this,"id");d(this,"coreNode");d(this,"_children",[]);d(this,"_src","");d(this,"_parent",null);d(this,"_texture",null);d(this,"_shader",null);d(this,"onTextureLoaded",(e,t)=>{this.emit("loaded",t)});d(this,"onTextureFailed",(e,t)=>{this.emit("failed",t)});this.rendererMain=t,this.stage=i,this.id=(s=o==null?void 0:o.id)!=null?s:Kn(),this.coreNode=o||new Vn(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var i;const t=this._parent;if(this._parent=e,this.coreNode.parent=(i=e==null?void 0:e.coreNode)!=null?i:null,t){const o=t.children.indexOf(this);P(o!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),t.children.splice(o,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,t){const i=new Zi(this.coreNode,e,t);return new Ji(this.stage.animationManager,i)}}const oo=r=>{const n=()=>{if(r.updateAnimations(),!r.hasSceneUpdates()){setTimeout(n,16.666666666666668);return}r.drawFrame(),requestAnimationFrame(n)};requestAnimationFrame(n)},so=()=>performance?performance.now():Date.now();class ao{constructor(n){d(this,"textureSource");this.textureSource=n}}class lo{constructor(n){d(this,"stage");this.stage=n}}class co{}class uo{static makeCacheKey(n){return!1}static resolveDefaults(n){return{}}}function dr(r,n,e){const t=r.createShader(n);if(!t)throw new Error;if(r.shaderSource(t,e),r.compileShader(t),r.getShaderParameter(t,r.COMPILE_STATUS))return t;console.log(r.getShaderInfoLog(t)),r.deleteShader(t)}function ho(r,n,e){const t=r.createProgram();if(!t)throw new Error;if(r.attachShader(t,n),r.attachShader(t,e),r.linkProgram(t),r.getProgramParameter(t,r.LINK_STATUS))return t;console.log(r.getProgramInfoLog(t)),r.deleteProgram(t)}function Mn(r){return self.WebGL2RenderingContext&&r instanceof self.WebGL2RenderingContext}class Oe extends uo{constructor(e){super();d(this,"boundBufferCollection",null);d(this,"buffersBound",!1);d(this,"program");d(this,"vao");d(this,"renderer");d(this,"gl");d(this,"attributeBuffers");d(this,"attributeLocations");d(this,"attributeNames");d(this,"uniformLocations");d(this,"uniformTypes");d(this,"supportsIndexedTextures");const t=this.renderer=e.renderer,i=this.gl=this.renderer.gl;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const o=Mn(i),s=o&&e.webgl2Extensions||!o&&e.webgl1Extensions||[],a=o?"2.0":"1.0";s.forEach(p=>{if(!i.getExtension(p))throw new Error('Shader "'.concat(this.constructor.name,'" requires extension "').concat(p,'" for WebGL ').concat(a," but wasn't found"))});const l=e.shaderSources||this.constructor.shaderSources;if(l)o&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error('Shader "'.concat(this.constructor.name,'" is missing shaderSources.'));const c=t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,h=l.vertex instanceof Function?l.vertex(c):l.vertex,u=l.fragment instanceof Function?l.fragment(c):l.fragment,C=dr(i,i.VERTEX_SHADER,h),_=dr(i,i.FRAGMENT_SHADER,u);if(!C||!_)throw new Error;const f=ho(i,C,_);if(!f)throw new Error;if(this.program=f,o){const p=i.createVertexArray();if(!p)throw new Error;this.vao=p,i.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(p=>{const E=i.getAttribLocation(this.program,p);if(E<0)throw new Error("".concat(this.constructor.name,': Vertex shader must have an attribute "').concat(p,'"!'));const v=i.createBuffer();if(!v)throw new Error("".concat(this.constructor.name,': Could not create buffer for attribute "').concat(p,'"'));this.attributeLocations[p]=E,this.attributeBuffers[p]=v,this.attributeNames.push(p)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(p=>{const E=i.getUniformLocation(this.program,p.name);if(this.uniformTypes[p.name]=p.uniform,!E){console.warn('Shader "'.concat(this.constructor.name,'" could not get uniform location for "').concat(p.name,'"'));return}this.uniformLocations[p.name]=E})}bindBufferAttribute(e,t,i){const o=this.gl;o.enableVertexAttribArray(e),o.bindBuffer(o.ARRAY_BUFFER,t),o.vertexAttribPointer(e,i.size,i.type,i.normalized,i.stride,i.offset)}disableAttribute(e){this.gl.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,t){return!1}bindRenderOp(e,t){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{gl:i}=e;if(this.setUniform("u_resolution",[i.canvas.width,i.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),t){if(Qn(t,"$dimensions")){let o=t.$dimensions;o||(o=e.dimensions),this.setUniform("u_dimensions",[o.width,o.height])}if(Qn(t,"$alpha")){let o=t.$alpha;o||(o=e.alpha),this.setUniform("u_alpha",o)}this.bindProps(t)}}setUniform(e,...t){this.gl[this.uniformTypes[e]](this.uniformLocations[e],...t)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const t in this.attributeLocations){const i=e.getBuffer(t),o=e.getAttributeInfo(t);P(i,'Buffer for "'.concat(t,'" not found')),P(o),this.bindBufferAttribute(this.attributeLocations[t],i,o)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.gl.useProgram(this.program),Mn(this.gl)&&this.vao&&this.gl.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}d(Oe,"shaderSources");class Zr extends co{constructor(e,t,i,o,s,a,l,c,h,u){super();d(this,"gl");d(this,"options");d(this,"buffers");d(this,"shader");d(this,"shaderProps");d(this,"alpha");d(this,"clippingRect");d(this,"dimensions");d(this,"bufferIdx");d(this,"zIndex");d(this,"length",0);d(this,"numQuads",0);d(this,"textures",[]);d(this,"maxTextures");this.gl=e,this.options=t,this.buffers=i,this.shader=o,this.shaderProps=s,this.alpha=a,this.clippingRect=l,this.dimensions=c,this.bufferIdx=h,this.zIndex=u,this.gl=e,this.maxTextures=o.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:t,maxTextures:i}=this,o=t.findIndex(a=>a===e);if(o!==-1)return o;const s=t.length;return s>=i?4294967295:(this.textures.push(e),s)}draw(){const{gl:e,shader:t,shaderProps:i,options:o}=this,{shManager:s}=o;s.useShader(t),t.bindRenderOp(this,i);const a=this.bufferIdx/24*6*2;if(e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.clippingRect){const{x:l,y:c,width:h,height:u}=this.clippingRect,C=o.pixelRatio,_=o.canvas.height,f=Math.round(l*C),p=Math.round(h*C),E=Math.round(u*C),v=Math.round(_-E-c*C);e.enable(e.SCISSOR_TEST),e.scissor(f,v,p,E)}else e.disable(e.SCISSOR_TEST);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,a)}}function fo(r){const n={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(n).forEach(t=>{n[t]=r.getParameter(r[t])}),n}function go(r){const n={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(n).forEach(t=>{n[t]=r.getExtension(t)}),n}function po(r,n){if(!r)throw new Error("No WebGL context");const e=~~(n/80),t=new Uint16Array(e*6);for(let o=0,s=0;o<e;o+=6,s+=4)t[o]=s,t[o+1]=s+1,t[o+2]=s+2,t[o+3]=s+2,t[o+4]=s+1,t[o+5]=s+3;const i=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,r.STATIC_DRAW)}const fr=new Uint8Array([0,0,0,0]);class Ln extends ao{constructor(e,t){super(t);d(this,"gl");d(this,"_nativeCtxTexture",null);d(this,"_state","freed");d(this,"_w",0);d(this,"_h",0);this.gl=e}get ctxTexture(){return this._state==="freed"&&this.load(),P(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then(({width:e,height:t})=>{this._state="loaded",this._w=e,this._h=t,this.textureSource.setState("loaded",{width:e,height:t})}).catch(e=>{this._state="failed",this.textureSource.setState("failed",e),console.error(e)}))}async onLoadRequest(){var s;this._nativeCtxTexture=this.createNativeCtxTexture();const{gl:e}=this;e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,fr);const t=await((s=this.textureSource)==null?void 0:s.getTextureData());let i=0,o=0;if(P(this._nativeCtxTexture),t.data instanceof ImageBitmap||t.data instanceof ImageData){const a=t.data;i=a.width,o=a.height,e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!t.premultiplyAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),(Mn(e)||hr(i)&&hr(o))&&e.generateMipmap(e.TEXTURE_2D)}else t.data===null?(i=0,o=0,e.bindTexture(e.TEXTURE_2D,this._nativeCtxTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,fr)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",t);return{width:i,height:o}}free(){this._state!=="freed"&&(this._state="freed",this._w=0,this._h=0,this._nativeCtxTexture&&(this.gl.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null))}createNativeCtxTexture(){const e=this.gl.createTexture();if(!e)throw new Error("Could not create WebGL Texture");return e}}class bt extends We{constructor(e){super();d(this,"txManager");d(this,"dimensions",null);d(this,"error",null);d(this,"state","loading");this.txManager=e}setState(e,...t){if(this.state!==e){if(this.state=e,e==="loaded"){const i=t;this.dimensions=i[0]}else if(e==="failed"){const i=t;this.error=i[0]}this.emit(e,...t)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const Ct=class Ct extends bt{constructor(e,t){super(e);d(this,"props");this.props=Ct.resolveDefaults(t||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),t=new Uint8ClampedArray(e.buffer);return{data:new ImageData(t,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){const t=Ct.resolveDefaults(e);return"ColorTexture,".concat(t.color)}static resolveDefaults(e){return{color:e.color||4294967295}}};d(Ct,"z$__type__Props");let Jt=Ct;const on=class on extends bt{constructor(e,t){super(e);d(this,"props");d(this,"parentTexture");d(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});d(this,"onParentTxFailed",(e,t)=>{this.setState("failed",t)});this.parentTexture=this.txManager.loadTexture(t.texture.txType,t.texture.props,t.texture.options),this.props=on.resolveDefaults(t||{}),queueMicrotask(()=>{const i=this.parentTexture;i.state==="loaded"?this.onParentTxLoaded(i,i.dimensions):i.state==="failed"&&this.onParentTxFailed(i,i.error),i.on("loaded",this.onParentTxLoaded),i.on("failed",this.onParentTxFailed)})}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};d(on,"z$__type__Props");let It=on;class mo extends Ln{constructor(n,e){super(n,e)}async onLoadRequest(){var e,t;const n=await this.textureSource.getTextureData();return{width:((e=n.data)==null?void 0:e.width)||0,height:((t=n.data)==null?void 0:t.height)||0}}}class Jr extends Oe{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(n){const{gl:e}=this;e.getParameter(e.TEXTURE_BINDING_2D)!==n[0].ctxTexture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0].ctxTexture))}}d(Jr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class ei extends Oe{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});d(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:t,gl:i}=this;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((s,a)=>{i.activeTexture(i.TEXTURE0+a),i.bindTexture(i.TEXTURE_2D,s.ctxTexture)});const o=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",o)}}d(ei,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(t=>"\n          ".concat(t!==0?"else ":"","if (idx == ").concat(t,") {\n            return texture2D(textures[").concat(t,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class ie{constructor(n){d(this,"priority",1);d(this,"name","");d(this,"ref");d(this,"target");d(this,"passParameters","");d(this,"declaredUniforms","");d(this,"uniformInfo",{});const{ref:e,target:t,props:i={}}=n;this.ref=e,this.target=t;const o={},s=[];let a="";const l=this.constructor.uniforms||{};for(const c in l){const h=l[c],u=h.type,C="".concat(e,"_").concat(c);let _="";h.size&&(_="[".concat(h.size(i),"]")),s.push(C),a+="uniform ".concat(u," ").concat(C).concat(_,";"),o[c]={name:C,uniform:l[c].method}}this.passParameters=s.join(","),this.declaredUniforms=a,this.uniformInfo=o}static getEffectKey(n){return""}static getMethodParameters(n,e){const t=[];for(const i in n){const o=n[i];let s="";o.size&&(s="[".concat(o.size(e),"]")),t.push("".concat(o.type," ").concat(i).concat(s))}return t.join(",")}static resolveDefaults(n){return{}}static makeEffectKey(n){return!1}}d(ie,"uniforms",{}),d(ie,"methods"),d(ie,"onShaderMask"),d(ie,"onColorize"),d(ie,"onEffectMask");const Re=class Re extends Oe{constructor(e,t,i){const o=Re.createShader(t,i);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...o.uniforms],shaderSources:{vertex:o.vertex,fragment:o.fragment}});d(this,"effects",[]);this.effects=o.effects}bindTextures(e){const{gl:t}=this;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e[0].ctxTexture)}bindProps(e){var i;const t=this.renderer.shManager.getRegisteredEffects();(i=e.effects)==null||i.forEach((o,s)=>{var u;const a=this.effects[s],l=t[a.name],c=(u=o.props)!=null?u:{},h=a.uniformInfo;Object.keys(c).forEach(C=>{const _=l.uniforms[C],f=h[C];let p=_.validator?_.validator(c[C],c):c[C];Array.isArray(p)&&(p=new Float32Array(p)),this.setUniform(f.name,p)})})}static createShader(e,t){const i={},o={};let s="";const a=[],l=[],c=e.effects.map(f=>{const p=t[f.type],E=p.getEffectKey(f.props||{});i[E]=i[E]?++i[E]:1;const v=i[E];v===1&&l.push({key:E,type:f.type,props:f.props});const x=new p({ref:"".concat(E).concat(v===1?"":v),target:E,props:f.props});return s+=x.declaredUniforms,a.push(...Object.values(x.uniformInfo)),x});let h="";l==null||l.forEach(f=>{var I;const p=t[f.type],E=p.resolveDefaults((I=f.props)!=null?I:{}),v=[];for(const y in p.methods){let A=y;const S=p.methods[y];o[y]&&o[y]!==S&&(A=Re.resolveMethodDuplicate(y,S,o)),o[A]=S.replace("function",A),v.push({m:y,cm:A})}let x=p.onShaderMask instanceof Function?p.onShaderMask(E):p.onShaderMask,w=p.onColorize instanceof Function?p.onColorize(E):p.onColorize,m=p.onEffectMask instanceof Function?p.onEffectMask(E):p.onEffectMask;v.forEach(y=>{const{m:A,cm:S}=y,M=new RegExp("\\$".concat(A),"g");x&&(x=x.replace(M,S)),w&&(w=w.replace(M,S)),m&&(m=m.replace(M,S))});const T=p.getMethodParameters(p.uniforms,E),b=T.length>0?", ".concat(T):"";x&&(h+="\n        float fx_".concat(f.key,"_onShaderMask(float shaderMask ").concat(b,") {\n          ").concat(x,"\n        }\n        ")),w&&(h+="\n          vec4 fx_".concat(f.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(b,") {\n            ").concat(w,"\n          }\n        ")),m&&(h+="\n          vec4 fx_".concat(f.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(b,") {\n            ").concat(m,"\n          }\n        "))});let u="";for(const f in o)u+=o[f];let C="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",_="\n\n    ";for(let f=0;f<c.length;f++){const p=c[f],E=p.passParameters.length>0?", ".concat(p.passParameters):"",v=t[p.name];v.onShaderMask&&(_+="\n        shaderMask = fx_".concat(p.target,"_onShaderMask(shaderMask ").concat(E,");\n        ")),v.onColorize&&(_+="\n        maskColor = fx_".concat(p.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(E,");\n        ")),v.onEffectMask&&(C="fx_".concat(p.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(E,")"));const x=c[f+1];(x===void 0||t[x.name].onEffectMask)&&(_+="\n          shaderColor = ".concat(C,";\n        "))}return{effects:c,uniforms:a,fragment:Re.fragment(s,u,h,_),vertex:Re.vertex()}}static resolveMethodDuplicate(e,t,i,o=0){const s=e+(o>0?o:"");return i[s]&&i[s]!==t?this.resolveMethodDuplicate(e,t,i,++o):s}static resolveDefaults(e,t){var i;return{effects:((i=e.effects)!=null?i:[]).map(o=>({type:o.type,props:t[o.type].resolveDefaults(o.props||{})})),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var o;let i="";return(o=e.effects)==null||o.forEach(s=>{const l=t[s.type].getEffectKey(s.props||{});i+=",".concat(l)}),"DynamicShader".concat(i)}};d(Re,"z$__type__Props"),d(Re,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),d(Re,"fragment",(e,t,i,o)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(i,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(o,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let at=Re;class Fn extends Oe{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(n){return{radius:n.radius||10,$dimensions:{width:0,height:0}}}bindTextures(n){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0].ctxTexture)}bindProps(n){this.setUniform("u_radius",n.radius)}canBatchShaderProps(n,e){return n.radius===e.radius&&n.$dimensions.width===e.$dimensions.width&&n.$dimensions.height===e.$dimensions.height}}d(Fn,"z$__type__Props"),d(Fn,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const xo=new Float32Array([1,0,0,0,1,0,0,0,1]),sn=class sn extends Oe{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(n){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0].ctxTexture)}bindProps(n){const e=sn.resolveDefaults(n);for(const t in e)if(t==="transform")this.setUniform("u_transform",!1,e[t]);else if(t==="scrollY")this.setUniform("u_scrollY",e[t]);else if(t==="color"){const i=_e(e.color);this.setUniform("u_color",i)}else t==="size"?this.setUniform("u_size",e[t]):t==="distanceRange"?this.setUniform("u_distanceRange",e[t]):t==="debug"&&this.setUniform("u_debug",e[t]?1:0)}static resolveDefaults(n={}){var e,t,i,o,s,a;return{transform:(e=n.transform)!=null?e:xo,scrollY:(t=n.scrollY)!=null?t:0,color:(i=n.color)!=null?i:4294967295,size:(o=n.size)!=null?o:16,distanceRange:(s=n.distanceRange)!=null?s:1,debug:(a=n.debug)!=null?a:!1}}};d(sn,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let Nn=sn;class Je extends ie{constructor(){super(...arguments);d(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:(t=e.radius)!=null?t:10}}}d(Je,"z$__type__Props"),d(Je,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),d(Je,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),d(Je,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),d(Je,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class mt extends ie{constructor(){super(...arguments);d(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,i;return{width:(t=e.width)!=null?t:10,color:(i=e.color)!=null?i:4294967295}}}d(mt,"z$__type__Props"),d(mt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>_e(e),method:"uniform4fv",type:"vec4"}}),d(mt,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),d(mt,"onColorize","\n    return color;\n  ");class et extends ie{constructor(){super(...arguments);d(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var o,s;const t=(o=e.colors)!=null?o:[4278190080,4294967295];let i=e.stops;if(!i){i=[];const a=t.length-1;for(let l=0;l<t.length;l++)i.push(l*(1/a))}return{colors:t,stops:i,angle:(s=e.angle)!=null?s:0}}}d(et,"z$__type__Props"),d(et,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(i=>_e(i)).reduce((i,o)=>i.concat(o),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,t)=>{var a;const i=(a=t.colors)!=null?a:[];let o=e;const s=e;if(o.length===0||o&&o.length!==i.length){for(let l=0;l<i.length;l++)o[l]?(s[l]=o[l],o[l-1]===void 0&&s[l-2]!==void 0&&(s[l-1]=s[l-2]+(o[l]-s[l-2])/2)):s[l]=l*(1/(i.length-1));o=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(et,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),d(et,"ColorLoop",e=>{let t="";for(let i=2;i<e;i++)t+="colorOut = mix(colorOut, colors[".concat(i,"], clamp((dist - stops[").concat(i-1,"]) / (stops[").concat(i,"] - stops[").concat(i-1,"]), 0.0, 1.0));");return t}),d(et,"onColorize",e=>{const t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class ti extends ie{constructor(){super(...arguments);d(this,"name","grayscale")}static getEffectKey(){return"grayscale"}}d(ti,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");class tt extends ie{constructor(){super(...arguments);d(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,i;return{width:(t=e.width)!=null?t:10,color:(i=e.color)!=null?i:4294967295}}}d(tt,"z$__type__Props"),d(tt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>_e(e),method:"uniform4fv",type:"vec4"}}),d(tt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(tt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(tt,"onColorize","\n    return color;\n  ");class nt extends ie{constructor(){super(...arguments);d(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,i;return{width:(t=e.width)!=null?t:10,color:(i=e.color)!=null?i:4294967295}}}d(nt,"z$__type__Props"),d(nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>_e(e),method:"uniform4fv",type:"vec4"}}),d(nt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(nt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(nt,"onColorize","\n    return color;\n  ");class rt extends ie{constructor(){super(...arguments);d(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,i;return{width:(t=e.width)!=null?t:10,color:(i=e.color)!=null?i:4294967295}}}d(rt,"z$__type__Props"),d(rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>_e(e),method:"uniform4fv",type:"vec4"}}),d(rt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(rt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(rt,"onColorize","\n    return color;\n  ");class it extends ie{constructor(){super(...arguments);d(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,i;return{width:(t=e.width)!=null?t:10,color:(i=e.color)!=null?i:4294967295}}}d(it,"z$__type__Props"),d(it,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>_e(e),method:"uniform4fv",type:"vec4"}}),d(it,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(it,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(it,"onColorize","\n    return color;\n  ");class xt extends ie{constructor(){super(...arguments);d(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,i,o,s,a;return{amplitude:(t=e.amplitude)!=null?t:.2,narrowness:(i=e.narrowness)!=null?i:4,blockiness:(o=e.blockiness)!=null?o:2,minimizer:(s=e.minimizer)!=null?s:8,time:(a=e.time)!=null?a:Date.now()}}}d(xt,"z$__type__Props"),d(xt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),d(xt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),d(xt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class $t extends ie{constructor(){super(...arguments);d(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:(t=e.fade)!=null?t:10}}}d($t,"z$__type__Props"),d($t,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),d($t,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Yt extends ie{constructor(){super(...arguments);d(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var o,s,a,l,c;const t=(o=e.colors)!=null?o:[4278190080,4294967295];let i=e.stops;if(!i){i=[];const h=t.length-1;for(let u=0;u<t.length;u++)i.push(u*(1/h))}return{colors:t,stops:i,width:(s=e.width)!=null?s:0,height:(l=(a=e.height)!=null?a:e.width)!=null?l:0,pivot:(c=e.pivot)!=null?c:[.5,.5]}}}d(Yt,"z$__type__Props"),d(Yt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(i=>_e(i)).reduce((i,o)=>i.concat(o),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,t)=>{var a;const i=(a=t.colors)!=null?a:[];let o=e;const s=e;if(o.length===0||o&&o.length!==i.length){for(let l=0;l<i.length;l++)o[l]?(s[l]=o[l],o[l-1]===void 0&&s[l-2]!==void 0&&(s[l-1]=s[l-2]+(o[l]-s[l-2])/2)):s[l]=l*(1/(i.length-1));o=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(Yt,"onColorize",e=>{const t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class ot extends ie{constructor(){super(...arguments);d(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,i,o,s,a,l,c;return{width:(t=e.width)!=null?t:10,progress:(i=e.progress)!=null?i:.5,offset:(o=e.offset)!=null?o:0,range:(s=e.range)!=null?s:Math.PI*2,rounded:(a=e.rounded)!=null?a:!1,radius:(l=e.radius)!=null?l:1,color:(c=e.color)!=null?c:4294967295}}}d(ot,"z$__type__Props"),d(ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>_e(e),method:"uniform4fv",type:"vec4"}}),d(ot,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),d(ot,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),d(ot,"onColorize","\n    return color;\n  ");class Ao{constructor(){d(this,"shCache",new Map);d(this,"shConstructors",{});d(this,"attachedShader",null);d(this,"effectConstructors",{});d(this,"renderer");this.registerShaderType("DefaultShader",Jr),this.registerShaderType("DefaultShaderBatched",ei),this.registerShaderType("RoundedRectangle",Fn),this.registerShaderType("DynamicShader",at),this.registerShaderType("SdfShader",Nn),this.registerEffectType("border",mt),this.registerEffectType("borderBottom",rt),this.registerEffectType("borderLeft",it),this.registerEffectType("borderRight",tt),this.registerEffectType("borderTop",nt),this.registerEffectType("fadeOut",$t),this.registerEffectType("linearGradient",et),this.registerEffectType("radialGradient",Yt),this.registerEffectType("grayscale",ti),this.registerEffectType("glitch",xt),this.registerEffectType("radius",Je),this.registerEffectType("radialProgress",ot)}registerShaderType(n,e){this.shConstructors[n]=e}registerEffectType(n,e){this.effectConstructors[n]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(n,e){if(!this.renderer)throw new Error("Renderer is not been defined");const t=this.shConstructors[n];if(!t)throw new Error('Shader type "'.concat(n,'" is not registered'));if(n==="DynamicShader")return this.loadDynamicShader(e);const i=t.resolveDefaults(e),o=t.makeCacheKey(i)||t.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:i};const s=new t(this.renderer,e);return o&&this.shCache.set(o,s),{shader:s,props:i}}loadDynamicShader(n){if(!this.renderer)throw new Error("Renderer is not been defined");const e=at.resolveDefaults(n,this.effectConstructors),t=at.makeCacheKey(e,this.effectConstructors);if(t&&this.shCache.has(t))return{shader:this.shCache.get(t),props:e};const i=new at(this.renderer,n,this.effectConstructors);return t&&this.shCache.set(t,i),{shader:i,props:e}}useShader(n){this.attachedShader!==n&&(this.attachedShader&&this.attachedShader.detach(),n.attach(),this.attachedShader=n)}}class ni{constructor(n){d(this,"config");this.config=n}getBuffer(n){var e;return(e=this.config.find(t=>t.attributes[n]))==null?void 0:e.buffer}getAttributeInfo(n){var e;return(e=this.config.find(t=>t.attributes[n]))==null?void 0:e.attributes[n]}}const yo=24;class ri extends lo{constructor(e){super(e.stage);d(this,"gl");d(this,"system");d(this,"txManager");d(this,"shManager");d(this,"options");d(this,"quadBuffer",new ArrayBuffer(1024*1024*4));d(this,"fQuadBuffer",new Float32Array(this.quadBuffer));d(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));d(this,"renderOps",[]);d(this,"curBufferIdx",0);d(this,"curRenderOp",null);d(this,"renderables",[]);d(this,"defaultShader");d(this,"quadBufferCollection");d(this,"defaultTexture");const{canvas:t,clearColor:i,bufferMemory:o}=e;this.options=e,this.txManager=e.txManager,this.shManager=e.shManager,this.defaultTexture=new Jt(this.txManager);const s=Hi(t);if(!s)throw new Error("Unable to create WebGL context");this.gl=s;const a=_e(i);s.viewport(0,0,t.width,t.height),s.clearColor(a[0],a[1],a[2],a[3]),po(s,o),this.system={parameters:fo(s),extensions:go(s)},this.shManager.renderer=this,this.defaultShader=this.shManager.loadShader("DefaultShader").shader;const l=s.createBuffer();P(l);const c=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new ni([{buffer:l,attributes:{a_position:{name:"a_position",size:2,type:s.FLOAT,normalized:!1,stride:c,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:s.FLOAT,normalized:!1,stride:c,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:s.UNSIGNED_BYTE,normalized:!0,stride:c,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:s.FLOAT,normalized:!1,stride:c,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,this.gl.disable(this.gl.SCISSOR_TEST),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof It?new mo(this.gl,e):new Ln(this.gl,e)}addQuad(e){var Qe,$e;const{fQuadBuffer:t,uiQuadBuffer:i}=this,{width:o,height:s,colorTl:a,colorTr:l,colorBl:c,colorBr:h,textureOptions:u,shader:C,shaderProps:_,alpha:f,clippingRect:p,tx:E,ty:v,ta:x,tb:w,tc:m,td:T}=e;let{texture:b}=e;if(_&&Qn(_,"$dimensions")){const fe=_.$dimensions;fe.width=o,fe.height=s}b=b!=null?b:this.defaultTexture,P(b instanceof bt,"Invalid texture type");let{curBufferIdx:I,curRenderOp:y}=this;const A={width:o,height:s},S=C||this.defaultShader;P(S instanceof Oe),y&&(y.shader!==S||!to(y.clippingRect,p)||y.shader!==this.defaultShader&&(!_||!y.shader.canBatchShaderProps(y.shaderProps,_)))&&(y=null),P(S instanceof Oe),y||(this.newRenderOp(S,_,f,A,p,I),y=this.curRenderOp,P(y));const M=(Qe=u==null?void 0:u.flipX)!=null?Qe:!1,Q=($e=u==null?void 0:u.flipY)!=null?$e:!1;let F=0,k=0,O=1,U=1;if(b instanceof It){const{x:fe,y:ge,width:pe,height:de}=b.props,{width:H=0,height:Y=0}=b.parentTexture.dimensions||{width:0,height:0};F=fe/H,O=F+pe/H,k=ge/Y,U=k+de/Y,b=b.parentTexture}M&&([F,O]=[O,F]),Q&&([k,U]=[U,k]);const{txManager:j}=this.stage,se=j.getCtxTexture(b);P(se instanceof Ln);const V=this.addTexture(se,I);if(y=this.curRenderOp,P(y),w!==0||m!==0)t[I++]=E,t[I++]=v,t[I++]=F,t[I++]=k,i[I++]=a,t[I++]=V,t[I++]=E+o*x,t[I++]=v+o*m,t[I++]=O,t[I++]=k,i[I++]=l,t[I++]=V,t[I++]=E+s*w,t[I++]=v+s*T,t[I++]=F,t[I++]=U,i[I++]=c,t[I++]=V,t[I++]=E+o*x+s*w,t[I++]=v+o*m+s*T,t[I++]=O,t[I++]=U,i[I++]=h,t[I++]=V;else{const fe=E+o*x,ge=v+s*T;t[I++]=E,t[I++]=v,t[I++]=F,t[I++]=k,i[I++]=a,t[I++]=V,t[I++]=fe,t[I++]=v,t[I++]=O,t[I++]=k,i[I++]=l,t[I++]=V,t[I++]=E,t[I++]=ge,t[I++]=F,t[I++]=U,i[I++]=c,t[I++]=V,t[I++]=fe,t[I++]=ge,t[I++]=O,t[I++]=U,i[I++]=h,t[I++]=V}y.length+=yo,y.numQuads++,this.curBufferIdx=I}newRenderOp(e,t,i,o,s,a){const l=new Zr(this.gl,this.options,this.quadBufferCollection,e,t,i,s,o,a,0);this.curRenderOp=l,this.renderOps.push(l)}addTexture(e,t,i){const{curRenderOp:o}=this;P(o);const s=o.addTexture(e);if(s===4294967295){if(i)throw new Error("Unable to add texture to render op");const{shader:a,shaderProps:l,dimensions:c,clippingRect:h,alpha:u}=o;return this.newRenderOp(a,l,u,c,h,t),this.addTexture(e,t,!0)}return s}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){var a;const{gl:t,quadBuffer:i}=this,o=new Float32Array(i,0,this.curBufferIdx),s=(a=this.quadBufferCollection.getBuffer("a_position"))!=null?a:null;t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,o,t.DYNAMIC_DRAW),this.renderOps.forEach((l,c)=>{l.draw()}),this.renderables=[]}}class wo{constructor(){d(this,"activeAnimations",new Set)}registerAnimation(n){this.activeAnimations.add(n)}unregisterAnimation(n){this.activeAnimations.delete(n)}update(n){this.activeAnimations.forEach(e=>{e.update(n)})}}const vt=class vt extends bt{constructor(e,t){super(e);d(this,"props");this.props=vt.resolveDefaults(t)}async getTextureData(){const{src:e,premultiplyAlpha:t}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:t};const o=await(await fetch(e)).blob();return{data:await createImageBitmap(o,{premultiplyAlpha:t?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}static makeCacheKey(e){const t=vt.resolveDefaults(e);return t.src instanceof ImageData?!1:"ImageTexture,".concat(t.src,",").concat(t.premultiplyAlpha)}static resolveDefaults(e){var t,i;return{src:(t=e.src)!=null?t:"",premultiplyAlpha:(i=e.premultiplyAlpha)!=null?i:!0}}};d(vt,"z$__type__Props");let Dn=vt;const _t=class _t extends bt{constructor(e,t){super(e);d(this,"props");this.props=_t.resolveDefaults(t)}async getTextureData(){const{width:e,height:t}=this.props,i=e*t*4,o=new Uint8ClampedArray(i);for(let s=0;s<i;s+=4){const a=Math.floor(Math.random()*256);o[s]=a,o[s+1]=a,o[s+2]=a,o[s+3]=255}return{data:new ImageData(o,e,t)}}static makeCacheKey(e){const t=_t.resolveDefaults(e);return"NoiseTexture,".concat(t.width,",").concat(t.height,",").concat(t.cacheId)}static resolveDefaults(e){var t,i,o;return{width:(t=e.width)!=null?t:128,height:(i=e.height)!=null?i:128,cacheId:(o=e.cacheId)!=null?o:0}}};d(_t,"z$__type__Props");let kn=_t;class Co{constructor(){d(this,"usedMemory",0);d(this,"txConstructors",{});d(this,"textureKeyCache",new Map);d(this,"textureIdCache",new Map);d(this,"ctxTextureCache",new WeakMap);d(this,"textureRefCountMap",new WeakMap);d(this,"renderer");this.registerTextureType("ImageTexture",Dn),this.registerTextureType("ColorTexture",Jt),this.registerTextureType("NoiseTexture",kn),this.registerTextureType("SubTexture",It)}registerTextureType(n,e){this.txConstructors[n]=e}loadTexture(n,e,t=null){var s;const i=this.txConstructors[n];if(!i)throw new Error('Texture type "'.concat(n,'" is not registered'));let o;if((t==null?void 0:t.id)!==void 0&&this.textureIdCache.has(t.id)&&(o=this.textureIdCache.get(t.id)),!o){const a=t==null?void 0:t.id,l=(s=t==null?void 0:t.cacheKey)!=null?s:i.makeCacheKey(e);l&&this.textureKeyCache.has(l)?o=this.textureKeyCache.get(l):o=new i(this,e),a&&this.addTextureIdToCache(a,l,o)}return t!=null&&t.preload&&this.getCtxTexture(o).load(),o}addTextureIdToCache(n,e,t){const{textureIdCache:i,textureRefCountMap:o}=this;i.set(n,t),o.has(t)?o.get(t).count++:(o.set(t,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,t))}removeTextureIdFromCache(n){const{textureIdCache:e,textureRefCountMap:t}=this,i=e.get(n);if(i&&(e.delete(n),t.has(i))){const o=t.get(i);P(o),o.count--,o.count===0&&(t.delete(i),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(n){if(this.ctxTextureCache.has(n))return this.ctxTextureCache.get(n);const e=this.renderer.createCtxTexture(n);return this.ctxTextureCache.set(n,e),e}}const vo={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class _o{}class Eo extends _o{constructor(e){super();d(this,"data");d(this,"kernings");this.data=e;const t=this.kernings={};e.kernings.forEach(i=>{const o=i.second,s=t[o]=t[o]||{};s[i.first]=i.amount}),this.kernings=t}*shapeText(e,t){var s;let i,o;for(;(i=t.peek())&&!i.done;){const a=i.value,l=this.data.chars.find(c=>c.id===a);if(t.next(),l!==void 0){const c=o!==void 0?(((s=this.kernings[l.id])==null?void 0:s[o])||0)+e.letterSpacing:0;o=l.id,yield{mapped:!0,glyphId:l.id,codepoint:a,cluster:t.lastIndex,xAdvance:l.xadvance+c,yAdvance:0,xOffset:l.xoffset+c,yOffset:l.yoffset,xBearing:0,yBearing:0,width:l.width,height:l.height}}else a===vo.LINE_FEED&&(o=void 0),yield{mapped:!1,codepoint:a,cluster:t.lastIndex}}}}class gr extends bi{constructor(e,t,i,o,s,a){super(e,t);d(this,"type");d(this,"texture");d(this,"data");d(this,"shaper");d(this,"glyphMap",new Map);this.type=i;const l=o.renderer;P(l instanceof ri,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=o.txManager.loadTexture("ImageTexture",{src:s,premultiplyAlpha:!1},{preload:!0}),this.texture.on("loaded",()=>{this.checkLoaded()}),fetch(a).then(async c=>{this.data=await c.json(),this.shaper=new Eo(this.data),this.data.chars.forEach(h=>{this.glyphMap.set(h.id,h)}),this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const t=this.glyphMap.get(e);if(t===void 0)throw new Error("Glyph ".concat(e," not found in font ").concat(this.fontFamily));return{x:t.x,y:t.y,width:t.width,height:t.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}class ii{constructor(n){d(this,"textRenderers");this.textRenderers=n}addFontFace(n){for(const e in this.textRenderers){const t=this.textRenderers[e];t&&t.isFontFaceSupported(n)&&t.addFontFace(n)}}static resolveFontFace(n,e){const t=[];return n.reduce((o,s)=>{if(o)return o;const a=s[e.fontFamily];if(!a)return;const l=new Set(a);for(const c of l)(c.descriptors.stretch!==e.fontStretch||c.descriptors.style!==e.fontStyle||c.descriptors.weight!==e.fontWeight)&&l.delete(c);return l.values().next().value},void 0)||t[0]}}const Io={x:(r,n)=>{r.props.x=n},y:(r,n)=>{r.props.y=n},width:(r,n)=>{r.props.width=n},height:(r,n)=>{r.props.height=n},color:(r,n)=>{r.props.color=n},zIndex:(r,n)=>{r.props.zIndex=n},fontFamily:(r,n)=>{r.props.fontFamily=n},fontWeight:(r,n)=>{r.props.fontWeight=n},fontStyle:(r,n)=>{r.props.fontStyle=n},fontStretch:(r,n)=>{r.props.fontStretch=n},fontSize:(r,n)=>{r.props.fontSize=n},text:(r,n)=>{r.props.text=n},textAlign:(r,n)=>{r.props.textAlign=n},contain:(r,n)=>{r.props.contain=n},offsetY:(r,n)=>{r.props.offsetY=n},scrollable:(r,n)=>{r.props.scrollable=n},scrollY:(r,n)=>{r.props.scrollY=n},letterSpacing:(r,n)=>{r.props.letterSpacing=n},debug:(r,n)=>{r.props.debug=n}};class oi{constructor(n){d(this,"stage");d(this,"set");this.stage=n;const e={...Io,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([t,i])=>[t,(o,s)=>{o.props[t]!==s&&i(o,s)}])))}setStatus(n,e,t){n.status!==e&&(n.status=e,n.emitter.emit(e,t))}scheduleUpdateState(n){n.updateScheduled||(n.updateScheduled=!0,queueMicrotask(()=>{n.updateScheduled=!1,this.updateState(n)}))}}const So=24;function To(r,n,e,t,i,o,s){let a=0;i&&(a=Math.min(Math.max(Math.floor(i.y1/r),0),o.length));const l=0,c=n/e+a*t;if(!(s&&c>=s/e))return{x:l,y:c,lineIndex:a}}class Ut{constructor(n,e=0){d(this,"iterator");d(this,"peekBuffer",[]);d(this,"_lastIndex");this.iterator=n,this.iterator=n,this._lastIndex=e-1,this.peekBuffer=[]}next(){const n=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return n.done?this._lastIndex=-1:this._lastIndex++,n}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const n=this.iterator.next();return this.peekBuffer.push(n),n}get lastIndex(){return this._lastIndex}}function*Xt(r,n=0){let e=n;for(;e<r.length;){const t=r.codePointAt(e);if(t===void 0)throw new Error("Invalid Unicode code point");yield t,e+=t<=65535?1:2}}function bo(r,n,e){const t=e.shapeText(n,new Ut(Xt(r,0),0));let i=0;for(const o of t)o.mapped&&(i+=o.xAdvance);return i}function Bo(r,n,e,t,i,o,s,a,l,c,h,u,C,_,f,p){P(_,"Font face must be loaded"),P(_.loaded,"Font face must be loaded"),P(_.data,"Font face must be loaded"),P(_.shaper,"Font face must be loaded");const E=_.data.info.size,v=a/E,x=o/v,w=l/v,m=u[r],T=(m==null?void 0:m.codepointIndex)||0,b=(m==null?void 0:m.maxX)||0,I=(m==null?void 0:m.maxY)||0;let y=b,A=I,S=n,M=e,Q=0;const F={codepointIndex:-1,bufferOffset:-1,xStart:-1},k=_.shaper,O={letterSpacing:w};let U=k.shapeText(O,new Ut(Xt(t,T),T)),j,se=-1;const V=[],Qe="...",$e=s/v,fe=bo(Qe,O,k);let ge=!0;for(;ge;){const pe=h!=="both"||p||M+E+E<=$e,de=pe?x:x-fe;let H=0;for(;(j=U.next())&&!j.done;){const Y=j.value;if(r===u.length)u.push({codepointIndex:Y.cluster,maxY:A,maxX:y});else if(r>u.length)throw new Error("Unexpected lineCache length");if(Y.codepoint===32||Y.codepoint===10?F.codepointIndex!==-1&&(F.codepointIndex=-1,H=S):F.codepointIndex===-1&&(F.codepointIndex=Y.cluster,F.bufferOffset=Q,F.xStart=H),Y.mapped){const Pe=S+Y.xOffset+Y.width;if(h!=="none"&&Pe>=de&&F.codepointIndex!==-1&&F.codepointIndex<Y.cluster&&F.xStart>0)if(pe){U=k.shapeText(O,new Ut(Xt(t,F.codepointIndex),F.codepointIndex)),Q=F.bufferOffset;break}else U=k.shapeText(O,new Ut(Xt(Qe,0),0)),S=F.xStart,Q=F.bufferOffset;else{const ce=S+Y.xOffset,Me=M+Y.yOffset,Mt=C?M+E>=C.y1/v:!0,Lt=C?M<=C.y2/v:!0;if(Mt&&Lt){se===-1&&(se=Q);const Ye=_.getAtlasEntry(Y.glyphId),Ue=Ye.x/_.data.common.scaleW,Xe=Ye.y/_.data.common.scaleH,ht=Ye.width/_.data.common.scaleW,ar=Ye.height/_.data.common.scaleH;c[Q++]=ce,c[Q++]=Me,c[Q++]=Ue,c[Q++]=Xe,c[Q++]=ce+Y.width,c[Q++]=Me,c[Q++]=Ue+ht,c[Q++]=Xe,c[Q++]=ce,c[Q++]=Me+Y.height,c[Q++]=Ue,c[Q++]=Xe+ar,c[Q++]=ce+Y.width,c[Q++]=Me+Y.height,c[Q++]=Ue+ht,c[Q++]=Xe+ar}A=Math.max(A,Me+Y.height),S+=Y.xAdvance,y=Math.max(y,S)}}else if(Y.codepoint===10)break}se!==-1&&(V.push({bufferStart:se,bufferEnd:Q}),se=-1),S=0,M+=E,r++,F.codepointIndex=-1,H=0,(!f&&h==="both"&&C&&M>C.y2/v||j&&j.done||h==="both"&&!p&&!pe)&&(ge=!1)}if(i==="center"){const pe=h==="none"?y:x;for(let de=0;de<V.length;de++){const H=V[de],Y=c[H.bufferEnd-4]-c[H.bufferStart],Pe=(pe-Y)/2;for(let ce=H.bufferStart;ce<H.bufferEnd;ce+=4)c[ce]+=Pe}}else if(i==="right"){const pe=h==="none"?y:x;for(let de=0;de<V.length;de++){const H=V[de],Y=H.bufferEnd===H.bufferStart?0:c[H.bufferEnd-4]-c[H.bufferStart],Pe=pe-Y;for(let ce=H.bufferStart;ce<H.bufferEnd;ce+=4)c[ce]+=Pe}}return P(j),{bufferNumFloats:Q,bufferNumQuads:Q/16,layoutNumCharacters:j.done?t.length-T:j.value.cluster-T+1,fullyProcessed:!!j.done,maxX:y,maxY:A}}function Ro(r,n,e,t,i,o){const s=t*i,a=o.x1-r,l=o.y1-n;return no(o)?{x1:a,y1:l+e-s,x2:a+(o.x2-o.x1),y2:l+e+(o.y2-o.y1)+s}:{x1:0,y1:0,x2:0,y2:0}}const Qo=ct(0,0,0,0);class Po extends oi{constructor(e){super(e);d(this,"ssdfFontFamilies",{});d(this,"msdfFontFamilies",{});d(this,"sdfShader");d(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,this.invalidateVisibleWindowCache(e)},y:(e,t)=>{e.props.y=t,this.invalidateVisibleWindowCache(e)},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){const{fontFamily:t}=e;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||t==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof gr}addFontFace(e){P(e instanceof gr);const t=e.fontFamily,i=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!i){console.warn("Invalid font face type: ".concat(e.type));return}let o=i[t];o||(o=new Set,i[t]=o),o.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new We,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:t}=e;const{textH:i,lineCache:o,debugData:s,forceFullLayoutCalc:a}=e;if(s.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!t&&(t=this.resolveFontFace(e.props),e.trFontFace=t,!t)){const Q="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(Q),this.setStatus(e,"failed",new Error(Q));return}if(!t.loaded){t.once("loaded",()=>{this.scheduleUpdateState(e)});return}P(t.data,"Font face data should be loaded");const{text:l,fontSize:c,x:h,y:u,contain:C,width:_,height:f,scrollable:p}=e.props,E=C==="both"&&p?e.props.scrollY:0;let{renderWindow:v}=e;const x=t.data.info.size,w=c/x;e.distanceRange=w*t.data.distanceField.distanceRange;const m=l.length*So;let T=e.vertexBuffer;(!T||T.length<m)&&(T=new Float32Array(m*2));const b=e.visibleWindow;if(!b.valid){const Q=ct(h,u,C!=="none"?h+_:1/0,C==="both"?u+f:1/0,Qo);Kr(this.rendererBounds,Q,e.visibleWindow),b.valid=!0}if(!a&&v){if(h+v.x1<=b.x1&&h+v.x2>=b.x2&&u-E+v.y1<=b.y1&&u-E+v.y2>=b.y2){this.setStatus(e,"loaded");return}v=e.renderWindow=void 0,this.setStatus(e,"loading")}const{offsetY:I,textAlign:y}=e.props;if(!v){const Q=b.y2-b.y1,F=Math.ceil(Q/x);v=Ro(h,u,E,x,F,b)}const A=To(c,I,w,x,v,o,i);if(!A){this.setStatus(e,"loaded");return}const{letterSpacing:S}=e.props,M=Bo(A.lineIndex,A.x,A.y,l,y,_,f,c,S,T,C,o,v,t,a,p);e.bufferUploaded=!1,e.bufferNumFloats=M.bufferNumFloats,e.bufferNumQuads=M.bufferNumQuads,e.vertexBuffer=T,e.renderWindow=v,s.lastLayoutNumCharacters=M.layoutNumCharacters,s.bufferSize=T.byteLength,M.fullyProcessed&&(e.textW=M.maxX*w,e.textH=M.maxY*w),this.setStatus(e,"loaded")}renderQuads(e,t,i,o){var y,A,S;if(!e.vertexBuffer)return;performance.now();const{renderer:s}=this.stage;this.stage.options;const{fontSize:a,color:l,contain:c,scrollable:h,zIndex:u,debug:C}=e.props,_=c==="both"&&h?e.props.scrollY:0,{textW:f=0,textH:p=0,distanceRange:E,vertexBuffer:v,bufferUploaded:x,trFontFace:w}=e;let{webGlBuffers:m}=e;if(!m){const M=s.gl,Q=4*Float32Array.BYTES_PER_ELEMENT,F=M.createBuffer();P(F),e.webGlBuffers=new ni([{buffer:F,attributes:{a_position:{name:"a_position",size:2,type:M.FLOAT,normalized:!1,stride:Q,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:M.FLOAT,normalized:!1,stride:Q,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,P(e.webGlBuffers),m=e.webGlBuffers}if(!x){const M=s.gl,Q=(y=m==null?void 0:m.getBuffer("a_textureCoordinate"))!=null?y:null;M.bindBuffer(M.ARRAY_BUFFER,Q),M.bufferData(M.ARRAY_BUFFER,v,M.STATIC_DRAW),e.bufferUploaded=!0}P(w);const T=new Zr(s.gl,s.options,m,this.sdfShader,{transform:t.data,color:Gi(l,o),size:a/(((A=w.data)==null?void 0:A.info.size)||0),scrollY:_,distanceRange:E,debug:C.sdfShaderDebug},o,i,{height:p,width:f},0,u),b=(S=e.trFontFace)==null?void 0:S.texture;P(b);const I=this.stage.txManager.getCtxTexture(b);T.addTexture(I),T.length=e.bufferNumFloats,T.numQuads=e.bufferNumQuads,s.addRenderOp(T)}resolveFontFace(e){return ii.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.visibleWindow.valid=!1,e.renderWindow=void 0,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}}const pr=2048;class Mo{constructor(n,e){d(this,"_canvas");d(this,"_context");d(this,"_settings");d(this,"renderInfo");this._canvas=n,this._context=e,this._settings=this.mergeDefaults({})}set settings(n){this._settings=this.mergeDefaults(n)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const n=[this._settings.fontFace],e=[];for(let t=0,i=n.length;t<i;t++)n[t]==="serif"||n[t]==="sans-serif"?e.push(n[t]):e.push('"'.concat(n[t],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const n=this._getFontSetting();try{if(!document.fonts.check(n,this._settings.text))return document.fonts.load(n,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,n)}).then(()=>{document.fonts.check(n,this._settings.text)||console.warn("[Lightning] Font not found",n)})}catch(e){console.warn("[Lightning] Can't check font loading for "+n)}}}calculateRenderInfo(){const n={},e=this.getPrecision(),t=this._settings.paddingLeft*e,i=this._settings.paddingRight*e,o=this._settings.fontSize*e;let s=this._settings.offsetY===null?null:this._settings.offsetY*e,a=(this._settings.lineHeight||o)*e;const l=this._settings.w*e,c=this._settings.h*e;let h=this._settings.wordWrapWidth*e;const u=this._settings.cutSx*e,C=this._settings.cutEx*e,_=this._settings.cutSy*e,f=this._settings.cutEy*e,p=(this._settings.letterSpacing||0)*e,E=this._settings.textIndent*e;this.setFontProperties();let v=l||2048/this.getPrecision(),x=v-t;if(x<10&&(v+=10-x,x=10),h||(h=x),this._settings.textOverflow&&!this._settings.wordWrap){let y;switch(this._settings.textOverflow){case"clip":y="";break;case"ellipsis":y=this._settings.maxLinesSuffix;break;default:y=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,h-E,y)}let w;if(this._settings.wordWrap)w=this.wrapText(this._settings.text,h,p,E);else{w={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const y=w.l.length;for(let A=0;A<y-1;A++)w.n.push(A)}let m=w.l;if(this._settings.maxLines&&m.length>this._settings.maxLines){const y=m.slice(0,this._settings.maxLines);let A=null;if(this._settings.maxLinesSuffix){const k=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,O=this.wrapText(y[y.length-1],h-k,p,E);y[y.length-1]="".concat(O.l[0]).concat(this._settings.maxLinesSuffix),A=[O.l.length>1?O.l[1]:""]}else A=[""];let S;const M=m.length;let Q=0;const F=w.n.length;for(S=this._settings.maxLines;S<M;S++)A[Q]+="".concat(A[Q]?" ":"").concat(m[S]),S+1<F&&w.n[S+1]&&Q++;n.remainingText=A.join("\n"),n.moreTextLines=!0,m=y}else n.moreTextLines=!1,n.remainingText="";let T=0;const b=[];for(let y=0;y<m.length;y++){const A=this.measureText(m[y],p)+(y===0?E:0);b.push(A),T=Math.max(T,A)}n.lineWidths=b,l||(v=T+t+i,x=T),a=a||o;let I;if(c)I=c;else{const y=this._settings.textBaseline!="bottom"?.5*o:0;I=a*(m.length-1)+y+Math.max(a,o)+(s||0)}return s===null&&(s=o),n.w=v,n.h=I,n.lines=m,n.precision=e,v||(v=1),I||(I=1),(u||C)&&(v=Math.min(v,C-u)),(_||f)&&(I=Math.min(I,f-_)),n.width=v,n.innerWidth=x,n.height=I,n.fontSize=o,n.cutSx=u,n.cutSy=_,n.cutEx=C,n.cutEy=f,n.lineHeight=a,n.lineWidths=b,n.offsetY=s,n.paddingLeft=t,n.paddingRight=i,n.letterSpacing=p,n.textIndent=E,n}draw(n,e){const t=this.getPrecision(),i=(e==null?void 0:e.lines)||n.lines,o=(e==null?void 0:e.lineWidths)||n.lineWidths,s=e?e.lines.length*n.lineHeight:n.height;this._canvas.width=Math.min(Math.ceil(n.width+this._settings.textRenderIssueMargin),pr),this._canvas.height=Math.min(Math.ceil(s),pr),this.setFontProperties(),n.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(n.cutSx||n.cutSy)&&this._context.translate(-n.cutSx,-n.cutSy);let a,l;const c=[];for(let u=0,C=i.length;u<C;u++)a=u===0?n.textIndent:0,l=u*n.lineHeight+n.offsetY,this._settings.verticalAlign=="middle"?l+=(n.lineHeight-n.fontSize)/2:this._settings.verticalAlign=="bottom"&&(l+=n.lineHeight-n.fontSize),this._settings.textAlign==="right"?a+=n.innerWidth-o[u]:this._settings.textAlign==="center"&&(a+=(n.innerWidth-o[u])/2),a+=n.paddingLeft,c.push({text:i[u],x:a,y:l,w:o[u]});if(this._settings.highlight){const u=this._settings.highlightColor,C=this._settings.highlightHeight*t||n.fontSize*1.5,_=this._settings.highlightOffset*t,f=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*t:n.paddingLeft,p=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*t:n.paddingRight;this._context.fillStyle=An(u);for(let E=0;E<c.length;E++){const v=c[E];this._context.fillRect(v.x-f,v.y-n.offsetY+_,v.w+p+f,C)}}let h=null;this._settings.shadow&&(h=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=An(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*t,this._context.shadowOffsetY=this._settings.shadowOffsetY*t,this._context.shadowBlur=this._settings.shadowBlur*t),this._context.fillStyle=An(this._settings.textColor);for(let u=0,C=c.length;u<C;u++){const _=c[u];if(n.letterSpacing===0)this._context.fillText(_.text,_.x,_.y);else{const f=_.text.split("");let p=_.x;for(let E=0,v=f.length;E<v;E++)this._context.fillText(f[E],p,_.y),p+=this.measureText(f[E],n.letterSpacing)}}h&&(this._context.shadowColor=h[0],this._context.shadowOffsetX=h[1],this._context.shadowOffsetY=h[2],this._context.shadowBlur=h[3]),(n.cutSx||n.cutSy)&&this._context.translate(n.cutSx,n.cutSy),this.renderInfo=n}wrapWord(n,e,t){const i=this._context.measureText(t).width,o=n.length,s=this._context.measureText(n).width;if(s<=e)return n;let a=Math.floor(e*o/s),l=this._context.measureText(n.substring(0,a)).width+i;if(l>e)for(;a>0&&(l=this._context.measureText(n.substring(0,a)).width+i,l>e);)a-=1;else for(;a<o;)if(l=this._context.measureText(n.substring(0,a)).width+i,l<e)a+=1;else{a-=1;break}return n.substring(0,a)+(e>=i?t:"")}wrapText(n,e,t,i=0){const o=n.split(/\r?\n/g);let s=[];const a=[];for(let l=0;l<o.length;l++){const c=[];let h="",u=e-i;const C=o[l].split(" ");for(let _=0;_<C.length;_++){const f=this.measureText(C[_],t),p=f+this.measureText(" ",t);_===0||p>u?(_>0&&(c.push(h),h=""),h+=C[_],u=e-f-(_===0?i:0)):(u-=p,h+=" ".concat(C[_]))}c.push(h),h="",s=s.concat(c),l<o.length-1&&a.push(s.length)}return{l:s,n:a}}measureText(n,e=0){return e?n.split("").reduce((t,i)=>t+this._context.measureText(i).width+e,0):this._context.measureText(n).width}mergeDefaults(n){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...n}}}const mr=typeof self>"u"?globalThis:self;var Dr;const xr=((Dr=mr.document)==null?void 0:Dr.fonts)||mr.fonts;function Lo(r){const{fontFamily:n,fontStyle:e,fontWeight:t,fontStretch:i,fontSize:o}=r;return[e,t,i,"".concat(o,"px"),n].join(" ")}const Fo=ct(0,0,0,0);class No extends oi{constructor(e){super(e);d(this,"canvas");d(this,"context");d(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let t=this.canvas.getContext("2d");t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d")),P(t),this.context=t,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t,this.invalidateVisibleWindowCache(e)},y:(e,t)=>{e.props.y=t,this.invalidateVisibleWindowCache(e)},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof lr}addFontFace(e){P(e instanceof lr),xr.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new We,canvasPages:void 0,lightning2TextRenderer:new Mo(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const f=Lo(e.props);if(e.fontInfo={cssString:f,loaded:!1},!e.fontInfo.loaded){xr.load(f).then(this.onFontLoaded.bind(this,e,f)).catch(this.onFontLoadError.bind(this,e,f));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:_e(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:t,y:i,width:o,height:s,scrollY:a,contain:l}=e.props,{visibleWindow:c}=e;let{renderWindow:h,canvasPages:u}=e;if(!c.valid){const f=ct(t,i,l!=="none"?t+o:1/0,l==="both"?i+s:1/0,Fo);Kr(this.rendererBounds,f,c),c.valid=!0}const C=c.y2-c.y1,_=Math.ceil(C/e.renderInfo.lineHeight);if(C===0){u=void 0,h=void 0,this.setStatus(e,"loaded");return}else if(h&&u){const f=t+h.x1,p=i-a+h.y1,E=t+h.x2,v=i-a+h.y2;if(f<=c.x1&&E>=c.x2&&p<=c.y1&&v>=c.y2){this.setStatus(e,"loaded");return}v<c.y2?(h.y1+=_*e.renderInfo.lineHeight,h.y2+=_*e.renderInfo.lineHeight,u.push(u.shift()),u[2].lineNumStart=u[1].lineNumStart+_,u[2].lineNumEnd=u[2].lineNumStart+_,u[2].valid=!1):p>c.y1&&(h.y1-=_*e.renderInfo.lineHeight,h.y2-=_*e.renderInfo.lineHeight,u.unshift(u.pop()),u[0].lineNumStart=u[1].lineNumStart-_,u[0].lineNumEnd=u[0].lineNumStart+_,u[0].valid=!1)}else{const f=e.renderInfo.lineHeight*_,p=Math.ceil(a/f),E=p*_,v=E-_,x=E+_;u=[{texture:u==null?void 0:u[0].texture,lineNumStart:v,lineNumEnd:v+_,valid:!1},{texture:u==null?void 0:u[1].texture,lineNumStart:E,lineNumEnd:E+_,valid:!1},{texture:u==null?void 0:u[2].texture,lineNumStart:x,lineNumEnd:x+_,valid:!1}],e.canvasPages=u;const w=p*f;h={x1:0,y1:w-f,x2:o,y2:w+f*2}}e.renderWindow=h,performance.now();for(const f of u)if(!f.valid){if(f.lineNumStart<0){f.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),f.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(f.lineNumStart,f.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(f.lineNumStart,f.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(f.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),f.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,t,i,o){var y,A,S,M,Q,F,k,O,U,j,se,V;const{stage:s}=this,{canvasPages:a,textW:l=0,textH:c=0,renderWindow:h}=e;if(!a||!h)return;const{x:u,y:C,scrollY:_,contain:f,width:p,height:E}=e.props,v={x:u,y:C,width:f!=="none"?p:l,height:f==="both"?E:c};qr({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},v),P(a,"canvasPages is not defined"),P(h,"renderWindow is not defined");const w=(h.y2-h.y1)/3,{zIndex:m,color:T}=e.props,b=o*eo(T),I=pt(4294967295,b);a[0].valid&&this.stage.renderer.addQuad({alpha:b,clippingRect:i,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:((A=(y=a[0].texture)==null?void 0:y.dimensions)==null?void 0:A.width)||0,height:((M=(S=a[0].texture)==null?void 0:S.dimensions)==null?void 0:M.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:m,tx:t.tx,ty:t.ty-_+h.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),a[1].valid&&this.stage.renderer.addQuad({alpha:b,clippingRect:i,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:((F=(Q=a[1].texture)==null?void 0:Q.dimensions)==null?void 0:F.width)||0,height:((O=(k=a[1].texture)==null?void 0:k.dimensions)==null?void 0:O.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:m,tx:t.tx,ty:t.ty-_+h.y1+w,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),a[2].valid&&this.stage.renderer.addQuad({alpha:b,clippingRect:i,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:((j=(U=a[2].texture)==null?void 0:U.dimensions)==null?void 0:j.width)||0,height:((V=(se=a[2].texture)==null?void 0:se.dimensions)==null?void 0:V.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:m,tx:t.tx,ty:t.ty-_+h.y1+w+w,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var i;t!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,i){var o;t!==((o=e.fontInfo)==null?void 0:o.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),i),this.scheduleUpdateState(e))}}const Do=2e6;class ko extends We{constructor(e){super();d(this,"options");d(this,"animationManager");d(this,"txManager");d(this,"fontManager");d(this,"textRenderers");d(this,"shManager");d(this,"renderer");d(this,"root");d(this,"deltaTime",0);d(this,"lastFrameTime",0);d(this,"currentFrameTime",0);d(this,"fpsNumFrames",0);d(this,"fpsElapsedTime",0);d(this,"renderRequested",!1);this.options=e;const{canvas:t,clearColor:i,rootId:o,debug:s,appWidth:a,appHeight:l}=e;this.txManager=new Co,this.shManager=new Ao,this.animationManager=new wo,s!=null&&s.monitorTextureCache&&setInterval(()=>{P(this.txManager);const h=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",h.idCacheSize),console.log("Texture Key Cache Size: ",h.keyCacheSize)},1e3),this.renderer=new ri({stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:i!=null?i:4278190080,bufferMemory:Do,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new No(this),sdf:new Po(this)},this.fontManager=new ii(this.textRenderers);const c=new Vn(this,{id:o,x:0,y:0,width:a,height:l,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=c,oo(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=so(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:t}=this;this.root.updateType!==0&&this.root.update(this.deltaTime),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),t&&(this.renderRequested=!1);const{fpsUpdateInterval:i}=this.options;if(i&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=i)){const o=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",o)}}addQuads(e){P(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let t=0;t<e.children.length;t++){const i=e.children[t];i&&(i==null?void 0:i.worldAlpha)!==0&&this.addQuads(i)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){let i=t,o=!1;if(i){const a=this.textRenderers[i];a?a.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(i,"' for font"),e),i=null,o=!0):(console.warn("Text renderer override '".concat(i,"' not found.")),i=null,o=!0)}if(!i){for(const[a,l]of Object.entries(this.textRenderers))if(a!=="canvas"&&l.canRenderFont(e)){i=a;break}i||(i="canvas")}o&&console.warn("Falling back to text renderer ".concat(String(i)));const s=this.textRenderers[i];return P(s,"resolvedTextRenderer undefined"),s}}class zo extends Vn{constructor(e,t){super(e,t);d(this,"textRenderer");d(this,"trState");d(this,"_textRendererOverride",null);d(this,"onTextLoaded",()=>{const{contain:e}=this,t=this.trState.props.width,i=this.trState.props.height,o=this.trState.textW||0,s=this.trState.textH||0;e==="both"?(this.props.width=t,this.props.height=i):e==="width"?(this.props.width=t,this.props.height=s):e==="none"&&(this.props.width=o,this.props.height=s),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});d(this,"onTextFailed",(e,t)=>{this.emit("failed",{type:"text",error:t})});this._textRendererOverride=t.textRendererOverride;const{resolvedTextRenderer:i,textRendererState:o}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text},void 0);this.textRenderer=i,this.trState=o}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e)}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:t,textRendererState:i}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=t,this.trState=i}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t=null){super.update(e,t),P(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkIsRenderable(){return super.checkIsRenderable()?!0:this.trState.props.text!==""?this.isRenderable=!0:this.isRenderable=!1}renderQuads(e){P(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,t){const i=this.stage.resolveTextRenderer(e,this._textRendererOverride),o=i.createState(e);return t&&["loading","loaded","failed"].forEach(a=>{t.emitter.off(a)}),o.emitter.on("loaded",this.onTextLoaded),o.emitter.on("failed",this.onTextFailed),i.scheduleUpdateState(o),{resolvedTextRenderer:i,textRendererState:o}}}class Oo extends Pn{constructor(n,e,t){super(n,e,t,new zo(t,{id:Kn(),x:n.x,y:n.y,width:n.width,height:n.height,alpha:n.alpha,clipping:n.clipping,color:n.color,colorTop:n.colorTop,colorBottom:n.colorBottom,colorLeft:n.colorLeft,colorRight:n.colorRight,colorTl:n.colorTl,colorTr:n.colorTr,colorBl:n.colorBl,colorBr:n.colorBr,zIndex:n.zIndex,zIndexLocked:n.zIndexLocked,scaleX:n.scaleX,scaleY:n.scaleY,mountX:n.mountX,mountY:n.mountY,mount:n.mount,pivot:n.pivot,pivotX:n.pivotX,pivotY:n.pivotY,rotation:n.rotation,text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontStretch:n.fontStretch,fontStyle:n.fontStyle,contain:n.contain,scrollable:n.scrollable,letterSpacing:n.letterSpacing,textAlign:n.textAlign,scrollY:n.scrollY,offsetY:n.offsetY,textRendererOverride:n.textRendererOverride,debug:n.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(n){this.coreNode.text=n}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(n){this.coreNode.textRendererOverride=n}get fontSize(){return this.coreNode.fontSize}set fontSize(n){this.coreNode.fontSize=n}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(n){this.coreNode.fontFamily=n}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(n){this.coreNode.fontWeight=n}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(n){this.coreNode.fontStretch=n}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(n){this.coreNode.fontStyle=n}get textAlign(){return this.coreNode.textAlign}set textAlign(n){this.coreNode.textAlign=n}get contain(){return this.coreNode.contain}set contain(n){this.coreNode.contain=n}get scrollable(){return this.coreNode.scrollable}set scrollable(n){this.coreNode.scrollable=n}get scrollY(){return this.coreNode.scrollY}set scrollY(n){this.coreNode.scrollY=n}get offsetY(){return this.coreNode.offsetY}set offsetY(n){this.coreNode.offsetY=n}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(n){this.coreNode.letterSpacing=n}get debug(){return this.coreNode.debug}set debug(n){this.coreNode.debug=n}}const Wo="modulepreload",$o=function(r,n){return new URL(r,n).href},Ar={},Yo=function(n,e,t){if(!e||e.length===0)return n();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=$o(o,t),o in Ar)return;Ar[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!t)for(let h=i.length-1;h>=0;h--){const u=i[h];if(u.href===o&&(!s||u.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(o,'"]').concat(a)))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Wo,s||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),s)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error("Unable to preload CSS for ".concat(o))))})})).then(()=>n()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function Uo(r){return r.prototype instanceof Bi}async function Xo(r,n){let e;try{console.log("Loading core extension",r),e=await Yo(()=>import(r),[],import.meta.url)}catch(i){console.error("The core extension module at '".concat(r,"' could not be loaded.")),console.error(i);return}if(!e.default){console.error("The core extension module at '".concat(r,"' does not have a default export."));return}const t=e.default;if(Uo(t)){const i=new t;try{await i.run(n)}catch(o){console.error("The core extension at '".concat(r,"' threw an error.")),console.error(o)}}else console.error("The core extension at '".concat(r,"' does not extend CoreExtension."))}class Ho{constructor(){d(this,"root",null);d(this,"stage",null);d(this,"rendererMain",null)}async init(n,e,t){this.stage=new ko({rootId:Kn(),appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:t,fpsUpdateInterval:e.fpsUpdateInterval,debug:{monitorTextureCache:!1}}),this.rendererMain=n,P(this.stage.root);const i=new Pn(n.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=i,i.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,i)),this.onCreateNode(i),e.coreExtensionModule&&await Xo(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(o,s)=>{this.onFpsUpdate(s)})}createNode(n){P(this.rendererMain),P(this.stage);const e=new Pn(n,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(n){P(this.rendererMain),P(this.stage);const e=new Oo(n,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(n){n.destroy()}releaseTexture(n){const{stage:e}=this;P(e),e.txManager.removeTextureIdFromCache(n)}getRootNode(){return P(this.root),this.root}onCreateNode(n){throw new Error("Method not implemented.")}onBeforeDestroyNode(n){throw new Error("Method not implemented.")}onFpsUpdate(n){throw new Error("Method not implemented.")}}let Ne,qn;function Go(r={}){const n=new Ho;return Ne=new Ki(r,r.rootId||"app",n),qn=Ne.createShader.bind(Ne),Ne}class jo extends Array{constructor(n){super(),this._parent=n}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(n,e){if(e){const t=this.indexOf(e);this.splice(t,0,n)}else this.push(n);n.parent=this._parent,this._parent._isDirty=!0}remove(n){const e=this.indexOf(n);e>=0&&this.splice(e,1)}}import.meta.env={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1};const De={debug:!1,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Vo(r,n,...e){}function st(r){return typeof r=="function"}function At(r){return Array.isArray(r)}function Ko(r){return typeof r=="string"}function qo(r){return typeof r=="number"}function Zo(r){return Number.isInteger(r)}function Jo(r,n){for(const e of n)if(e in r)return!0;return!1}function es(r){return At(r)?r[0]:r}class yr extends Array{constructor(n,e={}){var t=(...i)=>{super(...i)};return At(e)?t(...e):Ko(e)?t(e):t(...Object.entries(e).filter(([i,o])=>o).map(([i])=>i)),this.onChange=n,this}has(n){return this.indexOf(n)>=0}is(n){return this.indexOf(n)>=0}add(n){this.push(n),this.onChange()}toggle(n){this.has(n)?this.remove(n):this.add(n)}remove(n){const e=this.indexOf(n);e>=0&&(this.splice(e,1),this.onChange())}}function ts(r){const n=[];for(let x=0;x<r.children.length;x++){const w=r.children[x];if(w.name!=="TextNode"){if(w.name==="text"&&!(w.width||w.height))return!1;n.push(w)}}const e=n.length,i=(r.flexDirection||"row")==="row",o=i?"width":"height",s=i?"height":"width",a=i?"marginLeft":"marginTop",l=i?"marginRight":"marginBottom",c=i?"x":"y",h=i?"y":"x",u=r[o]||0,C=r[s]||0,_=r.gap||0,f=r.justifyContent||"flexStart",p=r.alignItems;let E=0;["center","spaceBetween","spaceEvenly"].includes(f)&&(E=n.reduce((x,w)=>x+(w[o]||0),0));const v=C&&p?x=>{p==="flexStart"?x[h]=0:p==="center"?x[h]=(C-(x[s]||0))/2:p==="flexEnd"&&(x[h]=C-(x[s]||0))}:x=>x;if(f==="flexStart"){let x=0;if(n.forEach(w=>{w[c]=x+(w[a]||0),x+=(w[o]||0)+_+(w[a]||0)+(w[l]||0),v(w)}),r._autosized){const w=x-_;if(w!==r[o])return r[o]=w,!0}}else if(f==="flexEnd"){let x=u;for(let w=e-1;w>=0;w--){const m=n[w];P(m),m[c]=x-(m[o]||0)-(m[l]||0),x-=(m[o]||0)+_+(m[a]||0)+(m[l]||0),v(m)}}else if(f==="center"){let x=(u-(E+_*(e-1)))/2;n.forEach(w=>{w[c]=x,x+=(w[o]||0)+_,v(w)})}else if(f==="spaceBetween"){const x=(u-E)/(e-1);let w=0;n.forEach(m=>{m[c]=w,w+=(m[o]||0)+x,v(m)})}else if(f==="spaceEvenly"){const x=(u-E)/(e+1);let w=x;n.forEach(m=>{m[c]=w,w+=(m[o]||0)+x,v(m)})}return!1}const{animationSettings:ns}=De;function rs(r){const n=[];for(const[e,t]of Object.entries(r))n.push({type:e,props:t});return qn("DynamicShader",{effects:n})}function dt(r=""){return{set(n){qo(n)&&(n={width:n,color:255}),this.effects={...this.effects||{},["border".concat(r)]:n},this["_border".concat(r)]=n},get(){return this["_border".concat(r)]}}}const is=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],os=["clipping","contain","fontFamily","src","text","textAlign","texture","maxLines","maxLinesSuffix","textBaseline","textOverflow","verticalAlign","wordWrap"];class je extends Object{constructor(n){super(),this.lng=null,this._parent=null,this.name=n,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new jo(this);for(const e of is)Object.defineProperty(this,e,{get(){return this["_".concat(e)]||this.lng&&this.lng[e]},set(t){this["_".concat(e)]=es(t),this._sendToLightningAnimatable(e,t)}});for(const e of os)Object.defineProperty(this,e,{get(){return this["_".concat(e)]||this.lng&&this.lng[e]},set(t){this["_".concat(e)]=t,this._sendToLightning(e,t)}});Object.defineProperties(this,{borderRadius:{set(e){this._borderRadius=e,this.effects={...this.effects||{},radius:{radius:e}}},get(){return this._borderRadius}},border:dt(),borderLeft:dt("Left"),borderRight:dt("Right"),borderTop:dt("Top"),borderBottom:dt("Bottom")}),Object.defineProperties(this,{linearGradient:{set(e={}){this._linearGradient=e,this.effects={...this.effects||{},linearGradient:e}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(n){this._effects=n,this.shader=rs(n)}get parent(){return this._parent}set parent(n){var e;this._parent=n,this.rendered&&this.lng&&(this.lng.parent=(e=n==null?void 0:n.lng)!=null?e:null)}get shader(){return this._shader}set shader(n){At(n)?this._shader=qn(...n):this._shader=n,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(n,e){if(this.rendered&&this.lng){if(At(e))return this.createAnimation({[n]:e[0]},e[1]).start();if(this._animate)return this.createAnimation({[n]:e}).start();this.lng[n]=e}else At(e)&&(e=e[0]),this._renderProps[n]=e}_sendToLightning(n,e){this.rendered&&this.lng?this.lng[n]=e:this._renderProps[n]=e}createAnimation(n,e){return P(this.lng,"Node must be rendered before animating"),this.lng.animate(n,e||this.animationSettings)}setFocus(){this.rendered?jr(this):this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){this.lng.once("loaded",(n,e)=>{if(e.type==="text"){const{dimensions:t}=e;this.width=t.width,this.height=t.height,this.parent.updateLayout(this,t)}})}getText(){return this.children.map(n=>n.text).join("")}destroy(){this.lng&&Ne.destroyNode(this.lng)}set style(n){for(let e in n)e==="animate"&&(e="_animate"),this[e]||(this[e]=n[e]);this._style=n}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(n){this._states=new yr(this._stateChanged.bind(this),n),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new yr(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||ns}set animationSettings(n){this._animationSettings=n}updateLayout(n,e){var t;this.hasChildren&&(st(this.onBeforeLayout)&&this.onBeforeLayout.call(this,n,e),this.display==="flex"&&ts(this)&&((t=this.parent)==null||t.updateLayout()),st(this.onLayout)&&this.onLayout.call(this,n,e))}_stateChanged(){var e;if(Vo("State Changed: ",this,this.states),this.forwardStates){const t=this.states.slice();this.children.forEach(i=>i.states=t)}const n=((e=De.stateMapperHook)==null?void 0:e.call(De,this,this.states))||this.states;if(this._undoStates||this.style&&Jo(this.style,n)){this._undoStates=this._undoStates||{};let t={};for(const[o,s]of Object.entries(this._undoStates))n.includes(o)||(t={...t,...s});const i=n.reduce((o,s)=>{const a=this.style[s];return a&&(o={...o,...a},this._undoStates&&!this._undoStates[s]&&(this._undoStates[s]={},Object.keys(a).forEach(l=>{this._undoStates[s][l]=this[l]}))),o},{});Object.assign(this,{...t,...i})}}render(){const n=this,e=this.parent;e._isDirty&&(e.updateLayout(),e._isDirty=!1),n.updateLayout(),this.states.length&&this._stateChanged();let t=n._renderProps;e.lng&&(t.parent=e.lng),n.isTextNode()?(t={...De.fontSettings,...t,text:n.getText()},t.contain&&(t.width||(t.width=(e.width||0)-t.x-(t.marginRight||0),n._width=t.width,n._autosized=!0),!t.height&&t.contain==="both"&&(t.height=(e.height||0)-t.y-(t.marginBottom||0),n._height=t.height,n._autosized=!0)),n.lng=Ne.createTextNode(t),st(this.onCreate)&&this.onCreate.call(this,n),st(n.onLoad)&&n.lng.on("loaded",n.onLoad),(!n.width||!n.height)&&(n._autosized=!0,n._resizeOnTextLoad())):(t.src||t.texture||(isNaN(t.width)&&(t.width=(e.width||0)-t.x,n._width=t.width,n._autosized=!0),isNaN(t.height)&&(t.height=(e.height||0)-t.y,n._height=t.height,n._autosized=!0),t.color||(n._color=t.color=0)),n.lng=Ne.createNode(t),n.onFail&&n.lng.on("failed",n.onFail),n.onLoad&&n.lng.on("loaded",n.onLoad),st(this.onCreate)&&this.onCreate.call(this,n)),n.rendered=!0,n.autofocus&&n.setFocus(),delete this._renderProps}}const W=r=>(()=>{const n=ut("text");return Rt(n,r,!1),n})(),B=r=>(()=>{const n=ut("node");return Rt(n,r,!1),n})();function si(r){r.name!=="TextNode"&&(P(r instanceof je),r.render(),r.children.forEach(n=>si(n)))}const ss=r=>{const n=Go(r.options),e=n.init();let t;return ne(()=>{e.then(()=>{P(t),t.lng=n.root,t.children.forEach(si),st(r.onFirstRender)&&r.onFirstRender(t)}).catch(console.error)}),(()=>{const i=ut("canvas"),o=t;return typeof o=="function"?li(o,i):t=i,hn(i,()=>r.children),i})()};function as({createElement:r,createTextNode:n,isTextNode:e,replaceText:t,insertNode:i,removeNode:o,setProperty:s,getParentNode:a,getFirstChild:l,getNextSibling:c}){function h(x,w,m,T){if(m!==void 0&&!T&&(T=[]),typeof w!="function")return u(x,w,T,m);Ie(b=>u(x,w(),b,m),T)}function u(x,w,m,T,b){for(;typeof m=="function";)m=m();if(w===m)return m;const I=typeof w,y=T!==void 0;if(I==="string"||I==="number")if(I==="number"&&(w=w.toString()),y){let A=m[0];A&&e(A)?t(A,w):A=n(w),m=f(x,m,T,A)}else m!==""&&typeof m=="string"?t(l(x),m=w):(f(x,m,T,n(w)),m=w);else if(w==null||I==="boolean")m=f(x,m,T);else{if(I==="function")return Ie(()=>{let A=w();for(;typeof A=="function";)A=A();m=u(x,A,m,T)}),()=>m;if(Array.isArray(w)){const A=[];if(C(A,w,b))return Ie(()=>m=u(x,A,m,T,!0)),()=>m;if(A.length===0){const S=f(x,m,T);if(y)return m=S}else Array.isArray(m)?m.length===0?p(x,A,T):_(x,m,A):m==null||m===""?p(x,A):_(x,y&&m||[l(x)],A);m=A}else{if(Array.isArray(m)){if(y)return m=f(x,m,T,w);f(x,m,null,w)}else m==null||m===""||!l(x)?i(x,w):E(x,w,l(x));m=w}}return m}function C(x,w,m){let T=!1;for(let b=0,I=w.length;b<I;b++){let y=w[b],A;if(!(y==null||y===!0||y===!1))if(Array.isArray(y))T=C(x,y)||T;else if((A=typeof y)=="string"||A==="number")x.push(n(y));else if(A==="function")if(m){for(;typeof y=="function";)y=y();T=C(x,Array.isArray(y)?y:[y])||T}else x.push(y),T=!0;else x.push(y)}return T}function _(x,w,m){let T=m.length,b=w.length,I=T,y=0,A=0,S=c(w[b-1]),M=null;for(;y<b||A<I;){if(w[y]===m[A]){y++,A++;continue}for(;w[b-1]===m[I-1];)b--,I--;if(b===y){const Q=I<T?A?c(m[A-1]):m[I-A]:S;for(;A<I;)i(x,m[A++],Q)}else if(I===A)for(;y<b;)(!M||!M.has(w[y]))&&o(x,w[y]),y++;else if(w[y]===m[I-1]&&m[A]===w[b-1]){const Q=c(w[--b]);i(x,m[A++],c(w[y++])),i(x,m[--I],Q),w[b]=m[I]}else{if(!M){M=new Map;let F=A;for(;F<I;)M.set(m[F],F++)}const Q=M.get(w[y]);if(Q!=null)if(A<Q&&Q<I){let F=y,k=1,O;for(;++F<b&&F<I&&!((O=M.get(w[F]))==null||O!==Q+k);)k++;if(k>Q-A){const U=w[y];for(;A<Q;)i(x,m[A++],U)}else E(x,m[A++],w[y++])}else y++;else o(x,w[y++])}}}function f(x,w,m,T){if(m===void 0){let I;for(;I=l(x);)o(x,I);return T&&i(x,T),""}const b=T||n("");if(w.length){let I=!1;for(let y=w.length-1;y>=0;y--){const A=w[y];if(b!==A){const S=a(A)===x;!I&&!y?S?E(x,b,A):i(x,b,m):S&&o(x,A)}else I=!0}}else i(x,b,m);return[b]}function p(x,w,m){for(let T=0,b=w.length;T<b;T++)i(x,w[T],m)}function E(x,w,m){i(x,w,m),o(x,m)}function v(x,w,m={},T){return w||(w={}),T||Ie(()=>m.children=u(x,w.children,m.children)),Ie(()=>w.ref&&w.ref(x)),Ie(()=>{for(const b in w){if(b==="children"||b==="ref")continue;const I=w[b];I!==m[b]&&(s(x,b,I,m[b]),m[b]=I)}}),m}return{render(x,w){let m;return lt(T=>{m=T,h(w,x())}),m},insert:h,spread(x,w,m){typeof w=="function"?Ie(T=>v(x,w(),T,m)):v(x,w,void 0,m)},createElement:r,createTextNode:n,insertNode:i,setProp(x,w,m,T){return s(x,w,m,T),m},mergeProps:jn,effect:Ie,memo:X,createComponent:Gr,use(x,w,m){return le(()=>x(w,m))}}}function ls(r){const n=as(r);return n.mergeProps=jn,n}const cs={createElement(r){const n=new je(r);return Ne.root&&ne(()=>n.render()),n},createTextNode(r){return{name:"TextNode",text:r,parent:null}},replaceText(r,n){r.text=n;const e=r.parent;P(e),e._autosized&&e._resizeOnTextLoad(),e.text=e.getText()},setProperty(r,n,e=!0){if(n==="animate"){r._animate=e;return}r[n]=e},insertNode(r,n,e){r&&(r.children.insert(n,e),n.name==="TextNode"&&r.isTextNode()&&(r._autosized&&r._resizeOnTextLoad(),r.text=r.getText()))},isTextNode(r){return r.isTextNode()},removeNode(r,n){r.children.remove(n),n instanceof je&&n.destroy()},getParentNode(r){var n;return(n=r.parent)!=null?n:void 0},getFirstChild(r){return r.children[0]},getNextSibling(r){if(r.parent){const n=r.parent.children||[],e=n.indexOf(r)+1;if(e<n.length)return n[e]}}},ai=ls(cs),us=ai.render,{effect:El,memo:Bt,createComponent:g,createElement:ut,createTextNode:Il,insertNode:Sl,insert:hn,spread:Rt,setProp:en,mergeProps:ee,use:li}=ai;function R(r=""){return Zo(r)?r:typeof r=="string"?r.startsWith("#")?+(r.replace("#","0x")+(r.length===7?"ff":"")):r.startsWith("0x")?Number(r):+("0x"+(r.length===6?r+"ff":r)):0}function hs(r){return r*Math.PI/180}const wr="_$DX_DELEGATE";function ds(r,n=window.document){const e=n[wr]||(n[wr]=new Set);for(let t=0,i=r.length;t<i;t++){const o=r[t];e.has(o)||(e.add(o),n.addEventListener(o,fs))}}function fs(r){const n="$$".concat(r.type);let e=r.composedPath&&r.composedPath()[0]||r.target;for(r.target!==e&&Object.defineProperty(r,"target",{configurable:!0,value:e}),Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}});e;){const t=e[n];if(t&&!e.disabled){const i=e["".concat(n,"Data")];if(i!==void 0?t.call(e,i,r):t.call(e,r),r.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const gs=!1;function ps(){let r=new Set;function n(i){return r.add(i),()=>r.delete(i)}let e=!1;function t(i,o){if(e)return!(e=!1);const s={to:i,options:o,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const a of r)a.listener({...s,from:a.location,retry:l=>{l&&(e=!0),a.navigate(i,o)}});return!s.defaultPrevented}return{subscribe:n,confirm:t}}const ms=/^(?:[a-z0-9]+:)?\/\//i,xs=/^\/+|(\/)\/+$/g;function yt(r,n=!1){const e=r.replace(xs,"$1");return e?n||/^[?#]/.test(e)?e:"/"+e:""}function Ht(r,n,e){if(ms.test(n))return;const t=yt(r),i=e&&yt(e);let o="";return!i||n.startsWith("/")?o=t:i.toLowerCase().indexOf(t.toLowerCase())!==0?o=t+i:o=i,(o||"/")+yt(n,!o)}function As(r,n){if(r==null)throw new Error(n);return r}function ys(r,n){return yt(r).replace(/\/*(\*.*)?$/g,"")+yt(n)}function ci(r){const n={};return r.searchParams.forEach((e,t)=>{n[t]=e}),n}function ws(r,n,e){const[t,i]=r.split("/*",2),o=t.split("/").filter(Boolean),s=o.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-s;if(c<0||c>0&&i===void 0&&!n)return null;const h={path:s?"":"/",params:{}},u=C=>e===void 0?void 0:e[C];for(let C=0;C<s;C++){const _=o[C],f=l[C],p=_[0]===":",E=p?_.slice(1):_;if(p&&yn(f,u(E)))h.params[E]=f;else if(p||!yn(f,_))return null;h.path+="/".concat(f)}if(i){const C=c?l.slice(-c).join("/"):"";if(yn(C,u(i)))h.params[i]=C;else return null}return h}}function yn(r,n){const e=t=>t.localeCompare(r,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?e(n):typeof n=="function"?n(r):Array.isArray(n)?n.some(e):n instanceof RegExp?n.test(r):!1}function Cs(r){const[n,e]=r.pattern.split("/*",2),t=n.split("/").filter(Boolean);return t.reduce((i,o)=>i+(o.startsWith(":")?2:3),t.length-(e===void 0?0:1))}function ui(r){const n=new Map,e=ln();return new Proxy({},{get(t,i){return n.has(i)||Li(e,()=>n.set(i,X(()=>r()[i]))),n.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function hi(r){let n=/(\/?\:[^\/]+)\?/.exec(r);if(!n)return[r];let e=r.slice(0,n.index),t=r.slice(n.index+n[0].length);const i=[e,e+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(t);)i.push(e+=n[1]),t=t.slice(n[0].length);return hi(t).reduce((o,s)=>[...o,...i.map(a=>a+s)],[])}const vs=100,di=Wr(),dn=Wr(),Zn=()=>As(cn(di),"Make sure your app is wrapped in a <Router />"),_s=()=>cn(dn)||Zn().base,Qt=()=>Zn().navigatorFactory(),Jn=()=>Zn().location,er=()=>_s().params;function Es(r,n=""){const{component:e,load:t,children:i,metadata:o}=r,s=!i||Array.isArray(i)&&!i.length,a={key:r,component:e,load:t,metadata:o};return fi(r.path).reduce((l,c)=>{for(const h of hi(c)){const u=ys(n,h),C=s?u:u.split("/*",1)[0];l.push({...a,originalPath:h,pattern:C,matcher:ws(C,!s,r.matchFilters)})}return l},[])}function Is(r,n=0){return{routes:r,score:Cs(r[r.length-1])*1e4-n,matcher(e){const t=[];for(let i=r.length-1;i>=0;i--){const o=r[i],s=o.matcher(e);if(!s)return null;t.unshift({...s,route:o})}return t}}}function fi(r){return Array.isArray(r)?r:[r]}function gi(r,n="",e=[],t=[]){const i=fi(r);for(let o=0,s=i.length;o<s;o++){const a=i[o];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Es(a,n);for(const c of l){e.push(c);const h=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!h)gi(a.children,c.pattern,e,t);else{const u=Is([...e],t.length);t.push(u)}e.pop()}}}return e.length?t:t.sort((o,s)=>s.score-o.score)}function pi(r,n){for(let e=0,t=r.length;e<t;e++){const i=r[e].matcher(n);if(i)return i}return[]}function Ss(r,n){const e=new URL("http://sar"),t=X(l=>{const c=r();try{return new URL(c,e)}catch(h){return console.error("Invalid path ".concat(c)),l}},e,{equals:(l,c)=>l.href===c.href}),i=X(()=>t().pathname),o=X(()=>t().search,!0),s=X(()=>t().hash),a=()=>"";return{get pathname(){return i()},get search(){return o()},get hash(){return s()},get state(){return n()},get key(){return a()},query:ui(he(o,()=>ci(t())))}}let Fe;function Ts(r,n,e={}){const{signal:[t,i],utils:o={}}=r,s=o.parsePath||(A=>A),a=o.renderPath||(A=>A),l=o.beforeLeave||ps(),c=Ht("",e.base||"");if(c===void 0)throw new Error("".concat(c," is not a valid base path"));c&&!t().value&&i({value:c,replace:!0,scroll:!1});const[h,u]=N(!1),C=async A=>{u(!0);try{await Fi(A)}finally{u(!1)}},[_,f]=N(t().value),[p,E]=N(t().state),v=Ss(_,p),x=[],w=N([]),m={pattern:c,params:{},path:()=>c,outlet:()=>null,resolvePath(A){return Ht(c,A)}};return Ie(()=>{const{value:A,state:S}=t();le(()=>{A!==_()&&C(()=>{Fe="native",f(A),E(S),w[1]([])}).then(()=>{Fe=void 0})})}),{base:m,location:v,isRouting:h,renderPath:a,parsePath:s,navigatorFactory:b,beforeLeave:l,preloadRoute:y,submissions:w};function T(A,S,M){le(()=>{if(typeof S=="number"){S&&(o.go?l.confirm(S,M)&&o.go(S):console.warn("Router integration does not support relative routing"));return}const{replace:Q,resolve:F,scroll:k,state:O}={replace:!1,resolve:!0,scroll:!0,...M},U=F?A.resolvePath(S):Ht("",S);if(U===void 0)throw new Error("Path '".concat(S,"' is not a routable path"));if(x.length>=vs)throw new Error("Too many redirects");const j=_();if((U!==j||O!==p())&&!gs){if(l.confirm(U,M)){const se=x.push({value:j,replace:Q,scroll:k,state:p()});C(()=>{Fe="navigate",f(U),E(O),w[1]([])}).then(()=>{x.length===se&&(Fe=void 0,I({value:U,state:O}))})}}})}function b(A){return A=A||cn(dn)||m,(S,M)=>T(A,S,M)}function I(A){const S=x[0];S&&((A.value!==S.value||A.state!==S.state)&&i({...A,replace:S.replace,scroll:S.scroll}),x.length=0)}function y(A,S){const M=pi(n(),A.pathname),Q=Fe;Fe="preload";for(let F in M){const{route:k,params:O}=M[F];k.component&&k.component.preload&&k.component.preload(),S&&k.load&&k.load({params:O,location:{pathname:A.pathname,search:A.search,hash:A.hash,query:ci(A),state:null,key:""},intent:"preload"})}Fe=Q}}function bs(r,n,e,t,i){const{base:o,location:s}=r,{pattern:a,component:l,load:c}=t().route,h=X(()=>t().path);l&&l.preload&&l.preload();const u=c?c({params:i,location:s,intent:Fe||"initial"}):void 0;return{parent:n,pattern:a,path:h,params:i,outlet:()=>l?Gr(l,{params:i,location:s,data:u,get children(){return e()}}):e(),resolvePath(_){return Ht(o.path(),_,h())}}}const Bs=r=>n=>{const{base:e}=n,t=Hn(()=>n.children),i=X(()=>gi(n.root?{component:n.root,children:t()}:t(),n.base||"")),o=Ts(r,i,{base:e});return r.create&&r.create(o),g(di.Provider,{value:o,get children(){return g(Rs,{routerState:o,get branches(){return i()}})}})};function Rs(r){const n=X(()=>pi(r.branches,r.routerState.location.pathname)),e=ui(()=>{const s=n(),a={};for(let l=0;l<s.length;l++)Object.assign(a,s[l].params);return a}),t=[];let i;const o=X(he(n,(s,a,l)=>{let c=a&&s.length===a.length;const h=[];for(let u=0,C=s.length;u<C;u++){const _=a&&a[u],f=s[u];l&&_&&f.route.key===_.route.key?h[u]=l[u]:(c=!1,t[u]&&t[u](),lt(p=>{t[u]=p,h[u]=bs(r.routerState,h[u-1]||r.routerState.base,Qs(()=>o()[u+1]),()=>n()[u],e)}))}return t.splice(s.length).forEach(u=>u()),l&&c?l:(i=h[0],h)}));return g(ve,{get when(){return o()&&i},keyed:!0,children:s=>g(dn.Provider,{value:s,get children(){return s.outlet()}})})}const Qs=r=>()=>g(ve,{get when(){return r()},keyed:!0,children:n=>g(dn.Provider,{value:n,get children(){return n.outlet()}})}),Le=r=>{const n=Hn(()=>r.children);return jn(r,{get children(){return n()}})};function Ps([r,n],e,t){return[e?()=>e(r()):r,t?i=>n(t(i)):n]}function Ms(r){if(r==="#")return null;try{return document.querySelector(r)}catch(n){return null}}function Ls(r){let n=!1;const e=i=>typeof i=="string"?{value:i}:i,t=Ps(N(e(r.get()),{equals:(i,o)=>i.value===o.value}),void 0,i=>(!n&&r.set(i),i));return r.init&&ke(r.init((i=r.get())=>{n=!0,t[1](e(i)),n=!1})),Bs({signal:t,create:r.create,utils:r.utils})}function Fs(r,n,e){return r.addEventListener(n,e),()=>r.removeEventListener(n,e)}function Ns(r,n){const e=Ms("#".concat(r));e?e.scrollIntoView():n&&window.scrollTo(0,0)}const Ds=new Map;function ks(r=!0,n=!1,e="/_server"){return t=>{const i=t.base.path(),o=t.navigatorFactory(t.base);let s={};function a(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function l(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const p=f.composedPath().find(T=>T instanceof Node&&T.nodeName.toUpperCase()==="A");if(!p||n&&!p.getAttribute("link"))return;const E=a(p),v=E?p.href.baseVal:p.href;if((E?p.target.baseVal:p.target)||!v&&!p.hasAttribute("state"))return;const w=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||w&&w.includes("external"))return;const m=E?new URL(v,document.baseURI):new URL(v);if(!(m.origin!==window.location.origin||i&&m.pathname&&!m.pathname.toLowerCase().startsWith(i.toLowerCase())))return[p,m]}function c(f){const p=l(f);if(!p)return;const[E,v]=p,x=t.parsePath(v.pathname+v.search+v.hash),w=E.getAttribute("state");f.preventDefault(),o(x,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:w&&JSON.parse(w)})}function h(f){const p=l(f);if(!p)return;const[E,v]=p;s[v.pathname]||t.preloadRoute(v,E.getAttribute("preload")!=="false")}function u(f){const p=l(f);if(!p)return;const[E,v]=p;s[v.pathname]||(s[v.pathname]=setTimeout(()=>{t.preloadRoute(v,E.getAttribute("preload")!=="false"),delete s[v.pathname]},200))}function C(f){const p=l(f);if(!p)return;const[,E]=p;s[E.pathname]&&(clearTimeout(s[E.pathname]),delete s[E.pathname])}function _(f){let p=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.formAction:f.target.action;if(!p)return;if(!p.startsWith("action:")){const v=new URL(p);if(p=t.parsePath(v.pathname+v.search),!p.startsWith(e))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const E=Ds.get(p);if(E){f.preventDefault();const v=new FormData(f.target);E.call(t,v)}}ds(["click","submit"]),document.addEventListener("click",c),r&&(document.addEventListener("mouseover",u),document.addEventListener("mouseout",C),document.addEventListener("focusin",h),document.addEventListener("touchstart",h)),document.addEventListener("submit",_),ke(()=>{document.removeEventListener("click",c),r&&(document.removeEventListener("mouseover",u),document.removeEventListener("mouseout",C),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",_)})}}function zs(r){const n=r.replace(/^.*?#/,"");if(!n.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(n)}return n}function Os(r){return Ls({get:()=>window.location.hash.slice(1),set({value:n,replace:e,scroll:t,state:i}){e?window.history.replaceState(i,"","#"+n):window.location.hash=n;const o=n.indexOf("#"),s=o>=0?n.slice(o+1):"";Ns(s,t)},init:n=>Fs(window,"hashchange",()=>n()),create:ks(r.preload,r.explicitLinks,r.actionBase),utils:{go:n=>window.history.go(n),renderPath:n=>"#".concat(n),parsePath:zs}})(r)}var Ws=!!Xi,$s=Ws?r=>ln()?ke(r):r:ke;function Ys(r,n,e,t){return r.addEventListener(n,e,t),$s(r.removeEventListener.bind(r,n,e,t))}function Us(r,n=ln()){let e=0,t,i;return()=>(e++,ke(()=>{e--,queueMicrotask(()=>{!e&&i&&(i(),i=t=void 0)})}),i||lt(o=>t=r(i=o),n),t)}var Xs=Us(()=>{const[r,n]=N(null);return Ys(window,"keydown",e=>{n(e),setTimeout(()=>n(null))}),r});function Nt(r){return typeof r=="function"}function Cr(r,n){if(!r)throw new Error(n||"Assertion failed")}let wn={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"};const[tn,Hs]=N([]),Gs=(r={})=>{const n=Xs();wn={...wn,...r};const e=Object.entries(wn);return ne(he(ze,(t,i,o=[])=>{var l;let s=t;const a=[];for(;s;)s.states.has("focus")||(s.states.add("focus"),Nt(s.onFocus)&&s.onFocus.call(s,t,i!=null?i:null)),a.push(s),s=(l=s.parent)!=null?l:null;return o.forEach(c=>{a.includes(c)||(c.states.remove("focus"),Nt(c.onBlur)&&c.onBlur.call(c,t,i!=null?i:null))}),Hs(a),a},{defer:!0})),ne(()=>{const t=n();if(t){const i=e.find(([o,s])=>s===t.key);le(()=>{const o=tn();for(const s of o){const a=i?i[0]:void 0;if(a){const l=s["on".concat(a)];if(Nt(l)&&l.call(s,t,s)===!0)break}else console.log("Unhandled key event: ".concat(t.key));if(Nt(s.onKeyPress)&&s.onKeyPress.call(s,t,a,s)===!0)break}return!1})}}),tn};function js(r,n){const e=n();let t,i,o,s;Array.isArray(e)?e.length===2?(t=s=e[0],i=o=e[1]):e.length===3?(t=e[0],i=o=e[1],s=e[2]):[t,o,s,i]=e:t=o=s=i=e,r.onBeforeLayout=(a,l)=>{if(l){r.width=r.children.reduce((u,C)=>u+(C.width||0),0)+i+o;const c=r.children[0];c&&(c.x=i,c.marginLeft=i);let h=0;r.children.forEach(u=>{u.y=(u.y||0)+t,u.marginTop=t,h=Math.max(h,u.height||0)}),r.height=h+t+s}}}function Vs(r=[]){const n=[];let e;for(e=0;e<r.length;e++){const t=r[e];if(typeof t=="string"&&!t.includes("PAUSE-"))n.push(r[e]);else break}return[n.join(",\b ")].concat(r.slice(e))}function vr(r){return new Promise(n=>{setTimeout(n,r)})}function Ks(r,n,e="en-US"){const t=window.speechSynthesis;return new Promise((i,o)=>{const s=new SpeechSynthesisUtterance(r);s.lang=e,s.onend=()=>{i()},s.onerror=a=>{o(a)},n.push(s),t.speak(s)})}function zn(r,n,e=!0){const t=window.speechSynthesis,i=Vs(Array.isArray(r)?r:[r]),o=[],s=[];let a=!0;return{series:(async()=>{try{for(;a&&i.length;){const c=await Promise.resolve(i.shift());if(a){if(typeof c=="string"&&c.includes("PAUSE-")){let h=Number(c.split("PAUSE-")[1])*1e3;isNaN(h)&&(h=0),await vr(h)}else if(typeof c=="string"&&c.length){let u=3;for(;a&&u>0;)try{await Ks(c,s,n),u=0}catch(C){if(C instanceof SpeechSynthesisErrorEvent)if(C.error==="network")u--,console.warn("Speech synthesis network error. Retries left: ".concat(u)),await vr(500*(3-u));else if(C.error==="canceled"||C.error==="interrupted")u=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(C.error));else throw C}}else if(typeof c=="function"){const h=zn(c(),n,!1);o.push(h),await h.series}else if(Array.isArray(c)){const h=zn(c,n,!1);o.push(h),await h.series}}else break}}finally{a=!1}})(),get active(){return a},append:c=>{i.push(c)},cancel:()=>{a&&(e&&t.cancel(),o.forEach(c=>{c.cancel()}),a=!1)}}}let Dt;function qs(r,n="en-US"){return Dt&&Dt.cancel(),Dt=zn(r,n),Dt}var Zs=(r,n)=>{let e;const t=()=>clearTimeout(e);return ln()&&ke(t),Object.assign((...o)=>{e!==void 0&&t(),e=setTimeout(()=>r(...o),n)},{clear:t})};let On,wt=[],Ee,Wn=!1;const Js=3e5;function _r(r,n){const e=Zs(r,n);let t;const i=o=>{t=o,e(o)};return i.flush=()=>{e.clear(),r(t)},i.clear=e.clear,i}function ft(r){return r.id||r.name}function ea(r=[]){if(!te.onFocusChange||!te.enabled)return;const n=r.every(o=>!o.loading),e=r.filter(o=>!wt.includes(o));if(On(),!n&&te.onFocusChange){te.onFocusChange([]);return}wt=r.slice(0);const t=[],i=e.reduce((o,s)=>(s.announce?(o.push([ft(s),"Announce",s.announce]),t.push(s.announce)):s.title?(o.push([ft(s),"Title",s.title]),t.push(s.title)):o.push([ft(s),"No Announce",""]),o),[]);if(e.reverse().reduce((o,s)=>(s.announceContext?(o.push([ft(s),"Context",s.announceContext]),t.push(s.announceContext)):o.push([ft(s),"No Context",""]),o),i),te.debug&&console.table(i),t.length)return te.speak(t.reduce((o,s)=>o.concat(s),[]))}function ta(r){if(!Wn)return Ee=qs(r)}const te={debug:!1,enabled:!0,cancel:function(){Ee&&Ee.cancel()},clearPrevFocus:function(r=0){wt=wt.slice(0,r),On()},speak:function(r,{append:n=!1,notification:e=!1}={}){return te.onFocusChange&&te.enabled&&(te.onFocusChange.flush(),n&&Ee&&Ee.active?Ee.append(r):(te.cancel(),ta(r)),e&&(Wn=!0,Ee==null||Ee.series.finally(()=>{Wn=!1,te.refresh()}).catch(console.error))),Ee},refresh:function(r=0){te.clearPrevFocus(r),te.onFocusChange&&te.onFocusChange(le(()=>tn()))},setupTimers:function({focusDebounce:r=400,focusChangeTimeout:n=Js}={}){te.onFocusChange=_r(ea,r),On=_r(()=>{wt=[]},n)}},na=()=>(te.setupTimers(),ne(he(tn,te.onFocusChange,{defer:!0})),te);function nn(r){return function(){var o,s;const n=this.children.length,e=this.wrap,t=this.selected;if(r==="right"||r==="down")do if(this.selected=(this.selected||0)%n+1,this.selected>=n){if(!e){this.selected=null;break}this.selected=0}while((o=this.children[this.selected])!=null&&o.skipFocus);else if(r==="left"||r==="up")do if(this.selected=(this.selected||0)%n-1,this.selected<0){if(!e){this.selected=null;break}this.selected=n-1}while((s=this.children[this.selected])!=null&&s.skipFocus);if(this.selected===null)return this.selected=t,!1;const i=this.children[this.selected];if(Cr(i instanceof je),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,i,this.selected,t),this.plinko&&t!==null){const a=this.children[t];Cr(a instanceof je);const l=a.selected;i.selected=l}return jr(i),!0}}function be(r){const n=nn("left"),e=nn("right"),t={display:"flex",justifyContent:"flexStart"};return(()=>{const i=ut("node");return en(i,"onLeft",n),en(i,"onRight",e),Rt(i,ee({get selected(){return r.selected||0},get onFocus(){return r.onFocus||(o=>{if(!o||o.selected===null)return;let s=o.children[o.selected];for(;s!=null&&s.skipFocus;)o.selected++,s=o.children[o.selected];s instanceof je&&s.setFocus()})},get style(){return r.style||t}},r),!0),hn(i,()=>r.children),i})()}function we(r){const n=nn("up"),e=nn("down"),t={display:"flex",flexDirection:"column",justifyContent:"flexStart"};return(()=>{const i=ut("node");return en(i,"onUp",n),en(i,"onDown",e),Rt(i,ee({get onFocus(){return r.onFocus||(o=>{if(!o||o.selected===null)return;let s=o.children[o.selected];for(;s!=null&&s.skipFocus;)o.selected++,s=o.children[o.selected];s instanceof je&&s.setFocus()})},get selected(){return r.selected||0},get style(){return r.style||t}},r),!0),hn(i,()=>r.children),i})()}const[ra,mi]=N(""),[ia,rn]=N(!1),[Tl,Cn]=N(!1),[oa,sa]=N("");N(null);N("en");const[aa,xi]=N(!1),[bl,la]=N("");function ca(){let r,n,e=0;const t=1,i={alpha:t,color:4294967295},o={duration:1e3,easing:"ease-in-out"};return ne(he(ra,s=>{if(s.startsWith("#")){r.color=s,r.src="",r.alpha=1,e=1,n.alpha=0;return}else r.color=4294967295;if(e===0){r.src=s,e=1;return}if(e===1){n.src=s,e=2,n.alpha=[t],r.alpha=[0];return}e===2&&(r.src=s,e=1,r.alpha=t,n.alpha=0)},{defer:!0})),g(B,{width:1920,height:1080,zIndex:-5,get children(){return[g(B,{ref(s){const a=r;typeof a=="function"?a(s):r=s},animate:!0,animationSettings:o,style:i}),g(B,{ref(s){const a=n;typeof a=="function"?a(s):n=s},animate:!0,animationSettings:o,style:i,alpha:0}),g(B,{get effects(){return{radialGradient:{colors:[R("#3b3b3b"),R("#272727"),R("#181818")],stops:[0,.3,.8],height:800,width:1920,pivot:[.8,0]}}}})]}})}const ua={display:"flex",flexDirection:"row",justifyContent:"flexStart"},ha={display:"flex",flexDirection:"column",justifyContent:"flexStart"},da={screenW:1920,screenH:1080,marginX:50,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},fa={primary:"#141414",focus:"#bdbdbd",container:"#4d4d4d",menuBg:"#2021242e",white:"#ffffff"},ga={display1:{fontFamily:"Roboto",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Roboto",fontSize:56,lineHeight:72},headline1:{fontFamily:"Roboto",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Roboto",fontSize:32,lineHeight:44},headline3:{fontFamily:"Roboto",fontSize:28,lineHeight:40},body1:{fontFamily:"Roboto",fontSize:32,lineHeight:40},body2:{fontFamily:"Roboto",fontSize:28,lineHeight:34},button1:{fontFamily:"Roboto",fontSize:32,lineHeight:40,background:"#ffff"}},D={flexRow:ua,flexColumn:ha,layout:da,color:fa,typography:ga};R("#000000"),D.layout.screenH;const Ai={width:50,height:50,x:0};R("#ffffff"),R("#ff0000");const kt={Column:{...D.flexColumn,width:320,height:600,y:220,gap:60,zIndex:101,colors:R(D.color.primary),x:[20,{duration:250,easing:"ease-in-out"}]},menuLineStyle:{width:50,height:0,x:0,y:58,selected:{height:6,color:R("#ff0000")}},MenuWrapper:{zIndex:1e3,width:100,height:window.devicePixelRatio>1?1080:window.innerHeight,color:R(D.color.primary),active:{width:[380,{duration:250,easing:"ease-in-out",alpha:1}]},unactive:{width:[100,{duration:250,easing:"ease-in-out"}]}},MenuText:{zIndex:1,fontSize:30,x:86,y:10,height:50,alpha:0,color:R("#5b5b5b"),scale:1,lineHeight:1,focus:{scale:[1.1,{duration:250,easing:"ease-in-out"}],color:R("#ffffff")},active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}}},pa=[{name:"Home",path:"/",icon:"assets/icon-home.png"},{name:"Search",path:"/search",icon:"assets/icon-search.png"},{name:"TV",path:"/tv",icon:"assets/icon-tivi.png"},{name:"Notifications",path:"/no-path",icon:"assets/icon-bell.png"}],ma="./";function xa(r){let n,e;const t=Qt(),i=Jn();function o(){this.states.add("active"),this.children.forEach(l=>{l.states.add("active")}),this.children.selected.setFocus(),e.states.add("active"),e.states.remove("unactive")}function s(){this.states.add("unactive"),e.states.add("unactive"),e.states.remove("active"),this.children.forEach(l=>l.states.remove("active")),this.children.forEach(l=>l.states.add("unactive"))}function a(l){l.path==="/no-path"?xi(!0):t("".concat(l.path))}return g(B,{get style(){return kt.MenuWrapper},ref(l){const c=e;typeof c=="function"?c(l):e=l},get children(){return[g(we,ee(r,{onFocus:o,onBlur:s,get style(){return kt.Column},animate:!0,plinko:!0,get children(){return(pa||[]).map(l=>g(B,{get src(){return ma+"".concat(l.icon)},style:Ai,forwardStates:!0,onEnter:()=>a(l),animate:!0,get id(){return l.path},get states(){return i.pathname==l.path?["selected"]:[""]},get children(){return[g(B,{get style(){return kt.menuLineStyle}}),g(W,{get style(){return kt.MenuText},get children(){return l.name}})]}}))}})),g(B,{ref(l){const c=n;typeof c=="function"?c(l):n=l}})]}})}const Ke={Column:{...D.flexColumn,width:320,height:600,y:80,gap:60,zIndex:1,colors:R(D.color.primary),x:[20,{duration:250,easing:"ease-in-out"}]},NoticeWrapper:{alpha:0,width:380,height:50,top:0,zIndex:3e3,color:R("#191919"),active:{alpha:1}},MenuWrapper:{zIndex:1e3,angle:hs(270),stops:[0,.4,.8],width:0,height:1080,color:R("#191919"),active:{width:[380,{duration:250,easing:"ease-in-out",alpha:1}]},unactive:{width:[0,{duration:250,easing:"ease-in-out"}]}},NotifyImage:{zIndex:10,x:0,y:0,width:100,height:90,alpha:0,scale:1,active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}},MenuText:{zIndex:1,fontSize:28,x:110,y:10,height:50,alpha:0,width:268,contain:"both",color:R("#5b5b5b"),scale:1,focus:{color:R("#ffffff")},active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}},NoticeDesc:{zIndex:1,fontSize:26,x:110,y:50,height:50,width:268,contain:"both",alpha:0,color:R("#5b5b5b"),scale:1,active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}}},Er="./";function Aa(r){let n,e;const[t,i]=N(60);function o(){this.states.add("active"),this.children.forEach(c=>{c.states.add("active")}),this.children.selected.setFocus(),e.children.forEach(c=>c.states.add("active")),e.states.add("active"),e.states.remove("unactive")}function s(){this.states.add("unactive"),e.states.add("unactive"),e.states.remove("active"),e.children.forEach(c=>c.states.remove("active")),this.children.forEach(c=>c.states.remove("active")),this.children.forEach(c=>c.states.add("unactive")),this.children.forEach(c=>c.states.add("not-set"))}function a(){xi(!1),this.children.forEach(c=>c.states.add("not-set"))}function l(){(this.y||0)>D.layout.screenH/2&&(i(80+((this.y||0)-D.layout.screenH/2)*-1),this.parent&&this.parent.children.forEach(c=>{c.states.has("active")||c.states.add("active")}))}return g(B,{get style(){return Ke.MenuWrapper},ref(c){const h=e;typeof h=="function"?h(c):e=c},get children(){return[g(B,{get style(){return Ke.NoticeWrapper},get children(){return[g(B,{src:Er+"assets/icon-back.png",y:5,width:40,height:40}),g(B,{display:"flex",justifyContent:"center",width:360,get children(){return g(W,{fontSize:30,x:40,y:10,get children(){return["Notifications ",Bt(()=>r.len)]}})}})]}}),g(we,ee(r,{onFocus:o,onBlur:s,get style(){return Ke.Column},get y(){return t()},onLeft:a,animate:!0,plinko:!0,get key(){return r.len},get children(){return g(Te,{get each(){return r==null?void 0:r.items},children:(c,h)=>g(B,{style:Ai,forwardStates:!0,animate:!0,onFocus:l,get id(){return c.path},get children(){return[g(B,{get src(){return(c==null?void 0:c.image)||Er+"assets/default-thumbnail.jpg"},get style(){return Ke.NotifyImage}}),g(W,{get style(){return Ke.MenuText},get children(){return c.name}}),g(W,{get style(){return Ke.NoticeDesc},get children(){return c.desc}})]}})})}})),g(B,{ref(c){const h=n;typeof h=="function"?h(c):n=c}})]}})}function Pt(r){const[n,e]=N([]),[t,i]=N(1),[o,s]=N(!1),[a]=Xn(t,r);return Tn(()=>{const l=a();l&&Mi(()=>{l.length===0&&s(!0),e(c=>[...c,...l])})}),{pages:n,page:t,setPage:i,setPages:e,end:o,setEnd:s}}const ya=[{path:"123A",name:"Netflix Lookahead",desc:"Explore what is coming soon"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"}],wa=[{path:"123A",name:"Netflix2",desc:"Explore what is coming soon"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"}],Ca="e9e9d8da18ae29fc430845952232787c",va="596e02522af6fe40f284e6de58fd0865f2cbaae3",_a="https://api.themoviedb.org/3";let yi,wi;const Ea="w185",Ia={headers:{"Content-Type":"application/json",Authorization:"Bearer "+va}};function Gt(r,n=Ea){return wi+n+r}function Sa(r,n={}){return yi?$n(r,n):Ci().then(()=>$n(r,n))}function $n(r,n={}){return fetch(_a+r+(r.includes("?")?"&":"?")+"api_key="+Ca,{...Ia,...n}).then(e=>e.json())}function Ci(){return $n("/configuration").then(r=>{var n;return yi=r,wi=(n=r.images)==null?void 0:n.secure_base_url,r})}const fn={get:Sa,loadConfig:Ci};function Ta(r,n){return r.length>n?r.substring(0,n-3)+"...":r}function gn(r,n=7){let e=[];for(let t=0,i=r.length;t<i;t+=n)e.push(r.slice(t,t+n));return e}function tr(r=[]){return r.map(n=>({src:Gt(n.poster_path||n.profile_path),tileSrc:Gt(n.backdrop_path||n.profile_path,"w300"),backdrop:Gt(n.backdrop_path,"w1280"),href:"/entity/".concat(n.media_type||"people","/").concat(n.id),shortTitle:Ta(n.title||n.name,30),title:n.title||n.name,data:n,entityInfo:{type:n.media_type||"people",id:n.id},heroContent:{title:n.title||n.name,description:n.overview}}))}function ba(r){function n(o){return new Promise(s=>{setTimeout(()=>{let a;o===1?a={page:1,results:ya,total_pages:2,total_results:40}:a={page:2,results:wa,total_pages:2,total_results:40},s(a)},0)})}function e(o){return s=>{const a=o||20;return n(s).then(c=>{let h=c.results;return gn(h,a)})}}const t=X(()=>Pt(e()));function i(o){[].concat.apply([],t().pages()).length-o.selected<4&&t().setPage(s=>s+1)}return g(Aa,ee(r,{get items(){return[].concat.apply([],t().pages())},onSelectedChanged:i}))}const nr={Page:{width:window.innerWidth,height:window.innerHeight},pageWrapper:{x:99,y:0,height:window.innerHeight,width:window.innerWidth},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:1920,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:D.layout.screenW,height:600,y:350,x:0,zIndex:2},FocusRing:{borderRadius:0,width:194,height:286,y:-5,x:-5,zIndex:-1},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:R("#000000")},RowTitle:{height:60,width:400,marginTop:20,fontSize:36,color:R("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:290,gap:10},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:10,width:D.layout.screenW-2*D.layout.marginX,x:D.layout.marginX+D.layout.gutterX,y:100,zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:R("#0000ff")},peopleBio:{...D.typography.body1,contain:"both",width:1500,height:400}},Yn={width:120,height:40,color:R("#000000"),borderRadius:8,border:{width:2,color:R("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:R("#333333")}}};R("#00A699"),Yn.width+8;R("#F6F6F9"),Yn.height,Yn.width;const Ir={width:386,height:136,color:R("#715cab"),focus:{color:R("#5a39a2")},disabled:{color:R("#291d43")}};R("#000000");R("#FFFFFF"),Ir.height,Ir.width,R("#909090");const Ba=r=>{const n=na();n.enabled=!1;const e=Qt(),t=Jn();let i,o,s;const[a,l]=N(t),[c,h]=N(!1);return Et(async()=>{h(!0)}),Gs({Menu:"m",Escape:"Escape"}),Et(()=>{rn(!0)}),ne(()=>{l(t.pathname)}),ne(he(aa,u=>{if(u)return i.states.has("focus")&&s.setFocus();i.setFocus(),Cn(!0)},{defer:!0})),g(ve,{get when(){return c()},get children(){return g(B,{ref(u){const C=window.APP;typeof C=="function"?C(u):window.APP=u},onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onLeft:()=>{if(i.states.has("focus")||ia()==!1&&(a()=="/search"||a().includes("/movie/")))return!1;var u=ze();u!=null&&u.states.has("not-set")||(o=u),i.setFocus(),Cn(!0)},onRight:()=>(rn(!1),Cn(!1),i.states.has("focus")&&o.setFocus()),plinko:!0,get children(){return[g(ca,{}),g(B,{get style(){return nr.pageWrapper},get children(){return r.children}}),g(xa,{ref(u){const C=i;typeof C=="function"?C(u):i=u}}),g(ba,{ref(u){const C=s;typeof C=="function"?C(u):s=u}})]}})}})},Ra=new URL("AppCoreExtensions-89e713dd.js",import.meta.url).href,Sr={WrapperTitleStyles:{display:"flex",flexDirection:"row",gap:4,alignItems:"flexEnd",height:40},TitleStyles:{color:R(D.color.white),scale:1,fontSize:30},IconStyles:{width:26,height:26}};function vn(r){return g(B,{skipFocus:!0,forwardStates:!0,get style(){return Sr.WrapperTitleStyles},get children(){return g(W,{get style(){return{...Sr.TitleStyles,...r.style}},get children(){return r.title}})}})}const qe={HomeWrapper:{x:0,y:0,width:window.devicePixelRatio>1?1920:window.innerWidth},HomeMain:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",gap:10,width:window.devicePixelRatio>1?1920:window.innerWidth,height:1200,y:520,x:20,zIndex:2},HomeList:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",gap:10,width:window.devicePixelRatio>1?1920:window.innerWidth,height:1200,y:0,x:0,zIndex:2},HomeItem:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",height:355},Row:{y:0,x:0,zIndex:999,display:"flex",justifyContent:"spaceBetween",gap:10,height:290}};let Tr=new Map;const zt=new Map;function Qa(r){const n="";return async e=>{const t="/movie/popular?language=en-US&page=".concat(e);if(Tr.has(t))return Tr.get(t);const i=r;return await fn.get(t).then(s=>{let a=s.results.filter(h=>!h.adult),l=(zt.has(n)?zt.get(n):[]).concat(tr(a)),c=gn(l,i);return c[c.length-1].length<i?zt.set(n,c.pop()):zt.delete(n),c})}}const vi={SliderMain:{y:0,x:0,zIndex:999,display:"flex",justifyContent:"spaceBetween",gap:10,height:290}},_n={Thumbnail:{borderRadius:10,width:187,height:294,scale:1,zIndex:2,focus:{scale:1.02}},FocusRing:{borderRadius:10,y:-2,x:-2,zIndex:-1,color:R("#ffffff")}};function rr(r){Qt();let n;ne(he(ze,s=>{P(s),setTimeout(()=>{s.heroContent?(n.parent=s.parent,n.alpha=1,n.scale=1,n.x=s.x-2,n.y=s.y-2,n.width=s.width+4,n.height=s.height+4,n.createAnimation({scale:1.03}).start()):n.alpha=0},10)},{defer:!0}));function e(){var s;(s=this.children.selected)==null||s.setFocus()}function t(s){try{let a=window.CrossPlatformBridge.command(s);return JSON.parse(a)}catch(a){return null}}function i(s){t(JSON.stringify({param:{service_no:"A_CPB3",version:"1"},payload:{url:s}}))}function o(){i("https://gstreamer.freedesktop.org/media/sintel_trailer-480p.webm")}return g(B,ee(r,{animate:!0,get style(){return _n.Thumbnail},onEnter:o,get children(){return[g(B,ee({onFocus:e},r,{animate:!0,get style(){return _n.Thumbnail}})),g(B,{ref(s){const a=n;typeof a=="function"?a(s):n=s},get style(){return _n.FocusRing}})]}}))}function En(r){const n=St(()=>0);return g(be,{transition:{x:{delay:20,duration:300}},animate:!0,width:4400,get style(){return vi.SliderMain},justifyContent:"flexStart",gap:40,get x(){return r.rowX()},get onSelectedChanged(){return r.moveRow},plinko:!0,get children(){return g(Te,{get each(){return r.data},children:(e,t)=>g(rr,ee(e,{get autofocus(){return Bt(()=>!!r.autofocus)()&&n(t())}}))})}})}const ir=1100,Pa={...D.typography.display2,width:ir,height:58,contain:"both"},Ma=r=>g(W,ee(r,{style:Pa,get children(){return r.children}})),La={fontFamily:"Roboto",fontSize:32,lineHeight:40,height:160,background:"#ffff",width:1e3,clipping:!0,maxLines:4},Fa={fontSize:20,lineHeight:20},Na=r=>g(W,ee(r,{style:La,get children(){return r.children}}));function Da(r){return[g(ve,{get when(){return(r==null?void 0:r.rtCrit)&&(r==null?void 0:r.rtCrit)!=="0"},get children(){return[g(B,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),g(W,{style:Un,get children(){return r.rtCrit+"%"}})]}}),g(ve,{get when(){return(r==null?void 0:r.rtFan)&&(r==null?void 0:r.rtFan)!=="0"},get children(){return[g(B,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),g(W,{style:Un,get children(){return r.rtFan+"%"}})]}})]}const ka=r=>(()=>{const n=ut("node");return li(js,n,()=>[8,15,13,15]),Rt(n,ee(r,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),hn(n,g(W,{style:Fa,get children(){return r.children?r.children:""}})),n})(),Un=D.typography.body2,za=r=>g(B,{get style(){return{...D.flexRow,gap:12,width:ir,height:48}},get children(){return[g(W,{style:Un,get children(){return r.metaText}}),g(Te,{get each(){return r.badges},children:n=>g(ka,{y:-5,children:n})}),Bt(()=>Da(r.reviews))]}}),or=r=>(console.log("badges",r.badges),g(B,ee(r,{get style(){return{...D.flexColumn,width:ir,height:160,gap:16}},get children(){return[g(Ma,{get children(){return r.title}}),g(Na,{get children(){return r.description}}),g(za,{get metaText(){return r.metaText},get badges(){return r.badges},get reviews(){return r.reviews}})]}})));function Oa(){let r,n,e=0;const t=1,o={alpha:t,color:4294967295,transition:{alpha:{duration:1e3,easing:"ease-in-out"}}};return ne(he(oa,s=>{if(s.startsWith("#")){r.color=s,r.src="",r.alpha=1,e=1,n.alpha=0;return}else r.color=4294967295;if(e===0){r.src=s,e=1;return}if(e===1){n.src=s,e=2,r.alpha=0,n.alpha=1;return}e===2&&(r.src=s,e=1,r.alpha=t,n.alpha=0)},{defer:!0})),g(B,{get width(){return window.devicePixelRatio>1?1920:window.innerWidth},get height(){return window.devicePixelRatio>1?1080:window.innerHeight},zIndex:-5,x:-21,get children(){return[g(B,{ref(s){const a=r;typeof a=="function"?a(s):r=s},style:o,animate:!0}),g(B,{ref(s){const a=n;typeof a=="function"?a(s):n=s},style:o,alpha:0,animate:!0}),g(B,{animate:!0,get effects(){return{radialGradient:{colors:[124,124,R("#000000")],stops:[.6,.1,1.2],height:500,width:(window.devicePixelRatio>1?1920:window.innerWidth)-300,pivot:[.8,0]}}}})]}})}const He={LoadingWrapper:{x:0,y:0,width:window.devicePixelRatio>1?1820:window.innerWidth-100,height:window.devicePixelRatio>1?1080:window.innerHeight,color:R("#000000"),display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},LoadingMain:{display:"flex",flexDirection:"row",gap:30,height:30},LoadingItem:{x:0,y:0,width:15,height:15,color:R("#ffffff"),borderRadius:7.5,choose:{transition:{duration:.5,timingFunction:"ease-in-out"},color:R("#ff0000"),scale:1.3}}};function Wa(r){let n;const[e,t]=N(0),[i,o]=N(!0);return Et(()=>{setInterval(()=>{e()==0&&o(!0),e()==5&&o(!1),i()?(e()>0&&n.children[e()].states.remove("choose"),n.children[e()].states.add("choose"),t(s=>s+1)):(t(s=>s-1),n.children[e()].states.remove("choose"))},200)}),g(B,{forwardStates:!0,animate:!0,get style(){return He.LoadingWrapper},autofocus:!0,get children(){return g(B,{get style(){return He.LoadingMain},ref(s){const a=n;typeof a=="function"?a(s):n=s},skipFocus:!0,get children(){return[g(B,{get style(){return He.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return He.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return He.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return He.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return He.LoadingItem},skipFocus:!0,animate:!0})]}})}})}const $a=()=>{const[r,n]=N({}),[e,t]=N(10),[i,o]=N(10),[s,a]=N(10),[l,c]=N(0),h=X(()=>Pt(Qa(1))),u=v=>{var x;(x=v.children.selected)==null||x.setFocus(),o(v.selected*-227+10),[].concat.apply([],h().pages()).length-v.selected<15&&h().setPage(w=>w+1)},C=v=>{t(v.selected*-227+10),[].concat.apply([],h().pages()).length-v.selected<15&&h().setPage(x=>x+1)},_=v=>{a(v.selected*-227+10),[].concat.apply([],h().pages()).length-v.selected<15&&h().setPage(x=>x+1)};ne(he(ze,v=>{console.log(v),v.backdrop&&sa("https://image.tmdb.org/t/p/original/".concat(v.data.backdrop_path)),v.heroContent&&n(v.heroContent)},{defer:!0}));function f(){var v;(v=this.children.selected)==null||v.setFocus(),c((this.y||0)*-1+24)}function p(){var v;(v=this.children.selected)==null||v.setFocus(),c((this.y||0)*-1+24)}function E(){var v;(v=this.children.selected)==null||v.setFocus(),c((this.y||0)*-1+24)}return g(B,{get style(){return qe.HomeWrapper},get children(){return[g(ve,{get when(){return h().pages().length==0},get children(){return g(Wa,{})}}),g(Oa,{}),g(or,ee({y:360,x:20},r)),g(B,{get style(){return qe.HomeMain},clipping:!0,autofocus:!0,get children(){return g(we,{get style(){return qe.HomeList},clipping:!0,plinko:!0,get y(){return l()},animate:!0,get children(){return[g(be,{get style(){return qe.HomeItem},onFocus:f,autofocus:!0,get children(){return[g(vn,{title:"Popular",icon:"assets/popular.png"}),g(En,{get data(){return[].concat.apply([],h().pages())},rowX:i,moveRow:u,autofocus:!0})]}}),g(be,{get style(){return qe.HomeItem},onFocus:p,get children(){return[g(vn,{title:"Trending",icon:"assets/trending.png"}),g(En,{get data(){return[].concat.apply([],h().pages())},rowX:e,moveRow:C})]}}),g(be,{get style(){return qe.HomeItem},onFocus:E,get children(){return[g(vn,{title:"Recommend",icon:"assets/recommend.png"}),g(En,{get data(){return[].concat.apply([],h().pages())},rowX:s,moveRow:_})]}})]}})}})]}})},br=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],Ya={display:"flex",flexDirection:"column",gap:40,y:0,color:R("#000000"),height:D.layout.screenH,alpha:1},Ua={display:"flex",flexDirection:"row",justifyContent:"flexStart",gap:16,x:40,zIndex:999,height:D.layout.screenH},Xa={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:16,width:540,x:40,zIndex:999},Br={display:"flex",flexDirection:"row",justifyContent:"spaceBetween",gap:8,height:70,width:500},Ha={color:R("#000000"),alpha:.8,zIndex:998,x:0,y:0},Ga={display:"flex",borderRadius:6,border:{width:0,color:R("#ffffff")},justifyContent:"center",alignItems:"center",gap:6,width:70,height:70,color:R("#2e3743"),focus:{border:{width:4,color:R("#ffffff")},color:R("#000000")}},ja={fontSize:40},Va={color:R("#red"),width:500,x:40,height:70,alpha:1,backgroundColor:R("#ffffff"),borderRadius:8,border:{width:4,color:R("#ffffff")},display:"flex",alignItems:"center",justifyContent:"flexStart"},Ka={width:500,display:"flex",flexDirection:"column",alignItems:"flexStart",justifyContent:"flexStart",gap:20,x:0},Rr={height:70,width:240,color:R("#2e3743"),display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:{width:0,color:R("#ffffff")},focus:{border:{width:4,color:R("#ffffff")},color:R("#000000")}},Qr={width:70,height:50},qa={height:10,x:0,y:0},Za={color:R("#09121a"),y:-160,fontSize:30,x:40,width:D.layout.screenW-(580+116),height:D.layout.screenH,zIndex:999,alignItems:"center",justifyContent:"center"},Ja={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:D.layout.screenW-(2*D.layout.marginX+532+(D.layout.marginX+D.layout.gutterX)*2),x:48,y:48,zIndex:2},el={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20},tl={display:"flex",justifyContent:"center",alignItems:"center"};function _i(r){const[n,e]=Yi(r,["items"]);return g(be,ee(e,{get style(){return nr.Row},get children(){return g(Te,{get each(){return n.items},children:t=>g(rr,t)})}}))}let Pr=new Map;const Ot=new Map;function nl(r,n){const e="";return async t=>{const i="/search/movie?include_adult=false&page=".concat(t,"&query==").concat(n);if(Pr.has(i))return Pr.get(i);const o=r;return await fn.get(i).then(a=>{let l=a.results.filter(u=>!u.adult),c=(Ot.has(e)?Ot.get(e):[]).concat(tr(l)),h=gn(c,o);return h[h.length-1].length<o?Ot.set(e,h.pop()):Ot.delete(e),h})}}const Mr="./";function rl(r){let n,e,t,i,o,s,a,l,c;const[h,u]=N(""),[C,_]=N(0);let f=X(()=>Pt(nl(5,h())));ne(he(h,y=>{_(0),f().setPage(1)}));const p=St(()=>0);function E(){this.states.add("focus")}function v(){this.states.remove("focus")}const x=()=>()=>{u(y=>y+" ")},w=()=>()=>{u(y=>y.slice(0,-1))};function m(y){return()=>{u(A=>A+y)}}const T=()=>{let y=[];for(let S=0;S<br.length;S+=6){const M=br.slice(S,S+6);y.push(M)}return g(Te,{each:y,children:(S,M)=>g(be,{style:Br,autofocus:!1,plinko:!0,get children(){return g(Te,{each:S,children:(Q,F)=>g(B,{style:Ga,get onEnter(){return m(Q)},animate:!0,onBlur:v,onFocus:E,forwardStates:!0,autofocus:!1,get children(){return g(W,{style:ja,children:Q})}})})}})})};function b(){var A;(A=this.children.selected)==null||A.setFocus(),_((this.y||0)*-1+24);let y=f().pages().length;this.parent&&(y===0||this.parent.selected&&this.parent.selected>=y-2)&&f().setPage(S=>S+1)}function I(){}return g(B,{ref(y){const A=n;typeof A=="function"?A(y):n=y},animate:!0,style:Ha,autofocus:!0,get children(){return g(B,{ref(y){const A=i;typeof A=="function"?A(y):i=y},animate:!0,style:Ya,autofocus:!0,plinko:!0,get children(){return[g(B,{ref(y){const A=e;typeof A=="function"?A(y):e=y},style:qa,skipFocus:!0}),g(B,{ref(y){const A=e;typeof A=="function"?A(y):e=y},style:Va,animate:!0,skipFocus:!0,get children(){return g(W,{get style(){return{color:R("#ffffff"),fontSize:30,marginLeft:20}},get children(){return h()}})}}),g(we,{style:Ua,ref(y){const A=o;typeof A=="function"?A(y):o=y},autofocus:!0,onDown:()=>{if(a.states.has("focus"))return!1},plinko:!0,get children(){return[g(we,{style:Xa,ref(y){const A=a;typeof A=="function"?A(y):a=y},onRight:()=>{s.setFocus(),f().pages().length>0&&l.setFocus()},onLeft:()=>{rn(!0)},get children(){return[g(be,{style:Br,autofocus:!1,get children(){return[g(B,{style:Rr,ref(y){const A=c;typeof A=="function"?A(y):c=y},get onEnter(){return x()},animate:!0,autofocus:!1,get children(){return g(B,{style:Qr,src:Mr+"assets/icon-space.png",forwardStates:!0,animate:!0})}}),g(B,{style:Rr,get onEnter(){return w()},animate:!0,autofocus:!1,get children(){return g(B,{style:Qr,src:Mr+"assets/icon-back-space.png",forwardStates:!0,animate:!0})}})]}}),g(we,{plinko:!0,style:el,get children(){return T()}}),g(we,{ref(y){const A=t;typeof A=="function"?A(y):t=y},animate:!0,style:Ka,forwardStates:!0,get children(){return g(W,{get style(){return{color:R("#504d4d"),fontSize:30,focus:{color:R("#ffffff")}}}})}})]}}),g(B,{style:Za,ref(y){const A=s;typeof A=="function"?A(y):s=y},onLeft:()=>{a.setFocus()},get children(){return[g(ve,{get when(){return f().pages().length==0},get children(){return g(B,{style:tl,get children(){return g(W,{style:{fontSize:40,display:"flex",justifyContent:"center",textAlign:"center"},children:"No Data"})}})}}),g(ve,{get when(){return f().pages().length>0},get children(){return g(we,{ref(y){const A=l;typeof A=="function"?A(y):l=y},animate:!0,get y(){return C()},style:Ja,plinko:!0,get children(){return g(Te,{get each(){return f().pages()},children:(y,A)=>g(_i,{get autofocus(){return Bt(()=>!!p(A()))()&&s.states.has("focus")},items:y,onFocus:b,onEnter:I})})}})}})]}})]}})]}})}})}const Ze={TiviWrapper:{x:0,y:0,width:1920,height:1080},Content:{y:580,zIndex:2},Container:{width:1720,x:50,display:"flex",flexDirection:"column",gap:40,y:0,zIndex:2},Row:{display:"flex",height:290,width:1720,justifyContent:"spaceBetween",clipping:!0},Item:{borderRadius:10,width:187,height:294,scale:1,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:R("#0e0e0e"),focus:{scale:1.02,color:R("#3d3d3d")}},IdChannel:{color:R("#ffffff"),fontSize:32},NameChannel:{fontFamily:"Roboto",fontSize:25,lineHeight:25,contain:"both",width:150,height:200,textAlign:"center"}},sr=1100,il={...D.typography.display2,width:sr,height:58,contain:"both"},ol=r=>g(W,ee(r,{style:il,get children(){return r.children}})),sl={...D.typography.body1,width:sr,height:72,contain:"both"},al=r=>g(W,ee(r,{style:sl,get children(){return r.children}})),ll=r=>g(B,ee(r,{get style(){return{...D.flexColumn,width:sr,height:160,gap:16,x:50,y:50}},get children(){return[g(ol,{get children(){var n;return(n=r.data)==null?void 0:n.channel_name}}),g(al,{get children(){var n;return(n=r.data)==null?void 0:n.description}})]}})),cl=()=>{const[r,n]=N(),[e,t]=N([]);N(0);const[i,o]=N(10);let s;function a(f){try{let p=window.CrossPlatformBridge.command(f);return JSON.parse(p)}catch(p){return null}}function l(){let p=a(JSON.stringify({param:{service_no:"A_CPB1",version:"1"},payload:{type:"all"}}));if(p&&p.data)return p.data}function c(f){return a(JSON.stringify({param:{service_no:"A_CPB4",version:"1"},payload:{channel_id:f}}))}Et(async()=>{try{const f=await l();fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(f)+"&field_2=&field_3="),t(f)}catch(f){fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(f)+"&field_2=&field_3=")}});const h=f=>{console.log("focusItem",f)},u=async f=>{try{const p=await c(f);fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(p)+"&field_2=&field_3=")}catch(p){fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(p)+"&field_2=&field_3="),console.log("error",p)}};ne(he(ze,f=>{console.log(f.channel_name),n({channel_name:f.channel_name,description:f.channel_description||""}),console.log(r()),f.channel_name&&la(f.channel_name)},{defer:!0}));const C=f=>{o(f.selected*-227+10)};function _(f){if(f.length>6){let p="";for(let E=0;E<f.length;E++)p+=f[E],(E+1)%6===0&&E!==f.length-1&&(p+=" ");return p}else return f}return ne(he(ze,f=>{P(f),setTimeout(()=>{f.heroContent?(s.parent=f.parent,s.alpha=1,s.scale=1,s.x=f.x-2,s.y=f.y-2,s.width=f.width+4,s.height=f.height+4,s.createAnimation({scale:1.03}).start()):s.alpha=0},10)},{defer:!0})),g(B,{get style(){return Ze.TiviWrapper},clipping:!0,autofocus:!0,get children(){return[g(ll,{get data(){return r()}}),g(B,{get style(){return Ze.Content},get children(){return g(we,{autofocus:!0,animate:!0,get style(){return Ze.Container},get children(){return g(be,{transition:{x:{delay:20,duration:300}},animate:!0,width:4400,get style(){return vi.SliderMain},justifyContent:"flexStart",gap:40,get x(){return i()},onSelectedChanged:C,plinko:!0,get children(){return g(Te,{get each(){return e()},children:(f,p)=>g(B,{get style(){return Ze.Item},onFocus:h,get channel_id(){return f.id},get channel_name(){return f.channel_name},get channel_description(){return f.description},animate:!0,onEnter:()=>u(f.id),get children(){return[g(W,{get style(){return Ze.NameChannel},wordBreak:!0,get children(){return _(f.channel_name)}}),g(B,{ref(E){const v=s;typeof v=="function"?v(E):s=E},get style(){return Ze.FocusRing}})]}})})}})}})}})]}})},ul=()=>g(B,{style:{width:1920,height:1080,color:868483072},get children(){return g(W,{children:"Not Found"})}});let In=new Map;const Wt=new Map;function Ei(r,n){return e=>{const t="/trending/".concat(r,"/week?page=").concat(e);if(In.has(t))return In.get(t);const i=n||7;let o=fn.get(t).then(s=>{let a=s.results.filter(h=>!h.adult),l=(Wt.has(r)?Wt.get(r):[]).concat(tr(a)),c=gn(l,i);return c[c.length-1].length<i?Wt.set(r,c.pop()):Wt.delete(r),c});return In.set(t,o),o}}function hl(r){const n=Math.floor(r/60),e=r%60;return n+"h "+(e<10?"0":"")+e+"m"}function Lr(r){return r.split("-")[0]}function Ii({type:r,id:n}){let e=r==="movie"?{rtCrit:86,rtFan:92}:{};return fn.get("/".concat(r,"/").concat(n,"?adult=true")).then(t=>(console.log(t),{backgroundImage:Gt(t.backdrop_path,"original"),heroContent:{title:t.title||t.name,description:t.overview,badges:["HD"],metaText:r==="movie"?hl(t.runtime)+" - "+t.release_date:"".concat(Lr(t.first_air_date)," - ").concat(Lr(t.last_air_date)),reviews:e},...t}))}const Fr={Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:15,width:D.layout.screenW-2*D.layout.marginX,x:D.layout.marginX+D.layout.gutterX,y:100,zIndex:2},itemsContainer:{width:D.layout.screenW,height:600,y:350,x:0,zIndex:2}};function dl(r){const n=St(()=>0);return g(B,{clipping:!0,get style(){return Fr.itemsContainer},get children(){return g(we,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return r.y},get style(){return Fr.Column},get children(){return g(Te,{get each(){return(r==null?void 0:r.data)||[]},children:(e,t)=>g(_i,{get autofocus(){return Bt(()=>!!r.autofocus)()?n(t()):!1},justifyContent:"flexStart",items:e,get onFocus(){return r.onFocus},get onEnter(){return r.onEnter}})})}})}})}const fl=()=>{const r=er(),[n,e]=N(0),[t,i]=N();Xn(t,Ii);const[o,s]=N({}),a=Qt();St(()=>0);const l=X(()=>Pt(Ei(r.filter||"all",8)));ne(he(ze,u=>{u.backdrop&&mi(u.backdrop),u.heroContent&&s(u.heroContent)},{defer:!0}));function c(){var C;(C=this.children.selected)==null||C.setFocus(),e((this.y||0)*-1+24);let u=l().pages().length;this.parent&&(u===0||this.parent.selected&&this.parent.selected>=u-2)&&l().setPage(_=>_+1)}function h(){let u=this.children.selected;P(u&&u.href),a(u.href)}return g(B,{get children(){return g(ve,{get when(){return l().pages().length},get children(){return[g(or,ee({y:150,x:90},o)),g(dl,{type:"sliderList",onEnter:h,onFocus:c,get data(){return l().pages()},get y(){return n()},autofocus:!0})]}})}})},gl=()=>{const r=er(),[n,e]=N({}),t=Qt();let i;const o=St(()=>0),s=X(()=>Pt(Ei(r.filter||"all",20)));ne(he(ze,u=>{u.backdrop&&mi(u.backdrop),u.heroContent&&e(u.heroContent)},{defer:!0}));function a(){let u=this.children.selected;P(u&&u.href),t(u.href)}const[l,c]=N(90);function h(u){c(u.selected*-227+90),[].concat.apply([],s().pages()).length-u.selected<9&&s().setPage(C=>C+1)}return g(ve,{get when(){return s().pages().length},ref(u){const C=i;typeof C=="function"?C(u):i=u},get children(){return g(B,{get children(){return[g(or,ee({y:200,x:90},n)),g(be,{onSelectedChanged:h,onEnter:a,transition:{x:{delay:20,duration:300}},animate:!0,get x(){return l()},y:450,width:4400,get style(){return nr.Row},justifyContent:"flexStart",gap:40,get children(){return g(Te,{get each(){return[].concat.apply([],s().pages())},children:(u,C)=>g(rr,ee(u,{get autofocus(){return o(C())}}))})}})]}})}})},Nr={Wrapper:{x:-4,y:0,alpha:1,width:window.innerWidth-100,height:window.innerHeight,color:R("#000000")},ImageBackground:{x:0,y:0,width:window.innerWidth-100,height:window.innerHeight,alpha:1},ImageBackgroundGradient:{x:0,y:0,zIndex:10,alpha:1},DetailMain:{}},J={Wrapper:{x:0,y:window.innerHeight/3,width:window.innerWidth,height:window.innerHeight,display:"flex",alignItems:"flexEnd",justifyContent:"center",flexDirection:"column",gap:20},Main:{x:0,y:0,alpha:1,width:window.innerWidth-100,display:"flex",flexDirection:"column",gap:20},Title:{fontSize:35,boxsizing:"border-box",height:35},QuantityItem:{idth:window.innerWidth/2,fontSize:20},OverView:{height:100,display:"flex",alignItems:"flexStart"},OverViewText:{width:window.innerWidth/2,fontSize:20,contain:"both"},Quantity:{height:20,display:"flex"},Rate:{height:20,display:"flex",gap:5,alignItems:"center"},RateStar:{height:16,width:16},Section:{display:"flex",flexDirection:"row",height:30,gap:10,alignItems:"center"},Control:{height:50,display:"flex",flexDirection:"row",gap:10},ControlItem:{fontSize:20,width:150,height:40,color:R("#121212"),alpha:.9,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:{width:2,color:R("#ffffff")},focus:{scale:[1.1,{duration:200}]}},ControlItemText:{color:R("#ffffff"),fontSize:20},DetailMain:{y:200}},Ge={Wrapper:{height:400,width:window.innerWidth-100},Title:{color:R("#ffffff"),fontSize:20,width:window.innerWidth/2,alpha:.6},Tabs:{display:"flex",flexDirection:"row",gap:20,height:30}};function pl(r){return Et(()=>{console.log(window)}),g(B,{get style(){return Ge.Wrapper},get children(){return g(B,{get style(){return Ge.Tabs},get children(){return[g(W,{get style(){return Ge.Title},children:"More like this"}),g(W,{get style(){return Ge.Title},children:"Available now"}),g(W,{get style(){return Ge.Title},children:"On this week"}),g(W,{get style(){return Ge.Title},children:"Parents' guide"}),g(W,{get style(){return Ge.Title},children:"Rating"})]}})}})}const gt="./";function ml(r){function n(){console.log(r.data)}const e=t=>{const i=Math.floor(t/60),o=t%60;return"".concat(i,"h ").concat(o,"m")};return g(B,{get style(){return J.Wrapper},onFocus:n,autofocus:!0,plinko:!0,onLeft:()=>{rn(!0)},get children(){return[g(we,{get style(){return J.Main},skipFocus:!0,plinko:!0,get children(){return[g(W,{get style(){return J.Title},skipFocus:!0,forwardStates:!0,get children(){return r.data.title}}),g(B,{get style(){return J.Section},get children(){return[g(B,{get style(){return J.Rate},skipFocus:!0,forwardStates:!0,get children(){return[g(B,{src:gt+"assets/star-active.png",get style(){return J.RateStar}}),g(B,{src:gt+"assets/star-active.png",get style(){return J.RateStar}}),g(B,{src:gt+"assets/star-active.png",get style(){return J.RateStar}}),g(B,{src:gt+"assets/star.png",get style(){return J.RateStar}}),g(B,{src:gt+"assets/star.png",get style(){return J.RateStar}})]}}),g(B,{get style(){return J.Quantity},skipFocus:!0,forwardStates:!0,get children(){return r.data.heroContent.badges.map((t,i)=>g(W,{key:i,get style(){return J.QuantityItem},children:t}))}}),g(W,{get style(){return J.QuantityItem},skipFocus:!0,forwardStates:!0,get children(){return e(r.data.runtime)}})]}}),g(be,{get style(){return J.Control},skipFocus:!0,plinko:!0,get children(){return[g(B,{get style(){return J.ControlItem},skipFocus:!0,get children(){return g(W,{get style(){return J.ControlItemText},children:"Play"})}}),g(B,{get style(){return J.ControlItem},skipFocus:!0,get children(){return g(W,{get style(){return J.ControlItemText},children:"Add"})}})]}}),g(B,{get style(){return J.OverView},get children(){return g(W,{get style(){return J.OverViewText},skipFocus:!0,forwardStates:!0,get children(){return r.data.overview}})}})]}}),g(pl,{})]}})}function xl(){const r=er(),n=Jn(),[e]=Xn(()=>({...r}),Ii);return ne(he(e,t=>{console.log(n),console.log(t)},{defer:!0})),g(ve,{get when(){var t;return(t=e())==null?void 0:t.backdrop_path},get children(){return[g(B,{get style(){return Nr.ImageBackground},zIndex:-5,get src(){var t;return"https://image.tmdb.org/t/p/original/".concat((t=e())==null?void 0:t.backdrop_path)},skipFocus:!0}),g(B,{alpha:.97,get style(){return Nr.DetailMain},animate:!0,get effects(){return{radialGradient:{colors:[124,124,R("#131313")],stops:[1.5,.1,1.3],height:700,width:window.innerWidth-500,pivot:[.9,-.1]}}},skipFocus:!0}),g(ml,{get data(){return e()},autofocus:!0})]}})}const Al={Wrapper:{height:1080,y:0,fontFamily:"Roboto"},Main:{display:"flex",flexDirection:"column",height:1080,gap:20,x:20},SettingRow:{},Title:{fontSize:20,color:R("#ffffff"),y:0},Select:{display:"flex",flexDirection:"row",alignItems:"center",gap:5,width:1e3},SelectTitle:{width:100},SelectTitleContent:{fontSize:20,lineHeight:50,color:R("#ffffff"),y:0},Option:{display:"flex",flexDirection:"row",width:100,gap:10},OptionIcon:{width:18,height:18,borderRadius:9,color:R("#ffffff"),display:"flex",alignItems:"center",justifyContent:"center",scale:1,focus:{scale:1.2}},OptionCenterIcon:{width:12,height:12,borderRadius:6,selected:{color:R("#f14d4d")}},OptionTitle:{contain:"both",fontSize:20,width:60},btnSave:{height:35,width:100,color:R("#333333"),borderRadius:5,display:"flex",alignItems:"center",justifyContent:"center",border:{color:R("#ffffff"),width:0},focus:{scale:1.05,border:{width:2,color:R("#ffffff")}}},btnSaveText:{fontSize:20}};function yl(){return N("JP"),g(B,{get style(){return Al.Wrapper}})}De.debug=!1;De.fontSettings.fontFamily="Roboto";De.fontSettings.color=4294967295;var wl=navigator.userAgent.toLowerCase(),Sn=wl.indexOf("mobile")>-1;us(()=>g(ss,{get options(){return{coreExtensionModule:Ra,threadXCoreWorkerUrl:void 0,appWidth:Sn&&window.devicePixelRatio>1?1920:window.innerWidth,appHeight:Sn&&window.devicePixelRatio>1?1080:window.innerHeight,deviceLogicalPixelRatio:Sn&&window.devicePixelRatio>1?.5:1}},get children(){return g(Os,{root:Ba,get children(){return[g(Le,{path:"/",component:$a}),g(Le,{path:"/search",component:rl}),g(Le,{path:"/videos",component:fl}),g(Le,{path:"/tv",component:cl}),g(Le,{path:"/list",component:gl}),g(Le,{path:"/:type/:id",component:xl}),g(Le,{path:"/setting",component:yl}),g(Le,{path:"/*all",component:ul})]}})}}));export{vl as __vite_legacy_guard};
//# sourceMappingURL=index-828cacf4.js.map
