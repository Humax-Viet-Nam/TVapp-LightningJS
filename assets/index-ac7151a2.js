var hi=Object.defineProperty;var fi=(r,t,e)=>t in r?hi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var h=(r,t,e)=>(fi(r,typeof t!="symbol"?t+"":t,e),e);import{a as F,E as Ye,g as gi,m as Jn,b as ut,i as br,W as yt,c as be,T as Er,d as pi,e as mi,f as Ai,h as xi,j as Jt,S as er,k as Br,B as yi,l as vi,n as Ci,o as cn,p as wi,q as Ii,C as Si}from"./CoreExtension-8a5de560.js";function Za(){import.meta.url,import("_").catch(()=>1);async function*r(){}}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function _i(){var r='<video id="video" tabindex="0" poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAAEsCAYAAAAhNGCdAAAAAXNSR0IArs4c6QAAELlJREFUeF7t1kERAAAIAkHpX9oeN2sDFh/sHAECBAgQIECAAIGwwMLZRCNAgAABAgQIECBwBq8nIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAAYPXDxAgQIAAAQIECKQFDN50vcIRIECAAAECBAgYvH6AAAECBAgQIEAgLWDwpusVjgABAgQIECBAwOD1AwQIECBAgAABAmkBgzddr3AECBAgQIAAAQIGrx8gQIAAAQIECBBICxi86XqFI0CAAAECBAgQMHj9AAECBAgQIECAQFrA4E3XKxwBAgQIECBAgIDB6wcIECBAgAABAgTSAgZvul7hCBAgQIAAAQIEDF4/QIAAAQIECBAgkBYweNP1CkeAAAECBAgQIGDw+gECBAgQIECAAIG0gMGbrlc4AgQIECBAgAABg9cPECBAgAABAgQIpAUM3nS9whEgQIAAAQIECBi8foAAAQIECBAgQCAtYPCm6xWOAAECBAgQIEDA4PUDBAgQIECAAAECaQGDN12vcAQIECBAgAABAgavHyBAgAABAgQIEEgLGLzpeoUjQIAAAQIECBAweP0AAQIECBAgQIBAWsDgTdcrHAECBAgQIECAgMHrBwgQIECAAAECBNICBm+6XuEIECBAgAABAgQMXj9AgAABAgQIECCQFjB40/UKR4AAAQIECBAgYPD6AQIECBAgQIAAgbSAwZuuVzgCBAgQIECAAAGD1w8QIECAAAECBAikBQzedL3CESBAgAABAgQIGLx+gAABAgQIECBAIC1g8KbrFY4AAQIECBAgQMDg9QMECBAgQIAAAQJpAYM3Xa9wBAgQIECAAAECBq8fIECAAAECBAgQSAsYvOl6hSNAgAABAgQIEDB4/QABAgQIECBAgEBawOBN1yscAQIECBAgQICAwesHCBAgQIAAAQIE0gIGb7pe4QgQIECAAAECBAxeP0CAAAECBAgQIJAWMHjT9QpHgAABAgQIECBg8PoBAgQIECBAgACBtIDBm65XOAIECBAgQIAAgQf4tAEt5FxRQwAAAABJRU5ErkJggg==" hidden></video><div id="video-controls" class="controls display-control"><button id="playpause" tabindex="0" type="button" data-state="play"></button><button id="back" tabindex="0" type="button" data-state="back"></button><button id="next" tabindex="0" type="button" data-state="next"></button><button id="max" tabindex="0" type="button" data-state="max"></button><button id="mute" type="button" data-state="mute">Mute/Unmute</button><div class="dropdown"><button id="quality-btn" class="dropbtn btn-settings"></button><div id="quality" class="dropdown-content"></div></div><div data-type="video" id="live-indicator" class="display_none"><span id="red-dot"></span><span id="live-text">Live</span></div><div id="time"><span id="current-time">10:11</span>/<span id="end-time">11:23</span></div><div class="progress"><progress id="progress" tabindex="0" value="0" min="0"><span id="progress-bar"></span></progress></div></div>',t=document.getElementById("app"),e=document.createElement("div");e.id="player",e.innerHTML=r.trim(),t.parentNode.insertBefore(e,t.nextSibling)}document.addEventListener("DOMContentLoaded",_i);const Tr=(r,t)=>r===t,Yt=Symbol("solid-proxy"),bi=Symbol("solid-track"),Ht={equals:Tr};let Rr=Nr;const Ae=1,Xt=2,Qr={owned:null,cleanups:null,context:null,owner:null},un={};var M=null;let dn=null,O=null,re=null,we=null,en=0;function rt(r,t){const e=O,n=M,i=r.length===0,o=t===void 0?n:t,s=i?Qr:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=i?r:()=>r(()=>oe(()=>rn(s)));M=s,O=null;try{return _e(a,!0)}finally{O=e,M=n}}function N(r,t){t=t?Object.assign({},Ht,t):Ht;const e={value:r,observers:null,observerSlots:null,comparator:t.equals||void 0},n=i=>(typeof i=="function"&&(i=i(e.value)),Fr(e,i));return[Pr.bind(e),n]}function Cn(r,t,e){const n=Ct(r,t,!0,Ae);He(n)}function Ce(r,t,e){const n=Ct(r,t,!1,Ae);He(n)}function ee(r,t,e){Rr=Pi;const n=Ct(r,t,!1,Ae),i=wn&&nn(wn);i&&(n.suspense=i),(!e||!e.render)&&(n.user=!0),we?we.push(n):He(n)}function H(r,t,e){e=e?Object.assign({},Ht,e):Ht;const n=Ct(r,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=e.equals||void 0,He(n),Pr.bind(n)}function Ei(r){return r&&typeof r=="object"&&"then"in r}function Ln(r,t,e){let n,i,o;arguments.length===2&&typeof t=="object"||arguments.length===1?(n=!0,i=r,o=t||{}):(n=r,i=t,o=e||{});let s=null,a=un,c=!1,l="initialValue"in o,u=typeof n=="function"&&H(n);const d=new Set,[C,I]=(o.storage||N)(o.initialValue),[f,y]=N(void 0),[S,w]=N(void 0,{equals:!1}),[m,x]=N(l?"ready":"unresolved");function p(v,A,_,P){return s===v&&(s=null,P!==void 0&&(l=!0),(v===a||A===a)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(P,{value:A})),a=un,b(A,_)),A}function b(v,A){_e(()=>{A===void 0&&I(()=>v),x(A!==void 0?"errored":l?"ready":"unresolved"),y(A);for(const _ of d.keys())_.decrement();d.clear()},!1)}function E(){const v=wn,A=C(),_=f();if(_!==void 0&&!s)throw _;return O&&!O.user&&v&&Cn(()=>{S(),s&&(v.resolved||d.has(v)||(v.increment(),d.add(v)))}),A}function T(v=!0){if(v!==!1&&c)return;c=!1;const A=u?u():n;if(A==null||A===!1){p(s,oe(C));return}const _=a!==un?a:oe(()=>i(A,{value:C(),refetching:v}));return Ei(_)?(s=_,"value"in _?(_.status==="success"?p(s,_.value,void 0,A):p(s,void 0,void 0,A),_):(c=!0,queueMicrotask(()=>c=!1),_e(()=>{x(l?"refreshing":"pending"),w()},!1),_.then(P=>p(_,P,void 0,A),P=>p(_,void 0,Dr(P),A)))):(p(s,_,void 0,A),_)}return Object.defineProperties(E,{state:{get:()=>m()},error:{get:()=>f()},loading:{get(){const v=m();return v==="pending"||v==="refreshing"}},latest:{get(){if(!l)return E();const v=f();if(v&&!s)throw v;return C()}}}),u?Cn(()=>T(!1)):T(!1),[E,{refetch:T,mutate:I}]}function vt(r,t=Tr,e){const n=new Map,i=Ct(o=>{const s=r();for(const[a,c]of n.entries())if(t(a,s)!==t(a,o))for(const l of c.values())l.state=Ae,l.pure?re.push(l):we.push(l);return s},void 0,!0,Ae);return He(i),o=>{const s=O;if(s){let a;(a=n.get(o))?a.add(s):n.set(o,a=new Set([s])),Fe(()=>{a.delete(s),!a.size&&n.delete(o)})}return t(o,i.value)}}function Bi(r){return _e(r,!1)}function oe(r){if(O===null)return r();const t=O;O=null;try{return r()}finally{O=t}}function le(r,t,e){const n=Array.isArray(r);let i,o=e&&e.defer;return s=>{let a;if(n){a=Array(r.length);for(let l=0;l<r.length;l++)a[l]=r[l]()}else a=r();if(o){o=!1;return}const c=oe(()=>t(a,i,s));return i=a,c}}function xt(r){ee(()=>oe(r))}function Fe(r){return M===null||(M.cleanups===null?M.cleanups=[r]:M.cleanups.push(r)),r}function tn(){return M}function Ti(r,t){const e=M,n=O;M=r,O=null;try{return _e(t,!0)}catch(i){Mn(i)}finally{M=e,O=n}}function Ri(r){const t=O,e=M;return Promise.resolve().then(()=>{O=t,M=e;let n;return _e(r,!1),O=M=null,n?n.done:void 0})}function kr(r,t){const e=Symbol("context");return{id:e,Provider:Fi(e),defaultValue:r}}function nn(r){return M&&M.context&&M.context[r.id]!==void 0?M.context[r.id]:r.defaultValue}function Dn(r){const t=H(r),e=H(()=>In(t()));return e.toArray=()=>{const n=e();return Array.isArray(n)?n:n!=null?[n]:[]},e}let wn;function Pr(){if(this.sources&&this.state)if(this.state===Ae)He(this);else{const r=re;re=null,_e(()=>jt(this),!1),re=r}if(O){const r=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(r)):(O.sources=[this],O.sourceSlots=[r]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return this.value}function Fr(r,t,e){let n=r.value;return(!r.comparator||!r.comparator(n,t))&&(r.value=t,r.observers&&r.observers.length&&_e(()=>{for(let i=0;i<r.observers.length;i+=1){const o=r.observers[i],s=dn&&dn.running;s&&dn.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?re.push(o):we.push(o),o.observers&&Lr(o)),s||(o.state=Ae)}if(re.length>1e6)throw re=[],new Error},!1)),t}function He(r){if(!r.fn)return;rn(r);const t=en;Qi(r,r.value,t)}function Qi(r,t,e){let n;const i=M,o=O;O=M=r;try{n=r.fn(t)}catch(s){return r.pure&&(r.state=Ae,r.owned&&r.owned.forEach(rn),r.owned=null),r.updatedAt=e+1,Mn(s)}finally{O=o,M=i}(!r.updatedAt||r.updatedAt<=e)&&(r.updatedAt!=null&&"observers"in r?Fr(r,n):r.value=n,r.updatedAt=e)}function Ct(r,t,e,n=Ae,i){const o={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:M?M.context:null,pure:e};return M===null||M!==Qr&&(M.owned?M.owned.push(o):M.owned=[o]),o}function Ut(r){if(r.state===0)return;if(r.state===Xt)return jt(r);if(r.suspense&&oe(r.suspense.inFallback))return r.suspense.effects.push(r);const t=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<en);)r.state&&t.push(r);for(let e=t.length-1;e>=0;e--)if(r=t[e],r.state===Ae)He(r);else if(r.state===Xt){const n=re;re=null,_e(()=>jt(r,t[0]),!1),re=n}}function _e(r,t){if(re)return r();let e=!1;t||(re=[]),we?e=!0:we=[],en++;try{const n=r();return ki(e),n}catch(n){e||(we=null),re=null,Mn(n)}}function ki(r){if(re&&(Nr(re),re=null),r)return;const t=we;we=null,t.length&&_e(()=>Rr(t),!1)}function Nr(r){for(let t=0;t<r.length;t++)Ut(r[t])}function Pi(r){let t,e=0;for(t=0;t<r.length;t++){const n=r[t];n.user?r[e++]=n:Ut(n)}for(t=0;t<e;t++)Ut(r[t])}function jt(r,t){r.state=0;for(let e=0;e<r.sources.length;e+=1){const n=r.sources[e];if(n.sources){const i=n.state;i===Ae?n!==t&&(!n.updatedAt||n.updatedAt<en)&&Ut(n):i===Xt&&jt(n,t)}}}function Lr(r){for(let t=0;t<r.observers.length;t+=1){const e=r.observers[t];e.state||(e.state=Xt,e.pure?re.push(e):we.push(e),e.observers&&Lr(e))}}function rn(r){let t;if(r.sources)for(;r.sources.length;){const e=r.sources.pop(),n=r.sourceSlots.pop(),i=e.observers;if(i&&i.length){const o=i.pop(),s=e.observerSlots.pop();n<i.length&&(o.sourceSlots[s]=n,i[n]=o,e.observerSlots[n]=s)}}if(r.owned){for(t=r.owned.length-1;t>=0;t--)rn(r.owned[t]);r.owned=null}if(r.cleanups){for(t=r.cleanups.length-1;t>=0;t--)r.cleanups[t]();r.cleanups=null}r.state=0}function Dr(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Mn(r,t=M){throw Dr(r)}function In(r){if(typeof r=="function"&&!r.length)return In(r());if(Array.isArray(r)){const t=[];for(let e=0;e<r.length;e++){const n=In(r[e]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return r}function Fi(r,t){return function(n){let i;return Ce(()=>i=oe(()=>(M.context={...M.context,[r]:n.value},Dn(()=>n.children))),void 0),i}}const Ni=Symbol("fallback");function tr(r){for(let t=0;t<r.length;t++)r[t]()}function Li(r,t,e={}){let n=[],i=[],o=[],s=0,a=t.length>1?[]:null;return Fe(()=>tr(o)),()=>{let c=r()||[],l,u;return c[bi],oe(()=>{let C=c.length,I,f,y,S,w,m,x,p,b;if(C===0)s!==0&&(tr(o),o=[],n=[],i=[],s=0,a&&(a=[])),e.fallback&&(n=[Ni],i[0]=rt(E=>(o[0]=E,e.fallback())),s=1);else if(s===0){for(i=new Array(C),u=0;u<C;u++)n[u]=c[u],i[u]=rt(d);s=C}else{for(y=new Array(C),S=new Array(C),a&&(w=new Array(C)),m=0,x=Math.min(s,C);m<x&&n[m]===c[m];m++);for(x=s-1,p=C-1;x>=m&&p>=m&&n[x]===c[p];x--,p--)y[p]=i[x],S[p]=o[x],a&&(w[p]=a[x]);for(I=new Map,f=new Array(p+1),u=p;u>=m;u--)b=c[u],l=I.get(b),f[u]=l===void 0?-1:l,I.set(b,u);for(l=m;l<=x;l++)b=n[l],u=I.get(b),u!==void 0&&u!==-1?(y[u]=i[l],S[u]=o[l],a&&(w[u]=a[l]),u=f[u],I.set(b,u)):o[l]();for(u=m;u<C;u++)u in y?(i[u]=y[u],o[u]=S[u],a&&(a[u]=w[u],a[u](u))):i[u]=rt(d);i=i.slice(0,s=C),n=c.slice(0)}return i});function d(C){if(o[u]=C,a){const[I,f]=N(u);return a[u]=f,t(c[u],I)}return t(c[u])}}}function Mr(r,t){return oe(()=>r(t||{}))}function Rt(){return!0}const Sn={get(r,t,e){return t===Yt?e:r.get(t)},has(r,t){return t===Yt?!0:r.has(t)},set:Rt,deleteProperty:Rt,getOwnPropertyDescriptor(r,t){return{configurable:!0,enumerable:!0,get(){return r.get(t)},set:Rt,deleteProperty:Rt}},ownKeys(r){return r.keys()}};function hn(r){return(r=typeof r=="function"?r():r)?r:{}}function Di(){for(let r=0,t=this.length;r<t;++r){const e=this[r]();if(e!==void 0)return e}}function zn(...r){let t=!1;for(let o=0;o<r.length;o++){const s=r[o];t=t||!!s&&Yt in s,r[o]=typeof s=="function"?(t=!0,H(s)):s}if(t)return new Proxy({get(o){for(let s=r.length-1;s>=0;s--){const a=hn(r[s])[o];if(a!==void 0)return a}},has(o){for(let s=r.length-1;s>=0;s--)if(o in hn(r[s]))return!0;return!1},keys(){const o=[];for(let s=0;s<r.length;s++)o.push(...Object.keys(hn(r[s])));return[...new Set(o)]}},Sn);const e={},n={},i=new Set;for(let o=r.length-1;o>=0;o--){const s=r[o];if(!s)continue;const a=Object.getOwnPropertyNames(s);for(let c=0,l=a.length;c<l;c++){const u=a[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(s,u);if(!i.has(u))d.get?(i.add(u),Object.defineProperty(e,u,{enumerable:!0,configurable:!0,get:Di.bind(n[u]=[d.get.bind(s)])})):(d.value!==void 0&&i.add(u),e[u]=d.value);else{const C=n[u];C?d.get?C.push(d.get.bind(s)):d.value!==void 0&&C.push(()=>d.value):e[u]===void 0&&(e[u]=d.value)}}}return e}function Mi(r,...t){if(Yt in r){const i=new Set(t.length>1?t.flat():t[0]),o=t.map(s=>new Proxy({get(a){return s.includes(a)?r[a]:void 0},has(a){return s.includes(a)&&a in r},keys(){return s.filter(a=>a in r)}},Sn));return o.push(new Proxy({get(s){return i.has(s)?void 0:r[s]},has(s){return i.has(s)?!1:s in r},keys(){return Object.keys(r).filter(s=>!i.has(s))}},Sn)),o}const e={},n=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(r)){const o=Object.getOwnPropertyDescriptor(r,i),s=!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable;let a=!1,c=0;for(const l of t)l.includes(i)&&(a=!0,s?n[c][i]=o.value:Object.defineProperty(n[c],i,o)),++c;a||(s?e[i]=o.value:Object.defineProperty(e,i,o))}return[...n,e]}const zi=r=>"Stale read from <".concat(r,">.");function Ie(r){const t="fallback"in r&&{fallback:()=>r.fallback};return H(Li(()=>r.each,r.children,t||void 0))}function xe(r){const t=r.keyed,e=H(()=>r.when,void 0,{equals:(n,i)=>t?n===i:!n==!i});return H(()=>{const n=e();if(n){const i=r.children;return typeof i=="function"&&i.length>0?oe(()=>i(t?n:()=>{if(!oe(e))throw zi("Show");return r.when})):i}return r.fallback},void 0,void 0)}const Oi=void 0,[Ne,zr]=N(null);class Or{constructor(t){h(this,"releaseCallback");this.releaseCallback=t}}class $i extends Or{constructor(e,n){var i,o;super(e);h(this,"textureMap",new Map);h(this,"zeroReferenceTextureSet",new Set);h(this,"options");this.options={textureCleanupIntervalMs:(i=n.textureCleanupIntervalMs)!=null?i:1e4,textureCleanupAgeThreadholdMs:(o=n.textureCleanupAgeThreadholdMs)!=null?o:6e4},setInterval(()=>{const s=Date.now(),a=this.options.textureCleanupAgeThreadholdMs;for(const c of this.zeroReferenceTextureSet)s-c.lastUpdate>a&&(this.releaseCallback(c.id),this.textureMap.delete(c.id),this.zeroReferenceTextureSet.delete(c))},this.options.textureCleanupIntervalMs)}registerTexture(e){var i;const n=(i=e.options)==null?void 0:i.id;if(F(n,"Texture must have an id to be registered"),!this.textureMap.has(n)){const o={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,o),this.zeroReferenceTextureSet.add(o)}}incrementTextureRefCount(e){var o;const n=(o=e.options)==null?void 0:o.id;F(n,"Texture must have an id to be registered");let i=this.textureMap.get(n);i||(this.registerTexture(e),i=this.textureMap.get(n)),F(i,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),i.nodeRefCount++,i.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(i)&&this.zeroReferenceTextureSet.delete(i)}decrementTextureRefCount(e){var o;const n=(o=e.options)==null?void 0:o.id;F(n,"Texture must have an id to be registered");const i=this.textureMap.get(n);F(i,"Texture must have been registered"),i.nodeRefCount--,i.lastUpdate=Date.now(),i.nodeRefCount===0&&this.zeroReferenceTextureSet.add(i),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Wi extends Or{constructor(e){super(e);h(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var n,i;F((n=e.options)==null?void 0:n.id,"Texture must have an ID to be registered"),this.registry.register(e,(i=e.options)==null?void 0:i.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class Yi extends Ye{constructor(e,n,i){var S,w;super();h(this,"root",null);h(this,"driver");h(this,"canvas");h(this,"settings");h(this,"nodes",new Map);h(this,"nextTextureId",1);h(this,"textureTracker");const o={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(S=e.clearColor)!=null?S:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(w=e.experimental_FinalizationRegistryTextureUsageTracker)!=null?w:!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0};this.settings=o;const{appWidth:s,appHeight:a,deviceLogicalPixelRatio:c,devicePhysicalPixelRatio:l}=o,u=m=>{this.driver.releaseTexture(m)},d=o.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=d?new Wi(u):new $i(u,this.settings.textureCleanupOptions);const C=s*c,I=a*c;this.driver=i;const f=document.createElement("canvas");this.canvas=f,f.width=C*l,f.height=I*l,f.style.width="".concat(C,"px"),f.style.height="".concat(I,"px");let y;if(typeof n=="string"?y=document.getElementById(n):y=n,!y)throw new Error("Could not find target element");i.onCreateNode=m=>{this.nodes.set(m.id,m)},i.onBeforeDestroyNode=m=>{this.nodes.delete(m.id)},i.onFpsUpdate=m=>{this.emit("fpsUpdate",m)},y.appendChild(f)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var n,i,o,s,a,c,l,u,d,C,I,f,y,S;return this.driver.createTextNode({...this.resolveNodeDefaults(e),text:(n=e.text)!=null?n:"",textRendererOverride:(i=e.textRendererOverride)!=null?i:null,fontSize:(o=e.fontSize)!=null?o:16,fontFamily:(s=e.fontFamily)!=null?s:"sans-serif",fontStyle:(a=e.fontStyle)!=null?a:"normal",fontWeight:(c=e.fontWeight)!=null?c:"normal",fontStretch:(l=e.fontStretch)!=null?l:"normal",textAlign:(u=e.textAlign)!=null?u:"left",contain:(d=e.contain)!=null?d:"none",scrollable:(C=e.scrollable)!=null?C:!1,scrollY:(I=e.scrollY)!=null?I:0,offsetY:(f=e.offsetY)!=null?f:0,letterSpacing:(y=e.letterSpacing)!=null?y:0,debug:(S=e.debug)!=null?S:{}})}resolveNodeDefaults(e){var c,l,u,d,C,I,f,y,S,w,m,x,p,b,E,T,v,A,_,P,Q,L,W,Y,te,q,ce,pe,ot,bt,Et,Le,ye,ue,Z,$,Be,se,Te,Bt,Tt,De,Me,ze,st;const n=(c=e.color)!=null?c:4294967295,i=(d=(u=(l=e.colorTl)!=null?l:e.colorTop)!=null?u:e.colorLeft)!=null?d:n,o=(f=(I=(C=e.colorTr)!=null?C:e.colorTop)!=null?I:e.colorRight)!=null?f:n,s=(w=(S=(y=e.colorBl)!=null?y:e.colorBottom)!=null?S:e.colorLeft)!=null?w:n,a=(p=(x=(m=e.colorBr)!=null?m:e.colorBottom)!=null?x:e.colorRight)!=null?p:n;return{x:(b=e.x)!=null?b:0,y:(E=e.y)!=null?E:0,width:(T=e.width)!=null?T:0,height:(v=e.height)!=null?v:0,alpha:(A=e.alpha)!=null?A:1,clipping:(_=e.clipping)!=null?_:!1,color:n,colorTop:(P=e.colorTop)!=null?P:n,colorBottom:(Q=e.colorBottom)!=null?Q:n,colorLeft:(L=e.colorLeft)!=null?L:n,colorRight:(W=e.colorRight)!=null?W:n,colorBl:s,colorBr:a,colorTl:i,colorTr:o,zIndex:(Y=e.zIndex)!=null?Y:0,zIndexLocked:(te=e.zIndexLocked)!=null?te:0,parent:(q=e.parent)!=null?q:null,texture:(ce=e.texture)!=null?ce:null,shader:(pe=e.shader)!=null?pe:null,src:(ot=e.src)!=null?ot:"",scale:(bt=e.scale)!=null?bt:null,scaleX:(Le=(Et=e.scaleX)!=null?Et:e.scale)!=null?Le:1,scaleY:(ue=(ye=e.scaleY)!=null?ye:e.scale)!=null?ue:1,mount:(Z=e.mount)!=null?Z:0,mountX:(Be=($=e.mountX)!=null?$:e.mount)!=null?Be:0,mountY:(Te=(se=e.mountY)!=null?se:e.mount)!=null?Te:0,pivot:(Bt=e.pivot)!=null?Bt:.5,pivotX:(De=(Tt=e.pivotX)!=null?Tt:e.pivot)!=null?De:.5,pivotY:(ze=(Me=e.pivotY)!=null?Me:e.pivot)!=null?ze:.5,rotation:(st=e.rotation)!=null?st:0}}destroyNode(e){return this.driver.destroyNode(e)}createTexture(e,n,i){const o=this.nextTextureId++,s={descType:"texture",txType:e,props:n,options:{...i,id:o}};return this.textureTracker.registerTexture(s),s}createShader(e,n){return{descType:"shader",shType:e,props:n}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class Hi extends Ye{constructor(e,n,i){super();h(this,"node");h(this,"props");h(this,"settings");h(this,"propStartValues",{});h(this,"restoreValues",{});h(this,"progress",0);h(this,"timingFunction");h(this,"propsList");this.node=e,this.props=n,this.settings=i,this.propStartValues={},this.propsList=Object.keys(n),this.propsList.forEach(o=>{this.propStartValues[o]=e[o]}),this.timingFunction=o=>o,i.easing&&typeof i.easing=="string"&&(this.timingFunction=gi(i.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const n=this.props[e],i=this.propStartValues[e];this.props[e]=i,this.propStartValues[e]=n}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,n,i){return(this.timingFunction(e)||e)*(i-n)+n}update(e){const{duration:n,loop:i,easing:o,stopMethod:s}=this.settings;if(!n){this.emit("finished",{});return}if(this.progress+=e/n,this.progress>1&&(this.progress=i?0:1,s)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const c=this.propsList[a],l=this.props[c],u=this.propStartValues[c],d=l;if(c.indexOf("color")!==-1){if(u===d){this.node[c]=u;continue}if(o){const C=this.timingFunction(this.progress)||this.progress,I=Jn(u,d,C);this.node[c]=I;continue}this.node[c]=Jn(u,d,this.progress);continue}if(o){this.node[c]=this.applyEasing(this.progress,u,d);continue}this.node[c]=u+(d-u)*this.progress}this.progress===1&&this.emit("finished",{})}}class Xi{constructor(t,e){h(this,"manager");h(this,"animation");h(this,"stoppedPromise",null);h(this,"stoppedResolve",null);h(this,"state");this.manager=t,this.animation=e,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){this.makeStoppedPromise();const t=this.stoppedPromise;return F(t),t}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(t=>{this.stoppedResolve=t}))}finished(){F(this.stoppedResolve);const{loop:t,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!t&&this.manager.unregisterAnimation(this.animation)}}const U=0,j=3,ie=6,X=1,G=4,ae=7,de=2,he=5,fe=8;class ge{constructor(t){h(this,"data");t?(this.data=new Float32Array(9),this.data[U]=t[0],this.data[j]=t[3],this.data[ie]=t[6],this.data[X]=t[1],this.data[G]=t[4],this.data[ae]=t[7],this.data[de]=t[2],this.data[he]=t[5],this.data[fe]=t[8]):this.data=new Float32Array(9)}static get temp(){return Ui}static multiply(t,e,n){const i=t.data[U]*e.data[U]+t.data[j]*e.data[X]+t.data[ie]*e.data[de],o=t.data[U]*e.data[j]+t.data[j]*e.data[G]+t.data[ie]*e.data[he],s=t.data[U]*e.data[ie]+t.data[j]*e.data[ae]+t.data[ie]*e.data[fe],a=t.data[X]*e.data[U]+t.data[G]*e.data[X]+t.data[ae]*e.data[de],c=t.data[X]*e.data[j]+t.data[G]*e.data[G]+t.data[ae]*e.data[he],l=t.data[X]*e.data[ie]+t.data[G]*e.data[ae]+t.data[ae]*e.data[fe],u=t.data[de]*e.data[U]+t.data[he]*e.data[X]+t.data[fe]*e.data[de],d=t.data[de]*e.data[j]+t.data[he]*e.data[G]+t.data[fe]*e.data[he],C=t.data[de]*e.data[ie]+t.data[he]*e.data[ae]+t.data[fe]*e.data[fe];return n||(n=new ge),n.data[U]=i,n.data[j]=o,n.data[ie]=s,n.data[X]=a,n.data[G]=c,n.data[ae]=l,n.data[de]=u,n.data[he]=d,n.data[fe]=C,n}static identity(t){return t||(t=new ge),t.data[U]=1,t.data[j]=0,t.data[ie]=0,t.data[X]=0,t.data[G]=1,t.data[ae]=0,t.data[de]=0,t.data[he]=0,t.data[fe]=1,t}static translate(t,e,n){return n||(n=new ge),n.data[U]=1,n.data[j]=0,n.data[ie]=t,n.data[X]=0,n.data[G]=1,n.data[ae]=e,n.data[de]=0,n.data[he]=0,n.data[fe]=1,n}static scale(t,e,n){return n||(n=new ge),n.data[U]=t,n.data[j]=0,n.data[ie]=0,n.data[X]=0,n.data[G]=e,n.data[ae]=0,n.data[de]=0,n.data[he]=0,n.data[fe]=1,n}static rotate(t,e){const n=Math.cos(t),i=Math.sin(t);return e||(e=new ge),e.data[U]=n,e.data[j]=-i,e.data[ie]=0,e.data[X]=i,e.data[G]=n,e.data[ae]=0,e.data[de]=0,e.data[he]=0,e.data[fe]=1,e}static copy(t,e,n){return e||(e=new ge),e.data[0]=t.data[0],e.data[1]=t.data[1],e.data[2]=t.data[2],e.data[3]=t.data[3],e.data[4]=t.data[4],e.data[5]=t.data[5],e.data[6]=t.data[6],e.data[7]=t.data[7],e.data[8]=t.data[8],e}translate(t,e){return this.data[ie]=this.data[U]*t+this.data[j]*e+this.data[ie],this.data[ae]=this.data[X]*t+this.data[G]*e+this.data[ae],this}scale(t,e){return this.data[U]=this.data[U]*t,this.data[j]=this.data[j]*e,this.data[X]=this.data[X]*t,this.data[G]=this.data[G]*e,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),n=Math.sin(t),i=this.data[U]*e+this.data[j]*n,o=this.data[j]*e-this.data[U]*n,s=this.data[X]*e+this.data[G]*n,a=this.data[G]*e-this.data[X]*n;return this.data[U]=i,this.data[j]=o,this.data[X]=s,this.data[G]=a,this}multiply(t){return ge.multiply(this,t,this)}get tx(){return this.data[ie]}get ty(){return this.data[ae]}get ta(){return this.data[U]}get tb(){return this.data[j]}get tc(){return this.data[X]}get td(){return this.data[G]}transformPoint(t,e){return[this.data[U]*t+this.data[j]*e+this.data[ie],this.data[X]*t+this.data[G]*e+this.data[X]]}}const Ui=new ge;var k;(function(r){r[r.Children=1]="Children",r[r.ScaleRotate=2]="ScaleRotate",r[r.Local=4]="Local",r[r.Global=8]="Global",r[r.Clipping=16]="Clipping",r[r.CalculatedZIndex=32]="CalculatedZIndex",r[r.ZIndexSortedChildren=64]="ZIndexSortedChildren",r[r.PremultipliedColors=128]="PremultipliedColors",r[r.WorldAlpha=256]="WorldAlpha",r[r.None=0]="None",r[r.All=511]="All"})(k||(k={}));class On extends Ye{constructor(e,n){super();h(this,"stage");h(this,"children",[]);h(this,"props");h(this,"updateType",k.All);h(this,"globalTransform");h(this,"scaleRotateTransform");h(this,"localTransform");h(this,"clippingRect",null);h(this,"isRenderable",!1);h(this,"parentClippingRect",null);h(this,"worldAlpha",1);h(this,"premultipliedColorTl",0);h(this,"premultipliedColorTr",0);h(this,"premultipliedColorBl",0);h(this,"premultipliedColorBr",0);h(this,"calcZIndex",0);h(this,"isComplex",!1);h(this,"onTextureLoaded",(e,n)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:n})});h(this,"onTextureFailed",(e,n)=>{this.emit("failed",{type:"texture",error:n})});this.stage=e,this.props={...n,parent:null},this.parent=n.parent,this.updateScaleRotateTransform()}loadTexture(e,n,i=null){this.props.texture&&this.unloadTexture();const{txManager:o}=this.stage,s=o.loadTexture(e,n,i);this.props.texture=s,this.props.textureOptions=i,this.checkIsRenderable(),queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"&&this.onTextureFailed(s,s.error),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}loadShader(e,n){const i=this.stage.renderer.getShaderManager();F(i);const{shader:o,props:s}=i.loadShader(e,n);this.props.shader=o,this.props.shaderProps=s,this.checkIsRenderable()}setUpdateType(e){this.updateType|=e;const n=this.props.parent;n&&!(n.updateType&k.Children)&&n.setUpdateType(k.Children)}sortChildren(){this.children.sort((e,n)=>e.calcZIndex-n.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=ge.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){F(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,n=this.props.pivotY*this.props.height,i=this.props.mountX*this.props.width,o=this.props.mountY*this.props.height;this.localTransform=ge.translate(e-i+this.props.x,n-o+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-n),this.setUpdateType(k.Global)}update(e,n=null){this.updateType&k.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(k.Local)),this.updateType&k.Local&&(this.updateLocalTransform(),this.setUpdateType(k.Global));const i=this.props.parent;let o=k.None;this.updateType&k.Global&&(F(this.localTransform),this.globalTransform=ge.copy((i==null?void 0:i.globalTransform)||this.localTransform,this.globalTransform),i&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(k.Clipping|k.Children),o|=k.Global),this.updateType&k.Clipping&&(this.calculateClippingRect(n),this.checkIsRenderable(),this.setUpdateType(k.Children),o|=k.Clipping),this.updateType&k.WorldAlpha&&(i?this.worldAlpha=i.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(k.Children|k.PremultipliedColors),o|=k.WorldAlpha),this.updateType&k.PremultipliedColors&&(this.premultipliedColorTl=ut(this.props.colorTl,this.worldAlpha,!0),this.premultipliedColorTr=ut(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=ut(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=ut(this.props.colorBr,this.worldAlpha,!0),this.checkIsRenderable(),this.setUpdateType(k.Children),o|=k.PremultipliedColors),i&&this.updateType&k.CalculatedZIndex&&(this.calculateZIndex(),i.setUpdateType(k.ZIndexSortedChildren)),this.updateType&k.Children&&this.children.length&&this.children.forEach(s=>{s.setUpdateType(o),s.updateType!==0&&s.update(e,this.clippingRect)}),this.updateType&k.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkIsRenderable(){return this.props.texture?this.isRenderable=!0:this.props.shader?this.isRenderable=!0:this.props.clipping?this.isRenderable=!0:["color","colorTop","colorBottom","colorLeft","colorRight","colorTl","colorTr","colorBl","colorBr"].some(n=>this.props[n]!==0)?this.isRenderable=!0:this.isRenderable=!1}calculateClippingRect(e=null){if(F(this.globalTransform),this.parentClippingRect===e&&this.clippingRect)return;const n=this.globalTransform,i=n.tb!==0||n.tc!==0;let o=this.props.clipping&&!i?{x:n.tx,y:n.ty,width:this.width*n.ta,height:this.height*n.td}:null;e&&o?o=br(e,o):e&&(o=e),this.parentClippingRect=e,this.clippingRect=o}calculateZIndex(){var s,a;const e=this.props,n=e.zIndex||0,i=((s=e.parent)==null?void 0:s.zIndex)||0;let o=n;(a=e.parent)!=null&&a.zIndexLocked&&(o=n<i?n:i),this.calcZIndex=o}renderQuads(e){const{width:n,height:i,texture:o,textureOptions:s,shader:a,shaderProps:c}=this.props,{premultipliedColorTl:l,premultipliedColorTr:u,premultipliedColorBl:d,premultipliedColorBr:C}=this,{zIndex:I,worldAlpha:f,globalTransform:y,clippingRect:S}=this;F(y),e.addQuad({width:n,height:i,colorTl:l,colorTr:u,colorBl:d,colorBr:C,texture:o,textureOptions:s,zIndex:I,shader:a,shaderProps:c,alpha:f,clippingRect:S,tx:y.tx,ty:y.ty,ta:y.ta,tb:y.tb,tc:y.tc,td:y.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(k.Local))}get absX(){var e,n,i;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((i=(n=this.props.parent)==null?void 0:n.globalTransform)==null?void 0:i.tx)||0)}get absY(){var e,n;return this.props.y+((n=(e=this.props.parent)==null?void 0:e.absY)!=null?n:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(k.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(k.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(k.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(k.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(k.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(k.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(k.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(k.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(k.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(k.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(k.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(k.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(k.PremultipliedColors|k.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(k.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(k.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(k.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(k.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(k.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(k.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(k.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(k.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(k.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(k.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(n=>{n.setUpdateType(k.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(k.CalculatedZIndex|k.Children),this.children.forEach(n=>{n.setUpdateType(k.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const n=this.props.parent;if(n!==e){if(this.props.parent=e,n){const i=n.children.indexOf(this);F(i!==-1,"CoreNode.parent: Node not found in old parent's children!"),n.children.splice(i,1)}e&&(e.children.push(this),this.setUpdateType(k.All),e.setUpdateType(k.Children|k.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let ji=1;function $n(){return ji++}class _n extends Ye{constructor(e,n,i,o){var s;super();h(this,"rendererMain");h(this,"stage");h(this,"id");h(this,"coreNode");h(this,"_children",[]);h(this,"_src","");h(this,"_parent",null);h(this,"_texture",null);h(this,"_shader",null);h(this,"onTextureLoaded",(e,n)=>{this.emit("loaded",n)});h(this,"onTextureFailed",(e,n)=>{this.emit("failed",n)});this.rendererMain=n,this.stage=i,this.id=(s=o==null?void 0:o.id)!=null?s:$n(),this.coreNode=o||new On(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var i;const n=this._parent;if(this._parent=e,this.coreNode.parent=(i=e==null?void 0:e.coreNode)!=null?i:null,n){const o=n.children.indexOf(this);F(o!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),n.children.splice(o,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,n){const i=new Hi(this.coreNode,e,n);return new Xi(this.stage.animationManager,i)}}const Gi=r=>{const t=()=>{if(r.updateAnimations(),!r.hasSceneUpdates()){setTimeout(t,16.666666666666668);return}r.drawFrame(),requestAnimationFrame(t)};requestAnimationFrame(t)},Vi=()=>performance?performance.now():Date.now();class $r extends yt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{gl:e}=this;e.getParameter(e.TEXTURE_BINDING_2D)!==t[0].ctxTexture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture))}}h($r,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Wr extends yt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});h(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:n,gl:i}=this;if(e.length>n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(n.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((s,a)=>{i.activeTexture(i.TEXTURE0+a),i.bindTexture(i.TEXTURE_2D,s.ctxTexture)});const o=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",o)}}h(Wr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(n=>"\n          ".concat(n!==0?"else ":"","if (idx == ").concat(n,") {\n            return texture2D(textures[").concat(n,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class ne{constructor(t){h(this,"priority",1);h(this,"name","");h(this,"ref");h(this,"target");h(this,"passParameters","");h(this,"declaredUniforms","");h(this,"uniformInfo",{});const{ref:e,target:n,props:i={}}=t;this.ref=e,this.target=n;const o={},s=[];let a="";const c=this.constructor.uniforms||{};for(const l in c){const u=c[l],d=u.type,C="".concat(e,"_").concat(l);let I="";u.size&&(I="[".concat(u.size(i),"]")),s.push(C),a+="uniform ".concat(d," ").concat(C).concat(I,";"),o[l]={name:C,uniform:c[l].method}}this.passParameters=s.join(","),this.declaredUniforms=a,this.uniformInfo=o}static getEffectKey(t){return""}static getMethodParameters(t,e){const n=[];for(const i in t){const o=t[i];let s="";o.size&&(s="[".concat(o.size(e),"]")),n.push("".concat(o.type," ").concat(i).concat(s))}return n.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}h(ne,"uniforms",{}),h(ne,"methods"),h(ne,"onShaderMask"),h(ne,"onColorize"),h(ne,"onEffectMask");const Ee=class Ee extends yt{constructor(e,n,i){const o=Ee.createShader(n,i);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...o.uniforms],shaderSources:{vertex:o.vertex,fragment:o.fragment}});h(this,"effects",[]);this.effects=o.effects}bindTextures(e){const{gl:n}=this;n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e[0].ctxTexture)}bindProps(e){var i;const n=this.renderer.shManager.getRegisteredEffects();(i=e.effects)==null||i.forEach((o,s)=>{var d;const a=this.effects[s],c=n[a.name],l=(d=o.props)!=null?d:{},u=a.uniformInfo;Object.keys(l).forEach(C=>{const I=c.uniforms[C],f=u[C];let y=I.validator?I.validator(l[C],l):l[C];Array.isArray(y)&&(y=new Float32Array(y)),this.setUniform(f.name,y)})})}static createShader(e,n){const i={},o={};let s="";const a=[],c=[],l=e.effects.map(f=>{const y=n[f.type],S=y.getEffectKey(f.props||{});i[S]=i[S]?++i[S]:1;const w=i[S];w===1&&c.push({key:S,type:f.type,props:f.props});const m=new y({ref:"".concat(S).concat(w===1?"":w),target:S,props:f.props});return s+=m.declaredUniforms,a.push(...Object.values(m.uniformInfo)),m});let u="";c==null||c.forEach(f=>{var T;const y=n[f.type],S=y.resolveDefaults((T=f.props)!=null?T:{}),w=[];for(const v in y.methods){let A=v;const _=y.methods[v];o[v]&&o[v]!==_&&(A=Ee.resolveMethodDuplicate(v,_,o)),o[A]=_.replace("function",A),w.push({m:v,cm:A})}let m=y.onShaderMask instanceof Function?y.onShaderMask(S):y.onShaderMask,x=y.onColorize instanceof Function?y.onColorize(S):y.onColorize,p=y.onEffectMask instanceof Function?y.onEffectMask(S):y.onEffectMask;w.forEach(v=>{const{m:A,cm:_}=v,P=new RegExp("\\$".concat(A),"g");m&&(m=m.replace(P,_)),x&&(x=x.replace(P,_)),p&&(p=p.replace(P,_))});const b=y.getMethodParameters(y.uniforms,S),E=b.length>0?", ".concat(b):"";m&&(u+="\n        float fx_".concat(f.key,"_onShaderMask(float shaderMask ").concat(E,") {\n          ").concat(m,"\n        }\n        ")),x&&(u+="\n          vec4 fx_".concat(f.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(E,") {\n            ").concat(x,"\n          }\n        ")),p&&(u+="\n          vec4 fx_".concat(f.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(E,") {\n            ").concat(p,"\n          }\n        "))});let d="";for(const f in o)d+=o[f];let C="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",I="\n\n    ";for(let f=0;f<l.length;f++){const y=l[f],S=y.passParameters.length>0?", ".concat(y.passParameters):"",w=n[y.name];w.onShaderMask&&(I+="\n        shaderMask = fx_".concat(y.target,"_onShaderMask(shaderMask ").concat(S,");\n        ")),w.onColorize&&(I+="\n        maskColor = fx_".concat(y.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(S,");\n        ")),w.onEffectMask&&(C="fx_".concat(y.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(S,")"));const m=l[f+1];(m===void 0||n[m.name].onEffectMask)&&(I+="\n          shaderColor = ".concat(C,";\n        "))}return{effects:l,uniforms:a,fragment:Ee.fragment(s,d,u,I),vertex:Ee.vertex()}}static resolveMethodDuplicate(e,n,i,o=0){const s=e+(o>0?o:"");return i[s]&&i[s]!==n?this.resolveMethodDuplicate(e,n,i,++o):s}static resolveDefaults(e,n){var i;return{effects:((i=e.effects)!=null?i:[]).map(o=>({type:o.type,props:n[o.type].resolveDefaults(o.props||{})})),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,n){var o;let i="";return(o=e.effects)==null||o.forEach(s=>{const c=n[s.type].getEffectKey(s.props||{});i+=",".concat(c)}),"DynamicShader".concat(i)}};h(Ee,"z$__type__Props"),h(Ee,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),h(Ee,"fragment",(e,n,i,o)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(n,"\n\n    ").concat(i,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(o,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let nt=Ee;class bn extends yt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}h(bn,"z$__type__Props"),h(bn,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const Ki=new Float32Array([1,0,0,0,1,0,0,0,1]),Zt=class Zt extends yt{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){const e=Zt.resolveDefaults(t);for(const n in e)if(n==="transform")this.setUniform("u_transform",!1,e[n]);else if(n==="scrollY")this.setUniform("u_scrollY",e[n]);else if(n==="color"){const i=be(e.color);this.setUniform("u_color",i)}else n==="size"?this.setUniform("u_size",e[n]):n==="distanceRange"?this.setUniform("u_distanceRange",e[n]):n==="debug"&&this.setUniform("u_debug",e[n]?1:0)}static resolveDefaults(t={}){var e,n,i,o,s,a;return{transform:(e=t.transform)!=null?e:Ki,scrollY:(n=t.scrollY)!=null?n:0,color:(i=t.color)!=null?i:4294967295,size:(o=t.size)!=null?o:16,distanceRange:(s=t.distanceRange)!=null?s:1,debug:(a=t.debug)!=null?a:!1}}};h(Zt,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let En=Zt;class Ge extends ne{constructor(){super(...arguments);h(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var n;return{radius:(n=e.radius)!=null?n:10}}}h(Ge,"z$__type__Props"),h(Ge,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),h(Ge,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),h(Ge,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),h(Ge,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class dt extends ne{constructor(){super(...arguments);h(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}h(dt,"z$__type__Props"),h(dt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),h(dt,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),h(dt,"onColorize","\n    return color;\n  ");class Ve extends ne{constructor(){super(...arguments);h(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var o,s;const n=(o=e.colors)!=null?o:[4278190080,4294967295];let i=e.stops;if(!i){i=[];const a=n.length-1;for(let c=0;c<n.length;c++)i.push(c*(1/a))}return{colors:n,stops:i,angle:(s=e.angle)!=null?s:0}}}h(Ve,"z$__type__Props"),h(Ve,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(i=>be(i)).reduce((i,o)=>i.concat(o),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,n)=>{var a;const i=(a=n.colors)!=null?a:[];let o=e;const s=e;if(o.length===0||o&&o.length!==i.length){for(let c=0;c<i.length;c++)o[c]?(s[c]=o[c],o[c-1]===void 0&&s[c-2]!==void 0&&(s[c-1]=s[c-2]+(o[c]-s[c-2])/2)):s[c]=c*(1/(i.length-1));o=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),h(Ve,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),h(Ve,"ColorLoop",e=>{let n="";for(let i=2;i<e;i++)n+="colorOut = mix(colorOut, colors[".concat(i,"], clamp((dist - stops[").concat(i-1,"]) / (stops[").concat(i,"] - stops[").concat(i-1,"]), 0.0, 1.0));");return n}),h(Ve,"onColorize",e=>{const n=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(n,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class Yr extends ne{constructor(){super(...arguments);h(this,"name","grayscale")}static getEffectKey(){return"grayscale"}}h(Yr,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");class Ke extends ne{constructor(){super(...arguments);h(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}h(Ke,"z$__type__Props"),h(Ke,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),h(Ke,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(Ke,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(Ke,"onColorize","\n    return color;\n  ");class qe extends ne{constructor(){super(...arguments);h(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}h(qe,"z$__type__Props"),h(qe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),h(qe,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(qe,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(qe,"onColorize","\n    return color;\n  ");class Ze extends ne{constructor(){super(...arguments);h(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}h(Ze,"z$__type__Props"),h(Ze,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),h(Ze,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(Ze,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(Ze,"onColorize","\n    return color;\n  ");class Je extends ne{constructor(){super(...arguments);h(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var n,i;return{width:(n=e.width)!=null?n:10,color:(i=e.color)!=null?i:4294967295}}}h(Je,"z$__type__Props"),h(Je,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),h(Je,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(Je,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(Je,"onColorize","\n    return color;\n  ");class ht extends ne{constructor(){super(...arguments);h(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var n,i,o,s,a;return{amplitude:(n=e.amplitude)!=null?n:.2,narrowness:(i=e.narrowness)!=null?i:4,blockiness:(o=e.blockiness)!=null?o:2,minimizer:(s=e.minimizer)!=null?s:8,time:(a=e.time)!=null?a:Date.now()}}}h(ht,"z$__type__Props"),h(ht,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),h(ht,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),h(ht,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class Dt extends ne{constructor(){super(...arguments);h(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var n;return{fade:(n=e.fade)!=null?n:10}}}h(Dt,"z$__type__Props"),h(Dt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let n=e;return Array.isArray(n)?n.length===2?n=[n[0],n[1],n[0],n[1]]:n.length===3?n=[n[0],n[1],n[2],n[0]]:n.length!==4&&(n=[n[0],n[0],n[0],n[0]]):typeof n=="number"&&(n=[n,n,n,n]),n}}}),h(Dt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Mt extends ne{constructor(){super(...arguments);h(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var o,s,a,c,l;const n=(o=e.colors)!=null?o:[4278190080,4294967295];let i=e.stops;if(!i){i=[];const u=n.length-1;for(let d=0;d<n.length;d++)i.push(d*(1/u))}return{colors:n,stops:i,width:(s=e.width)!=null?s:0,height:(c=(a=e.height)!=null?a:e.width)!=null?c:0,pivot:(l=e.pivot)!=null?l:[.5,.5]}}}h(Mt,"z$__type__Props"),h(Mt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(i=>be(i)).reduce((i,o)=>i.concat(o),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,n)=>{var a;const i=(a=n.colors)!=null?a:[];let o=e;const s=e;if(o.length===0||o&&o.length!==i.length){for(let c=0;c<i.length;c++)o[c]?(s[c]=o[c],o[c-1]===void 0&&s[c-2]!==void 0&&(s[c-1]=s[c-2]+(o[c]-s[c-2])/2)):s[c]=c*(1/(i.length-1));o=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),h(Mt,"onColorize",e=>{const n=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(n,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class et extends ne{constructor(){super(...arguments);h(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var n,i,o,s,a,c,l;return{width:(n=e.width)!=null?n:10,progress:(i=e.progress)!=null?i:.5,offset:(o=e.offset)!=null?o:0,range:(s=e.range)!=null?s:Math.PI*2,rounded:(a=e.rounded)!=null?a:!1,radius:(c=e.radius)!=null?c:1,color:(l=e.color)!=null?l:4294967295}}}h(et,"z$__type__Props"),h(et,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>be(e),method:"uniform4fv",type:"vec4"}}),h(et,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),h(et,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),h(et,"onColorize","\n    return color;\n  ");class qi{constructor(){h(this,"shCache",new Map);h(this,"shConstructors",{});h(this,"attachedShader",null);h(this,"effectConstructors",{});h(this,"renderer");this.registerShaderType("DefaultShader",$r),this.registerShaderType("DefaultShaderBatched",Wr),this.registerShaderType("RoundedRectangle",bn),this.registerShaderType("DynamicShader",nt),this.registerShaderType("SdfShader",En),this.registerEffectType("border",dt),this.registerEffectType("borderBottom",Ze),this.registerEffectType("borderLeft",Je),this.registerEffectType("borderRight",Ke),this.registerEffectType("borderTop",qe),this.registerEffectType("fadeOut",Dt),this.registerEffectType("linearGradient",Ve),this.registerEffectType("radialGradient",Mt),this.registerEffectType("grayscale",Yr),this.registerEffectType("glitch",ht),this.registerEffectType("radius",Ge),this.registerEffectType("radialProgress",et)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const n=this.shConstructors[t];if(!n)throw new Error('Shader type "'.concat(t,'" is not registered'));if(t==="DynamicShader")return this.loadDynamicShader(e);const i=n.resolveDefaults(e),o=n.makeCacheKey(i)||n.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:i};const s=new n(this.renderer,e);return o&&this.shCache.set(o,s),{shader:s,props:i}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=nt.resolveDefaults(t,this.effectConstructors),n=nt.makeCacheKey(e,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:e};const i=new nt(this.renderer,t,this.effectConstructors);return n&&this.shCache.set(n,i),{shader:i,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}class Zi{constructor(){h(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}const mt=class mt extends Er{constructor(e,n){super(e);h(this,"props");this.props=mt.resolveDefaults(n)}async getTextureData(){const{src:e,premultiplyAlpha:n}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:n};const o=await(await fetch(e)).blob();return{data:await createImageBitmap(o,{premultiplyAlpha:n?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}static makeCacheKey(e){const n=mt.resolveDefaults(e);return n.src instanceof ImageData?!1:"ImageTexture,".concat(n.src,",").concat(n.premultiplyAlpha)}static resolveDefaults(e){var n,i;return{src:(n=e.src)!=null?n:"",premultiplyAlpha:(i=e.premultiplyAlpha)!=null?i:!0}}};h(mt,"z$__type__Props");let Bn=mt;const At=class At extends Er{constructor(e,n){super(e);h(this,"props");this.props=At.resolveDefaults(n)}async getTextureData(){const{width:e,height:n}=this.props,i=e*n*4,o=new Uint8ClampedArray(i);for(let s=0;s<i;s+=4){const a=Math.floor(Math.random()*256);o[s]=a,o[s+1]=a,o[s+2]=a,o[s+3]=255}return{data:new ImageData(o,e,n)}}static makeCacheKey(e){const n=At.resolveDefaults(e);return"NoiseTexture,".concat(n.width,",").concat(n.height,",").concat(n.cacheId)}static resolveDefaults(e){var n,i,o;return{width:(n=e.width)!=null?n:128,height:(i=e.height)!=null?i:128,cacheId:(o=e.cacheId)!=null?o:0}}};h(At,"z$__type__Props");let Tn=At;class Ji{constructor(){h(this,"usedMemory",0);h(this,"txConstructors",{});h(this,"textureKeyCache",new Map);h(this,"textureIdCache",new Map);h(this,"ctxTextureCache",new WeakMap);h(this,"textureRefCountMap",new WeakMap);h(this,"renderer");this.registerTextureType("ImageTexture",Bn),this.registerTextureType("ColorTexture",pi),this.registerTextureType("NoiseTexture",Tn),this.registerTextureType("SubTexture",mi)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,n=null){var s;const i=this.txConstructors[t];if(!i)throw new Error('Texture type "'.concat(t,'" is not registered'));let o;if((n==null?void 0:n.id)!==void 0&&this.textureIdCache.has(n.id)&&(o=this.textureIdCache.get(n.id)),!o){const a=n==null?void 0:n.id,c=(s=n==null?void 0:n.cacheKey)!=null?s:i.makeCacheKey(e);c&&this.textureKeyCache.has(c)?o=this.textureKeyCache.get(c):o=new i(this,e),a&&this.addTextureIdToCache(a,c,o)}return n!=null&&n.preload&&this.getCtxTexture(o).load(),o}addTextureIdToCache(t,e,n){const{textureIdCache:i,textureRefCountMap:o}=this;i.set(t,n),o.has(n)?o.get(n).count++:(o.set(n,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,n))}removeTextureIdFromCache(t){const{textureIdCache:e,textureRefCountMap:n}=this,i=e.get(t);if(i&&(e.delete(t),n.has(i))){const o=n.get(i);F(o),o.count--,o.count===0&&(n.delete(i),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}class nr extends Ai{constructor(e,n,i){super(e,n);h(this,"fontFace");h(this,"fontUrl");const o=i.replace(/\(|\)/g,""),s=this.descriptors,a={style:s.style,weight:typeof s.weight=="number"?"".concat(s.weight):s.weight,stretch:s.stretch,unicodeRange:s.unicodeRange,variant:s.variant,featureSettings:s.featureSettings,display:s.display},c=new FontFace(e,"url(".concat(o,")"),a);c.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error),this.fontFace=c,this.fontUrl=i}}class Hr{constructor(t){h(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const n=this.textRenderers[e];n&&n.isFontFaceSupported(t)&&n.addFontFace(t)}}static resolveFontFace(t,e){const n=[];return t.reduce((o,s)=>{if(o)return o;const a=s[e.fontFamily];if(!a)return;const c=new Set(a);for(const l of c)(l.descriptors.stretch!==e.fontStretch||l.descriptors.style!==e.fontStyle||l.descriptors.weight!==e.fontWeight)&&c.delete(l);return c.values().next().value},void 0)||n[0]}}const eo={x:(r,t)=>{r.props.x=t},y:(r,t)=>{r.props.y=t},width:(r,t)=>{r.props.width=t},height:(r,t)=>{r.props.height=t},color:(r,t)=>{r.props.color=t},zIndex:(r,t)=>{r.props.zIndex=t},fontFamily:(r,t)=>{r.props.fontFamily=t},fontWeight:(r,t)=>{r.props.fontWeight=t},fontStyle:(r,t)=>{r.props.fontStyle=t},fontStretch:(r,t)=>{r.props.fontStretch=t},fontSize:(r,t)=>{r.props.fontSize=t},text:(r,t)=>{r.props.text=t},textAlign:(r,t)=>{r.props.textAlign=t},contain:(r,t)=>{r.props.contain=t},offsetY:(r,t)=>{r.props.offsetY=t},scrollable:(r,t)=>{r.props.scrollable=t},scrollY:(r,t)=>{r.props.scrollY=t},letterSpacing:(r,t)=>{r.props.letterSpacing=t},debug:(r,t)=>{r.props.debug=t}};class Xr{constructor(t){h(this,"stage");h(this,"set");this.stage=t;const e={...eo,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([n,i])=>[n,(o,s)=>{o.props[n]!==s&&i(o,s)}])))}setStatus(t,e,n){t.status!==e&&(t.status=e,t.emitter.emit(e,n))}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.updateScheduled=!1,this.updateState(t)}))}}const to=24;function no(r,t,e,n,i,o,s){let a=0;i&&(a=Math.min(Math.max(Math.floor(i.y1/r),0),o.length));const c=0,l=t/e+a*n;if(!(s&&l>=s/e))return{x:c,y:l,lineIndex:a}}class zt{constructor(t,e=0){h(this,"iterator");h(this,"peekBuffer",[]);h(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*Ot(r,t=0){let e=t;for(;e<r.length;){const n=r.codePointAt(e);if(n===void 0)throw new Error("Invalid Unicode code point");yield n,e+=n<=65535?1:2}}function ro(r,t,e){const n=e.shapeText(t,new zt(Ot(r,0),0));let i=0;for(const o of n)o.mapped&&(i+=o.xAdvance);return i}function io(r,t,e,n,i,o,s,a,c,l,u,d,C,I,f,y){F(I,"Font face must be loaded"),F(I.loaded,"Font face must be loaded"),F(I.data,"Font face must be loaded"),F(I.shaper,"Font face must be loaded");const S=I.data.info.size,w=a/S,m=o/w,x=c/w,p=d[r],b=(p==null?void 0:p.codepointIndex)||0,E=(p==null?void 0:p.maxX)||0,T=(p==null?void 0:p.maxY)||0;let v=E,A=T,_=t,P=e,Q=0;const L={codepointIndex:-1,bufferOffset:-1,xStart:-1},W=I.shaper,Y={letterSpacing:x};let te=W.shapeText(Y,new zt(Ot(n,b),b)),q,ce=-1;const pe=[],ot="...",bt=s/w,Et=ro(ot,Y,W);let Le=!0;for(;Le;){const ye=u!=="both"||y||P+S+S<=bt,ue=ye?m:m-Et;let Z=0;for(;(q=te.next())&&!q.done;){const $=q.value;if(r===d.length)d.push({codepointIndex:$.cluster,maxY:A,maxX:v});else if(r>d.length)throw new Error("Unexpected lineCache length");if($.codepoint===32||$.codepoint===10?L.codepointIndex!==-1&&(L.codepointIndex=-1,Z=_):L.codepointIndex===-1&&(L.codepointIndex=$.cluster,L.bufferOffset=Q,L.xStart=Z),$.mapped){const Be=_+$.xOffset+$.width;if(u!=="none"&&Be>=ue&&L.codepointIndex!==-1&&L.codepointIndex<$.cluster&&L.xStart>0)if(ye){te=W.shapeText(Y,new zt(Ot(n,L.codepointIndex),L.codepointIndex)),Q=L.bufferOffset;break}else te=W.shapeText(Y,new zt(Ot(ot,0),0)),_=L.xStart,Q=L.bufferOffset;else{const se=_+$.xOffset,Te=P+$.yOffset,Bt=C?P+S>=C.y1/w:!0,Tt=C?P<=C.y2/w:!0;if(Bt&&Tt){ce===-1&&(ce=Q);const De=I.getAtlasEntry($.glyphId),Me=De.x/I.data.common.scaleW,ze=De.y/I.data.common.scaleH,st=De.width/I.data.common.scaleW,Zn=De.height/I.data.common.scaleH;l[Q++]=se,l[Q++]=Te,l[Q++]=Me,l[Q++]=ze,l[Q++]=se+$.width,l[Q++]=Te,l[Q++]=Me+st,l[Q++]=ze,l[Q++]=se,l[Q++]=Te+$.height,l[Q++]=Me,l[Q++]=ze+Zn,l[Q++]=se+$.width,l[Q++]=Te+$.height,l[Q++]=Me+st,l[Q++]=ze+Zn}A=Math.max(A,Te+$.height),_+=$.xAdvance,v=Math.max(v,_)}}else if($.codepoint===10)break}ce!==-1&&(pe.push({bufferStart:ce,bufferEnd:Q}),ce=-1),_=0,P+=S,r++,L.codepointIndex=-1,Z=0,(!f&&u==="both"&&C&&P>C.y2/w||q&&q.done||u==="both"&&!y&&!ye)&&(Le=!1)}if(i==="center"){const ye=u==="none"?v:m;for(let ue=0;ue<pe.length;ue++){const Z=pe[ue],$=l[Z.bufferEnd-4]-l[Z.bufferStart],Be=(ye-$)/2;for(let se=Z.bufferStart;se<Z.bufferEnd;se+=4)l[se]+=Be}}else if(i==="right"){const ye=u==="none"?v:m;for(let ue=0;ue<pe.length;ue++){const Z=pe[ue],$=Z.bufferEnd===Z.bufferStart?0:l[Z.bufferEnd-4]-l[Z.bufferStart],Be=ye-$;for(let se=Z.bufferStart;se<Z.bufferEnd;se+=4)l[se]+=Be}}return F(q),{bufferNumFloats:Q,bufferNumQuads:Q/16,layoutNumCharacters:q.done?n.length-b:q.value.cluster-b+1,fullyProcessed:!!q.done,maxX:v,maxY:A}}function oo(r,t,e,n,i,o){const s=n*i,a=o.x1-r,c=o.y1-t;return xi(o)?{x1:a,y1:c+e-s,x2:a+(o.x2-o.x1),y2:c+e+(o.y2-o.y1)+s}:{x1:0,y1:0,x2:0,y2:0}}const so=Jt(0,0,0,0);class ao extends Xr{constructor(e){super(e);h(this,"ssdfFontFamilies",{});h(this,"msdfFontFamilies",{});h(this,"sdfShader");h(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,n)=>{e.props.fontFamily=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,n)=>{e.props.fontWeight=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,n)=>{e.props.fontStyle=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,n)=>{e.props.fontStretch=n,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,n)=>{e.props.fontSize=n,this.invalidateLayoutCache(e)},text:(e,n)=>{e.props.text=n,this.invalidateLayoutCache(e)},textAlign:(e,n)=>{e.props.textAlign=n,this.invalidateLayoutCache(e)},color:(e,n)=>{e.props.color=n},x:(e,n)=>{e.props.x=n,this.invalidateVisibleWindowCache(e)},y:(e,n)=>{e.props.y=n,this.invalidateVisibleWindowCache(e)},contain:(e,n)=>{e.props.contain=n,this.invalidateLayoutCache(e)},width:(e,n)=>{e.props.width=n,this.invalidateLayoutCache(e)},height:(e,n)=>{e.props.height=n,this.invalidateLayoutCache(e)},offsetY:(e,n)=>{e.props.offsetY=n,this.invalidateLayoutCache(e)},scrollable:(e,n)=>{e.props.scrollable=n,this.invalidateLayoutCache(e)},scrollY:(e,n)=>{e.props.scrollY=n,this.scheduleUpdateState(e)},letterSpacing:(e,n)=>{e.props.letterSpacing=n,this.invalidateLayoutCache(e)},debug:(e,n)=>{e.props.debug=n}}}canRenderFont(e){const{fontFamily:n}=e;return n in this.ssdfFontFamilies||n in this.msdfFontFamilies||n==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof er}addFontFace(e){F(e instanceof er);const n=e.fontFamily,i=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!i){console.warn("Invalid font face type: ".concat(e.type));return}let o=i[n];o||(o=new Set,i[n]=o),o.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new Ye,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:n}=e;const{textH:i,lineCache:o,debugData:s,forceFullLayoutCalc:a}=e;if(s.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!n&&(n=this.resolveFontFace(e.props),e.trFontFace=n,!n)){const Q="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(Q),this.setStatus(e,"failed",new Error(Q));return}if(!n.loaded){n.once("loaded",()=>{this.scheduleUpdateState(e)});return}F(n.data,"Font face data should be loaded");const{text:c,fontSize:l,x:u,y:d,contain:C,width:I,height:f,scrollable:y}=e.props,S=C==="both"&&y?e.props.scrollY:0;let{renderWindow:w}=e;const m=n.data.info.size,x=l/m;e.distanceRange=x*n.data.distanceField.distanceRange;const p=c.length*to;let b=e.vertexBuffer;(!b||b.length<p)&&(b=new Float32Array(p*2));const E=e.visibleWindow;if(!E.valid){const Q=Jt(u,d,C!=="none"?u+I:1/0,C==="both"?d+f:1/0,so);Br(this.rendererBounds,Q,e.visibleWindow),E.valid=!0}if(!a&&w){if(u+w.x1<=E.x1&&u+w.x2>=E.x2&&d-S+w.y1<=E.y1&&d-S+w.y2>=E.y2){this.setStatus(e,"loaded");return}w=e.renderWindow=void 0,this.setStatus(e,"loading")}const{offsetY:T,textAlign:v}=e.props;if(!w){const Q=E.y2-E.y1,L=Math.ceil(Q/m);w=oo(u,d,S,m,L,E)}const A=no(l,T,x,m,w,o,i);if(!A){this.setStatus(e,"loaded");return}const{letterSpacing:_}=e.props,P=io(A.lineIndex,A.x,A.y,c,v,I,f,l,_,b,C,o,w,n,a,y);e.bufferUploaded=!1,e.bufferNumFloats=P.bufferNumFloats,e.bufferNumQuads=P.bufferNumQuads,e.vertexBuffer=b,e.renderWindow=w,s.lastLayoutNumCharacters=P.layoutNumCharacters,s.bufferSize=b.byteLength,P.fullyProcessed&&(e.textW=P.maxX*x,e.textH=P.maxY*x),this.setStatus(e,"loaded")}renderQuads(e,n,i,o){var v,A,_;if(!e.vertexBuffer)return;performance.now();const{renderer:s}=this.stage;this.stage.options;const{fontSize:a,color:c,contain:l,scrollable:u,zIndex:d,debug:C}=e.props,I=l==="both"&&u?e.props.scrollY:0,{textW:f=0,textH:y=0,distanceRange:S,vertexBuffer:w,bufferUploaded:m,trFontFace:x}=e;let{webGlBuffers:p}=e;if(!p){const P=s.gl,Q=4*Float32Array.BYTES_PER_ELEMENT,L=P.createBuffer();F(L),e.webGlBuffers=new yi([{buffer:L,attributes:{a_position:{name:"a_position",size:2,type:P.FLOAT,normalized:!1,stride:Q,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:P.FLOAT,normalized:!1,stride:Q,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,F(e.webGlBuffers),p=e.webGlBuffers}if(!m){const P=s.gl,Q=(v=p==null?void 0:p.getBuffer("a_textureCoordinate"))!=null?v:null;P.bindBuffer(P.ARRAY_BUFFER,Q),P.bufferData(P.ARRAY_BUFFER,w,P.STATIC_DRAW),e.bufferUploaded=!0}F(x);const b=new vi(s.gl,s.options,p,this.sdfShader,{transform:n.data,color:Ci(c,o),size:a/(((A=x.data)==null?void 0:A.info.size)||0),scrollY:I,distanceRange:S,debug:C.sdfShaderDebug},o,i,{height:y,width:f},0,d),E=(_=e.trFontFace)==null?void 0:_.texture;F(E);const T=this.stage.txManager.getCtxTexture(E);b.addTexture(T),b.length=e.bufferNumFloats,b.numQuads=e.bufferNumQuads,s.addRenderOp(b)}resolveFontFace(e){return Hr.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.visibleWindow.valid=!1,e.renderWindow=void 0,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}}const rr=2048;class lo{constructor(t,e){h(this,"_canvas");h(this,"_context");h(this,"_settings");h(this,"renderInfo");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFace],e=[];for(let n=0,i=t.length;n<i;n++)t[n]==="serif"||t[n]==="sans-serif"?e.push(t[n]):e.push('"'.concat(t[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(e){console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),n=this._settings.paddingLeft*e,i=this._settings.paddingRight*e,o=this._settings.fontSize*e;let s=this._settings.offsetY===null?null:this._settings.offsetY*e,a=(this._settings.lineHeight||o)*e;const c=this._settings.w*e,l=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const d=this._settings.cutSx*e,C=this._settings.cutEx*e,I=this._settings.cutSy*e,f=this._settings.cutEy*e,y=(this._settings.letterSpacing||0)*e,S=this._settings.textIndent*e;this.setFontProperties();let w=c||2048/this.getPrecision(),m=w-n;if(m<10&&(w+=10-m,m=10),u||(u=m),this._settings.textOverflow&&!this._settings.wordWrap){let v;switch(this._settings.textOverflow){case"clip":v="";break;case"ellipsis":v=this._settings.maxLinesSuffix;break;default:v=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-S,v)}let x;if(this._settings.wordWrap)x=this.wrapText(this._settings.text,u,y,S);else{x={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const v=x.l.length;for(let A=0;A<v-1;A++)x.n.push(A)}let p=x.l;if(this._settings.maxLines&&p.length>this._settings.maxLines){const v=p.slice(0,this._settings.maxLines);let A=null;if(this._settings.maxLinesSuffix){const W=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,Y=this.wrapText(v[v.length-1],u-W,y,S);v[v.length-1]="".concat(Y.l[0]).concat(this._settings.maxLinesSuffix),A=[Y.l.length>1?Y.l[1]:""]}else A=[""];let _;const P=p.length;let Q=0;const L=x.n.length;for(_=this._settings.maxLines;_<P;_++)A[Q]+="".concat(A[Q]?" ":"").concat(p[_]),_+1<L&&x.n[_+1]&&Q++;t.remainingText=A.join("\n"),t.moreTextLines=!0,p=v}else t.moreTextLines=!1,t.remainingText="";let b=0;const E=[];for(let v=0;v<p.length;v++){const A=this.measureText(p[v],y)+(v===0?S:0);E.push(A),b=Math.max(b,A)}t.lineWidths=E,c||(w=b+n+i,m=b),a=a||o;let T;if(l)T=l;else{const v=this._settings.textBaseline!="bottom"?.5*o:0;T=a*(p.length-1)+v+Math.max(a,o)+(s||0)}return s===null&&(s=o),t.w=w,t.h=T,t.lines=p,t.precision=e,w||(w=1),T||(T=1),(d||C)&&(w=Math.min(w,C-d)),(I||f)&&(T=Math.min(T,f-I)),t.width=w,t.innerWidth=m,t.height=T,t.fontSize=o,t.cutSx=d,t.cutSy=I,t.cutEx=C,t.cutEy=f,t.lineHeight=a,t.lineWidths=E,t.offsetY=s,t.paddingLeft=n,t.paddingRight=i,t.letterSpacing=y,t.textIndent=S,t}draw(t,e){const n=this.getPrecision(),i=(e==null?void 0:e.lines)||t.lines,o=(e==null?void 0:e.lineWidths)||t.lineWidths,s=e?e.lines.length*t.lineHeight:t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),rr),this._canvas.height=Math.min(Math.ceil(s),rr),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let a,c;const l=[];for(let d=0,C=i.length;d<C;d++)a=d===0?t.textIndent:0,c=d*t.lineHeight+t.offsetY,this._settings.verticalAlign=="middle"?c+=(t.lineHeight-t.fontSize)/2:this._settings.verticalAlign=="bottom"&&(c+=t.lineHeight-t.fontSize),this._settings.textAlign==="right"?a+=t.innerWidth-o[d]:this._settings.textAlign==="center"&&(a+=(t.innerWidth-o[d])/2),a+=t.paddingLeft,l.push({text:i[d],x:a,y:c,w:o[d]});if(this._settings.highlight){const d=this._settings.highlightColor,C=this._settings.highlightHeight*n||t.fontSize*1.5,I=this._settings.highlightOffset*n,f=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*n:t.paddingLeft,y=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*n:t.paddingRight;this._context.fillStyle=cn(d);for(let S=0;S<l.length;S++){const w=l[S];this._context.fillRect(w.x-f,w.y-t.offsetY+I,w.w+y+f,C)}}let u=null;this._settings.shadow&&(u=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=cn(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*n,this._context.shadowOffsetY=this._settings.shadowOffsetY*n,this._context.shadowBlur=this._settings.shadowBlur*n),this._context.fillStyle=cn(this._settings.textColor);for(let d=0,C=l.length;d<C;d++){const I=l[d];if(t.letterSpacing===0)this._context.fillText(I.text,I.x,I.y);else{const f=I.text.split("");let y=I.x;for(let S=0,w=f.length;S<w;S++)this._context.fillText(f[S],y,I.y),y+=this.measureText(f[S],t.letterSpacing)}}u&&(this._context.shadowColor=u[0],this._context.shadowOffsetX=u[1],this._context.shadowOffsetY=u[2],this._context.shadowBlur=u[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,n){const i=this._context.measureText(n).width,o=t.length,s=this._context.measureText(t).width;if(s<=e)return t;let a=Math.floor(e*o/s),c=this._context.measureText(t.substring(0,a)).width+i;if(c>e)for(;a>0&&(c=this._context.measureText(t.substring(0,a)).width+i,c>e);)a-=1;else for(;a<o;)if(c=this._context.measureText(t.substring(0,a)).width+i,c<e)a+=1;else{a-=1;break}return t.substring(0,a)+(e>=i?n:"")}wrapText(t,e,n,i=0){const o=t.split(/\r?\n/g);let s=[];const a=[];for(let c=0;c<o.length;c++){const l=[];let u="",d=e-i;const C=o[c].split(" ");for(let I=0;I<C.length;I++){const f=this.measureText(C[I],n),y=f+this.measureText(" ",n);I===0||y>d?(I>0&&(l.push(u),u=""),u+=C[I],d=e-f-(I===0?i:0)):(d-=y,u+=" ".concat(C[I]))}l.push(u),u="",s=s.concat(l),c<o.length-1&&a.push(s.length)}return{l:s,n:a}}measureText(t,e=0){return e?t.split("").reduce((n,i)=>n+this._context.measureText(i).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const ir=typeof self>"u"?globalThis:self;var _r;const or=((_r=ir.document)==null?void 0:_r.fonts)||ir.fonts;function co(r){const{fontFamily:t,fontStyle:e,fontWeight:n,fontStretch:i,fontSize:o}=r;return[e,n,i,"".concat(o,"px"),t].join(" ")}const uo=Jt(0,0,0,0);class ho extends Xr{constructor(e){super(e);h(this,"canvas");h(this,"context");h(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let n=this.canvas.getContext("2d");n||(this.canvas=document.createElement("canvas"),n=this.canvas.getContext("2d")),F(n),this.context=n,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,n)=>{e.props.fontFamily=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,n)=>{e.props.fontWeight=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,n)=>{e.props.fontStyle=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,n)=>{e.props.fontStretch=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,n)=>{e.props.fontSize=n,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,n)=>{e.props.text=n,this.invalidateLayoutCache(e)},textAlign:(e,n)=>{e.props.textAlign=n,this.invalidateLayoutCache(e)},color:(e,n)=>{e.props.color=n,this.invalidateLayoutCache(e)},x:(e,n)=>{e.props.x=n,this.invalidateVisibleWindowCache(e)},y:(e,n)=>{e.props.y=n,this.invalidateVisibleWindowCache(e)},contain:(e,n)=>{e.props.contain=n,this.invalidateLayoutCache(e)},width:(e,n)=>{e.props.width=n,this.invalidateLayoutCache(e)},height:(e,n)=>{e.props.height=n,this.invalidateLayoutCache(e)},offsetY:(e,n)=>{e.props.offsetY=n,this.invalidateLayoutCache(e)},scrollY:(e,n)=>{e.props.scrollY=n},letterSpacing:(e,n)=>{e.props.letterSpacing=n,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof nr}addFontFace(e){F(e instanceof nr),or.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new Ye,canvasPages:void 0,lightning2TextRenderer:new lo(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const f=co(e.props);if(e.fontInfo={cssString:f,loaded:!1},!e.fontInfo.loaded){or.load(f).then(this.onFontLoaded.bind(this,e,f)).catch(this.onFontLoadError.bind(this,e,f));return}}if(!e.fontInfo.loaded)return;e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:be(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);const{x:n,y:i,width:o,height:s,scrollY:a,contain:c}=e.props,{visibleWindow:l}=e;let{renderWindow:u,canvasPages:d}=e;if(!l.valid){const f=Jt(n,i,c!=="none"?n+o:1/0,c==="both"?i+s:1/0,uo);Br(this.rendererBounds,f,l),l.valid=!0}const C=l.y2-l.y1,I=Math.ceil(C/e.renderInfo.lineHeight);if(C===0){d=void 0,u=void 0,this.setStatus(e,"loaded");return}else if(u&&d){const f=n+u.x1,y=i-a+u.y1,S=n+u.x2,w=i-a+u.y2;if(f<=l.x1&&S>=l.x2&&y<=l.y1&&w>=l.y2){this.setStatus(e,"loaded");return}w<l.y2?(u.y1+=I*e.renderInfo.lineHeight,u.y2+=I*e.renderInfo.lineHeight,d.push(d.shift()),d[2].lineNumStart=d[1].lineNumStart+I,d[2].lineNumEnd=d[2].lineNumStart+I,d[2].valid=!1):y>l.y1&&(u.y1-=I*e.renderInfo.lineHeight,u.y2-=I*e.renderInfo.lineHeight,d.unshift(d.pop()),d[0].lineNumStart=d[1].lineNumStart-I,d[0].lineNumEnd=d[0].lineNumStart+I,d[0].valid=!1)}else{const f=e.renderInfo.lineHeight*I,y=Math.ceil(a/f),S=y*I,w=S-I,m=S+I;d=[{texture:d==null?void 0:d[0].texture,lineNumStart:w,lineNumEnd:w+I,valid:!1},{texture:d==null?void 0:d[1].texture,lineNumStart:S,lineNumEnd:S+I,valid:!1},{texture:d==null?void 0:d[2].texture,lineNumStart:m,lineNumEnd:m+I,valid:!1}],e.canvasPages=d;const x=y*f;u={x1:0,y1:x-f,x2:o,y2:x+f*2}}e.renderWindow=u,performance.now();for(const f of d)if(!f.valid){if(f.lineNumStart<0){f.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),f.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(f.lineNumStart,f.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(f.lineNumStart,f.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(f.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),f.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,n,i,o){var v,A,_,P,Q,L,W,Y,te,q,ce,pe;const{stage:s}=this,{canvasPages:a,textW:c=0,textH:l=0,renderWindow:u}=e;if(!a||!u)return;const{x:d,y:C,scrollY:I,contain:f,width:y,height:S}=e.props,w={x:d,y:C,width:f!=="none"?y:c,height:f==="both"?S:l};br({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},w),F(a,"canvasPages is not defined"),F(u,"renderWindow is not defined");const x=(u.y2-u.y1)/3,{zIndex:p,color:b}=e.props,E=o*wi(b),T=ut(4294967295,E);a[0].valid&&this.stage.renderer.addQuad({alpha:E,clippingRect:i,colorBl:T,colorBr:T,colorTl:T,colorTr:T,width:((A=(v=a[0].texture)==null?void 0:v.dimensions)==null?void 0:A.width)||0,height:((P=(_=a[0].texture)==null?void 0:_.dimensions)==null?void 0:P.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:p,tx:n.tx,ty:n.ty-I+u.y1,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td}),a[1].valid&&this.stage.renderer.addQuad({alpha:E,clippingRect:i,colorBl:T,colorBr:T,colorTl:T,colorTr:T,width:((L=(Q=a[1].texture)==null?void 0:Q.dimensions)==null?void 0:L.width)||0,height:((Y=(W=a[1].texture)==null?void 0:W.dimensions)==null?void 0:Y.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:p,tx:n.tx,ty:n.ty-I+u.y1+x,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td}),a[2].valid&&this.stage.renderer.addQuad({alpha:E,clippingRect:i,colorBl:T,colorBr:T,colorTl:T,colorTr:T,width:((q=(te=a[2].texture)==null?void 0:te.dimensions)==null?void 0:q.width)||0,height:((pe=(ce=a[2].texture)==null?void 0:ce.dimensions)==null?void 0:pe.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:p,tx:n.tx,ty:n.ty-I+u.y1+x+x,ta:n.ta,tb:n.tb,tc:n.tc,td:n.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,n){var i;n!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,n,i){var o;n!==((o=e.fontInfo)==null?void 0:o.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),i),this.scheduleUpdateState(e))}}const fo=2e6;class go extends Ye{constructor(e){super();h(this,"options");h(this,"animationManager");h(this,"txManager");h(this,"fontManager");h(this,"textRenderers");h(this,"shManager");h(this,"renderer");h(this,"root");h(this,"deltaTime",0);h(this,"lastFrameTime",0);h(this,"currentFrameTime",0);h(this,"fpsNumFrames",0);h(this,"fpsElapsedTime",0);h(this,"renderRequested",!1);this.options=e;const{canvas:n,clearColor:i,rootId:o,debug:s,appWidth:a,appHeight:c}=e;this.txManager=new Ji,this.shManager=new qi,this.animationManager=new Zi,s!=null&&s.monitorTextureCache&&setInterval(()=>{F(this.txManager);const u=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",u.idCacheSize),console.log("Texture Key Cache Size: ",u.keyCacheSize)},1e3),this.renderer=new Ii({stage:this,canvas:n,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:i!=null?i:4278190080,bufferMemory:fo,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new ho(this),sdf:new ao(this)},this.fontManager=new Hr(this.textRenderers);const l=new On(this,{id:o,x:0,y:0,width:a,height:c,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=l,Gi(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=Vi(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:n}=this;this.root.updateType!==0&&this.root.update(this.deltaTime),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),n&&(this.renderRequested=!1);const{fpsUpdateInterval:i}=this.options;if(i&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=i)){const o=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",o)}}addQuads(e){F(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let n=0;n<e.children.length;n++){const i=e.children[n];i&&(i==null?void 0:i.worldAlpha)!==0&&this.addQuads(i)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,n=null){let i=n,o=!1;if(i){const a=this.textRenderers[i];a?a.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(i,"' for font"),e),i=null,o=!0):(console.warn("Text renderer override '".concat(i,"' not found.")),i=null,o=!0)}if(!i){for(const[a,c]of Object.entries(this.textRenderers))if(a!=="canvas"&&c.canRenderFont(e)){i=a;break}i||(i="canvas")}o&&console.warn("Falling back to text renderer ".concat(String(i)));const s=this.textRenderers[i];return F(s,"resolvedTextRenderer undefined"),s}}class po extends On{constructor(e,n){super(e,n);h(this,"textRenderer");h(this,"trState");h(this,"_textRendererOverride",null);h(this,"onTextLoaded",()=>{const{contain:e}=this,n=this.trState.props.width,i=this.trState.props.height,o=this.trState.textW||0,s=this.trState.textH||0;e==="both"?(this.props.width=n,this.props.height=i):e==="width"?(this.props.width=n,this.props.height=s):e==="none"&&(this.props.width=o,this.props.height=s),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});h(this,"onTextFailed",(e,n)=>{this.emit("failed",{type:"text",error:n})});this._textRendererOverride=n.textRendererOverride;const{resolvedTextRenderer:i,textRendererState:o}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:n.width,height:n.height,textAlign:n.textAlign,color:n.color,zIndex:n.zIndex,contain:n.contain,scrollable:n.scrollable,scrollY:n.scrollY,offsetY:n.offsetY,letterSpacing:n.letterSpacing,debug:n.debug,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStretch:n.fontStretch,fontStyle:n.fontStyle,fontWeight:n.fontWeight,text:n.text},void 0);this.textRenderer=i,this.trState=o}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e)}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:n,textRendererState:i}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=n,this.trState=i}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,n=null){super.update(e,n),F(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkIsRenderable(){return super.checkIsRenderable()?!0:this.trState.props.text!==""?this.isRenderable=!0:this.isRenderable=!1}renderQuads(e){F(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,n){const i=this.stage.resolveTextRenderer(e,this._textRendererOverride),o=i.createState(e);return n&&["loading","loaded","failed"].forEach(a=>{n.emitter.off(a)}),o.emitter.on("loaded",this.onTextLoaded),o.emitter.on("failed",this.onTextFailed),i.scheduleUpdateState(o),{resolvedTextRenderer:i,textRendererState:o}}}class mo extends _n{constructor(t,e,n){super(t,e,n,new po(n,{id:$n(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}const Ao="modulepreload",xo=function(r,t){return new URL(r,t).href},sr={},yo=function(t,e,n){if(!e||e.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=xo(o,n),o in sr)return;sr[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!n)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===o&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(o,'"]').concat(a)))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":Ao,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((u,d)=>{l.addEventListener("load",u),l.addEventListener("error",()=>d(new Error("Unable to preload CSS for ".concat(o))))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function vo(r){return r.prototype instanceof Si}async function Co(r,t){let e;try{console.log("Loading core extension",r),e=await yo(()=>import(r),[],import.meta.url)}catch(i){console.error("The core extension module at '".concat(r,"' could not be loaded.")),console.error(i);return}if(!e.default){console.error("The core extension module at '".concat(r,"' does not have a default export."));return}const n=e.default;if(vo(n)){const i=new n;try{await i.run(t)}catch(o){console.error("The core extension at '".concat(r,"' threw an error.")),console.error(o)}}else console.error("The core extension at '".concat(r,"' does not extend CoreExtension."))}class wo{constructor(){h(this,"root",null);h(this,"stage",null);h(this,"rendererMain",null)}async init(t,e,n){this.stage=new go({rootId:$n(),appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:n,fpsUpdateInterval:e.fpsUpdateInterval,debug:{monitorTextureCache:!1}}),this.rendererMain=t,F(this.stage.root);const i=new _n(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=i,i.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,i)),this.onCreateNode(i),e.coreExtensionModule&&await Co(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(o,s)=>{this.onFpsUpdate(s)})}createNode(t){F(this.rendererMain),F(this.stage);const e=new _n(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){F(this.rendererMain),F(this.stage);const e=new mo(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;F(e),e.txManager.removeTextureIdFromCache(t)}getRootNode(){return F(this.root),this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}onFpsUpdate(t){throw new Error("Method not implemented.")}}let ke,Wn;function Io(r={}){const t=new wo;return ke=new Yi(r,r.rootId||"app",t),Wn=ke.createShader.bind(ke),ke}class So extends Array{constructor(t){super(),this._parent=t}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(t,e){if(e){const n=this.indexOf(e);this.splice(n,0,t)}else this.push(t);t.parent=this._parent,this._parent._isDirty=!0}remove(t){const e=this.indexOf(t);e>=0&&this.splice(e,1)}}import.meta.env={BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1};const Pe={debug:!1,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function _o(r,t,...e){}function tt(r){return typeof r=="function"}function ft(r){return Array.isArray(r)}function bo(r){return typeof r=="string"}function Eo(r){return typeof r=="number"}function Bo(r){return Number.isInteger(r)}function To(r,t){for(const e of t)if(e in r)return!0;return!1}function Ro(r){return ft(r)?r[0]:r}class ar extends Array{constructor(t,e={}){var n=(...i)=>{super(...i)};return ft(e)?n(...e):bo(e)?n(e):n(...Object.entries(e).filter(([i,o])=>o).map(([i])=>i)),this.onChange=t,this}has(t){return this.indexOf(t)>=0}is(t){return this.indexOf(t)>=0}add(t){this.push(t),this.onChange()}toggle(t){this.has(t)?this.remove(t):this.add(t)}remove(t){const e=this.indexOf(t);e>=0&&(this.splice(e,1),this.onChange())}}function Qo(r){const t=[];for(let m=0;m<r.children.length;m++){const x=r.children[m];if(x.name!=="TextNode"){if(x.name==="text"&&!(x.width||x.height))return!1;t.push(x)}}const e=t.length,i=(r.flexDirection||"row")==="row",o=i?"width":"height",s=i?"height":"width",a=i?"marginLeft":"marginTop",c=i?"marginRight":"marginBottom",l=i?"x":"y",u=i?"y":"x",d=r[o]||0,C=r[s]||0,I=r.gap||0,f=r.justifyContent||"flexStart",y=r.alignItems;let S=0;["center","spaceBetween","spaceEvenly"].includes(f)&&(S=t.reduce((m,x)=>m+(x[o]||0),0));const w=C&&y?m=>{y==="flexStart"?m[u]=0:y==="center"?m[u]=(C-(m[s]||0))/2:y==="flexEnd"&&(m[u]=C-(m[s]||0))}:m=>m;if(f==="flexStart"){let m=0;if(t.forEach(x=>{x[l]=m+(x[a]||0),m+=(x[o]||0)+I+(x[a]||0)+(x[c]||0),w(x)}),r._autosized){const x=m-I;if(x!==r[o])return r[o]=x,!0}}else if(f==="flexEnd"){let m=d;for(let x=e-1;x>=0;x--){const p=t[x];F(p),p[l]=m-(p[o]||0)-(p[c]||0),m-=(p[o]||0)+I+(p[a]||0)+(p[c]||0),w(p)}}else if(f==="center"){let m=(d-(S+I*(e-1)))/2;t.forEach(x=>{x[l]=m,m+=(x[o]||0)+I,w(x)})}else if(f==="spaceBetween"){const m=(d-S)/(e-1);let x=0;t.forEach(p=>{p[l]=x,x+=(p[o]||0)+m,w(p)})}else if(f==="spaceEvenly"){const m=(d-S)/(e+1);let x=m;t.forEach(p=>{p[l]=x,x+=(p[o]||0)+m,w(p)})}return!1}const{animationSettings:ko}=Pe;function Po(r){const t=[];for(const[e,n]of Object.entries(r))t.push({type:e,props:n});return Wn("DynamicShader",{effects:t})}function at(r=""){return{set(t){Eo(t)&&(t={width:t,color:255}),this.effects={...this.effects||{},["border".concat(r)]:t},this["_border".concat(r)]=t},get(){return this["_border".concat(r)]}}}const Fo=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],No=["clipping","contain","fontFamily","src","text","textAlign","texture","maxLines","maxLinesSuffix","textBaseline","textOverflow","verticalAlign","wordWrap"];class We extends Object{constructor(t){super(),this.lng=null,this._parent=null,this.name=t,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new So(this);for(const e of Fo)Object.defineProperty(this,e,{get(){return this["_".concat(e)]||this.lng&&this.lng[e]},set(n){this["_".concat(e)]=Ro(n),this._sendToLightningAnimatable(e,n)}});for(const e of No)Object.defineProperty(this,e,{get(){return this["_".concat(e)]||this.lng&&this.lng[e]},set(n){this["_".concat(e)]=n,this._sendToLightning(e,n)}});Object.defineProperties(this,{borderRadius:{set(e){this._borderRadius=e,this.effects={...this.effects||{},radius:{radius:e}}},get(){return this._borderRadius}},border:at(),borderLeft:at("Left"),borderRight:at("Right"),borderTop:at("Top"),borderBottom:at("Bottom")}),Object.defineProperties(this,{linearGradient:{set(e={}){this._linearGradient=e,this.effects={...this.effects||{},linearGradient:e}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(t){this._effects=t,this.shader=Po(t)}get parent(){return this._parent}set parent(t){var e;this._parent=t,this.rendered&&this.lng&&(this.lng.parent=(e=t==null?void 0:t.lng)!=null?e:null)}get shader(){return this._shader}set shader(t){ft(t)?this._shader=Wn(...t):this._shader=t,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(t,e){if(this.rendered&&this.lng){if(ft(e))return this.createAnimation({[t]:e[0]},e[1]).start();if(this._animate)return this.createAnimation({[t]:e}).start();this.lng[t]=e}else ft(e)&&(e=e[0]),this._renderProps[t]=e}_sendToLightning(t,e){this.rendered&&this.lng?this.lng[t]=e:this._renderProps[t]=e}createAnimation(t,e){return F(this.lng,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}setFocus(){this.rendered?zr(this):this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){this.lng.once("loaded",(t,e)=>{if(e.type==="text"){const{dimensions:n}=e;this.width=n.width,this.height=n.height,this.parent.updateLayout(this,n)}})}getText(){return this.children.map(t=>t.text).join("")}destroy(){this.lng&&ke.destroyNode(this.lng)}set style(t){for(let e in t)e==="animate"&&(e="_animate"),this[e]||(this[e]=t[e]);this._style=t}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(t){this._states=new ar(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new ar(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||ko}set animationSettings(t){this._animationSettings=t}updateLayout(t,e){var n;this.hasChildren&&(tt(this.onBeforeLayout)&&this.onBeforeLayout.call(this,t,e),this.display==="flex"&&Qo(this)&&((n=this.parent)==null||n.updateLayout()),tt(this.onLayout)&&this.onLayout.call(this,t,e))}_stateChanged(){var e;if(_o("State Changed: ",this,this.states),this.forwardStates){const n=this.states.slice();this.children.forEach(i=>i.states=n)}const t=((e=Pe.stateMapperHook)==null?void 0:e.call(Pe,this,this.states))||this.states;if(this._undoStates||this.style&&To(this.style,t)){this._undoStates=this._undoStates||{};let n={};for(const[o,s]of Object.entries(this._undoStates))t.includes(o)||(n={...n,...s});const i=t.reduce((o,s)=>{const a=this.style[s];return a&&(o={...o,...a},this._undoStates&&!this._undoStates[s]&&(this._undoStates[s]={},Object.keys(a).forEach(c=>{this._undoStates[s][c]=this[c]}))),o},{});Object.assign(this,{...n,...i})}}render(){const t=this,e=this.parent;e._isDirty&&(e.updateLayout(),e._isDirty=!1),t.updateLayout(),this.states.length&&this._stateChanged();let n=t._renderProps;e.lng&&(n.parent=e.lng),t.isTextNode()?(n={...Pe.fontSettings,...n,text:t.getText()},n.contain&&(n.width||(n.width=(e.width||0)-n.x-(n.marginRight||0),t._width=n.width,t._autosized=!0),!n.height&&n.contain==="both"&&(n.height=(e.height||0)-n.y-(n.marginBottom||0),t._height=n.height,t._autosized=!0)),t.lng=ke.createTextNode(n),tt(this.onCreate)&&this.onCreate.call(this,t),tt(t.onLoad)&&t.lng.on("loaded",t.onLoad),(!t.width||!t.height)&&(t._autosized=!0,t._resizeOnTextLoad())):(n.src||n.texture||(isNaN(n.width)&&(n.width=(e.width||0)-n.x,t._width=n.width,t._autosized=!0),isNaN(n.height)&&(n.height=(e.height||0)-n.y,t._height=n.height,t._autosized=!0),n.color||(t._color=n.color=0)),t.lng=ke.createNode(n),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),tt(this.onCreate)&&this.onCreate.call(this,t)),t.rendered=!0,t.autofocus&&t.setFocus(),delete this._renderProps}}const z=r=>(()=>{const t=it("text");return It(t,r,!1),t})(),B=r=>(()=>{const t=it("node");return It(t,r,!1),t})();function Ur(r){r.name!=="TextNode"&&(F(r instanceof We),r.render(),r.children.forEach(t=>Ur(t)))}const Lo=r=>{const t=Io(r.options),e=t.init();let n;return ee(()=>{e.then(()=>{F(n),n.lng=t.root,n.children.forEach(Ur),tt(r.onFirstRender)&&r.onFirstRender(n)}).catch(console.error)}),(()=>{const i=it("canvas"),o=n;return typeof o=="function"?Gr(o,i):n=i,on(i,()=>r.children),i})()};function Do({createElement:r,createTextNode:t,isTextNode:e,replaceText:n,insertNode:i,removeNode:o,setProperty:s,getParentNode:a,getFirstChild:c,getNextSibling:l}){function u(m,x,p,b){if(p!==void 0&&!b&&(b=[]),typeof x!="function")return d(m,x,b,p);Ce(E=>d(m,x(),E,p),b)}function d(m,x,p,b,E){for(;typeof p=="function";)p=p();if(x===p)return p;const T=typeof x,v=b!==void 0;if(T==="string"||T==="number")if(T==="number"&&(x=x.toString()),v){let A=p[0];A&&e(A)?n(A,x):A=t(x),p=f(m,p,b,A)}else p!==""&&typeof p=="string"?n(c(m),p=x):(f(m,p,b,t(x)),p=x);else if(x==null||T==="boolean")p=f(m,p,b);else{if(T==="function")return Ce(()=>{let A=x();for(;typeof A=="function";)A=A();p=d(m,A,p,b)}),()=>p;if(Array.isArray(x)){const A=[];if(C(A,x,E))return Ce(()=>p=d(m,A,p,b,!0)),()=>p;if(A.length===0){const _=f(m,p,b);if(v)return p=_}else Array.isArray(p)?p.length===0?y(m,A,b):I(m,p,A):p==null||p===""?y(m,A):I(m,v&&p||[c(m)],A);p=A}else{if(Array.isArray(p)){if(v)return p=f(m,p,b,x);f(m,p,null,x)}else p==null||p===""||!c(m)?i(m,x):S(m,x,c(m));p=x}}return p}function C(m,x,p){let b=!1;for(let E=0,T=x.length;E<T;E++){let v=x[E],A;if(!(v==null||v===!0||v===!1))if(Array.isArray(v))b=C(m,v)||b;else if((A=typeof v)=="string"||A==="number")m.push(t(v));else if(A==="function")if(p){for(;typeof v=="function";)v=v();b=C(m,Array.isArray(v)?v:[v])||b}else m.push(v),b=!0;else m.push(v)}return b}function I(m,x,p){let b=p.length,E=x.length,T=b,v=0,A=0,_=l(x[E-1]),P=null;for(;v<E||A<T;){if(x[v]===p[A]){v++,A++;continue}for(;x[E-1]===p[T-1];)E--,T--;if(E===v){const Q=T<b?A?l(p[A-1]):p[T-A]:_;for(;A<T;)i(m,p[A++],Q)}else if(T===A)for(;v<E;)(!P||!P.has(x[v]))&&o(m,x[v]),v++;else if(x[v]===p[T-1]&&p[A]===x[E-1]){const Q=l(x[--E]);i(m,p[A++],l(x[v++])),i(m,p[--T],Q),x[E]=p[T]}else{if(!P){P=new Map;let L=A;for(;L<T;)P.set(p[L],L++)}const Q=P.get(x[v]);if(Q!=null)if(A<Q&&Q<T){let L=v,W=1,Y;for(;++L<E&&L<T&&!((Y=P.get(x[L]))==null||Y!==Q+W);)W++;if(W>Q-A){const te=x[v];for(;A<Q;)i(m,p[A++],te)}else S(m,p[A++],x[v++])}else v++;else o(m,x[v++])}}}function f(m,x,p,b){if(p===void 0){let T;for(;T=c(m);)o(m,T);return b&&i(m,b),""}const E=b||t("");if(x.length){let T=!1;for(let v=x.length-1;v>=0;v--){const A=x[v];if(E!==A){const _=a(A)===m;!T&&!v?_?S(m,E,A):i(m,E,p):_&&o(m,A)}else T=!0}}else i(m,E,p);return[E]}function y(m,x,p){for(let b=0,E=x.length;b<E;b++)i(m,x[b],p)}function S(m,x,p){i(m,x,p),o(m,p)}function w(m,x,p={},b){return x||(x={}),b||Ce(()=>p.children=d(m,x.children,p.children)),Ce(()=>x.ref&&x.ref(m)),Ce(()=>{for(const E in x){if(E==="children"||E==="ref")continue;const T=x[E];T!==p[E]&&(s(m,E,T,p[E]),p[E]=T)}}),p}return{render(m,x){let p;return rt(b=>{p=b,u(x,m())}),p},insert:u,spread(m,x,p){typeof x=="function"?Ce(b=>w(m,x(),b,p)):w(m,x,void 0,p)},createElement:r,createTextNode:t,insertNode:i,setProp(m,x,p,b){return s(m,x,p,b),p},mergeProps:zn,effect:Ce,memo:H,createComponent:Mr,use(m,x,p){return oe(()=>m(x,p))}}}function Mo(r){const t=Do(r);return t.mergeProps=zn,t}const zo={createElement(r){const t=new We(r);return ke.root&&ee(()=>t.render()),t},createTextNode(r){return{name:"TextNode",text:r,parent:null}},replaceText(r,t){r.text=t;const e=r.parent;F(e),e._autosized&&e._resizeOnTextLoad(),e.text=e.getText()},setProperty(r,t,e=!0){if(t==="animate"){r._animate=e;return}r[t]=e},insertNode(r,t,e){r&&(r.children.insert(t,e),t.name==="TextNode"&&r.isTextNode()&&(r._autosized&&r._resizeOnTextLoad(),r.text=r.getText()))},isTextNode(r){return r.isTextNode()},removeNode(r,t){r.children.remove(t),t instanceof We&&t.destroy()},getParentNode(r){var t;return(t=r.parent)!=null?t:void 0},getFirstChild(r){return r.children[0]},getNextSibling(r){if(r.parent){const t=r.parent.children||[],e=t.indexOf(r)+1;if(e<t.length)return t[e]}}},jr=Mo(zo),Oo=jr.render,{effect:el,memo:wt,createComponent:g,createElement:it,createTextNode:tl,insertNode:nl,insert:on,spread:It,setProp:Gt,mergeProps:K,use:Gr}=jr;function R(r=""){return Bo(r)?r:typeof r=="string"?r.startsWith("#")?+(r.replace("#","0x")+(r.length===7?"ff":"")):r.startsWith("0x")?Number(r):+("0x"+(r.length===6?r+"ff":r)):0}function $o(r){return r*Math.PI/180}const lr="_$DX_DELEGATE";function Wo(r,t=window.document){const e=t[lr]||(t[lr]=new Set);for(let n=0,i=r.length;n<i;n++){const o=r[n];e.has(o)||(e.add(o),t.addEventListener(o,Yo))}}function Yo(r){const t="$$".concat(r.type);let e=r.composedPath&&r.composedPath()[0]||r.target;for(r.target!==e&&Object.defineProperty(r,"target",{configurable:!0,value:e}),Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}});e;){const n=e[t];if(n&&!e.disabled){const i=e["".concat(t,"Data")];if(i!==void 0?n.call(e,i,r):n.call(e,r),r.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const Ho=!1;function Xo(){let r=new Set;function t(i){return r.add(i),()=>r.delete(i)}let e=!1;function n(i,o){if(e)return!(e=!1);const s={to:i,options:o,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const a of r)a.listener({...s,from:a.location,retry:c=>{c&&(e=!0),a.navigate(i,o)}});return!s.defaultPrevented}return{subscribe:t,confirm:n}}const Uo=/^(?:[a-z0-9]+:)?\/\//i,jo=/^\/+|(\/)\/+$/g;function gt(r,t=!1){const e=r.replace(jo,"$1");return e?t||/^[?#]/.test(e)?e:"/"+e:""}function $t(r,t,e){if(Uo.test(t))return;const n=gt(r),i=e&&gt(e);let o="";return!i||t.startsWith("/")?o=n:i.toLowerCase().indexOf(n.toLowerCase())!==0?o=n+i:o=i,(o||"/")+gt(t,!o)}function Go(r,t){if(r==null)throw new Error(t);return r}function Vo(r,t){return gt(r).replace(/\/*(\*.*)?$/g,"")+gt(t)}function Vr(r){const t={};return r.searchParams.forEach((e,n)=>{t[n]=e}),t}function Ko(r,t,e){const[n,i]=r.split("/*",2),o=n.split("/").filter(Boolean),s=o.length;return a=>{const c=a.split("/").filter(Boolean),l=c.length-s;if(l<0||l>0&&i===void 0&&!t)return null;const u={path:s?"":"/",params:{}},d=C=>e===void 0?void 0:e[C];for(let C=0;C<s;C++){const I=o[C],f=c[C],y=I[0]===":",S=y?I.slice(1):I;if(y&&fn(f,d(S)))u.params[S]=f;else if(y||!fn(f,I))return null;u.path+="/".concat(f)}if(i){const C=l?c.slice(-l).join("/"):"";if(fn(C,d(i)))u.params[i]=C;else return null}return u}}function fn(r,t){const e=n=>n.localeCompare(r,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?e(t):typeof t=="function"?t(r):Array.isArray(t)?t.some(e):t instanceof RegExp?t.test(r):!1}function qo(r){const[t,e]=r.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((i,o)=>i+(o.startsWith(":")?2:3),n.length-(e===void 0?0:1))}function Kr(r){const t=new Map,e=tn();return new Proxy({},{get(n,i){return t.has(i)||Ti(e,()=>t.set(i,H(()=>r()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function qr(r){let t=/(\/?\:[^\/]+)\?/.exec(r);if(!t)return[r];let e=r.slice(0,t.index),n=r.slice(t.index+t[0].length);const i=[e,e+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(n);)i.push(e+=t[1]),n=n.slice(t[0].length);return qr(n).reduce((o,s)=>[...o,...i.map(a=>a+s)],[])}const Zo=100,Zr=kr(),sn=kr(),Yn=()=>Go(nn(Zr),"Make sure your app is wrapped in a <Router />"),Jo=()=>nn(sn)||Yn().base,St=()=>Yn().navigatorFactory(),Hn=()=>Yn().location,Xn=()=>Jo().params;function es(r,t=""){const{component:e,load:n,children:i,metadata:o}=r,s=!i||Array.isArray(i)&&!i.length,a={key:r,component:e,load:n,metadata:o};return Jr(r.path).reduce((c,l)=>{for(const u of qr(l)){const d=Vo(t,u),C=s?d:d.split("/*",1)[0];c.push({...a,originalPath:u,pattern:C,matcher:Ko(C,!s,r.matchFilters)})}return c},[])}function ts(r,t=0){return{routes:r,score:qo(r[r.length-1])*1e4-t,matcher(e){const n=[];for(let i=r.length-1;i>=0;i--){const o=r[i],s=o.matcher(e);if(!s)return null;n.unshift({...s,route:o})}return n}}}function Jr(r){return Array.isArray(r)?r:[r]}function ei(r,t="",e=[],n=[]){const i=Jr(r);for(let o=0,s=i.length;o<s;o++){const a=i[o];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const c=es(a,t);for(const l of c){e.push(l);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)ei(a.children,l.pattern,e,n);else{const d=ts([...e],n.length);n.push(d)}e.pop()}}}return e.length?n:n.sort((o,s)=>s.score-o.score)}function ti(r,t){for(let e=0,n=r.length;e<n;e++){const i=r[e].matcher(t);if(i)return i}return[]}function ns(r,t){const e=new URL("http://sar"),n=H(c=>{const l=r();try{return new URL(l,e)}catch(u){return console.error("Invalid path ".concat(l)),c}},e,{equals:(c,l)=>c.href===l.href}),i=H(()=>n().pathname),o=H(()=>n().search,!0),s=H(()=>n().hash),a=()=>"";return{get pathname(){return i()},get search(){return o()},get hash(){return s()},get state(){return t()},get key(){return a()},query:Kr(le(o,()=>Vr(n())))}}let Qe;function rs(r,t,e={}){const{signal:[n,i],utils:o={}}=r,s=o.parsePath||(A=>A),a=o.renderPath||(A=>A),c=o.beforeLeave||Xo(),l=$t("",e.base||"");if(l===void 0)throw new Error("".concat(l," is not a valid base path"));l&&!n().value&&i({value:l,replace:!0,scroll:!1});const[u,d]=N(!1),C=async A=>{d(!0);try{await Ri(A)}finally{d(!1)}},[I,f]=N(n().value),[y,S]=N(n().state),w=ns(I,y),m=[],x=N([]),p={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(A){return $t(l,A)}};return Ce(()=>{const{value:A,state:_}=n();oe(()=>{A!==I()&&C(()=>{Qe="native",f(A),S(_),x[1]([])}).then(()=>{Qe=void 0})})}),{base:p,location:w,isRouting:u,renderPath:a,parsePath:s,navigatorFactory:E,beforeLeave:c,preloadRoute:v,submissions:x};function b(A,_,P){oe(()=>{if(typeof _=="number"){_&&(o.go?c.confirm(_,P)&&o.go(_):console.warn("Router integration does not support relative routing"));return}const{replace:Q,resolve:L,scroll:W,state:Y}={replace:!1,resolve:!0,scroll:!0,...P},te=L?A.resolvePath(_):$t("",_);if(te===void 0)throw new Error("Path '".concat(_,"' is not a routable path"));if(m.length>=Zo)throw new Error("Too many redirects");const q=I();if((te!==q||Y!==y())&&!Ho){if(c.confirm(te,P)){const ce=m.push({value:q,replace:Q,scroll:W,state:y()});C(()=>{Qe="navigate",f(te),S(Y),x[1]([])}).then(()=>{m.length===ce&&(Qe=void 0,T({value:te,state:Y}))})}}})}function E(A){return A=A||nn(sn)||p,(_,P)=>b(A,_,P)}function T(A){const _=m[0];_&&((A.value!==_.value||A.state!==_.state)&&i({...A,replace:_.replace,scroll:_.scroll}),m.length=0)}function v(A,_){const P=ti(t(),A.pathname),Q=Qe;Qe="preload";for(let L in P){const{route:W,params:Y}=P[L];W.component&&W.component.preload&&W.component.preload(),_&&W.load&&W.load({params:Y,location:{pathname:A.pathname,search:A.search,hash:A.hash,query:Vr(A),state:null,key:""},intent:"preload"})}Qe=Q}}function is(r,t,e,n,i){const{base:o,location:s}=r,{pattern:a,component:c,load:l}=n().route,u=H(()=>n().path);c&&c.preload&&c.preload();const d=l?l({params:i,location:s,intent:Qe||"initial"}):void 0;return{parent:t,pattern:a,path:u,params:i,outlet:()=>c?Mr(c,{params:i,location:s,data:d,get children(){return e()}}):e(),resolvePath(I){return $t(o.path(),I,u())}}}const os=r=>t=>{const{base:e}=t,n=Dn(()=>t.children),i=H(()=>ei(t.root?{component:t.root,children:n()}:n(),t.base||"")),o=rs(r,i,{base:e});return r.create&&r.create(o),g(Zr.Provider,{value:o,get children(){return g(ss,{routerState:o,get branches(){return i()}})}})};function ss(r){const t=H(()=>ti(r.branches,r.routerState.location.pathname)),e=Kr(()=>{const s=t(),a={};for(let c=0;c<s.length;c++)Object.assign(a,s[c].params);return a}),n=[];let i;const o=H(le(t,(s,a,c)=>{let l=a&&s.length===a.length;const u=[];for(let d=0,C=s.length;d<C;d++){const I=a&&a[d],f=s[d];c&&I&&f.route.key===I.route.key?u[d]=c[d]:(l=!1,n[d]&&n[d](),rt(y=>{n[d]=y,u[d]=is(r.routerState,u[d-1]||r.routerState.base,as(()=>o()[d+1]),()=>t()[d],e)}))}return n.splice(s.length).forEach(d=>d()),c&&l?c:(i=u[0],u)}));return g(xe,{get when(){return o()&&i},keyed:!0,children:s=>g(sn.Provider,{value:s,get children(){return s.outlet()}})})}const as=r=>()=>g(xe,{get when(){return r()},keyed:!0,children:t=>g(sn.Provider,{value:t,get children(){return t.outlet()}})}),Re=r=>{const t=Dn(()=>r.children);return zn(r,{get children(){return t()}})};function ls([r,t],e,n){return[e?()=>e(r()):r,n?i=>t(n(i)):t]}function cs(r){if(r==="#")return null;try{return document.querySelector(r)}catch(t){return null}}function us(r){let t=!1;const e=i=>typeof i=="string"?{value:i}:i,n=ls(N(e(r.get()),{equals:(i,o)=>i.value===o.value}),void 0,i=>(!t&&r.set(i),i));return r.init&&Fe(r.init((i=r.get())=>{t=!0,n[1](e(i)),t=!1})),os({signal:n,create:r.create,utils:r.utils})}function ds(r,t,e){return r.addEventListener(t,e),()=>r.removeEventListener(t,e)}function hs(r,t){const e=cs("#".concat(r));e?e.scrollIntoView():t&&window.scrollTo(0,0)}const fs=new Map;function gs(r=!0,t=!1,e="/_server"){return n=>{const i=n.base.path(),o=n.navigatorFactory(n.base);let s={};function a(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function c(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const y=f.composedPath().find(b=>b instanceof Node&&b.nodeName.toUpperCase()==="A");if(!y||t&&!y.getAttribute("link"))return;const S=a(y),w=S?y.href.baseVal:y.href;if((S?y.target.baseVal:y.target)||!w&&!y.hasAttribute("state"))return;const x=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||x&&x.includes("external"))return;const p=S?new URL(w,document.baseURI):new URL(w);if(!(p.origin!==window.location.origin||i&&p.pathname&&!p.pathname.toLowerCase().startsWith(i.toLowerCase())))return[y,p]}function l(f){const y=c(f);if(!y)return;const[S,w]=y,m=n.parsePath(w.pathname+w.search+w.hash),x=S.getAttribute("state");f.preventDefault(),o(m,{resolve:!1,replace:S.hasAttribute("replace"),scroll:!S.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function u(f){const y=c(f);if(!y)return;const[S,w]=y;s[w.pathname]||n.preloadRoute(w,S.getAttribute("preload")!=="false")}function d(f){const y=c(f);if(!y)return;const[S,w]=y;s[w.pathname]||(s[w.pathname]=setTimeout(()=>{n.preloadRoute(w,S.getAttribute("preload")!=="false"),delete s[w.pathname]},200))}function C(f){const y=c(f);if(!y)return;const[,S]=y;s[S.pathname]&&(clearTimeout(s[S.pathname]),delete s[S.pathname])}function I(f){let y=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.formAction:f.target.action;if(!y)return;if(!y.startsWith("action:")){const w=new URL(y);if(y=n.parsePath(w.pathname+w.search),!y.startsWith(e))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const S=fs.get(y);if(S){f.preventDefault();const w=new FormData(f.target);S.call(n,w)}}Wo(["click","submit"]),document.addEventListener("click",l),r&&(document.addEventListener("mouseover",d),document.addEventListener("mouseout",C),document.addEventListener("focusin",u),document.addEventListener("touchstart",u)),document.addEventListener("submit",I),Fe(()=>{document.removeEventListener("click",l),r&&(document.removeEventListener("mouseover",d),document.removeEventListener("mouseout",C),document.removeEventListener("focusin",u),document.removeEventListener("touchstart",u)),document.removeEventListener("submit",I)})}}function ps(r){const t=r.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(t)}return t}function ms(r){return us({get:()=>window.location.hash.slice(1),set({value:t,replace:e,scroll:n,state:i}){e?window.history.replaceState(i,"","#"+t):window.location.hash=t;const o=t.indexOf("#"),s=o>=0?t.slice(o+1):"";hs(s,n)},init:t=>ds(window,"hashchange",()=>t()),create:gs(r.preload,r.explicitLinks,r.actionBase),utils:{go:t=>window.history.go(t),renderPath:t=>"#".concat(t),parsePath:ps}})(r)}var As=!!Oi,xs=As?r=>tn()?Fe(r):r:Fe;function ys(r,t,e,n){return r.addEventListener(t,e,n),xs(r.removeEventListener.bind(r,t,e,n))}function vs(r,t=tn()){let e=0,n,i;return()=>(e++,Fe(()=>{e--,queueMicrotask(()=>{!e&&i&&(i(),i=n=void 0)})}),i||rt(o=>n=r(i=o),t),n)}var Cs=vs(()=>{const[r,t]=N(null);return ys(window,"keydown",e=>{t(e),setTimeout(()=>t(null))}),r});function Qt(r){return typeof r=="function"}function cr(r,t){if(!r)throw new Error(t||"Assertion failed")}let gn={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"};const[Vt,ws]=N([]),Is=(r={})=>{const t=Cs();gn={...gn,...r};const e=Object.entries(gn);return ee(le(Ne,(n,i,o=[])=>{var c;let s=n;const a=[];for(;s;)s.states.has("focus")||(s.states.add("focus"),Qt(s.onFocus)&&s.onFocus.call(s,n,i!=null?i:null)),a.push(s),s=(c=s.parent)!=null?c:null;return o.forEach(l=>{a.includes(l)||(l.states.remove("focus"),Qt(l.onBlur)&&l.onBlur.call(l,n,i!=null?i:null))}),ws(a),a},{defer:!0})),ee(()=>{const n=t();if(n){const i=e.find(([o,s])=>s===n.key);oe(()=>{const o=Vt();for(const s of o){const a=i?i[0]:void 0;if(a){const c=s["on".concat(a)];if(Qt(c)&&c.call(s,n,s)===!0)break}else console.log("Unhandled key event: ".concat(n.key));if(Qt(s.onKeyPress)&&s.onKeyPress.call(s,n,a,s)===!0)break}return!1})}}),Vt};function Ss(r,t){const e=t();let n,i,o,s;Array.isArray(e)?e.length===2?(n=s=e[0],i=o=e[1]):e.length===3?(n=e[0],i=o=e[1],s=e[2]):[n,o,s,i]=e:n=o=s=i=e,r.onBeforeLayout=(a,c)=>{if(c){r.width=r.children.reduce((d,C)=>d+(C.width||0),0)+i+o;const l=r.children[0];l&&(l.x=i,l.marginLeft=i);let u=0;r.children.forEach(d=>{d.y=(d.y||0)+n,d.marginTop=n,u=Math.max(u,d.height||0)}),r.height=u+n+s}}}function _s(r=[]){const t=[];let e;for(e=0;e<r.length;e++){const n=r[e];if(typeof n=="string"&&!n.includes("PAUSE-"))t.push(r[e]);else break}return[t.join(",\b ")].concat(r.slice(e))}function ur(r){return new Promise(t=>{setTimeout(t,r)})}function bs(r,t,e="en-US"){const n=window.speechSynthesis;return new Promise((i,o)=>{const s=new SpeechSynthesisUtterance(r);s.lang=e,s.onend=()=>{i()},s.onerror=a=>{o(a)},t.push(s),n.speak(s)})}function Rn(r,t,e=!0){const n=window.speechSynthesis,i=_s(Array.isArray(r)?r:[r]),o=[],s=[];let a=!0;return{series:(async()=>{try{for(;a&&i.length;){const l=await Promise.resolve(i.shift());if(a){if(typeof l=="string"&&l.includes("PAUSE-")){let u=Number(l.split("PAUSE-")[1])*1e3;isNaN(u)&&(u=0),await ur(u)}else if(typeof l=="string"&&l.length){let d=3;for(;a&&d>0;)try{await bs(l,s,t),d=0}catch(C){if(C instanceof SpeechSynthesisErrorEvent)if(C.error==="network")d--,console.warn("Speech synthesis network error. Retries left: ".concat(d)),await ur(500*(3-d));else if(C.error==="canceled"||C.error==="interrupted")d=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(C.error));else throw C}}else if(typeof l=="function"){const u=Rn(l(),t,!1);o.push(u),await u.series}else if(Array.isArray(l)){const u=Rn(l,t,!1);o.push(u),await u.series}}else break}}finally{a=!1}})(),get active(){return a},append:l=>{i.push(l)},cancel:()=>{a&&(e&&n.cancel(),o.forEach(l=>{l.cancel()}),a=!1)}}}let kt;function Es(r,t="en-US"){return kt&&kt.cancel(),kt=Rn(r,t),kt}var Bs=(r,t)=>{let e;const n=()=>clearTimeout(e);return tn()&&Fe(n),Object.assign((...o)=>{e!==void 0&&n(),e=setTimeout(()=>r(...o),t)},{clear:n})};let Qn,pt=[],ve,kn=!1;const Ts=3e5;function dr(r,t){const e=Bs(r,t);let n;const i=o=>{n=o,e(o)};return i.flush=()=>{e.clear(),r(n)},i.clear=e.clear,i}function lt(r){return r.id||r.name}function Rs(r=[]){if(!J.onFocusChange||!J.enabled)return;const t=r.every(o=>!o.loading),e=r.filter(o=>!pt.includes(o));if(Qn(),!t&&J.onFocusChange){J.onFocusChange([]);return}pt=r.slice(0);const n=[],i=e.reduce((o,s)=>(s.announce?(o.push([lt(s),"Announce",s.announce]),n.push(s.announce)):s.title?(o.push([lt(s),"Title",s.title]),n.push(s.title)):o.push([lt(s),"No Announce",""]),o),[]);if(e.reverse().reduce((o,s)=>(s.announceContext?(o.push([lt(s),"Context",s.announceContext]),n.push(s.announceContext)):o.push([lt(s),"No Context",""]),o),i),J.debug&&console.table(i),n.length)return J.speak(n.reduce((o,s)=>o.concat(s),[]))}function Qs(r){if(!kn)return ve=Es(r)}const J={debug:!1,enabled:!0,cancel:function(){ve&&ve.cancel()},clearPrevFocus:function(r=0){pt=pt.slice(0,r),Qn()},speak:function(r,{append:t=!1,notification:e=!1}={}){return J.onFocusChange&&J.enabled&&(J.onFocusChange.flush(),t&&ve&&ve.active?ve.append(r):(J.cancel(),Qs(r)),e&&(kn=!0,ve==null||ve.series.finally(()=>{kn=!1,J.refresh()}).catch(console.error))),ve},refresh:function(r=0){J.clearPrevFocus(r),J.onFocusChange&&J.onFocusChange(oe(()=>Vt()))},setupTimers:function({focusDebounce:r=400,focusChangeTimeout:t=Ts}={}){J.onFocusChange=dr(Rs,r),Qn=dr(()=>{pt=[]},t)}},ks=()=>(J.setupTimers(),ee(le(Vt,J.onFocusChange,{defer:!0})),J);function Kt(r){return function(){var o,s;const t=this.children.length,e=this.wrap,n=this.selected;if(r==="right"||r==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=null;break}this.selected=0}while((o=this.children[this.selected])!=null&&o.skipFocus);else if(r==="left"||r==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=null;break}this.selected=t-1}while((s=this.children[this.selected])!=null&&s.skipFocus);if(this.selected===null)return this.selected=n,!1;const i=this.children[this.selected];if(cr(i instanceof We),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,i,this.selected,n),this.plinko&&n!==null){const a=this.children[n];cr(a instanceof We);const c=a.selected;i.selected=c}return zr(i),!0}}function Se(r){const t=Kt("left"),e=Kt("right"),n={display:"flex",justifyContent:"flexStart"};return(()=>{const i=it("node");return Gt(i,"onLeft",t),Gt(i,"onRight",e),It(i,K({get selected(){return r.selected||0},get onFocus(){return r.onFocus||(o=>{if(!o||o.selected===null)return;let s=o.children[o.selected];for(;s!=null&&s.skipFocus;)o.selected++,s=o.children[o.selected];s instanceof We&&s.setFocus()})},get style(){return r.style||n}},r),!0),on(i,()=>r.children),i})()}function me(r){const t=Kt("up"),e=Kt("down"),n={display:"flex",flexDirection:"column",justifyContent:"flexStart"};return(()=>{const i=it("node");return Gt(i,"onUp",t),Gt(i,"onDown",e),It(i,K({get onFocus(){return r.onFocus||(o=>{if(!o||o.selected===null)return;let s=o.children[o.selected];for(;s!=null&&s.skipFocus;)o.selected++,s=o.children[o.selected];s instanceof We&&s.setFocus()})},get selected(){return r.selected||0},get style(){return r.style||n}},r),!0),on(i,()=>r.children),i})()}const[Ps,ni]=N(""),[Fs,qt]=N(!1),[rl,pn]=N(!1),[Ns,Ls]=N("");N(null);N("en");const[Ds,ri]=N(!1),[il,Ms]=N("");function zs(){let r,t,e=0;const n=1,i={alpha:n,color:4294967295},o={duration:1e3,easing:"ease-in-out"};return ee(le(Ps,s=>{if(s.startsWith("#")){r.color=s,r.src="",r.alpha=1,e=1,t.alpha=0;return}else r.color=4294967295;if(e===0){r.src=s,e=1;return}if(e===1){t.src=s,e=2,t.alpha=[n],r.alpha=[0];return}e===2&&(r.src=s,e=1,r.alpha=n,t.alpha=0)},{defer:!0})),g(B,{width:1920,height:1080,zIndex:-5,get children(){return[g(B,{ref(s){const a=r;typeof a=="function"?a(s):r=s},animate:!0,animationSettings:o,style:i}),g(B,{ref(s){const a=t;typeof a=="function"?a(s):t=s},animate:!0,animationSettings:o,style:i,alpha:0}),g(B,{get effects(){return{radialGradient:{colors:[R("#3b3b3b"),R("#272727"),R("#181818")],stops:[0,.3,.8],height:800,width:1920,pivot:[.8,0]}}}})]}})}const Os={display:"flex",flexDirection:"row",justifyContent:"flexStart"},$s={display:"flex",flexDirection:"column",justifyContent:"flexStart"},Ws={screenW:1920,screenH:1080,marginX:50,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},Ys={primary:"#141414",focus:"#bdbdbd",container:"#4d4d4d",menuBg:"#2021242e",white:"#ffffff"},Hs={display1:{fontFamily:"Notosans",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Notosans",fontSize:56,lineHeight:72},headline1:{fontFamily:"Notosans",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Notosans",fontSize:32,lineHeight:44},headline3:{fontFamily:"Notosans",fontSize:28,lineHeight:40},body1:{fontFamily:"Notosans",fontSize:32,lineHeight:40},body2:{fontFamily:"Notosans",fontSize:28,lineHeight:34},button1:{fontFamily:"Notosans",fontSize:32,lineHeight:40,background:"#ffff"}},D={flexRow:Os,flexColumn:$s,layout:Ws,color:Ys,typography:Hs};R("#000000"),D.layout.screenH;const ii={width:50,height:50,x:0};R("#ffffff"),R("#ff0000");const Pt={Column:{...D.flexColumn,width:320,height:600,y:220,gap:60,zIndex:101,colors:R(D.color.primary),x:[20,{duration:250,easing:"ease-in-out"}]},menuLineStyle:{width:50,height:0,x:0,y:58,selected:{height:6,color:R("#ff0000")}},MenuWrapper:{zIndex:1e3,width:100,height:window.devicePixelRatio>1?1080:window.innerHeight,color:R(D.color.primary),active:{width:[380,{duration:250,easing:"ease-in-out",alpha:1}]},unactive:{width:[100,{duration:250,easing:"ease-in-out"}]}},MenuText:{zIndex:1,fontSize:30,x:86,y:10,height:50,alpha:0,color:R("#5b5b5b"),scale:1,lineHeight:1,focus:{scale:[1.1,{duration:250,easing:"ease-in-out"}],color:R("#ffffff")},active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}}},Xs=[{name:"Home",path:"/",icon:"assets/icon-home.png"},{name:"Search",path:"/search",icon:"assets/icon-search.png"},{name:"TV",path:"/tv",icon:"assets/icon-tivi.png"},{name:"Notifications",path:"/no-path",icon:"assets/icon-bell.png"}],Us="./";function js(r){let t,e;const n=St(),i=Hn();function o(){this.states.add("active"),this.children.forEach(c=>{c.states.add("active")}),this.children.selected.setFocus(),e.states.add("active"),e.states.remove("unactive")}function s(){this.states.add("unactive"),e.states.add("unactive"),e.states.remove("active"),this.children.forEach(c=>c.states.remove("active")),this.children.forEach(c=>c.states.add("unactive"))}function a(c){c.path==="/no-path"?ri(!0):n("".concat(c.path))}return g(B,{get style(){return Pt.MenuWrapper},ref(c){const l=e;typeof l=="function"?l(c):e=c},get children(){return[g(me,K(r,{onFocus:o,onBlur:s,get style(){return Pt.Column},animate:!0,plinko:!0,get children(){return(Xs||[]).map(c=>g(B,{get src(){return Us+"".concat(c.icon)},style:ii,forwardStates:!0,onEnter:()=>a(c),animate:!0,get id(){return c.path},get states(){return i.pathname==c.path?["selected"]:[""]},get children(){return[g(B,{get style(){return Pt.menuLineStyle}}),g(z,{get style(){return Pt.MenuText},get children(){return c.name}})]}}))}})),g(B,{ref(c){const l=t;typeof l=="function"?l(c):t=c}})]}})}const Xe={Column:{...D.flexColumn,width:320,height:600,y:80,gap:60,zIndex:1,colors:R(D.color.primary),x:[20,{duration:250,easing:"ease-in-out"}]},NoticeWrapper:{alpha:0,width:380,height:50,top:0,zIndex:3e3,color:R("#191919"),active:{alpha:1}},MenuWrapper:{zIndex:1e3,angle:$o(270),stops:[0,.4,.8],width:0,height:1080,color:R("#191919"),active:{width:[380,{duration:250,easing:"ease-in-out",alpha:1}]},unactive:{width:[0,{duration:250,easing:"ease-in-out"}]}},NotifyImage:{zIndex:10,x:0,y:0,width:100,height:90,alpha:0,scale:1,active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}},MenuText:{zIndex:1,fontSize:28,x:110,y:10,height:50,alpha:0,width:268,contain:"both",color:R("#5b5b5b"),scale:1,focus:{color:R("#ffffff")},active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}},NoticeDesc:{zIndex:1,fontSize:26,x:110,y:50,height:50,width:268,contain:"both",alpha:0,color:R("#5b5b5b"),scale:1,active:{alpha:[1,{duration:250,easing:"ease-in-out"}]},unactive:{alpha:[0,{duration:250,easing:"ease-in-out"}]}}},hr="./";function Gs(r){let t,e;const[n,i]=N(60);function o(){this.states.add("active"),this.children.forEach(l=>{l.states.add("active")}),this.children.selected.setFocus(),e.children.forEach(l=>l.states.add("active")),e.states.add("active"),e.states.remove("unactive")}function s(){this.states.add("unactive"),e.states.add("unactive"),e.states.remove("active"),e.children.forEach(l=>l.states.remove("active")),this.children.forEach(l=>l.states.remove("active")),this.children.forEach(l=>l.states.add("unactive")),this.children.forEach(l=>l.states.add("not-set"))}function a(){ri(!1),this.children.forEach(l=>l.states.add("not-set"))}function c(){(this.y||0)>D.layout.screenH/2&&(i(80+((this.y||0)-D.layout.screenH/2)*-1),this.parent&&this.parent.children.forEach(l=>{l.states.has("active")||l.states.add("active")}))}return g(B,{get style(){return Xe.MenuWrapper},ref(l){const u=e;typeof u=="function"?u(l):e=l},get children(){return[g(B,{get style(){return Xe.NoticeWrapper},get children(){return[g(B,{src:hr+"assets/icon-back.png",y:5,width:40,height:40}),g(B,{display:"flex",justifyContent:"center",width:360,get children(){return g(z,{fontSize:30,x:40,y:10,get children(){return["Notifications ",wt(()=>r.len)]}})}})]}}),g(me,K(r,{onFocus:o,onBlur:s,get style(){return Xe.Column},get y(){return n()},onLeft:a,animate:!0,plinko:!0,get key(){return r.len},get children(){return g(Ie,{get each(){return r==null?void 0:r.items},children:(l,u)=>g(B,{style:ii,forwardStates:!0,animate:!0,onFocus:c,get id(){return l.path},get children(){return[g(B,{get src(){return(l==null?void 0:l.image)||hr+"assets/default-thumbnail.jpg"},get style(){return Xe.NotifyImage}}),g(z,{get style(){return Xe.MenuText},get children(){return l.name}}),g(z,{get style(){return Xe.NoticeDesc},get children(){return l.desc}})]}})})}})),g(B,{ref(l){const u=t;typeof u=="function"?u(l):t=l}})]}})}function _t(r){const[t,e]=N([]),[n,i]=N(1),[o,s]=N(!1),[a]=Ln(n,r);return Cn(()=>{const c=a();c&&Bi(()=>{c.length===0&&s(!0),e(l=>[...l,...c])})}),{pages:t,page:n,setPage:i,setPages:e,end:o,setEnd:s}}const Vs=[{path:"123A",name:"Netflix Lookahead",desc:"Explore what is coming soon"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"}],Ks=[{path:"123A",name:"Netflix2",desc:"Explore what is coming soon"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Netflix2",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"},{path:"123B",name:"New Arrival",desc:"See you on Venus"}],qs="e9e9d8da18ae29fc430845952232787c",Zs="596e02522af6fe40f284e6de58fd0865f2cbaae3",Js="https://api.themoviedb.org/3";let oi,si;const ea="w185",ta={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Zs}};function Wt(r,t=ea){return si+t+r}function na(r,t={}){return oi?Pn(r,t):ai().then(()=>Pn(r,t))}function Pn(r,t={}){return fetch(Js+r+(r.includes("?")?"&":"?")+"api_key="+qs,{...ta,...t}).then(e=>e.json())}function ai(){return Pn("/configuration").then(r=>{var t;return oi=r,si=(t=r.images)==null?void 0:t.secure_base_url,r})}const an={get:na,loadConfig:ai};function ra(r,t){return r.length>t?r.substring(0,t-3)+"...":r}function ln(r,t=7){let e=[];for(let n=0,i=r.length;n<i;n+=t)e.push(r.slice(n,n+t));return e}function Un(r=[]){return r.map(t=>({src:Wt(t.poster_path||t.profile_path),tileSrc:Wt(t.backdrop_path||t.profile_path,"w300"),backdrop:Wt(t.backdrop_path,"w1280"),href:"/entity/".concat(t.media_type||"people","/").concat(t.id),shortTitle:ra(t.title||t.name,30),title:t.title||t.name,data:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}}))}function ia(r){function t(o){return new Promise(s=>{setTimeout(()=>{let a;o===1?a={page:1,results:Vs,total_pages:2,total_results:40}:a={page:2,results:Ks,total_pages:2,total_results:40},s(a)},0)})}function e(o){return s=>{const a=o||20;return t(s).then(l=>{let u=l.results;return ln(u,a)})}}const n=H(()=>_t(e()));function i(o){[].concat.apply([],n().pages()).length-o.selected<4&&n().setPage(s=>s+1)}return g(Gs,K(r,{get items(){return[].concat.apply([],n().pages())},onSelectedChanged:i}))}const jn={Page:{width:window.innerWidth,height:window.innerHeight},pageWrapper:{x:99,y:0,height:window.innerHeight,width:window.innerWidth},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:1920,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:D.layout.screenW,height:600,y:350,x:0,zIndex:2},FocusRing:{borderRadius:0,width:194,height:286,y:-5,x:-5,zIndex:-1},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:R("#000000")},RowTitle:{height:60,width:400,marginTop:20,fontSize:36,color:R("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:290,gap:10},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:10,width:D.layout.screenW-2*D.layout.marginX,x:D.layout.marginX+D.layout.gutterX,y:100,zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:R("#0000ff")},peopleBio:{...D.typography.body1,contain:"both",width:1500,height:400}},Fn={width:120,height:40,color:R("#000000"),borderRadius:8,border:{width:2,color:R("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:R("#333333")}}};R("#00A699"),Fn.width+8;R("#F6F6F9"),Fn.height,Fn.width;const fr={width:386,height:136,color:R("#715cab"),focus:{color:R("#5a39a2")},disabled:{color:R("#291d43")}};R("#000000");R("#FFFFFF"),fr.height,fr.width,R("#909090");const oa=r=>{const t=ks();t.enabled=!1;const e=St(),n=Hn();let i,o,s;const[a,c]=N(n),[l,u]=N(!1);return xt(async()=>{u(!0)}),Is({Menu:"m",Escape:"Escape"}),xt(()=>{qt(!0)}),ee(()=>{c(n.pathname)}),ee(le(Ds,d=>{if(d)return i.states.has("focus")&&s.setFocus();i.setFocus(),pn(!0)},{defer:!0})),g(xe,{get when(){return l()},get children(){return g(B,{ref(d){const C=window.APP;typeof C=="function"?C(d):window.APP=d},onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onLeft:()=>{if(i.states.has("focus")||Fs()==!1&&(a()=="/search"||a().includes("/movie/")))return!1;var d=Ne();d!=null&&d.states.has("not-set")||(o=d),i.setFocus(),pn(!0)},onRight:()=>(qt(!1),pn(!1),i.states.has("focus")&&o.setFocus()),plinko:!0,get children(){return[g(zs,{}),g(B,{get style(){return jn.pageWrapper},get children(){return r.children}}),g(js,{ref(d){const C=i;typeof C=="function"?C(d):i=d}}),g(ia,{ref(d){const C=s;typeof C=="function"?C(d):s=d}})]}})}})},sa=new URL("AppCoreExtensions-b1509c9a.js",import.meta.url).href,gr={WrapperTitleStyles:{gap:4},TitleStyles:{color:R(D.color.white),scale:1,fontSize:30,fontFace:"Notosans",lineHeight:1},IconStyles:{width:26,height:26}};function mn(r){return g(B,{skipFocus:!0,forwardStates:!0,get style(){return gr.WrapperTitleStyles},get children(){return g(z,{get style(){return{...gr.TitleStyles,...r.style}},get children(){return r.title}})}})}const Ue={HomeWrapper:{x:0,y:0,width:window.devicePixelRatio>1?1920:window.innerWidth},HomeMain:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",gap:10,width:window.devicePixelRatio>1?1920:window.innerWidth,height:1200,y:520,x:20,zIndex:2},HomeList:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",gap:10,width:window.devicePixelRatio>1?1920:window.innerWidth,height:1200,y:0,x:0,zIndex:2},HomeItem:{display:"flex",flexDirection:"column",justifyContent:"spaceBetween",height:355},Row:{y:0,x:0,zIndex:999,display:"flex",justifyContent:"spaceBetween",gap:10,height:290}};let pr=new Map;const Ft=new Map;function aa(r){const t="";return async e=>{const n="/movie/popular?language=en-US&page=".concat(e);if(pr.has(n))return pr.get(n);const i=r;return await an.get(n).then(s=>{let a=s.results.filter(u=>!u.adult),c=(Ft.has(t)?Ft.get(t):[]).concat(Un(a)),l=ln(c,i);return l[l.length-1].length<i?Ft.set(t,l.pop()):Ft.delete(t),l})}}const li={SliderMain:{y:0,x:0,zIndex:999,display:"flex",justifyContent:"spaceBetween",gap:10,height:290}},An={Thumbnail:{borderRadius:10,width:187,height:294,scale:1,zIndex:2,focus:{scale:1.02}},FocusRing:{borderRadius:10,y:-2,x:-2,zIndex:-1,color:R("#ffffff")}};function Gn(r){St();let t;ee(le(Ne,s=>{F(s),setTimeout(()=>{s.heroContent?(t.parent=s.parent,t.alpha=1,t.scale=1,t.x=s.x-2,t.y=s.y-2,t.width=s.width+4,t.height=s.height+4,t.createAnimation({scale:1.03}).start()):t.alpha=0},10)},{defer:!0}));function e(){var s;(s=this.children.selected)==null||s.setFocus()}function n(s){try{let a=window.CrossPlatformBridge.command(s);return JSON.parse(a)}catch(a){return null}}function i(s){n(JSON.stringify({param:{service_no:"A_CPB3",version:"1"},payload:{url:s}}))}function o(){i("https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4")}return g(B,K(r,{animate:!0,get style(){return An.Thumbnail},onEnter:o,get children(){return[g(B,K({onFocus:e},r,{animate:!0,get style(){return An.Thumbnail}})),g(B,{ref(s){const a=t;typeof a=="function"?a(s):t=s},get style(){return An.FocusRing}})]}}))}function xn(r){const t=vt(()=>0);return g(Se,{transition:{x:{delay:20,duration:300}},animate:!0,width:4400,get style(){return li.SliderMain},justifyContent:"flexStart",gap:40,get x(){return r.rowX()},get onSelectedChanged(){return r.moveRow},plinko:!0,get children(){return g(Ie,{get each(){return r.data},children:(e,n)=>g(Gn,K(e,{get autofocus(){return wt(()=>!!r.autofocus)()&&t(n())}}))})}})}const Vn=1100,la={...D.typography.display2,width:Vn,height:58,contain:"both"},ca=r=>g(z,K(r,{style:la,get children(){return r.children}})),ua={fontFamily:"Notosans",fontSize:32,lineHeight:40,height:160,background:"#ffff",width:1e3,clipping:!0,maxLines:4},da={fontSize:20,lineHeight:20},ha=r=>g(z,K(r,{style:ua,get children(){return r.children}}));function fa(r){return[g(xe,{get when(){return(r==null?void 0:r.rtCrit)&&(r==null?void 0:r.rtCrit)!=="0"},get children(){return[g(B,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),g(z,{style:Nn,get children(){return r.rtCrit+"%"}})]}}),g(xe,{get when(){return(r==null?void 0:r.rtFan)&&(r==null?void 0:r.rtFan)!=="0"},get children(){return[g(B,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),g(z,{style:Nn,get children(){return r.rtFan+"%"}})]}})]}const ga=r=>(()=>{const t=it("node");return Gr(Ss,t,()=>[8,15,13,15]),It(t,K(r,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),on(t,g(z,{style:da,get children(){return r.children?r.children:""}})),t})(),Nn=D.typography.body2,pa=r=>g(B,{get style(){return{...D.flexRow,gap:12,width:Vn,height:48}},get children(){return[g(z,{style:Nn,get children(){return r.metaText}}),g(Ie,{get each(){return r.badges},children:t=>g(ga,{y:-5,children:t})}),wt(()=>fa(r.reviews))]}}),Kn=r=>(console.log("badges",r.badges),g(B,K(r,{get style(){return{...D.flexColumn,width:Vn,height:160,gap:16}},get children(){return[g(ca,{get children(){return r.title}}),g(ha,{get children(){return r.description}}),g(pa,{get metaText(){return r.metaText},get badges(){return r.badges},get reviews(){return r.reviews}})]}})));function ma(){let r,t,e=0;const n=1,o={alpha:n,color:4294967295,transition:{alpha:{duration:1e3,easing:"ease-in-out"}}};return ee(le(Ns,s=>{if(s.startsWith("#")){r.color=s,r.src="",r.alpha=1,e=1,t.alpha=0;return}else r.color=4294967295;if(e===0){r.src=s,e=1;return}if(e===1){t.src=s,e=2,r.alpha=0,t.alpha=1;return}e===2&&(r.src=s,e=1,r.alpha=n,t.alpha=0)},{defer:!0})),g(B,{get width(){return window.devicePixelRatio>1?1920:window.innerWidth},get height(){return window.devicePixelRatio>1?1080:window.innerHeight},zIndex:-5,x:-21,get children(){return[g(B,{ref(s){const a=r;typeof a=="function"?a(s):r=s},style:o,animate:!0}),g(B,{ref(s){const a=t;typeof a=="function"?a(s):t=s},style:o,alpha:0,animate:!0}),g(B,{animate:!0,get effects(){return{radialGradient:{colors:[124,124,R("#000000")],stops:[.6,.1,1.2],height:500,width:(window.devicePixelRatio>1?1920:window.innerWidth)-300,pivot:[.8,0]}}}})]}})}const Oe={LoadingWrapper:{x:0,y:0,width:window.devicePixelRatio>1?1820:window.innerWidth-100,height:window.devicePixelRatio>1?1080:window.innerHeight,color:R("#000000"),display:"flex",justifyContent:"center",alignItems:"center",zIndex:999},LoadingMain:{display:"flex",flexDirection:"row",gap:30,height:30},LoadingItem:{x:0,y:0,width:15,height:15,color:R("#ffffff"),borderRadius:7.5,choose:{transition:{duration:.5,timingFunction:"ease-in-out"},color:R("#ff0000"),scale:1.3}}};function Aa(r){let t;const[e,n]=N(0),[i,o]=N(!0);return xt(()=>{setInterval(()=>{e()==0&&o(!0),e()==5&&o(!1),i()?(e()>0&&t.children[e()].states.remove("choose"),t.children[e()].states.add("choose"),n(s=>s+1)):(n(s=>s-1),t.children[e()].states.remove("choose"))},200)}),g(B,{forwardStates:!0,animate:!0,get style(){return Oe.LoadingWrapper},autofocus:!0,get children(){return g(B,{get style(){return Oe.LoadingMain},ref(s){const a=t;typeof a=="function"?a(s):t=s},skipFocus:!0,get children(){return[g(B,{get style(){return Oe.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return Oe.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return Oe.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return Oe.LoadingItem},skipFocus:!0,animate:!0}),g(B,{get style(){return Oe.LoadingItem},skipFocus:!0,animate:!0})]}})}})}const xa=()=>{const[r,t]=N({}),[e,n]=N(10),[i,o]=N(10),[s,a]=N(10),[c,l]=N(0),u=H(()=>_t(aa(1))),d=w=>{var m;(m=w.children.selected)==null||m.setFocus(),o(w.selected*-227+10),[].concat.apply([],u().pages()).length-w.selected<15&&u().setPage(x=>x+1)},C=w=>{n(w.selected*-227+10),[].concat.apply([],u().pages()).length-w.selected<15&&u().setPage(m=>m+1)},I=w=>{a(w.selected*-227+10),[].concat.apply([],u().pages()).length-w.selected<15&&u().setPage(m=>m+1)};ee(le(Ne,w=>{console.log(w),w.backdrop&&Ls("https://image.tmdb.org/t/p/original/".concat(w.data.backdrop_path)),w.heroContent&&t(w.heroContent)},{defer:!0}));function f(){var w;(w=this.children.selected)==null||w.setFocus(),l((this.y||0)*-1+24)}function y(){var w;(w=this.children.selected)==null||w.setFocus(),l((this.y||0)*-1+24)}function S(){var w;(w=this.children.selected)==null||w.setFocus(),l((this.y||0)*-1+24)}return g(B,{get style(){return Ue.HomeWrapper},get children(){return[g(xe,{get when(){return u().pages().length==0},get children(){return g(Aa,{})}}),g(ma,{}),g(Kn,K({y:360,x:20},r)),g(B,{get style(){return Ue.HomeMain},clipping:!0,autofocus:!0,get children(){return g(me,{get style(){return Ue.HomeList},clipping:!0,plinko:!0,get y(){return c()},animate:!0,get children(){return[g(Se,{get style(){return Ue.HomeItem},onFocus:f,autofocus:!0,get children(){return[g(mn,{title:"Popular",icon:"assets/popular.png"}),g(xn,{get data(){return[].concat.apply([],u().pages())},rowX:i,moveRow:d,autofocus:!0})]}}),g(Se,{get style(){return Ue.HomeItem},onFocus:y,get children(){return[g(mn,{title:"Trending",icon:"assets/trending.png"}),g(xn,{get data(){return[].concat.apply([],u().pages())},rowX:e,moveRow:C})]}}),g(Se,{get style(){return Ue.HomeItem},onFocus:S,get children(){return[g(mn,{title:"Recommend",icon:"assets/recommend.png"}),g(xn,{get data(){return[].concat.apply([],u().pages())},rowX:s,moveRow:I})]}})]}})}})]}})},mr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],ya={display:"flex",flexDirection:"column",gap:40,y:0,color:R("#000000"),height:D.layout.screenH,alpha:1},va={display:"flex",flexDirection:"row",justifyContent:"flexStart",gap:16,x:40,zIndex:999,height:D.layout.screenH},Ca={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:16,width:540,x:40,zIndex:999},Ar={display:"flex",flexDirection:"row",justifyContent:"spaceBetween",gap:8,height:70,width:500},wa={color:R("#000000"),alpha:.8,zIndex:998,x:0,y:0},Ia={display:"flex",borderRadius:6,border:{width:0,color:R("#ffffff")},justifyContent:"center",alignItems:"center",gap:6,width:70,height:70,color:R("#2e3743"),focus:{border:{width:4,color:R("#ffffff")},color:R("#000000")}},Sa={fontSize:40},_a={color:R("#red"),width:500,x:40,height:70,alpha:1,backgroundColor:R("#ffffff"),borderRadius:8,border:{width:4,color:R("#ffffff")},display:"flex",alignItems:"center",justifyContent:"flexStart"},ba={width:500,display:"flex",flexDirection:"column",alignItems:"flexStart",justifyContent:"flexStart",gap:20,x:0},xr={height:70,width:240,color:R("#2e3743"),display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:{width:0,color:R("#ffffff")},focus:{border:{width:4,color:R("#ffffff")},color:R("#000000")}},yr={width:70,height:50},Ea={height:10,x:0,y:0},Ba={color:R("#09121a"),y:-160,fontSize:30,x:40,width:D.layout.screenW-(580+116),height:D.layout.screenH,zIndex:999,alignItems:"center",justifyContent:"center"},Ta={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:D.layout.screenW-(2*D.layout.marginX+532+(D.layout.marginX+D.layout.gutterX)*2),x:48,y:48,zIndex:2},Ra={display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20},Qa={display:"flex",justifyContent:"center",alignItems:"center"};function ci(r){const[t,e]=Mi(r,["items"]);return g(Se,K(e,{get style(){return jn.Row},get children(){return g(Ie,{get each(){return t.items},children:n=>g(Gn,n)})}}))}let vr=new Map;const Nt=new Map;function ka(r,t){const e="";return async n=>{const i="/search/movie?include_adult=false&page=".concat(n,"&query==").concat(t);if(vr.has(i))return vr.get(i);const o=r;return await an.get(i).then(a=>{let c=a.results.filter(d=>!d.adult),l=(Nt.has(e)?Nt.get(e):[]).concat(Un(c)),u=ln(l,o);return u[u.length-1].length<o?Nt.set(e,u.pop()):Nt.delete(e),u})}}const Cr="./";function Pa(r){let t,e,n,i,o,s,a,c,l;const[u,d]=N(""),[C,I]=N(0);let f=H(()=>_t(ka(5,u())));ee(le(u,v=>{I(0),f().setPage(1)}));const y=vt(()=>0);function S(){this.states.add("focus")}function w(){this.states.remove("focus")}const m=()=>()=>{d(v=>v+" ")},x=()=>()=>{d(v=>v.slice(0,-1))};function p(v){return()=>{d(A=>A+v)}}const b=()=>{let v=[];for(let _=0;_<mr.length;_+=6){const P=mr.slice(_,_+6);v.push(P)}return g(Ie,{each:v,children:(_,P)=>g(Se,{style:Ar,autofocus:!1,plinko:!0,get children(){return g(Ie,{each:_,children:(Q,L)=>g(B,{style:Ia,get onEnter(){return p(Q)},animate:!0,onBlur:w,onFocus:S,forwardStates:!0,autofocus:!1,get children(){return g(z,{style:Sa,children:Q})}})})}})})};function E(){var A;(A=this.children.selected)==null||A.setFocus(),I((this.y||0)*-1+24);let v=f().pages().length;this.parent&&(v===0||this.parent.selected&&this.parent.selected>=v-2)&&f().setPage(_=>_+1)}function T(){}return g(B,{ref(v){const A=t;typeof A=="function"?A(v):t=v},animate:!0,style:wa,autofocus:!0,get children(){return g(B,{ref(v){const A=i;typeof A=="function"?A(v):i=v},animate:!0,style:ya,autofocus:!0,plinko:!0,get children(){return[g(B,{ref(v){const A=e;typeof A=="function"?A(v):e=v},style:Ea,skipFocus:!0}),g(B,{ref(v){const A=e;typeof A=="function"?A(v):e=v},style:_a,animate:!0,skipFocus:!0,get children(){return g(z,{get style(){return{color:R("#ffffff"),fontSize:30,marginLeft:20}},get children(){return u()}})}}),g(me,{style:va,ref(v){const A=o;typeof A=="function"?A(v):o=v},autofocus:!0,onDown:()=>{if(a.states.has("focus"))return!1},plinko:!0,get children(){return[g(me,{style:Ca,ref(v){const A=a;typeof A=="function"?A(v):a=v},onRight:()=>{s.setFocus(),f().pages().length>0&&c.setFocus()},onLeft:()=>{qt(!0)},get children(){return[g(Se,{style:Ar,autofocus:!1,get children(){return[g(B,{style:xr,ref(v){const A=l;typeof A=="function"?A(v):l=v},get onEnter(){return m()},animate:!0,autofocus:!1,get children(){return g(B,{style:yr,src:Cr+"assets/icon-space.png",forwardStates:!0,animate:!0})}}),g(B,{style:xr,get onEnter(){return x()},animate:!0,autofocus:!1,get children(){return g(B,{style:yr,src:Cr+"assets/icon-back-space.png",forwardStates:!0,animate:!0})}})]}}),g(me,{plinko:!0,style:Ra,get children(){return b()}}),g(me,{ref(v){const A=n;typeof A=="function"?A(v):n=v},animate:!0,style:ba,forwardStates:!0,get children(){return g(z,{get style(){return{color:R("#504d4d"),fontSize:30,focus:{color:R("#ffffff")}}}})}})]}}),g(B,{style:Ba,ref(v){const A=s;typeof A=="function"?A(v):s=v},onLeft:()=>{a.setFocus()},get children(){return[g(xe,{get when(){return f().pages().length==0},get children(){return g(B,{style:Qa,get children(){return g(z,{style:{fontSize:40,display:"flex",justifyContent:"center",textAlign:"center"},children:"No Data"})}})}}),g(xe,{get when(){return f().pages().length>0},get children(){return g(me,{ref(v){const A=c;typeof A=="function"?A(v):c=v},animate:!0,get y(){return C()},style:Ta,plinko:!0,get children(){return g(Ie,{get each(){return f().pages()},children:(v,A)=>g(ci,{get autofocus(){return wt(()=>!!y(A()))()&&s.states.has("focus")},items:v,onFocus:E,onEnter:T})})}})}})]}})]}})]}})}})}const je={TiviWrapper:{x:0,y:0,width:1920,height:1080},Content:{y:580,zIndex:2},Container:{width:1720,x:50,display:"flex",flexDirection:"column",gap:40,y:0,zIndex:2},Row:{display:"flex",height:290,width:1720,justifyContent:"spaceBetween",clipping:!0},Item:{borderRadius:10,width:187,height:294,scale:1,zIndex:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:R("#0e0e0e"),focus:{scale:1.02,color:R("#3d3d3d")}},IdChannel:{color:R("#ffffff"),fontSize:32},NameChannel:{fontFamily:"Roboto",fontSize:25,lineHeight:25,contain:"both",width:150,height:200,textAlign:"center"}},qn=1100,Fa={...D.typography.display2,width:qn,height:58,contain:"both"},Na=r=>g(z,K(r,{style:Fa,get children(){return r.children}})),La={...D.typography.body1,width:qn,height:72,contain:"both"},Da=r=>g(z,K(r,{style:La,get children(){return r.children}})),Ma=r=>g(B,K(r,{get style(){return{...D.flexColumn,width:qn,height:160,gap:16,x:50,y:50}},get children(){return[g(Na,{get children(){var t;return(t=r.data)==null?void 0:t.channel_name}}),g(Da,{get children(){var t;return(t=r.data)==null?void 0:t.description}})]}})),za=()=>{const[r,t]=N(),[e,n]=N([]);N(0);const[i,o]=N(10);let s;function a(f){try{let y=window.CrossPlatformBridge.command(f);return JSON.parse(y)}catch(y){return null}}function c(){let y=a(JSON.stringify({param:{service_no:"A_CPB1",version:"1"},payload:{type:"all"}}));if(y&&y.data)return y.data}function l(f){return a(JSON.stringify({param:{service_no:"A_CPB4",version:"1"},payload:{channel_id:f}}))}xt(async()=>{try{const f=await c();fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(f)+"&field_2=&field_3="),n(f)}catch(f){fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(f)+"&field_2=&field_3=")}});const u=f=>{console.log("focusItem",f)},d=async f=>{try{const y=await l(f);fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(y)+"&field_2=&field_3=")}catch(y){fetch("https://script.google.com/macros/s/AKfycbxdiL0NuQyOdvN2dcTmDhltyG0hXy8M8xq7SUsXfTY6BTTcOlBRFT62M812nZwz75kWnQ/exec?field_1="+JSON.stringify(y)+"&field_2=&field_3="),console.log("error",y)}};ee(le(Ne,f=>{console.log(f.channel_name),t({channel_name:f.channel_name,description:f.channel_description||""}),console.log(r()),f.channel_name&&Ms(f.channel_name)},{defer:!0}));const C=f=>{o(f.selected*-227+10)};function I(f){if(f.length>6){let y="";for(let S=0;S<f.length;S++)y+=f[S],(S+1)%6===0&&S!==f.length-1&&(y+=" ");return y}else return f}return ee(le(Ne,f=>{F(f),setTimeout(()=>{f.heroContent?(s.parent=f.parent,s.alpha=1,s.scale=1,s.x=f.x-2,s.y=f.y-2,s.width=f.width+4,s.height=f.height+4,s.createAnimation({scale:1.03}).start()):s.alpha=0},10)},{defer:!0})),g(B,{get style(){return je.TiviWrapper},clipping:!0,autofocus:!0,get children(){return[g(Ma,{get data(){return r()}}),g(B,{get style(){return je.Content},get children(){return g(me,{autofocus:!0,animate:!0,get style(){return je.Container},get children(){return g(Se,{transition:{x:{delay:20,duration:300}},animate:!0,width:4400,get style(){return li.SliderMain},justifyContent:"flexStart",gap:40,get x(){return i()},onSelectedChanged:C,plinko:!0,get children(){return g(Ie,{get each(){return e()},children:(f,y)=>g(B,{get style(){return je.Item},onFocus:u,get channel_id(){return f.id},get channel_name(){return f.channel_name},get channel_description(){return f.description},animate:!0,onEnter:()=>d(f.id),get children(){return[g(z,{get style(){return je.NameChannel},wordBreak:!0,get children(){return I(f.channel_name)}}),g(B,{ref(S){const w=s;typeof w=="function"?w(S):s=S},get style(){return je.FocusRing}})]}})})}})}})}})]}})},Oa=()=>g(B,{style:{width:1920,height:1080,color:868483072},get children(){return g(z,{children:"Not Found"})}});let yn=new Map;const Lt=new Map;function ui(r,t){return e=>{const n="/trending/".concat(r,"/week?page=").concat(e);if(yn.has(n))return yn.get(n);const i=t||7;let o=an.get(n).then(s=>{let a=s.results.filter(u=>!u.adult),c=(Lt.has(r)?Lt.get(r):[]).concat(Un(a)),l=ln(c,i);return l[l.length-1].length<i?Lt.set(r,l.pop()):Lt.delete(r),l});return yn.set(n,o),o}}function $a(r){const t=Math.floor(r/60),e=r%60;return t+"h "+(e<10?"0":"")+e+"m"}function wr(r){return r.split("-")[0]}function di({type:r,id:t}){let e=r==="movie"?{rtCrit:86,rtFan:92}:{};return an.get("/".concat(r,"/").concat(t,"?adult=true")).then(n=>(console.log(n),{backgroundImage:Wt(n.backdrop_path,"original"),heroContent:{title:n.title||n.name,description:n.overview,badges:["HD"],metaText:r==="movie"?$a(n.runtime)+" - "+n.release_date:"".concat(wr(n.first_air_date)," - ").concat(wr(n.last_air_date)),reviews:e},...n}))}const Ir={Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:15,width:D.layout.screenW-2*D.layout.marginX,x:D.layout.marginX+D.layout.gutterX,y:100,zIndex:2},itemsContainer:{width:D.layout.screenW,height:600,y:350,x:0,zIndex:2}};function Wa(r){const t=vt(()=>0);return g(B,{clipping:!0,get style(){return Ir.itemsContainer},get children(){return g(me,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return r.y},get style(){return Ir.Column},get children(){return g(Ie,{get each(){return(r==null?void 0:r.data)||[]},children:(e,n)=>g(ci,{get autofocus(){return wt(()=>!!r.autofocus)()?t(n()):!1},justifyContent:"flexStart",items:e,get onFocus(){return r.onFocus},get onEnter(){return r.onEnter}})})}})}})}const Ya=()=>{const r=Xn(),[t,e]=N(0),[n,i]=N();Ln(n,di);const[o,s]=N({}),a=St();vt(()=>0);const c=H(()=>_t(ui(r.filter||"all",8)));ee(le(Ne,d=>{d.backdrop&&ni(d.backdrop),d.heroContent&&s(d.heroContent)},{defer:!0}));function l(){var C;(C=this.children.selected)==null||C.setFocus(),e((this.y||0)*-1+24);let d=c().pages().length;this.parent&&(d===0||this.parent.selected&&this.parent.selected>=d-2)&&c().setPage(I=>I+1)}function u(){let d=this.children.selected;F(d&&d.href),a(d.href)}return g(B,{get children(){return g(xe,{get when(){return c().pages().length},get children(){return[g(Kn,K({y:150,x:90},o)),g(Wa,{type:"sliderList",onEnter:u,onFocus:l,get data(){return c().pages()},get y(){return t()},autofocus:!0})]}})}})},Ha=()=>{const r=Xn(),[t,e]=N({}),n=St();let i;const o=vt(()=>0),s=H(()=>_t(ui(r.filter||"all",20)));ee(le(Ne,d=>{d.backdrop&&ni(d.backdrop),d.heroContent&&e(d.heroContent)},{defer:!0}));function a(){let d=this.children.selected;F(d&&d.href),n(d.href)}const[c,l]=N(90);function u(d){l(d.selected*-227+90),[].concat.apply([],s().pages()).length-d.selected<9&&s().setPage(C=>C+1)}return g(xe,{get when(){return s().pages().length},ref(d){const C=i;typeof C=="function"?C(d):i=d},get children(){return g(B,{get children(){return[g(Kn,K({y:200,x:90},t)),g(Se,{onSelectedChanged:u,onEnter:a,transition:{x:{delay:20,duration:300}},animate:!0,get x(){return c()},y:450,width:4400,get style(){return jn.Row},justifyContent:"flexStart",gap:40,get children(){return g(Ie,{get each(){return[].concat.apply([],s().pages())},children:(d,C)=>g(Gn,K(d,{get autofocus(){return o(C())}}))})}})]}})}})},Sr={Wrapper:{x:-4,y:0,alpha:1,width:window.innerWidth-100,height:window.innerHeight,color:R("#000000")},ImageBackground:{x:0,y:0,width:window.innerWidth-100,height:window.innerHeight,alpha:1},ImageBackgroundGradient:{x:0,y:0,zIndex:10,alpha:1},DetailMain:{}},V={Wrapper:{x:0,y:window.innerHeight/3,width:window.innerWidth,height:window.innerHeight,display:"flex",alignItems:"flexEnd",justifyContent:"center",flexDirection:"column",gap:20},Main:{x:0,y:0,alpha:1,width:window.innerWidth-100,display:"flex",flexDirection:"column",gap:20},Title:{fontSize:35,boxsizing:"border-box",height:35},QuantityItem:{idth:window.innerWidth/2,fontSize:20},OverView:{height:100,display:"flex",alignItems:"flexStart"},OverViewText:{width:window.innerWidth/2,fontSize:20,contain:"both"},Quantity:{height:20,display:"flex"},Rate:{height:20,display:"flex",gap:5,alignItems:"center"},RateStar:{height:16,width:16},Section:{display:"flex",flexDirection:"row",height:30,gap:10,alignItems:"center"},Control:{height:50,display:"flex",flexDirection:"row",gap:10},ControlItem:{fontSize:20,width:150,height:40,color:R("#121212"),alpha:.9,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,border:{width:2,color:R("#ffffff")},focus:{scale:[1.1,{duration:200}]}},ControlItemText:{color:R("#ffffff"),fontSize:20},DetailMain:{y:200}},$e={Wrapper:{height:400,width:window.innerWidth-100},Title:{color:R("#ffffff"),fontSize:20,width:window.innerWidth/2,alpha:.6},Tabs:{display:"flex",flexDirection:"row",gap:20,height:30}};function Xa(r){return xt(()=>{console.log(window)}),g(B,{get style(){return $e.Wrapper},get children(){return g(B,{get style(){return $e.Tabs},get children(){return[g(z,{get style(){return $e.Title},children:"More like this"}),g(z,{get style(){return $e.Title},children:"Available now"}),g(z,{get style(){return $e.Title},children:"On this week"}),g(z,{get style(){return $e.Title},children:"Parents' guide"}),g(z,{get style(){return $e.Title},children:"Rating"})]}})}})}const ct="./";function Ua(r){function t(){console.log(r.data)}const e=n=>{const i=Math.floor(n/60),o=n%60;return"".concat(i,"h ").concat(o,"m")};return g(B,{get style(){return V.Wrapper},onFocus:t,autofocus:!0,plinko:!0,onLeft:()=>{qt(!0)},get children(){return[g(me,{get style(){return V.Main},skipFocus:!0,plinko:!0,get children(){return[g(z,{get style(){return V.Title},skipFocus:!0,forwardStates:!0,get children(){return r.data.title}}),g(B,{get style(){return V.Section},get children(){return[g(B,{get style(){return V.Rate},skipFocus:!0,forwardStates:!0,get children(){return[g(B,{src:ct+"assets/star-active.png",get style(){return V.RateStar}}),g(B,{src:ct+"assets/star-active.png",get style(){return V.RateStar}}),g(B,{src:ct+"assets/star-active.png",get style(){return V.RateStar}}),g(B,{src:ct+"assets/star.png",get style(){return V.RateStar}}),g(B,{src:ct+"assets/star.png",get style(){return V.RateStar}})]}}),g(B,{get style(){return V.Quantity},skipFocus:!0,forwardStates:!0,get children(){return r.data.heroContent.badges.map((n,i)=>g(z,{key:i,get style(){return V.QuantityItem},children:n}))}}),g(z,{get style(){return V.QuantityItem},skipFocus:!0,forwardStates:!0,get children(){return e(r.data.runtime)}})]}}),g(Se,{get style(){return V.Control},skipFocus:!0,plinko:!0,get children(){return[g(B,{get style(){return V.ControlItem},skipFocus:!0,get children(){return g(z,{get style(){return V.ControlItemText},children:"Play"})}}),g(B,{get style(){return V.ControlItem},skipFocus:!0,get children(){return g(z,{get style(){return V.ControlItemText},children:"Add"})}})]}}),g(B,{get style(){return V.OverView},get children(){return g(z,{get style(){return V.OverViewText},skipFocus:!0,forwardStates:!0,get children(){return r.data.overview}})}})]}}),g(Xa,{})]}})}function ja(){const r=Xn(),t=Hn(),[e]=Ln(()=>({...r}),di);return ee(le(e,n=>{console.log(t),console.log(n)},{defer:!0})),g(xe,{get when(){var n;return(n=e())==null?void 0:n.backdrop_path},get children(){return[g(B,{get style(){return Sr.ImageBackground},zIndex:-5,get src(){var n;return"https://image.tmdb.org/t/p/original/".concat((n=e())==null?void 0:n.backdrop_path)},skipFocus:!0}),g(B,{alpha:.97,get style(){return Sr.DetailMain},animate:!0,get effects(){return{radialGradient:{colors:[124,124,R("#131313")],stops:[1.5,.1,1.3],height:700,width:window.innerWidth-500,pivot:[.9,-.1]}}},skipFocus:!0}),g(Ua,{get data(){return e()},autofocus:!0})]}})}const Ga={Wrapper:{height:1080,y:0,fontFamily:"Notosans"},Main:{display:"flex",flexDirection:"column",height:1080,gap:20,x:20},SettingRow:{},Title:{fontSize:20,color:R("#ffffff"),y:0},Select:{display:"flex",flexDirection:"row",alignItems:"center",gap:5,width:1e3},SelectTitle:{width:100},SelectTitleContent:{fontSize:20,lineHeight:50,color:R("#ffffff"),y:0},Option:{display:"flex",flexDirection:"row",width:100,gap:10},OptionIcon:{width:18,height:18,borderRadius:9,color:R("#ffffff"),display:"flex",alignItems:"center",justifyContent:"center",scale:1,focus:{scale:1.2}},OptionCenterIcon:{width:12,height:12,borderRadius:6,selected:{color:R("#f14d4d")}},OptionTitle:{contain:"both",fontSize:20,width:60},btnSave:{height:35,width:100,color:R("#333333"),borderRadius:5,display:"flex",alignItems:"center",justifyContent:"center",border:{color:R("#ffffff"),width:0},focus:{scale:1.05,border:{width:2,color:R("#ffffff")}}},btnSaveText:{fontSize:20}};function Va(){return N("JP"),g(B,{get style(){return Ga.Wrapper}})}Pe.debug=!1;Pe.fontSettings.fontFamily="Notosans";Pe.fontSettings.color=4294967295;var Ka=navigator.userAgent.toLowerCase(),vn=Ka.indexOf("mobile")>-1;Oo(()=>g(Lo,{get options(){return{coreExtensionModule:sa,threadXCoreWorkerUrl:void 0,appWidth:vn&&window.devicePixelRatio>1?1920:window.innerWidth,appHeight:vn&&window.devicePixelRatio>1?1080:window.innerHeight,deviceLogicalPixelRatio:vn&&window.devicePixelRatio>1?.5:1}},get children(){return g(ms,{root:oa,get children(){return[g(Re,{path:"/",component:xa}),g(Re,{path:"/search",component:Pa}),g(Re,{path:"/videos",component:Ya}),g(Re,{path:"/tv",component:za}),g(Re,{path:"/list",component:Ha}),g(Re,{path:"/:type/:id",component:ja}),g(Re,{path:"/setting",component:Va}),g(Re,{path:"/*all",component:Oa})]}})}}));export{Za as __vite_legacy_guard};
//# sourceMappingURL=index-ac7151a2.js.map
